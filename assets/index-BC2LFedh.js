(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function TE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vm={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function CA(){if(D0)return ql;D0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return ql.Fragment=t,ql.jsx=n,ql.jsxs=n,ql}var N0;function DA(){return N0||(N0=1,vm.exports=CA()),vm.exports}var w=DA(),Em={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function NA(){if(V0)return wt;V0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Q={};function rt(M,$,ot){this.props=M,this.context=$,this.refs=Q,this.updater=ot||H}rt.prototype.isReactComponent={},rt.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},rt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function W(){}W.prototype=rt.prototype;function tt(M,$,ot){this.props=M,this.context=$,this.refs=Q,this.updater=ot||H}var it=tt.prototype=new W;it.constructor=tt,q(it,rt.prototype),it.isPureReactComponent=!0;var gt=Array.isArray;function ft(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function D(M,$,ot){var ht=ot.ref;return{$$typeof:s,type:M,key:$,ref:ht!==void 0?ht:null,props:ot}}function x(M,$){return D(M.type,$,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function k(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ot){return $[ot]})}var N=/\/+/g;function le(M,$){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):$.toString(36)}function Te(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ft,ft):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,$,ot,ht,At){var Dt=typeof M;(Dt==="undefined"||Dt==="boolean")&&(M=null);var Ut=!1;if(M===null)Ut=!0;else switch(Dt){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(M.$$typeof){case s:case t:Ut=!0;break;case E:return Ut=M._init,Y(Ut(M._payload),$,ot,ht,At)}}if(Ut)return At=At(M),Ut=ht===""?"."+le(M,0):ht,gt(At)?(ot="",Ut!=null&&(ot=Ut.replace(N,"$&/")+"/"),Y(At,$,ot,"",function(hs){return hs})):At!=null&&(R(At)&&(At=x(At,ot+(At.key==null||M&&M.key===At.key?"":(""+At.key).replace(N,"$&/")+"/")+Ut)),$.push(At)),1;Ut=0;var Be=ht===""?".":ht+":";if(gt(M))for(var he=0;he<M.length;he++)ht=M[he],Dt=Be+le(ht,he),Ut+=Y(ht,$,ot,Dt,At);else if(he=O(M),typeof he=="function")for(M=he.call(M),he=0;!(ht=M.next()).done;)ht=ht.value,Dt=Be+le(ht,he++),Ut+=Y(ht,$,ot,Dt,At);else if(Dt==="object"){if(typeof M.then=="function")return Y(Te(M),$,ot,ht,At);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function lt(M,$,ot){if(M==null)return M;var ht=[],At=0;return Y(M,ht,"","",function(Dt){return $.call(ot,Dt,At++)}),ht}function _t(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(ot){(M._status===0||M._status===-1)&&(M._status=1,M._result=ot)},function(ot){(M._status===0||M._status===-1)&&(M._status=2,M._result=ot)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var Vt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},vt={map:lt,forEach:function(M,$,ot){lt(M,function(){$.apply(this,arguments)},ot)},count:function(M){var $=0;return lt(M,function(){$++}),$},toArray:function(M){return lt(M,function($){return $})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return wt.Activity=b,wt.Children=vt,wt.Component=rt,wt.Fragment=n,wt.Profiler=o,wt.PureComponent=tt,wt.StrictMode=r,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,wt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},wt.cache=function(M){return function(){return M.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(M,$,ot){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ht=q({},M.props),At=M.key;if($!=null)for(Dt in $.key!==void 0&&(At=""+$.key),$)!I.call($,Dt)||Dt==="key"||Dt==="__self"||Dt==="__source"||Dt==="ref"&&$.ref===void 0||(ht[Dt]=$[Dt]);var Dt=arguments.length-2;if(Dt===1)ht.children=ot;else if(1<Dt){for(var Ut=Array(Dt),Be=0;Be<Dt;Be++)Ut[Be]=arguments[Be+2];ht.children=Ut}return D(M.type,At,ht)},wt.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},wt.createElement=function(M,$,ot){var ht,At={},Dt=null;if($!=null)for(ht in $.key!==void 0&&(Dt=""+$.key),$)I.call($,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(At[ht]=$[ht]);var Ut=arguments.length-2;if(Ut===1)At.children=ot;else if(1<Ut){for(var Be=Array(Ut),he=0;he<Ut;he++)Be[he]=arguments[he+2];At.children=Be}if(M&&M.defaultProps)for(ht in Ut=M.defaultProps,Ut)At[ht]===void 0&&(At[ht]=Ut[ht]);return D(M,Dt,At)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(M){return{$$typeof:m,render:M}},wt.isValidElement=R,wt.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:_t}},wt.memo=function(M,$){return{$$typeof:y,type:M,compare:$===void 0?null:$}},wt.startTransition=function(M){var $=C.T,ot={};C.T=ot;try{var ht=M(),At=C.S;At!==null&&At(ot,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(ft,Vt)}catch(Dt){Vt(Dt)}finally{$!==null&&ot.types!==null&&($.types=ot.types),C.T=$}},wt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},wt.use=function(M){return C.H.use(M)},wt.useActionState=function(M,$,ot){return C.H.useActionState(M,$,ot)},wt.useCallback=function(M,$){return C.H.useCallback(M,$)},wt.useContext=function(M){return C.H.useContext(M)},wt.useDebugValue=function(){},wt.useDeferredValue=function(M,$){return C.H.useDeferredValue(M,$)},wt.useEffect=function(M,$){return C.H.useEffect(M,$)},wt.useEffectEvent=function(M){return C.H.useEffectEvent(M)},wt.useId=function(){return C.H.useId()},wt.useImperativeHandle=function(M,$,ot){return C.H.useImperativeHandle(M,$,ot)},wt.useInsertionEffect=function(M,$){return C.H.useInsertionEffect(M,$)},wt.useLayoutEffect=function(M,$){return C.H.useLayoutEffect(M,$)},wt.useMemo=function(M,$){return C.H.useMemo(M,$)},wt.useOptimistic=function(M,$){return C.H.useOptimistic(M,$)},wt.useReducer=function(M,$,ot){return C.H.useReducer(M,$,ot)},wt.useRef=function(M){return C.H.useRef(M)},wt.useState=function(M){return C.H.useState(M)},wt.useSyncExternalStore=function(M,$,ot){return C.H.useSyncExternalStore(M,$,ot)},wt.useTransition=function(){return C.H.useTransition()},wt.version="19.2.3",wt}var M0;function pg(){return M0||(M0=1,Em.exports=NA()),Em.exports}var ct=pg();const yg=TE(ct);var Tm={exports:{}},Fl={},bm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function VA(){return O0||(O0=1,(function(s){function t(Y,lt){var _t=Y.length;Y.push(lt);t:for(;0<_t;){var Vt=_t-1>>>1,vt=Y[Vt];if(0<o(vt,lt))Y[Vt]=lt,Y[_t]=vt,_t=Vt;else break t}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var lt=Y[0],_t=Y.pop();if(_t!==lt){Y[0]=_t;t:for(var Vt=0,vt=Y.length,M=vt>>>1;Vt<M;){var $=2*(Vt+1)-1,ot=Y[$],ht=$+1,At=Y[ht];if(0>o(ot,_t))ht<vt&&0>o(At,ot)?(Y[Vt]=At,Y[ht]=_t,Vt=ht):(Y[Vt]=ot,Y[$]=_t,Vt=$);else if(ht<vt&&0>o(At,_t))Y[Vt]=At,Y[ht]=_t,Vt=ht;else break t}}return lt}function o(Y,lt){var _t=Y.sortIndex-lt.sortIndex;return _t!==0?_t:Y.id-lt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],y=[],E=1,b=null,S=3,O=!1,H=!1,q=!1,Q=!1,rt=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,tt=typeof setImmediate<"u"?setImmediate:null;function it(Y){for(var lt=n(y);lt!==null;){if(lt.callback===null)r(y);else if(lt.startTime<=Y)r(y),lt.sortIndex=lt.expirationTime,t(g,lt);else break;lt=n(y)}}function gt(Y){if(q=!1,it(Y),!H)if(n(g)!==null)H=!0,ft||(ft=!0,k());else{var lt=n(y);lt!==null&&Te(gt,lt.startTime-Y)}}var ft=!1,C=-1,I=5,D=-1;function x(){return Q?!0:!(s.unstable_now()-D<I)}function R(){if(Q=!1,ft){var Y=s.unstable_now();D=Y;var lt=!0;try{t:{H=!1,q&&(q=!1,W(C),C=-1),O=!0;var _t=S;try{e:{for(it(Y),b=n(g);b!==null&&!(b.expirationTime>Y&&x());){var Vt=b.callback;if(typeof Vt=="function"){b.callback=null,S=b.priorityLevel;var vt=Vt(b.expirationTime<=Y);if(Y=s.unstable_now(),typeof vt=="function"){b.callback=vt,it(Y),lt=!0;break e}b===n(g)&&r(g),it(Y)}else r(g);b=n(g)}if(b!==null)lt=!0;else{var M=n(y);M!==null&&Te(gt,M.startTime-Y),lt=!1}}break t}finally{b=null,S=_t,O=!1}lt=void 0}}finally{lt?k():ft=!1}}}var k;if(typeof tt=="function")k=function(){tt(R)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,le=N.port2;N.port1.onmessage=R,k=function(){le.postMessage(null)}}else k=function(){rt(R,0)};function Te(Y,lt){C=rt(function(){Y(s.unstable_now())},lt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var lt=3;break;default:lt=S}var _t=S;S=lt;try{return Y()}finally{S=_t}},s.unstable_requestPaint=function(){Q=!0},s.unstable_runWithPriority=function(Y,lt){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _t=S;S=Y;try{return lt()}finally{S=_t}},s.unstable_scheduleCallback=function(Y,lt,_t){var Vt=s.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Vt+_t:Vt):_t=Vt,Y){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=_t+vt,Y={id:E++,callback:lt,priorityLevel:Y,startTime:_t,expirationTime:vt,sortIndex:-1},_t>Vt?(Y.sortIndex=_t,t(y,Y),n(g)===null&&Y===n(y)&&(q?(W(C),C=-1):q=!0,Te(gt,_t-Vt))):(Y.sortIndex=vt,t(g,Y),H||O||(H=!0,ft||(ft=!0,k()))),Y},s.unstable_shouldYield=x,s.unstable_wrapCallback=function(Y){var lt=S;return function(){var _t=S;S=lt;try{return Y.apply(this,arguments)}finally{S=_t}}}})(Am)),Am}var z0;function MA(){return z0||(z0=1,bm.exports=VA()),bm.exports}var Sm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function OA(){if(k0)return sn;k0=1;var s=pg();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:y,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(g,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,E)},sn.flushSync=function(g){var y=h.T,E=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=y,r.p=E,r.d.f()}},sn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},sn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},sn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var E=y.as,b=m(E,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:O}):E==="script"&&r.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},sn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,b=m(E,y.crossOrigin);r.d.L(g,E,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(g,y){if(typeof g=="string")if(y){var E=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},sn.requestFormReset=function(g){r.d.r(g)},sn.unstable_batchedUpdates=function(g,y){return g(y)},sn.useFormState=function(g,y,E){return h.H.useFormState(g,y,E)},sn.useFormStatus=function(){return h.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var P0;function zA(){if(P0)return Sm.exports;P0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Sm.exports=OA(),Sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function kA(){if(B0)return Fl;B0=1;var s=MA(),t=pg(),n=zA();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function y(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),e;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),rt=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),tt=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}var N=Symbol.for("react.client.reference");function le(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case rt:return"Profiler";case Q:return"StrictMode";case gt:return"Suspense";case ft:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case tt:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case it:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C:return i=e.displayName||null,i!==null?i:le(e.type)||"Memo";case I:i=e._payload,e=e._init;try{return le(e(i))}catch{}}return null}var Te=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},Vt=[],vt=-1;function M(e){return{current:e}}function $(e){0>vt||(e.current=Vt[vt],Vt[vt]=null,vt--)}function ot(e,i){vt++,Vt[vt]=e.current,e.current=i}var ht=M(null),At=M(null),Dt=M(null),Ut=M(null);function Be(e,i){switch(ot(Dt,i),ot(At,e),ot(ht,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?W_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=W_(i),e=t0(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(ht),ot(ht,e)}function he(){$(ht),$(At),$(Dt)}function hs(e){e.memoizedState!==null&&ot(Ut,e);var i=ht.current,a=t0(i,e.type);i!==a&&(ot(At,e),ot(ht,a))}function fa(e){At.current===e&&($(ht),$(At)),Ut.current===e&&($(Ut),Bl._currentValue=_t)}var da,ma;function gi(e){if(da===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);da=i&&i[1]||"",ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+da+e+ma}var Bo=!1;function fs(e,i){if(!e||Bo)return"";Bo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(K){var F=K}Reflect.construct(e,[],et)}else{try{et.call()}catch(K){F=K}e.call(et.prototype)}}else{try{throw Error()}catch(K){F=K}(et=e())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(K){if(K&&F&&typeof K.stack=="string")return[K.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var V=_.split(`
`),U=T.split(`
`);for(f=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;if(l===V.length||f===U.length)for(l=V.length-1,f=U.length-1;1<=l&&0<=f&&V[l]!==U[f];)f--;for(;1<=l&&0<=f;l--,f--)if(V[l]!==U[f]){if(l!==1||f!==1)do if(l--,f--,0>f||V[l]!==U[f]){var X=`
`+V[l].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=l&&0<=f);break}}}finally{Bo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?gi(a):""}function jo(e,i){switch(e.tag){case 26:case 27:case 5:return gi(e.type);case 16:return gi("Lazy");case 13:return e.child!==i&&i!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return fs(e.type,!1);case 11:return fs(e.type.render,!1);case 1:return fs(e.type,!0);case 31:return gi("Activity");default:return""}}function Lo(e){try{var i="",a=null;do i+=jo(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var we=Object.prototype.hasOwnProperty,je=s.unstable_scheduleCallback,pr=s.unstable_cancelCallback,Tf=s.unstable_shouldYield,zu=s.unstable_requestPaint,cn=s.unstable_now,ds=s.unstable_getCurrentPriorityLevel,Uo=s.unstable_ImmediatePriority,qo=s.unstable_UserBlockingPriority,yr=s.unstable_NormalPriority,bf=s.unstable_LowPriority,ku=s.unstable_IdlePriority,Pu=s.log,Bu=s.unstable_setDisableYieldValue,ei=null,Ye=null;function Bn(e){if(typeof Pu=="function"&&Bu(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ei,e)}catch{}}var be=Math.clz32?Math.clz32:Lu,ju=Math.log,ga=Math.LN2;function Lu(e){return e>>>=0,e===0?32:31-(ju(e)/ga|0)|0}var pi=256,ms=262144,Ie=4194304;function yi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _i(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=yi(l):(_&=T,_!==0?f=yi(_):a||(a=T&~e,a!==0&&(f=yi(a))))):(T=l&~d,T!==0?f=yi(T):_!==0?f=yi(_):a||(a=l&~e,a!==0&&(f=yi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function ni(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Af(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var e=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),e}function vi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function gs(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sf(e,i,a,l,f,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,V=e.expirationTimes,U=e.hiddenUpdates;for(a=_&~a;0<a;){var X=31-be(a),et=1<<X;T[X]=0,V[X]=-1;var F=U[X];if(F!==null)for(U[X]=null,X=0;X<F.length;X++){var K=F[X];K!==null&&(K.lane&=-536870913)}a&=~et}l!==0&&ps(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~i))}function ps(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-be(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Fo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-be(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function Ho(e,i){var a=i&-i;return a=(a&42)!==0?1:ys(a),(a&(e.suspendedLanes|i))!==0?0:a}function ys(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qu(){var e=lt.p;return e!==0?e:(e=window.event,e===void 0?32:A0(e.type))}function ii(e,i){var a=lt.p;try{return lt.p=e,i()}finally{lt.p=a}}var ri=Math.random().toString(36).slice(2),Re="__reactFiber$"+ri,Fe="__reactProps$"+ri,Ei="__reactContainer$"+ri,pa="__reactEvents$"+ri,xf="__reactListeners$"+ri,Fu="__reactHandles$"+ri,Hu="__reactResources$"+ri,Ti="__reactMarker$"+ri;function ya(e){delete e[Re],delete e[Fe],delete e[pa],delete e[xf],delete e[Fu]}function bi(e){var i=e[Re];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ei]||a[Re]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=o0(e);e!==null;){if(a=e[Re])return a;e=o0(e)}return i}e=a,a=e.parentNode}return null}function jn(e){if(e=e[Re]||e[Ei]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function xn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Ai(e){var i=e[Hu];return i||(i=e[Hu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ce(e){e[Ti]=!0}var Go=new Set,Ko={};function Si(e,i){xi(e,i),xi(e+"Capture",i)}function xi(e,i){for(Ko[e]=i,e=0;e<i.length;e++)Go.add(i[e])}var Qo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Xo={};function Gu(e){return we.call(Xo,e)?!0:we.call(Yo,e)?!1:Qo.test(e)?Xo[e]=!0:(Yo[e]=!0,!1)}function _a(e,i,a){if(Gu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function wn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function De(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function He(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _r(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zo(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Jt(e){if(!e._valueTracker){var i=_r(e)?"checked":"value";e._valueTracker=Zo(e,i,""+e[i])}}function _s(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=_r(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vs=/[\n"\\]/g;function pn(e){return e.replace(vs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function va(e,i,a,l,f,d,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+He(i)):e.value!==""+He(i)&&(e.value=""+He(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?Jo(e,_,He(i)):a!=null?Jo(e,_,He(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+He(T):e.removeAttribute("name")}function Ku(e,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Jt(e);return}a=a!=null?""+He(a):"",i=i!=null?""+He(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Jt(e)}function Jo(e,i,a){i==="number"&&wi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function vr(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+He(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Qu(e,i,a){if(i!=null&&(i=""+He(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+He(a):""}function Er(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Te(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=He(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Jt(e)}function yn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Yu.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Wo(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&$o(e,f,l)}else for(var d in i)i.hasOwnProperty(d)&&$o(e,d,i[d])}function Ea(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(e){return Tr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function si(){}var tl=null;function Ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var br=null,Ii=null;function Es(e){var i=jn(e);if(i&&(e=i.stateNode)){var a=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(va(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[Fe]||null;if(!f)throw Error(r(90));va(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&_s(l)}break t;case"textarea":Qu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&vr(e,!!a.multiple,i,!1)}}}var ba=!1;function Ar(e,i,a){if(ba)return e(i,a);ba=!0;try{var l=e(i);return l}finally{if(ba=!1,(br!==null||Ii!==null)&&(qc(),br&&(i=br,e=Ii,Ii=br=null,Es(i),e)))for(i=0;i<e.length;i++)Es(e[i])}}function ai(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Fe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(Un)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",ie,ie),window.removeEventListener("test",ie,ie)}catch{Ts=!1}var Ri=null,el=null,bs=null;function nl(){if(bs)return bs;var e,i=el,a=i.length,l,f="value"in Ri?Ri.value:Ri.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return bs=f.slice(e,1<l?1-l:void 0)}function As(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Hi(){return!0}function oi(){return!1}function Xe(e){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Hi:oi,this.isPropagationStopped=oi,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),i}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=Xe(Gi),Sr=b({},Gi,{view:0,detail:0}),il=Xe(Sr),xr,Aa,Di,Sa=b({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Di&&(Di&&e.type==="mousemove"?(xr=e.screenX-Di.screenX,Aa=e.screenY-Di.screenY):Aa=xr=0,Di=e),xr)},movementY:function(e){return"movementY"in e?e.movementY:Aa}}),rl=Xe(Sa),Ss=b({},Sa,{dataTransfer:0}),Zu=Xe(Ss),Ju=b({},Sr,{relatedTarget:0}),xs=Xe(Ju),sl=b({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=Xe(sl),xa=b({},Gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wu=Xe(xa),tc=b({},Gi,{data:0}),Ni=Xe(tc),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ic[e])?!!i[e]:!1}function wr(){return rc}var hn=b({},Sr,{key:function(e){if(e.key){var i=ec[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=As(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(e){return e.type==="keypress"?As(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?As(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sc=Xe(hn),ac=b({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Xe(ac),c=b({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr}),p=Xe(c),v=b({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Xe(v),j=b({},Sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Xe(j),st=b({},Gi,{newState:0,oldState:0}),Rt=Xe(st),Ae=[9,13,27,32],Yt=Un&&"CompositionEvent"in window,fe=null;Un&&"documentMode"in document&&(fe=document.documentMode);var qn=Un&&"TextEvent"in window&&!fe,Vi=Un&&(!Yt||fe&&8<fe&&11>=fe),li=" ",ui=!1;function ws(e,i){switch(e){case"keyup":return Ae.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ia=!1;function W1(e,i){switch(e){case"compositionend":return wa(i);case"keypress":return i.which!==32?null:(ui=!0,li);case"textInput":return e=i.data,e===li&&ui?null:e;default:return null}}function tb(e,i){if(Ia)return e==="compositionend"||!Yt&&ws(e,i)?(e=nl(),bs=el=Ri=null,Ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vi&&i.locale!=="ko"?null:i.data;default:return null}}var eb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!eb[e.type]:i==="textarea"}function hp(e,i,a,l){br?Ii?Ii.push(l):Ii=[l]:br=l,i=Xc(i,"onChange"),0<i.length&&(a=new Ci("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var al=null,ol=null;function nb(e){Q_(e,0)}function oc(e){var i=xn(e);if(_s(i))return e}function fp(e,i){if(e==="change")return i}var dp=!1;if(Un){var wf;if(Un){var If="oninput"in document;if(!If){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),If=typeof mp.oninput=="function"}wf=If}else wf=!1;dp=wf&&(!document.documentMode||9<document.documentMode)}function gp(){al&&(al.detachEvent("onpropertychange",pp),ol=al=null)}function pp(e){if(e.propertyName==="value"&&oc(ol)){var i=[];hp(i,ol,e,Ln(e)),Ar(nb,i)}}function ib(e,i,a){e==="focusin"?(gp(),al=i,ol=a,al.attachEvent("onpropertychange",pp)):e==="focusout"&&gp()}function rb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oc(ol)}function sb(e,i){if(e==="click")return oc(i)}function ab(e,i){if(e==="input"||e==="change")return oc(i)}function ob(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var In=typeof Object.is=="function"?Object.is:ob;function ll(e,i){if(In(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!we.call(i,f)||!In(e[f],i[f]))return!1}return!0}function yp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _p(e,i){var a=yp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=yp(a)}}function vp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?vp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Ep(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=wi(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=wi(e.document)}return i}function Rf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var lb=Un&&"documentMode"in document&&11>=document.documentMode,Ra=null,Cf=null,ul=null,Df=!1;function Tp(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Df||Ra==null||Ra!==wi(l)||(l=Ra,"selectionStart"in l&&Rf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ul&&ll(ul,l)||(ul=l,l=Xc(Cf,"onSelect"),0<l.length&&(i=new Ci("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=Ra)))}function Is(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Ca={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},Nf={},bp={};Un&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Rs(e){if(Nf[e])return Nf[e];if(!Ca[e])return e;var i=Ca[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in bp)return Nf[e]=i[a];return e}var Ap=Rs("animationend"),Sp=Rs("animationiteration"),xp=Rs("animationstart"),ub=Rs("transitionrun"),cb=Rs("transitionstart"),hb=Rs("transitioncancel"),wp=Rs("transitionend"),Ip=new Map,Vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vf.push("scrollEnd");function ci(e,i){Ip.set(e,i),Si(i,[e])}var lc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Fn=[],Da=0,Mf=0;function uc(){for(var e=Da,i=Mf=Da=0;i<e;){var a=Fn[i];Fn[i++]=null;var l=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var d=Fn[i];if(Fn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Rp(a,f,d)}}function cc(e,i,a,l){Fn[Da++]=e,Fn[Da++]=i,Fn[Da++]=a,Fn[Da++]=l,Mf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Of(e,i,a,l){return cc(e,i,a,l),hc(e)}function Cs(e,i){return cc(e,null,null,i),hc(e)}function Rp(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-be(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function hc(e){if(50<Nl)throw Nl=0,Fd=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Na={};function fb(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,i,a,l){return new fb(e,i,a,l)}function zf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qi(e,i){var a=e.alternate;return a===null?(a=Rn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function fc(e,i,a,l,f,d){var _=0;if(l=e,typeof e=="function")zf(e)&&(_=1);else if(typeof e=="string")_=yA(e,a,ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case D:return e=Rn(31,a,i,f),e.elementType=D,e.lanes=d,e;case q:return Ds(a.children,f,d,i);case Q:_=8,f|=24;break;case rt:return e=Rn(12,a,i,f|2),e.elementType=rt,e.lanes=d,e;case gt:return e=Rn(13,a,i,f),e.elementType=gt,e.lanes=d,e;case ft:return e=Rn(19,a,i,f),e.elementType=ft,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tt:_=10;break t;case W:_=9;break t;case it:_=11;break t;case C:_=14;break t;case I:_=16,l=null;break t}_=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=Rn(_,a,i,f),i.elementType=e,i.type=l,i.lanes=d,i}function Ds(e,i,a,l){return e=Rn(7,e,l,i),e.lanes=a,e}function kf(e,i,a){return e=Rn(6,e,null,i),e.lanes=a,e}function Dp(e){var i=Rn(18,null,null,0);return i.stateNode=e,i}function Pf(e,i,a){return i=Rn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Np=new WeakMap;function Hn(e,i){if(typeof e=="object"&&e!==null){var a=Np.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Lo(i)},Np.set(e,i),i)}return{value:e,source:i,stack:Lo(i)}}var Va=[],Ma=0,dc=null,cl=0,Gn=[],Kn=0,Ir=null,Mi=1,Oi="";function Yi(e,i){Va[Ma++]=cl,Va[Ma++]=dc,dc=e,cl=i}function Vp(e,i,a){Gn[Kn++]=Mi,Gn[Kn++]=Oi,Gn[Kn++]=Ir,Ir=e;var l=Mi;e=Oi;var f=32-be(l)-1;l&=~(1<<f),a+=1;var d=32-be(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Mi=1<<32-be(i)+f|a<<f|l,Oi=d+e}else Mi=1<<d|a<<f|l,Oi=e}function Bf(e){e.return!==null&&(Yi(e,1),Vp(e,1,0))}function jf(e){for(;e===dc;)dc=Va[--Ma],Va[Ma]=null,cl=Va[--Ma],Va[Ma]=null;for(;e===Ir;)Ir=Gn[--Kn],Gn[Kn]=null,Oi=Gn[--Kn],Gn[Kn]=null,Mi=Gn[--Kn],Gn[Kn]=null}function Mp(e,i){Gn[Kn++]=Mi,Gn[Kn++]=Oi,Gn[Kn++]=Ir,Mi=i.id,Oi=i.overflow,Ir=e}var Ze=null,ue=null,Lt=!1,Rr=null,Qn=!1,Lf=Error(r(519));function Cr(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hl(Hn(i,e)),Lf}function Op(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Re]=e,i[Fe]=l,a){case"dialog":zt("cancel",i),zt("close",i);break;case"iframe":case"object":case"embed":zt("load",i);break;case"video":case"audio":for(a=0;a<Ml.length;a++)zt(Ml[a],i);break;case"source":zt("error",i);break;case"img":case"image":case"link":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"input":zt("invalid",i),Ku(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":zt("invalid",i);break;case"textarea":zt("invalid",i),Er(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||J_(i.textContent,a)?(l.popover!=null&&(zt("beforetoggle",i),zt("toggle",i)),l.onScroll!=null&&zt("scroll",i),l.onScrollEnd!=null&&zt("scrollend",i),l.onClick!=null&&(i.onclick=si),i=!0):i=!1,i||Cr(e,!0)}function zp(e){for(Ze=e.return;Ze;)switch(Ze.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Ze=Ze.return}}function Oa(e){if(e!==Ze)return!1;if(!Lt)return zp(e),Lt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||rm(e.type,e.memoizedProps)),a=!a),a&&ue&&Cr(e),zp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ue=a0(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ue=a0(e)}else i===27?(i=ue,Fr(e.type)?(e=um,um=null,ue=e):ue=i):ue=Ze?Xn(e.stateNode.nextSibling):null;return!0}function Ns(){ue=Ze=null,Lt=!1}function Uf(){var e=Rr;return e!==null&&(Tn===null?Tn=e:Tn.push.apply(Tn,e),Rr=null),e}function hl(e){Rr===null?Rr=[e]:Rr.push(e)}var qf=M(null),Vs=null,Xi=null;function Dr(e,i,a){ot(qf,i._currentValue),i._currentValue=a}function Zi(e){e._currentValue=qf.current,$(qf)}function Ff(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Hf(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=f;for(var V=0;V<i.length;V++)if(T.context===i[V]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Ff(d.return,a,e),l||(_=null);break t}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Ff(_,a,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function za(e,i,a,l){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;In(f.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(f===Ut.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Bl):e=[Bl])}f=f.return}e!==null&&Hf(i,e,a,l),i.flags|=262144}function mc(e){for(e=e.firstContext;e!==null;){if(!In(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ms(e){Vs=e,Xi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Je(e){return kp(Vs,e)}function gc(e,i){return Vs===null&&Ms(e),kp(e,i)}function kp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Xi===null){if(e===null)throw Error(r(308));Xi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Xi=Xi.next=i;return a}var db=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},mb=s.unstable_scheduleCallback,gb=s.unstable_NormalPriority,Ne={$$typeof:tt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gf(){return{controller:new db,data:new Map,refCount:0}}function fl(e){e.refCount--,e.refCount===0&&mb(gb,function(){e.controller.abort()})}var dl=null,Kf=0,ka=0,Pa=null;function pb(e,i){if(dl===null){var a=dl=[];Kf=0,ka=Xd(),Pa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Kf++,i.then(Pp,Pp),i}function Pp(){if(--Kf===0&&dl!==null){Pa!==null&&(Pa.status="fulfilled");var e=dl;dl=null,ka=0,Pa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function yb(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Bp=Y.S;Y.S=function(e,i){T_=cn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&pb(e,i),Bp!==null&&Bp(e,i)};var Os=M(null);function Qf(){var e=Os.current;return e!==null?e:oe.pooledCache}function pc(e,i){i===null?ot(Os,Os.current):ot(Os,i.pool)}function jp(){var e=Qf();return e===null?null:{parent:Ne._currentValue,pool:e}}var Ba=Error(r(460)),Yf=Error(r(474)),yc=Error(r(542)),_c={then:function(){}};function Lp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Up(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(si,si),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Fp(e),e;default:if(typeof i.status=="string")i.then(si,si);else{if(e=oe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Fp(e),e}throw ks=i,Ba}}function zs(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ks=a,Ba):a}}var ks=null;function qp(){if(ks===null)throw Error(r(459));var e=ks;return ks=null,e}function Fp(e){if(e===Ba||e===yc)throw Error(r(483))}var ja=null,ml=0;function vc(e){var i=ml;return ml+=1,ja===null&&(ja=[]),Up(ja,e,i)}function gl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ec(e,i){throw i.$$typeof===S?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Hp(e){function i(P,z){if(e){var L=P.deletions;L===null?(P.deletions=[z],P.flags|=16):L.push(z)}}function a(P,z){if(!e)return null;for(;z!==null;)i(P,z),z=z.sibling;return null}function l(P){for(var z=new Map;P!==null;)P.key!==null?z.set(P.key,P):z.set(P.index,P),P=P.sibling;return z}function f(P,z){return P=Qi(P,z),P.index=0,P.sibling=null,P}function d(P,z,L){return P.index=L,e?(L=P.alternate,L!==null?(L=L.index,L<z?(P.flags|=67108866,z):L):(P.flags|=67108866,z)):(P.flags|=1048576,z)}function _(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function T(P,z,L,J){return z===null||z.tag!==6?(z=kf(L,P.mode,J),z.return=P,z):(z=f(z,L),z.return=P,z)}function V(P,z,L,J){var Et=L.type;return Et===q?X(P,z,L.props.children,J,L.key):z!==null&&(z.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===I&&zs(Et)===z.type)?(z=f(z,L.props),gl(z,L),z.return=P,z):(z=fc(L.type,L.key,L.props,null,P.mode,J),gl(z,L),z.return=P,z)}function U(P,z,L,J){return z===null||z.tag!==4||z.stateNode.containerInfo!==L.containerInfo||z.stateNode.implementation!==L.implementation?(z=Pf(L,P.mode,J),z.return=P,z):(z=f(z,L.children||[]),z.return=P,z)}function X(P,z,L,J,Et){return z===null||z.tag!==7?(z=Ds(L,P.mode,J,Et),z.return=P,z):(z=f(z,L),z.return=P,z)}function et(P,z,L){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=kf(""+z,P.mode,L),z.return=P,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return L=fc(z.type,z.key,z.props,null,P.mode,L),gl(L,z),L.return=P,L;case H:return z=Pf(z,P.mode,L),z.return=P,z;case I:return z=zs(z),et(P,z,L)}if(Te(z)||k(z))return z=Ds(z,P.mode,L,null),z.return=P,z;if(typeof z.then=="function")return et(P,vc(z),L);if(z.$$typeof===tt)return et(P,gc(P,z),L);Ec(P,z)}return null}function F(P,z,L,J){var Et=z!==null?z.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return Et!==null?null:T(P,z,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case O:return L.key===Et?V(P,z,L,J):null;case H:return L.key===Et?U(P,z,L,J):null;case I:return L=zs(L),F(P,z,L,J)}if(Te(L)||k(L))return Et!==null?null:X(P,z,L,J,null);if(typeof L.then=="function")return F(P,z,vc(L),J);if(L.$$typeof===tt)return F(P,z,gc(P,L),J);Ec(P,L)}return null}function K(P,z,L,J,Et){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return P=P.get(L)||null,T(z,P,""+J,Et);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return P=P.get(J.key===null?L:J.key)||null,V(z,P,J,Et);case H:return P=P.get(J.key===null?L:J.key)||null,U(z,P,J,Et);case I:return J=zs(J),K(P,z,L,J,Et)}if(Te(J)||k(J))return P=P.get(L)||null,X(z,P,J,Et,null);if(typeof J.then=="function")return K(P,z,L,vc(J),Et);if(J.$$typeof===tt)return K(P,z,L,gc(z,J),Et);Ec(z,J)}return null}function dt(P,z,L,J){for(var Et=null,Gt=null,pt=z,Nt=z=0,Pt=null;pt!==null&&Nt<L.length;Nt++){pt.index>Nt?(Pt=pt,pt=null):Pt=pt.sibling;var Kt=F(P,pt,L[Nt],J);if(Kt===null){pt===null&&(pt=Pt);break}e&&pt&&Kt.alternate===null&&i(P,pt),z=d(Kt,z,Nt),Gt===null?Et=Kt:Gt.sibling=Kt,Gt=Kt,pt=Pt}if(Nt===L.length)return a(P,pt),Lt&&Yi(P,Nt),Et;if(pt===null){for(;Nt<L.length;Nt++)pt=et(P,L[Nt],J),pt!==null&&(z=d(pt,z,Nt),Gt===null?Et=pt:Gt.sibling=pt,Gt=pt);return Lt&&Yi(P,Nt),Et}for(pt=l(pt);Nt<L.length;Nt++)Pt=K(pt,P,Nt,L[Nt],J),Pt!==null&&(e&&Pt.alternate!==null&&pt.delete(Pt.key===null?Nt:Pt.key),z=d(Pt,z,Nt),Gt===null?Et=Pt:Gt.sibling=Pt,Gt=Pt);return e&&pt.forEach(function(Yr){return i(P,Yr)}),Lt&&Yi(P,Nt),Et}function bt(P,z,L,J){if(L==null)throw Error(r(151));for(var Et=null,Gt=null,pt=z,Nt=z=0,Pt=null,Kt=L.next();pt!==null&&!Kt.done;Nt++,Kt=L.next()){pt.index>Nt?(Pt=pt,pt=null):Pt=pt.sibling;var Yr=F(P,pt,Kt.value,J);if(Yr===null){pt===null&&(pt=Pt);break}e&&pt&&Yr.alternate===null&&i(P,pt),z=d(Yr,z,Nt),Gt===null?Et=Yr:Gt.sibling=Yr,Gt=Yr,pt=Pt}if(Kt.done)return a(P,pt),Lt&&Yi(P,Nt),Et;if(pt===null){for(;!Kt.done;Nt++,Kt=L.next())Kt=et(P,Kt.value,J),Kt!==null&&(z=d(Kt,z,Nt),Gt===null?Et=Kt:Gt.sibling=Kt,Gt=Kt);return Lt&&Yi(P,Nt),Et}for(pt=l(pt);!Kt.done;Nt++,Kt=L.next())Kt=K(pt,P,Nt,Kt.value,J),Kt!==null&&(e&&Kt.alternate!==null&&pt.delete(Kt.key===null?Nt:Kt.key),z=d(Kt,z,Nt),Gt===null?Et=Kt:Gt.sibling=Kt,Gt=Kt);return e&&pt.forEach(function(RA){return i(P,RA)}),Lt&&Yi(P,Nt),Et}function ae(P,z,L,J){if(typeof L=="object"&&L!==null&&L.type===q&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case O:t:{for(var Et=L.key;z!==null;){if(z.key===Et){if(Et=L.type,Et===q){if(z.tag===7){a(P,z.sibling),J=f(z,L.props.children),J.return=P,P=J;break t}}else if(z.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===I&&zs(Et)===z.type){a(P,z.sibling),J=f(z,L.props),gl(J,L),J.return=P,P=J;break t}a(P,z);break}else i(P,z);z=z.sibling}L.type===q?(J=Ds(L.props.children,P.mode,J,L.key),J.return=P,P=J):(J=fc(L.type,L.key,L.props,null,P.mode,J),gl(J,L),J.return=P,P=J)}return _(P);case H:t:{for(Et=L.key;z!==null;){if(z.key===Et)if(z.tag===4&&z.stateNode.containerInfo===L.containerInfo&&z.stateNode.implementation===L.implementation){a(P,z.sibling),J=f(z,L.children||[]),J.return=P,P=J;break t}else{a(P,z);break}else i(P,z);z=z.sibling}J=Pf(L,P.mode,J),J.return=P,P=J}return _(P);case I:return L=zs(L),ae(P,z,L,J)}if(Te(L))return dt(P,z,L,J);if(k(L)){if(Et=k(L),typeof Et!="function")throw Error(r(150));return L=Et.call(L),bt(P,z,L,J)}if(typeof L.then=="function")return ae(P,z,vc(L),J);if(L.$$typeof===tt)return ae(P,z,gc(P,L),J);Ec(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,z!==null&&z.tag===6?(a(P,z.sibling),J=f(z,L),J.return=P,P=J):(a(P,z),J=kf(L,P.mode,J),J.return=P,P=J),_(P)):a(P,z)}return function(P,z,L,J){try{ml=0;var Et=ae(P,z,L,J);return ja=null,Et}catch(pt){if(pt===Ba||pt===yc)throw pt;var Gt=Rn(29,pt,null,P.mode);return Gt.lanes=J,Gt.return=P,Gt}finally{}}}var Ps=Hp(!0),Gp=Hp(!1),Nr=!1;function Xf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Xt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=hc(e),Rp(e,null,a),i}return cc(e,l,i,a),hc(e)}function pl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Fo(e,a)}}function Jf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var $f=!1;function yl(){if($f){var e=Pa;if(e!==null)throw e}}function _l(e,i,a,l){$f=!1;var f=e.updateQueue;Nr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var V=T,U=V.next;V.next=null,_===null?d=U:_.next=U,_=V;var X=e.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==_&&(T===null?X.firstBaseUpdate=U:T.next=U,X.lastBaseUpdate=V))}if(d!==null){var et=f.baseState;_=0,X=U=V=null,T=d;do{var F=T.lane&-536870913,K=F!==T.lane;if(K?(kt&F)===F:(l&F)===F){F!==0&&F===ka&&($f=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var dt=e,bt=T;F=i;var ae=a;switch(bt.tag){case 1:if(dt=bt.payload,typeof dt=="function"){et=dt.call(ae,et,F);break t}et=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=bt.payload,F=typeof dt=="function"?dt.call(ae,et,F):dt,F==null)break t;et=b({},et,F);break t;case 2:Nr=!0}}F=T.callback,F!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[F]:K.push(F))}else K={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(U=X=K,V=et):X=X.next=K,_|=F;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;K=T,T=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);X===null&&(V=et),f.baseState=V,f.firstBaseUpdate=U,f.lastBaseUpdate=X,d===null&&(f.shared.lanes=0),Br|=_,e.lanes=_,e.memoizedState=et}}function Kp(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function Qp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kp(a[e],i)}var La=M(null),Tc=M(0);function Yp(e,i){e=sr,ot(Tc,e),ot(La,i),sr=e|i.baseLanes}function Wf(){ot(Tc,sr),ot(La,La.current)}function td(){sr=Tc.current,$(La),$(Tc)}var Cn=M(null),Yn=null;function Or(e){var i=e.alternate;ot(Se,Se.current&1),ot(Cn,e),Yn===null&&(i===null||La.current!==null||i.memoizedState!==null)&&(Yn=e)}function ed(e){ot(Se,Se.current),ot(Cn,e),Yn===null&&(Yn=e)}function Xp(e){e.tag===22?(ot(Se,Se.current),ot(Cn,e),Yn===null&&(Yn=e)):zr()}function zr(){ot(Se,Se.current),ot(Cn,Cn.current)}function Dn(e){$(Cn),Yn===e&&(Yn=null),$(Se)}var Se=M(0);function bc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||om(a)||lm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,Ct=null,re=null,Ve=null,Ac=!1,Ua=!1,Bs=!1,Sc=0,vl=0,qa=null,_b=0;function _e(){throw Error(r(321))}function nd(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!In(e[a],i[a]))return!1;return!0}function id(e,i,a,l,f,d){return Ji=d,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=e===null||e.memoizedState===null?Vy:_d,Bs=!1,d=a(l,f),Bs=!1,Ua&&(d=Jp(i,a,l,f)),Zp(e),d}function Zp(e){Y.H=bl;var i=re!==null&&re.next!==null;if(Ji=0,Ve=re=Ct=null,Ac=!1,vl=0,qa=null,i)throw Error(r(300));e===null||Me||(e=e.dependencies,e!==null&&mc(e)&&(Me=!0))}function Jp(e,i,a,l){Ct=e;var f=0;do{if(Ua&&(qa=null),vl=0,Ua=!1,25<=f)throw Error(r(301));if(f+=1,Ve=re=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=My,d=i(a,l)}while(Ua);return d}function vb(){var e=Y.H,i=e.useState()[0];return i=typeof i.then=="function"?El(i):i,e=e.useState()[0],(re!==null?re.memoizedState:null)!==e&&(Ct.flags|=1024),i}function rd(){var e=Sc!==0;return Sc=0,e}function sd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function ad(e){if(Ac){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ac=!1}Ji=0,Ve=re=Ct=null,Ua=!1,vl=Sc=0,qa=null}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ct.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function xe(){if(re===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=re.next;var i=Ve===null?Ct.memoizedState:Ve.next;if(i!==null)Ve=i,re=e;else{if(e===null)throw Ct.alternate===null?Error(r(467)):Error(r(310));re=e,e={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Ve===null?Ct.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(e){var i=vl;return vl+=1,qa===null&&(qa=[]),e=Up(qa,e,i),i=Ct,(Ve===null?i.memoizedState:Ve.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Vy:_d),e}function wc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return El(e);if(e.$$typeof===tt)return Je(e)}throw Error(r(438,String(e)))}function od(e){var i=null,a=Ct.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=xc(),Ct.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=x;return i.index++,a}function $i(e,i){return typeof i=="function"?i(e):i}function Ic(e){var i=xe();return ld(i,re,e)}function ld(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var T=_=null,V=null,U=i,X=!1;do{var et=U.lane&-536870913;if(et!==U.lane?(kt&et)===et:(Ji&et)===et){var F=U.revertLane;if(F===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),et===ka&&(X=!0);else if((Ji&F)===F){U=U.next,F===ka&&(X=!0);continue}else et={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},V===null?(T=V=et,_=d):V=V.next=et,Ct.lanes|=F,Br|=F;et=U.action,Bs&&a(d,et),d=U.hasEagerState?U.eagerState:a(d,et)}else F={lane:et,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},V===null?(T=V=F,_=d):V=V.next=F,Ct.lanes|=et,Br|=et;U=U.next}while(U!==null&&U!==i);if(V===null?_=d:V.next=T,!In(d,e.memoizedState)&&(Me=!0,X&&(a=Pa,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=V,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ud(e){var i=xe(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=e(d,_.action),_=_.next;while(_!==f);In(d,i.memoizedState)||(Me=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function $p(e,i,a){var l=Ct,f=xe(),d=Lt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!In((re||f).memoizedState,a);if(_&&(f.memoizedState=a,Me=!0),f=f.queue,fd(ey.bind(null,l,f,e),[e]),f.getSnapshot!==i||_||Ve!==null&&Ve.memoizedState.tag&1){if(l.flags|=2048,Fa(9,{destroy:void 0},ty.bind(null,l,f,a,i),null),oe===null)throw Error(r(349));d||(Ji&127)!==0||Wp(l,i,a)}return a}function Wp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Ct.updateQueue,i===null?(i=xc(),Ct.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function ty(e,i,a,l){i.value=a,i.getSnapshot=l,ny(i)&&iy(e)}function ey(e,i,a){return a(function(){ny(i)&&iy(e)})}function ny(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!In(e,a)}catch{return!0}}function iy(e){var i=Cs(e,2);i!==null&&bn(i,e,2)}function cd(e){var i=fn();if(typeof e=="function"){var a=e;if(e=a(),Bs){Bn(!0);try{a()}finally{Bn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},i}function ry(e,i,a,l){return e.baseState=a,ld(e,re,typeof l=="function"?l:$i)}function Eb(e,i,a,l,f){if(Dc(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,sy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function sy(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var d=Y.T,_={};Y.T=_;try{var T=a(f,l),V=Y.S;V!==null&&V(_,T),ay(e,i,T)}catch(U){hd(e,i,U)}finally{d!==null&&_.types!==null&&(d.types=_.types),Y.T=d}}else try{d=a(f,l),ay(e,i,d)}catch(U){hd(e,i,U)}}function ay(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){oy(e,i,l)},function(l){return hd(e,i,l)}):oy(e,i,a)}function oy(e,i,a){i.status="fulfilled",i.value=a,ly(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,sy(e,a)))}function hd(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ly(i),i=i.next;while(i!==l)}e.action=null}function ly(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function uy(e,i){return i}function cy(e,i){if(Lt){var a=oe.formState;if(a!==null){t:{var l=Ct;if(Lt){if(ue){e:{for(var f=ue,d=Qn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Xn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ue=Xn(f.nextSibling),l=f.data==="F!";break t}}Cr(l)}l=!1}l&&(i=a[0])}}return a=fn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:i},a.queue=l,a=Cy.bind(null,Ct,l),l.dispatch=a,l=cd(!1),d=yd.bind(null,Ct,!1,l.queue),l=fn(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=Eb.bind(null,Ct,f,d,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function hy(e){var i=xe();return fy(i,re,e)}function fy(e,i,a){if(i=ld(e,i,uy)[0],e=Ic($i)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=El(i)}catch(_){throw _===Ba?yc:_}else l=i;i=xe();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ct.flags|=2048,Fa(9,{destroy:void 0},Tb.bind(null,f,a),null)),[l,d,e]}function Tb(e,i){e.action=i}function dy(e){var i=xe(),a=re;if(a!==null)return fy(i,a,e);xe(),i=i.memoizedState,a=xe();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Fa(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=xc(),Ct.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function my(){return xe().memoizedState}function Rc(e,i,a,l){var f=fn();Ct.flags|=e,f.memoizedState=Fa(1|i,{destroy:void 0},a,l===void 0?null:l)}function Cc(e,i,a,l){var f=xe();l=l===void 0?null:l;var d=f.memoizedState.inst;re!==null&&l!==null&&nd(l,re.memoizedState.deps)?f.memoizedState=Fa(i,d,a,l):(Ct.flags|=e,f.memoizedState=Fa(1|i,d,a,l))}function gy(e,i){Rc(8390656,8,e,i)}function fd(e,i){Cc(2048,8,e,i)}function bb(e){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=xc(),Ct.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function py(e){var i=xe().memoizedState;return bb({ref:i,nextImpl:e}),function(){if((Xt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function yy(e,i){return Cc(4,2,e,i)}function _y(e,i){return Cc(4,4,e,i)}function vy(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Ey(e,i,a){a=a!=null?a.concat([e]):null,Cc(4,4,vy.bind(null,i,e),a)}function dd(){}function Ty(e,i){var a=xe();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&nd(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function by(e,i){var a=xe();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&nd(i,l[1]))return l[0];if(l=e(),Bs){Bn(!0);try{e()}finally{Bn(!1)}}return a.memoizedState=[l,i],l}function md(e,i,a){return a===void 0||(Ji&1073741824)!==0&&(kt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=A_(),Ct.lanes|=e,Br|=e,a)}function Ay(e,i,a,l){return In(a,i)?a:La.current!==null?(e=md(e,a,l),In(e,i)||(Me=!0),e):(Ji&42)===0||(Ji&1073741824)!==0&&(kt&261930)===0?(Me=!0,e.memoizedState=a):(e=A_(),Ct.lanes|=e,Br|=e,i)}function Sy(e,i,a,l,f){var d=lt.p;lt.p=d!==0&&8>d?d:8;var _=Y.T,T={};Y.T=T,yd(e,!1,i,a);try{var V=f(),U=Y.S;if(U!==null&&U(T,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var X=yb(V,l);Tl(e,i,X,Mn(e))}else Tl(e,i,l,Mn(e))}catch(et){Tl(e,i,{then:function(){},status:"rejected",reason:et},Mn())}finally{lt.p=d,_!==null&&T.types!==null&&(_.types=T.types),Y.T=_}}function Ab(){}function gd(e,i,a,l){if(e.tag!==5)throw Error(r(476));var f=xy(e).queue;Sy(e,f,i,_t,a===null?Ab:function(){return wy(e),a(l)})}function xy(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:_t},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function wy(e){var i=xy(e);i.next===null&&(i=e.alternate.memoizedState),Tl(e,i.next.queue,{},Mn())}function pd(){return Je(Bl)}function Iy(){return xe().memoizedState}function Ry(){return xe().memoizedState}function Sb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Mn();e=Vr(a);var l=Mr(i,e,a);l!==null&&(bn(l,i,a),pl(l,i,a)),i={cache:Gf()},e.payload=i;return}i=i.return}}function xb(e,i,a){var l=Mn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Dc(e)?Dy(i,a):(a=Of(e,i,a,l),a!==null&&(bn(a,e,l),Ny(a,i,l)))}function Cy(e,i,a){var l=Mn();Tl(e,i,a,l)}function Tl(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))Dy(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,In(T,_))return cc(e,i,f,0),oe===null&&uc(),!1}catch{}finally{}if(a=Of(e,i,f,l),a!==null)return bn(a,e,l),Ny(a,i,l),!0}return!1}function yd(e,i,a,l){if(l={lane:2,revertLane:Xd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Dc(e)){if(i)throw Error(r(479))}else i=Of(e,a,l,2),i!==null&&bn(i,e,2)}function Dc(e){var i=e.alternate;return e===Ct||i!==null&&i===Ct}function Dy(e,i){Ua=Ac=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Ny(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Fo(e,a)}}var bl={readContext:Je,use:wc,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e};bl.useEffectEvent=_e;var Vy={readContext:Je,use:wc,useCallback:function(e,i){return fn().memoizedState=[e,i===void 0?null:i],e},useContext:Je,useEffect:gy,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Rc(4194308,4,vy.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Rc(4194308,4,e,i)},useInsertionEffect:function(e,i){Rc(4,2,e,i)},useMemo:function(e,i){var a=fn();i=i===void 0?null:i;var l=e();if(Bs){Bn(!0);try{e()}finally{Bn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=fn();if(a!==void 0){var f=a(i);if(Bs){Bn(!0);try{a(i)}finally{Bn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=xb.bind(null,Ct,e),[l.memoizedState,e]},useRef:function(e){var i=fn();return e={current:e},i.memoizedState=e},useState:function(e){e=cd(e);var i=e.queue,a=Cy.bind(null,Ct,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:dd,useDeferredValue:function(e,i){var a=fn();return md(a,e,i)},useTransition:function(){var e=cd(!1);return e=Sy.bind(null,Ct,e.queue,!0,!1),fn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Ct,f=fn();if(Lt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),oe===null)throw Error(r(349));(kt&127)!==0||Wp(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,gy(ey.bind(null,l,d,e),[e]),l.flags|=2048,Fa(9,{destroy:void 0},ty.bind(null,l,d,a,i),null),a},useId:function(){var e=fn(),i=oe.identifierPrefix;if(Lt){var a=Oi,l=Mi;a=(l&~(1<<32-be(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Sc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=_b++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:pd,useFormState:cy,useActionState:cy,useOptimistic:function(e){var i=fn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=yd.bind(null,Ct,!0,a),a.dispatch=i,[e,i]},useMemoCache:od,useCacheRefresh:function(){return fn().memoizedState=Sb.bind(null,Ct)},useEffectEvent:function(e){var i=fn(),a={impl:e};return i.memoizedState=a,function(){if((Xt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},_d={readContext:Je,use:wc,useCallback:Ty,useContext:Je,useEffect:fd,useImperativeHandle:Ey,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:by,useReducer:Ic,useRef:my,useState:function(){return Ic($i)},useDebugValue:dd,useDeferredValue:function(e,i){var a=xe();return Ay(a,re.memoizedState,e,i)},useTransition:function(){var e=Ic($i)[0],i=xe().memoizedState;return[typeof e=="boolean"?e:El(e),i]},useSyncExternalStore:$p,useId:Iy,useHostTransitionStatus:pd,useFormState:hy,useActionState:hy,useOptimistic:function(e,i){var a=xe();return ry(a,re,e,i)},useMemoCache:od,useCacheRefresh:Ry};_d.useEffectEvent=py;var My={readContext:Je,use:wc,useCallback:Ty,useContext:Je,useEffect:fd,useImperativeHandle:Ey,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:by,useReducer:ud,useRef:my,useState:function(){return ud($i)},useDebugValue:dd,useDeferredValue:function(e,i){var a=xe();return re===null?md(a,e,i):Ay(a,re.memoizedState,e,i)},useTransition:function(){var e=ud($i)[0],i=xe().memoizedState;return[typeof e=="boolean"?e:El(e),i]},useSyncExternalStore:$p,useId:Iy,useHostTransitionStatus:pd,useFormState:dy,useActionState:dy,useOptimistic:function(e,i){var a=xe();return re!==null?ry(a,re,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:od,useCacheRefresh:Ry};My.useEffectEvent=py;function vd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ed={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=Mn(),f=Vr(l);f.payload=i,a!=null&&(f.callback=a),i=Mr(e,f,l),i!==null&&(bn(i,e,l),pl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=Mn(),f=Vr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Mr(e,f,l),i!==null&&(bn(i,e,l),pl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Mn(),l=Vr(a);l.tag=2,i!=null&&(l.callback=i),i=Mr(e,l,a),i!==null&&(bn(i,e,a),pl(i,e,a))}};function Oy(e,i,a,l,f,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!ll(a,l)||!ll(f,d):!0}function zy(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Ed.enqueueReplaceState(i,i.state,null)}function js(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=b({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function ky(e){lc(e)}function Py(e){console.error(e)}function By(e){lc(e)}function Nc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function jy(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Td(e,i,a){return a=Vr(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(e,i)},a}function Ly(e){return e=Vr(e),e.tag=3,e}function Uy(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){jy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){jy(i,a,l),typeof f!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function wb(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&za(i,a,f,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Fc():a.alternate===null&&ve===0&&(ve=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===_c?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Kd(e,l,f)),!1;case 22:return a.flags|=65536,l===_c?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Kd(e,l,f)),!1}throw Error(r(435,a.tag))}return Kd(e,l,f),Fc(),!1}if(Lt)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Lf&&(e=Error(r(422),{cause:l}),hl(Hn(e,a)))):(l!==Lf&&(i=Error(r(423),{cause:l}),hl(Hn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Hn(l,a),f=Td(e.stateNode,l,f),Jf(e,f),ve!==4&&(ve=2)),!1;var d=Error(r(520),{cause:l});if(d=Hn(d,a),Dl===null?Dl=[d]:Dl.push(d),ve!==4&&(ve=2),i===null)return!0;l=Hn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Td(a.stateNode,l,e),Jf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(jr===null||!jr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ly(f),Uy(f,e,a,l),Jf(a,f),!1}a=a.return}while(a!==null);return!1}var bd=Error(r(461)),Me=!1;function $e(e,i,a,l){i.child=e===null?Gp(i,null,a,l):Ps(i,e.child,a,l)}function qy(e,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Ms(i),l=id(e,i,a,_,d,f),T=rd(),e!==null&&!Me?(sd(e,i,f),Wi(e,i,f)):(Lt&&T&&Bf(i),i.flags|=1,$e(e,i,l,f),i.child)}function Fy(e,i,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!zf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Hy(e,i,d,l,f)):(e=fc(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Dd(e,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:ll,a(_,l)&&e.ref===i.ref)return Wi(e,i,f)}return i.flags|=1,e=Qi(d,l),e.ref=i.ref,e.return=i,i.child=e}function Hy(e,i,a,l,f){if(e!==null){var d=e.memoizedProps;if(ll(d,l)&&e.ref===i.ref)if(Me=!1,i.pendingProps=l=d,Dd(e,f))(e.flags&131072)!==0&&(Me=!0);else return i.lanes=e.lanes,Wi(e,i,f)}return Ad(e,i,a,l,f)}function Gy(e,i,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Ky(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&pc(i,d!==null?d.cachePool:null),d!==null?Yp(i,d):Wf(),Xp(i);else return l=i.lanes=536870912,Ky(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(pc(i,d.cachePool),Yp(i,d),zr(),i.memoizedState=null):(e!==null&&pc(i,null),Wf(),zr());return $e(e,i,f,a),i.child}function Al(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ky(e,i,a,l,f){var d=Qf();return d=d===null?null:{parent:Ne._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&pc(i,null),Wf(),Xp(i),e!==null&&za(e,i,l,!0),i.childLanes=f,null}function Vc(e,i){return i=Oc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Qy(e,i,a){return Ps(i,e.child,null,a),e=Vc(i,i.pendingProps),e.flags|=2,Dn(i),i.memoizedState=null,e}function Ib(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Lt){if(l.mode==="hidden")return e=Vc(i,l),i.lanes=536870912,Al(null,e);if(ed(i),(e=ue)?(e=s0(e,Qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Ir!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Dp(e),a.return=i,i.child=a,Ze=i,ue=null)):e=null,e===null)throw Cr(i);return i.lanes=536870912,null}return Vc(i,l)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(ed(i),f)if(i.flags&256)i.flags&=-257,i=Qy(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(Me||za(e,i,a,!1),f=(a&e.childLanes)!==0,Me||f){if(l=oe,l!==null&&(_=Ho(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Cs(e,_),bn(l,e,_),bd;Fc(),i=Qy(e,i,a)}else e=d.treeContext,ue=Xn(_.nextSibling),Ze=i,Lt=!0,Rr=null,Qn=!1,e!==null&&Mp(i,e),i=Vc(i,l),i.flags|=4096;return i}return e=Qi(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Mc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Ad(e,i,a,l,f){return Ms(i),a=id(e,i,a,l,void 0,f),l=rd(),e!==null&&!Me?(sd(e,i,f),Wi(e,i,f)):(Lt&&l&&Bf(i),i.flags|=1,$e(e,i,a,f),i.child)}function Yy(e,i,a,l,f,d){return Ms(i),i.updateQueue=null,a=Jp(i,l,a,f),Zp(e),l=rd(),e!==null&&!Me?(sd(e,i,d),Wi(e,i,d)):(Lt&&l&&Bf(i),i.flags|=1,$e(e,i,a,d),i.child)}function Xy(e,i,a,l,f){if(Ms(i),i.stateNode===null){var d=Na,_=a.contextType;typeof _=="object"&&_!==null&&(d=Je(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ed,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Xf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Je(_):Na,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(vd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Ed.enqueueReplaceState(d,d.state,null),_l(i,l,d,f),yl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var T=i.memoizedProps,V=js(a,T);d.props=V;var U=d.context,X=a.contextType;_=Na,typeof X=="object"&&X!==null&&(_=Je(X));var et=a.getDerivedStateFromProps;X=typeof et=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||U!==_)&&zy(i,d,l,_),Nr=!1;var F=i.memoizedState;d.state=F,_l(i,l,d,f),yl(),U=i.memoizedState,T||F!==U||Nr?(typeof et=="function"&&(vd(i,a,et,l),U=i.memoizedState),(V=Nr||Oy(i,a,V,l,F,U,_))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=U),d.props=l,d.state=U,d.context=_,l=V):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Zf(e,i),_=i.memoizedProps,X=js(a,_),d.props=X,et=i.pendingProps,F=d.context,U=a.contextType,V=Na,typeof U=="object"&&U!==null&&(V=Je(U)),T=a.getDerivedStateFromProps,(U=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==et||F!==V)&&zy(i,d,l,V),Nr=!1,F=i.memoizedState,d.state=F,_l(i,l,d,f),yl();var K=i.memoizedState;_!==et||F!==K||Nr||e!==null&&e.dependencies!==null&&mc(e.dependencies)?(typeof T=="function"&&(vd(i,a,T,l),K=i.memoizedState),(X=Nr||Oy(i,a,X,l,F,K,V)||e!==null&&e.dependencies!==null&&mc(e.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,V)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=V,l=X):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,Mc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Ps(i,e.child,null,f),i.child=Ps(i,null,a,f)):$e(e,i,a,f),i.memoizedState=d.state,e=i.child):e=Wi(e,i,f),e}function Zy(e,i,a,l){return Ns(),i.flags|=256,$e(e,i,a,l),i.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xd(e){return{baseLanes:e,cachePool:jp()}}function wd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Vn),e}function Jy(e,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Se.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Lt){if(f?Or(i):zr(),(e=ue)?(e=s0(e,Qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Ir!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=Dp(e),a.return=i,i.child=a,Ze=i,ue=null)):e=null,e===null)throw Cr(i);return lm(e)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(zr(),f=i.mode,T=Oc({mode:"hidden",children:T},f),l=Ds(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=xd(a),l.childLanes=wd(e,_,a),i.memoizedState=Sd,Al(null,l)):(Or(i),Id(i,T))}var V=e.memoizedState;if(V!==null&&(T=V.dehydrated,T!==null)){if(d)i.flags&256?(Or(i),i.flags&=-257,i=Rd(e,i,a)):i.memoizedState!==null?(zr(),i.child=e.child,i.flags|=128,i=null):(zr(),T=l.fallback,f=i.mode,l=Oc({mode:"visible",children:l.children},f),T=Ds(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Ps(i,e.child,null,a),l=i.child,l.memoizedState=xd(a),l.childLanes=wd(e,_,a),i.memoizedState=Sd,i=Al(null,l));else if(Or(i),lm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var U=_.dgst;_=U,l=Error(r(419)),l.stack="",l.digest=_,hl({value:l,source:null,stack:null}),i=Rd(e,i,a)}else if(Me||za(e,i,a,!1),_=(a&e.childLanes)!==0,Me||_){if(_=oe,_!==null&&(l=Ho(_,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,Cs(e,l),bn(_,e,l),bd;om(T)||Fc(),i=Rd(e,i,a)}else om(T)?(i.flags|=192,i.child=e.child,i=null):(e=V.treeContext,ue=Xn(T.nextSibling),Ze=i,Lt=!0,Rr=null,Qn=!1,e!==null&&Mp(i,e),i=Id(i,l.children),i.flags|=4096);return i}return f?(zr(),T=l.fallback,f=i.mode,V=e.child,U=V.sibling,l=Qi(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,U!==null?T=Qi(U,T):(T=Ds(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Al(null,l),l=i.child,T=e.child.memoizedState,T===null?T=xd(a):(f=T.cachePool,f!==null?(V=Ne._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=jp(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=wd(e,_,a),i.memoizedState=Sd,Al(e.child,l)):(Or(i),a=e.child,e=a.sibling,a=Qi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Id(e,i){return i=Oc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Oc(e,i){return e=Rn(22,e,null,i),e.lanes=0,e}function Rd(e,i,a){return Ps(i,e.child,null,a),e=Id(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function $y(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Ff(e.return,i,a)}function Cd(e,i,a,l,f,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Wy(e,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Se.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,ot(Se,_),$e(e,i,l,a),l=Lt?cl:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$y(e,a,i);else if(e.tag===19)$y(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&bc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Cd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&bc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Cd(i,!0,a,null,d,l);break;case"together":Cd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Wi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Br|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(za(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=Qi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Qi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Dd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&mc(e)))}function Rb(e,i,a){switch(i.tag){case 3:Be(i,i.stateNode.containerInfo),Dr(i,Ne,e.memoizedState.cache),Ns();break;case 27:case 5:hs(i);break;case 4:Be(i,i.stateNode.containerInfo);break;case 10:Dr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ed(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Or(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Jy(e,i,a):(Or(i),e=Wi(e,i,a),e!==null?e.sibling:null);Or(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(za(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Wy(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(Se,Se.current),l)break;return null;case 22:return i.lanes=0,Gy(e,i,a,i.pendingProps);case 24:Dr(i,Ne,e.memoizedState.cache)}return Wi(e,i,a)}function t_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Me=!0;else{if(!Dd(e,a)&&(i.flags&128)===0)return Me=!1,Rb(e,i,a);Me=(e.flags&131072)!==0}else Me=!1,Lt&&(i.flags&1048576)!==0&&Vp(i,cl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=zs(i.elementType),i.type=e,typeof e=="function")zf(e)?(l=js(e,l),i.tag=1,i=Xy(null,i,e,l,a)):(i.tag=0,i=Ad(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===it){i.tag=11,i=qy(null,i,e,l,a);break t}else if(f===C){i.tag=14,i=Fy(null,i,e,l,a);break t}}throw i=le(e)||e,Error(r(306,i,""))}}return i;case 0:return Ad(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=js(l,i.pendingProps),Xy(e,i,l,f,a);case 3:t:{if(Be(i,i.stateNode.containerInfo),e===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Zf(e,i),_l(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Dr(i,Ne,l),l!==d.cache&&Hf(i,[Ne],a,!0),yl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Zy(e,i,l,a);break t}else if(l!==f){f=Hn(Error(r(424)),i),hl(f),i=Zy(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ue=Xn(e.firstChild),Ze=i,Lt=!0,Rr=null,Qn=!0,a=Gp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ns(),l===f){i=Wi(e,i,a);break t}$e(e,i,l,a)}i=i.child}return i;case 26:return Mc(e,i),e===null?(a=h0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,e=i.pendingProps,l=Zc(Dt.current).createElement(a),l[Re]=i,l[Fe]=e,We(l,a,e),Ce(l),i.stateNode=l):i.memoizedState=h0(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return hs(i),e===null&&Lt&&(l=i.stateNode=l0(i.type,i.pendingProps,Dt.current),Ze=i,Qn=!0,f=ue,Fr(i.type)?(um=f,ue=Xn(l.firstChild)):ue=f),$e(e,i,i.pendingProps.children,a),Mc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Lt&&((f=l=ue)&&(l=rA(l,i.type,i.pendingProps,Qn),l!==null?(i.stateNode=l,Ze=i,ue=Xn(l.firstChild),Qn=!1,f=!0):f=!1),f||Cr(i)),hs(i),f=i.type,d=i.pendingProps,_=e!==null?e.memoizedProps:null,l=d.children,rm(f,d)?l=null:_!==null&&rm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=id(e,i,vb,null,null,a),Bl._currentValue=f),Mc(e,i),$e(e,i,l,a),i.child;case 6:return e===null&&Lt&&((e=a=ue)&&(a=sA(a,i.pendingProps,Qn),a!==null?(i.stateNode=a,Ze=i,ue=null,e=!0):e=!1),e||Cr(i)),null;case 13:return Jy(e,i,a);case 4:return Be(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ps(i,null,l,a):$e(e,i,l,a),i.child;case 11:return qy(e,i,i.type,i.pendingProps,a);case 7:return $e(e,i,i.pendingProps,a),i.child;case 8:return $e(e,i,i.pendingProps.children,a),i.child;case 12:return $e(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Dr(i,i.type,l.value),$e(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ms(i),f=Je(f),l=l(f),i.flags|=1,$e(e,i,l,a),i.child;case 14:return Fy(e,i,i.type,i.pendingProps,a);case 15:return Hy(e,i,i.type,i.pendingProps,a);case 19:return Wy(e,i,a);case 31:return Ib(e,i,a);case 22:return Gy(e,i,a,i.pendingProps);case 24:return Ms(i),l=Je(Ne),e===null?(f=Qf(),f===null&&(f=oe,d=Gf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Xf(i),Dr(i,Ne,f)):((e.lanes&a)!==0&&(Zf(e,i),_l(i,null,null,a),yl()),f=e.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Dr(i,Ne,l)):(l=d.cache,Dr(i,Ne,l),l!==f.cache&&Hf(i,[Ne],a,!0))),$e(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function tr(e){e.flags|=4}function Nd(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(I_())e.flags|=8192;else throw ks=_c,Yf}else e.flags&=-16777217}function e_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!p0(i))if(I_())e.flags|=8192;else throw ks=_c,Yf}function zc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Uu():536870912,e.lanes|=i,Qa|=i)}function Sl(e,i){if(!Lt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ce(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function Cb(e,i,a){var l=i.pendingProps;switch(jf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(i),null;case 1:return ce(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Zi(Ne),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oa(i)?tr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Uf())),ce(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(tr(i),d!==null?(ce(i),e_(i,d)):(ce(i),Nd(i,f,null,l,a))):d?d!==e.memoizedState?(tr(i),ce(i),e_(i,d)):(ce(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&tr(i),ce(i),Nd(i,f,e,l,a)),null;case 27:if(fa(i),a=Dt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&tr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}e=ht.current,Oa(i)?Op(i):(e=l0(f,l,a),i.stateNode=e,tr(i))}return ce(i),null;case 5:if(fa(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&tr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}if(d=ht.current,Oa(i))Op(i);else{var _=Zc(Dt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Re]=i,d[Fe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(We(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&tr(i)}}return ce(i),Nd(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&tr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=Dt.current,Oa(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=Ze,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Re]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||J_(e.nodeValue,a)),e||Cr(i,!0)}else e=Zc(e).createTextNode(l),e[Re]=i,i.stateNode=e}return ce(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=Oa(i),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Re]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ce(i),e=!1}else a=Uf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Dn(i),i):(Dn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ce(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Oa(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Re]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ce(i),f=!1}else f=Uf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Dn(i),i):(Dn(i),null)}return Dn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),zc(i,i.updateQueue),ce(i),null);case 4:return he(),e===null&&Wd(i.stateNode.containerInfo),ce(i),null;case 10:return Zi(i.type),ce(i),null;case 19:if($(Se),l=i.memoizedState,l===null)return ce(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Sl(l,!1);else{if(ve!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=bc(e),d!==null){for(i.flags|=128,Sl(l,!1),e=d.updateQueue,i.updateQueue=e,zc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Cp(a,e),a=a.sibling;return ot(Se,Se.current&1|2),Lt&&Yi(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&cn()>Lc&&(i.flags|=128,f=!0,Sl(l,!1),i.lanes=4194304)}else{if(!f)if(e=bc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,zc(i,e),Sl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Lt)return ce(i),null}else 2*cn()-l.renderingStartTime>Lc&&a!==536870912&&(i.flags|=128,f=!0,Sl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=cn(),e.sibling=null,a=Se.current,ot(Se,f?a&1|2:a&1),Lt&&Yi(i,l.treeForkCount),e):(ce(i),null);case 22:case 23:return Dn(i),td(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ce(i),i.subtreeFlags&6&&(i.flags|=8192)):ce(i),a=i.updateQueue,a!==null&&zc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&$(Os),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zi(Ne),ce(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Db(e,i){switch(jf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Zi(Ne),he(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return fa(i),null;case 31:if(i.memoizedState!==null){if(Dn(i),i.alternate===null)throw Error(r(340));Ns()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Dn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ns()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return $(Se),null;case 4:return he(),null;case 10:return Zi(i.type),null;case 22:case 23:return Dn(i),td(),e!==null&&$(Os),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Zi(Ne),null;case 25:return null;default:return null}}function n_(e,i){switch(jf(i),i.tag){case 3:Zi(Ne),he();break;case 26:case 27:case 5:fa(i);break;case 4:he();break;case 31:i.memoizedState!==null&&Dn(i);break;case 13:Dn(i);break;case 19:$(Se);break;case 10:Zi(i.type);break;case 22:case 23:Dn(i),td(),e!==null&&$(Os);break;case 24:Zi(Ne)}}function xl(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){Wt(i,i.return,T)}}function kr(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var V=a,U=T;try{U()}catch(X){Wt(f,V,X)}}}l=l.next}while(l!==d)}}catch(X){Wt(i,i.return,X)}}function i_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Qp(i,a)}catch(l){Wt(e,e.return,l)}}}function r_(e,i,a){a.props=js(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Wt(e,i,l)}}function wl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){Wt(e,i,f)}}function zi(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Wt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Wt(e,i,f)}else a.current=null}function s_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Wt(e,e.return,f)}}function Vd(e,i,a){try{var l=e.stateNode;$b(l,e.type,a,i),l[Fe]=i}catch(f){Wt(e,e.return,f)}}function a_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fr(e.type)||e.tag===4}function Md(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||a_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Od(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=si));else if(l!==4&&(l===27&&Fr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Od(e,i,a),e=e.sibling;e!==null;)Od(e,i,a),e=e.sibling}function kc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Fr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(kc(e,i,a),e=e.sibling;e!==null;)kc(e,i,a),e=e.sibling}function o_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);We(i,l,a),i[Re]=e,i[Fe]=a}catch(d){Wt(e,e.return,d)}}var er=!1,Oe=!1,zd=!1,l_=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Nb(e,i){if(e=e.containerInfo,nm=ih,e=Ep(e),Rf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,T=-1,V=-1,U=0,X=0,et=e,F=null;e:for(;;){for(var K;et!==a||f!==0&&et.nodeType!==3||(T=_+f),et!==d||l!==0&&et.nodeType!==3||(V=_+l),et.nodeType===3&&(_+=et.nodeValue.length),(K=et.firstChild)!==null;)F=et,et=K;for(;;){if(et===e)break e;if(F===a&&++U===f&&(T=_),F===d&&++X===l&&(V=_),(K=et.nextSibling)!==null)break;et=F,F=et.parentNode}et=K}a=T===-1||V===-1?null:{start:T,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(im={focusedElem:e,selectionRange:a},ih=!1,Ge=i;Ge!==null;)if(i=Ge,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Ge=e;else for(;Ge!==null;){switch(i=Ge,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var dt=js(a.type,f);e=l.getSnapshotBeforeUpdate(dt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(bt){Wt(a,a.return,bt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)am(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":am(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Ge=e;break}Ge=i.return}}function u_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ir(e,a),l&4&&xl(5,a);break;case 1:if(ir(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){Wt(a,a.return,_)}else{var f=js(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Wt(a,a.return,_)}}l&64&&i_(a),l&512&&wl(a,a.return);break;case 3:if(ir(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Qp(e,i)}catch(_){Wt(a,a.return,_)}}break;case 27:i===null&&l&4&&o_(a);case 26:case 5:ir(e,a),i===null&&l&4&&s_(a),l&512&&wl(a,a.return);break;case 12:ir(e,a);break;case 31:ir(e,a),l&4&&f_(e,a);break;case 13:ir(e,a),l&4&&d_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Lb.bind(null,a),aA(e,a))));break;case 22:if(l=a.memoizedState!==null||er,!l){i=i!==null&&i.memoizedState!==null||Oe,f=er;var d=Oe;er=l,(Oe=i)&&!d?rr(e,a,(a.subtreeFlags&8772)!==0):ir(e,a),er=f,Oe=d}break;case 30:break;default:ir(e,a)}}function c_(e){var i=e.alternate;i!==null&&(e.alternate=null,c_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ya(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var de=null,_n=!1;function nr(e,i,a){for(a=a.child;a!==null;)h_(e,i,a),a=a.sibling}function h_(e,i,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ei,a)}catch{}switch(a.tag){case 26:Oe||zi(a,i),nr(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Oe||zi(a,i);var l=de,f=_n;Fr(a.type)&&(de=a.stateNode,_n=!1),nr(e,i,a),zl(a.stateNode),de=l,_n=f;break;case 5:Oe||zi(a,i);case 6:if(l=de,f=_n,de=null,nr(e,i,a),de=l,_n=f,de!==null)if(_n)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(a.stateNode)}catch(d){Wt(a,i,d)}else try{de.removeChild(a.stateNode)}catch(d){Wt(a,i,d)}break;case 18:de!==null&&(_n?(e=de,i0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),eo(e)):i0(de,a.stateNode));break;case 4:l=de,f=_n,de=a.stateNode.containerInfo,_n=!0,nr(e,i,a),de=l,_n=f;break;case 0:case 11:case 14:case 15:kr(2,a,i),Oe||kr(4,a,i),nr(e,i,a);break;case 1:Oe||(zi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&r_(a,i,l)),nr(e,i,a);break;case 21:nr(e,i,a);break;case 22:Oe=(l=Oe)||a.memoizedState!==null,nr(e,i,a),Oe=l;break;default:nr(e,i,a)}}function f_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{eo(e)}catch(a){Wt(i,i.return,a)}}}function d_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{eo(e)}catch(a){Wt(i,i.return,a)}}function Vb(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new l_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new l_),i;default:throw Error(r(435,e.tag))}}function Pc(e,i){var a=Vb(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=Ub.bind(null,e,l);l.then(f,f)}})}function vn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,_=i,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(Fr(T.type)){de=T.stateNode,_n=!1;break t}break;case 5:de=T.stateNode,_n=!1;break t;case 3:case 4:de=T.stateNode.containerInfo,_n=!0;break t}T=T.return}if(de===null)throw Error(r(160));h_(d,_,f),de=null,_n=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)m_(i,e),i=i.sibling}var hi=null;function m_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vn(i,e),En(e),l&4&&(kr(3,e,e.return),xl(3,e),kr(5,e,e.return));break;case 1:vn(i,e),En(e),l&512&&(Oe||a===null||zi(a,a.return)),l&64&&er&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=hi;if(vn(i,e),En(e),l&512&&(Oe||a===null||zi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ti]||d[Re]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),We(d,l,a),d[Re]=e,Ce(d),l=d;break t;case"link":var _=m0("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break e}}d=f.createElement(l),We(d,l,a),f.head.appendChild(d);break;case"meta":if(_=m0("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break e}}d=f.createElement(l),We(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Re]=e,Ce(d),l=d}e.stateNode=l}else g0(f,e.type,e.stateNode);else e.stateNode=d0(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?g0(f,e.type,e.stateNode):d0(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Vd(e,e.memoizedProps,a.memoizedProps)}break;case 27:vn(i,e),En(e),l&512&&(Oe||a===null||zi(a,a.return)),a!==null&&l&4&&Vd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(vn(i,e),En(e),l&512&&(Oe||a===null||zi(a,a.return)),e.flags&32){f=e.stateNode;try{yn(f,"")}catch(dt){Wt(e,e.return,dt)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Vd(e,f,a!==null?a.memoizedProps:f)),l&1024&&(zd=!0);break;case 6:if(vn(i,e),En(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(dt){Wt(e,e.return,dt)}}break;case 3:if(Wc=null,f=hi,hi=Jc(i.containerInfo),vn(i,e),hi=f,En(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{eo(i.containerInfo)}catch(dt){Wt(e,e.return,dt)}zd&&(zd=!1,g_(e));break;case 4:l=hi,hi=Jc(e.stateNode.containerInfo),vn(i,e),En(e),hi=l;break;case 12:vn(i,e),En(e);break;case 31:vn(i,e),En(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pc(e,l)));break;case 13:vn(i,e),En(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jc=cn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pc(e,l)));break;case 22:f=e.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,U=er,X=Oe;if(er=U||f,Oe=X||V,vn(i,e),Oe=X,er=U,En(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||V||er||Oe||Ls(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){V=a=i;try{if(d=V.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=V.stateNode;var et=V.memoizedProps.style,F=et!=null&&et.hasOwnProperty("display")?et.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(dt){Wt(V,V.return,dt)}}}else if(i.tag===6){if(a===null){V=i;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(dt){Wt(V,V.return,dt)}}}else if(i.tag===18){if(a===null){V=i;try{var K=V.stateNode;f?r0(K,!0):r0(V.stateNode,!1)}catch(dt){Wt(V,V.return,dt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Pc(e,a))));break;case 19:vn(i,e),En(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pc(e,l)));break;case 30:break;case 21:break;default:vn(i,e),En(e)}}function En(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(a_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Md(e);kc(e,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(yn(_,""),a.flags&=-33);var T=Md(e);kc(e,T,_);break;case 3:case 4:var V=a.stateNode.containerInfo,U=Md(e);Od(e,U,V);break;default:throw Error(r(161))}}catch(X){Wt(e,e.return,X)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function g_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;g_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ir(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)u_(e,i.alternate,i),i=i.sibling}function Ls(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:kr(4,i,i.return),Ls(i);break;case 1:zi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&r_(i,i.return,a),Ls(i);break;case 27:zl(i.stateNode);case 26:case 5:zi(i,i.return),Ls(i);break;case 22:i.memoizedState===null&&Ls(i);break;case 30:Ls(i);break;default:Ls(i)}e=e.sibling}}function rr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:rr(f,d,a),xl(4,d);break;case 1:if(rr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(U){Wt(l,l.return,U)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)Kp(V[f],T)}catch(U){Wt(l,l.return,U)}}a&&_&64&&i_(d),wl(d,d.return);break;case 27:o_(d);case 26:case 5:rr(f,d,a),a&&l===null&&_&4&&s_(d),wl(d,d.return);break;case 12:rr(f,d,a);break;case 31:rr(f,d,a),a&&_&4&&f_(f,d);break;case 13:rr(f,d,a),a&&_&4&&d_(f,d);break;case 22:d.memoizedState===null&&rr(f,d,a),wl(d,d.return);break;case 30:break;default:rr(f,d,a)}i=i.sibling}}function kd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&fl(a))}function Pd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&fl(e))}function fi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)p_(e,i,a,l),i=i.sibling}function p_(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:fi(e,i,a,l),f&2048&&xl(9,i);break;case 1:fi(e,i,a,l);break;case 3:fi(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&fl(e)));break;case 12:if(f&2048){fi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){Wt(i,i.return,V)}}else fi(e,i,a,l);break;case 31:fi(e,i,a,l);break;case 13:fi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?fi(e,i,a,l):Il(e,i):d._visibility&2?fi(e,i,a,l):(d._visibility|=2,Ha(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&kd(_,i);break;case 24:fi(e,i,a,l),f&2048&&Pd(i.alternate,i);break;default:fi(e,i,a,l)}}function Ha(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,_=i,T=a,V=l,U=_.flags;switch(_.tag){case 0:case 11:case 15:Ha(d,_,T,V,f),xl(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?Ha(d,_,T,V,f):Il(d,_):(X._visibility|=2,Ha(d,_,T,V,f)),f&&U&2048&&kd(_.alternate,_);break;case 24:Ha(d,_,T,V,f),f&&U&2048&&Pd(_.alternate,_);break;default:Ha(d,_,T,V,f)}i=i.sibling}}function Il(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:Il(a,l),f&2048&&kd(l.alternate,l);break;case 24:Il(a,l),f&2048&&Pd(l.alternate,l);break;default:Il(a,l)}i=i.sibling}}var Rl=8192;function Ga(e,i,a){if(e.subtreeFlags&Rl)for(e=e.child;e!==null;)y_(e,i,a),e=e.sibling}function y_(e,i,a){switch(e.tag){case 26:Ga(e,i,a),e.flags&Rl&&e.memoizedState!==null&&_A(a,hi,e.memoizedState,e.memoizedProps);break;case 5:Ga(e,i,a);break;case 3:case 4:var l=hi;hi=Jc(e.stateNode.containerInfo),Ga(e,i,a),hi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,Ga(e,i,a),Rl=l):Ga(e,i,a));break;default:Ga(e,i,a)}}function __(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Cl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ge=l,E_(l,e)}__(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)v_(e),e=e.sibling}function v_(e){switch(e.tag){case 0:case 11:case 15:Cl(e),e.flags&2048&&kr(9,e,e.return);break;case 3:Cl(e);break;case 12:Cl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Bc(e)):Cl(e);break;default:Cl(e)}}function Bc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ge=l,E_(l,e)}__(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:kr(8,i,i.return),Bc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Bc(i));break;default:Bc(i)}e=e.sibling}}function E_(e,i){for(;Ge!==null;){var a=Ge;switch(a.tag){case 0:case 11:case 15:kr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:fl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ge=l;else t:for(a=e;Ge!==null;){l=Ge;var f=l.sibling,d=l.return;if(c_(l),l===a){Ge=null;break t}if(f!==null){f.return=d,Ge=f;break t}Ge=d}}}var Mb={getCacheForType:function(e){var i=Je(Ne),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Je(Ne).controller.signal}},Ob=typeof WeakMap=="function"?WeakMap:Map,Xt=0,oe=null,Ot=null,kt=0,$t=0,Nn=null,Pr=!1,Ka=!1,Bd=!1,sr=0,ve=0,Br=0,Us=0,jd=0,Vn=0,Qa=0,Dl=null,Tn=null,Ld=!1,jc=0,T_=0,Lc=1/0,Uc=null,jr=null,Le=0,Lr=null,Ya=null,ar=0,Ud=0,qd=null,b_=null,Nl=0,Fd=null;function Mn(){return(Xt&2)!==0&&kt!==0?kt&-kt:Y.T!==null?Xd():qu()}function A_(){if(Vn===0)if((kt&536870912)===0||Lt){var e=ms;ms<<=1,(ms&3932160)===0&&(ms=262144),Vn=e}else Vn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Vn}function bn(e,i,a){(e===oe&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Xa(e,0),Ur(e,kt,Vn,!1)),gs(e,a),((Xt&2)===0||e!==oe)&&(e===oe&&((Xt&2)===0&&(Us|=a),ve===4&&Ur(e,kt,Vn,!1)),ki(e))}function S_(e,i,a){if((Xt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||ni(e,i),f=l?Pb(e,i):Gd(e,i,!0),d=l;do{if(f===0){Ka&&!l&&Ur(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!zb(a)){f=Gd(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var T=e;f=Dl;var V=T.current.memoizedState.isDehydrated;if(V&&(Xa(T,_).flags|=256),_=Gd(T,_,!1),_!==2){if(Bd&&!V){T.errorRecoveryDisabledLanes|=d,Us|=d,f=4;break t}d=Tn,Tn=f,d!==null&&(Tn===null?Tn=d:Tn.push.apply(Tn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Xa(e,0),Ur(e,i,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ur(l,i,Vn,!Pr);break t;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=jc+300-cn(),10<f)){if(Ur(l,i,Vn,!Pr),_i(l,0,!0)!==0)break t;ar=i,l.timeoutHandle=e0(x_.bind(null,l,a,Tn,Uc,Ld,i,Vn,Us,Qa,Pr,d,"Throttled",-0,0),f);break t}x_(l,a,Tn,Uc,Ld,i,Vn,Us,Qa,Pr,d,null,-0,0)}}break}while(!0);ki(e)}function x_(e,i,a,l,f,d,_,T,V,U,X,et,F,K){if(e.timeoutHandle=-1,et=i.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},y_(i,d,et);var dt=(d&62914560)===d?jc-cn():(d&4194048)===d?T_-cn():0;if(dt=vA(et,dt),dt!==null){ar=d,e.cancelPendingCommit=dt(M_.bind(null,e,i,d,a,l,f,_,T,V,X,et,null,F,K)),Ur(e,d,_,!U);return}}M_(e,i,d,a,l,f,_,T,V)}function zb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!In(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ur(e,i,a,l){i&=~jd,i&=~Us,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var d=31-be(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&ps(e,a,i)}function qc(){return(Xt&6)===0?(Vl(0),!1):!0}function Hd(){if(Ot!==null){if($t===0)var e=Ot.return;else e=Ot,Xi=Vs=null,ad(e),ja=null,ml=0,e=Ot;for(;e!==null;)n_(e.alternate,e),e=e.return;Ot=null}}function Xa(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,eA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ar=0,Hd(),oe=e,Ot=a=Qi(e.current,null),kt=i,$t=0,Nn=null,Pr=!1,Ka=ni(e,i),Bd=!1,Qa=Vn=jd=Us=Br=ve=0,Tn=Dl=null,Ld=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-be(l),d=1<<f;i|=e[f],l&=~d}return sr=i,uc(),a}function w_(e,i){Ct=null,Y.H=bl,i===Ba||i===yc?(i=qp(),$t=3):i===Yf?(i=qp(),$t=4):$t=i===bd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Ot===null&&(ve=1,Nc(e,Hn(i,e.current)))}function I_(){var e=Cn.current;return e===null?!0:(kt&4194048)===kt?Yn===null:(kt&62914560)===kt||(kt&536870912)!==0?e===Yn:!1}function R_(){var e=Y.H;return Y.H=bl,e===null?bl:e}function C_(){var e=Y.A;return Y.A=Mb,e}function Fc(){ve=4,Pr||(kt&4194048)!==kt&&Cn.current!==null||(Ka=!0),(Br&134217727)===0&&(Us&134217727)===0||oe===null||Ur(oe,kt,Vn,!1)}function Gd(e,i,a){var l=Xt;Xt|=2;var f=R_(),d=C_();(oe!==e||kt!==i)&&(Uc=null,Xa(e,i)),i=!1;var _=ve;t:do try{if($t!==0&&Ot!==null){var T=Ot,V=Nn;switch($t){case 8:Hd(),_=6;break t;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var U=$t;if($t=0,Nn=null,Za(e,T,V,U),a&&Ka){_=0;break t}break;default:U=$t,$t=0,Nn=null,Za(e,T,V,U)}}kb(),_=ve;break}catch(X){w_(e,X)}while(!0);return i&&e.shellSuspendCounter++,Xi=Vs=null,Xt=l,Y.H=f,Y.A=d,Ot===null&&(oe=null,kt=0,uc()),_}function kb(){for(;Ot!==null;)D_(Ot)}function Pb(e,i){var a=Xt;Xt|=2;var l=R_(),f=C_();oe!==e||kt!==i?(Uc=null,Lc=cn()+500,Xa(e,i)):Ka=ni(e,i);t:do try{if($t!==0&&Ot!==null){i=Ot;var d=Nn;e:switch($t){case 1:$t=0,Nn=null,Za(e,i,d,1);break;case 2:case 9:if(Lp(d)){$t=0,Nn=null,N_(i);break}i=function(){$t!==2&&$t!==9||oe!==e||($t=7),ki(e)},d.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:Lp(d)?($t=0,Nn=null,N_(i)):($t=0,Nn=null,Za(e,i,d,7));break;case 5:var _=null;switch(Ot.tag){case 26:_=Ot.memoizedState;case 5:case 27:var T=Ot;if(_?p0(_):T.stateNode.complete){$t=0,Nn=null;var V=T.sibling;if(V!==null)Ot=V;else{var U=T.return;U!==null?(Ot=U,Hc(U)):Ot=null}break e}}$t=0,Nn=null,Za(e,i,d,5);break;case 6:$t=0,Nn=null,Za(e,i,d,6);break;case 8:Hd(),ve=6;break t;default:throw Error(r(462))}}Bb();break}catch(X){w_(e,X)}while(!0);return Xi=Vs=null,Y.H=l,Y.A=f,Xt=a,Ot!==null?0:(oe=null,kt=0,uc(),ve)}function Bb(){for(;Ot!==null&&!Tf();)D_(Ot)}function D_(e){var i=t_(e.alternate,e,sr);e.memoizedProps=e.pendingProps,i===null?Hc(e):Ot=i}function N_(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Yy(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=Yy(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:ad(i);default:n_(a,i),i=Ot=Cp(i,sr),i=t_(a,i,sr)}e.memoizedProps=e.pendingProps,i===null?Hc(e):Ot=i}function Za(e,i,a,l){Xi=Vs=null,ad(i),ja=null,ml=0;var f=i.return;try{if(wb(e,f,i,a,kt)){ve=1,Nc(e,Hn(a,e.current)),Ot=null;return}}catch(d){if(f!==null)throw Ot=f,d;ve=1,Nc(e,Hn(a,e.current)),Ot=null;return}i.flags&32768?(Lt||l===1?e=!0:Ka||(kt&536870912)!==0?e=!1:(Pr=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),V_(i,e)):Hc(i)}function Hc(e){var i=e;do{if((i.flags&32768)!==0){V_(i,Pr);return}e=i.return;var a=Cb(i.alternate,i,sr);if(a!==null){Ot=a;return}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=e}while(i!==null);ve===0&&(ve=5)}function V_(e,i){do{var a=Db(e.alternate,e);if(a!==null){a.flags&=32767,Ot=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=a}while(e!==null);ve=6,Ot=null}function M_(e,i,a,l,f,d,_,T,V){e.cancelPendingCommit=null;do Gc();while(Le!==0);if((Xt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Mf,Sf(e,a,d,_,T,V),e===oe&&(Ot=oe=null,kt=0),Ya=i,Lr=e,ar=a,Ud=d,qd=f,b_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qb(yr,function(){return B_(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=lt.p,lt.p=2,_=Xt,Xt|=4;try{Nb(e,i,a)}finally{Xt=_,lt.p=f,Y.T=l}}Le=1,O_(),z_(),k_()}}function O_(){if(Le===1){Le=0;var e=Lr,i=Ya,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=lt.p;lt.p=2;var f=Xt;Xt|=4;try{m_(i,e);var d=im,_=Ep(e.containerInfo),T=d.focusedElem,V=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&vp(T.ownerDocument.documentElement,T)){if(V!==null&&Rf(T)){var U=V.start,X=V.end;if(X===void 0&&(X=U),"selectionStart"in T)T.selectionStart=U,T.selectionEnd=Math.min(X,T.value.length);else{var et=T.ownerDocument||document,F=et&&et.defaultView||window;if(F.getSelection){var K=F.getSelection(),dt=T.textContent.length,bt=Math.min(V.start,dt),ae=V.end===void 0?bt:Math.min(V.end,dt);!K.extend&&bt>ae&&(_=ae,ae=bt,bt=_);var P=_p(T,bt),z=_p(T,ae);if(P&&z&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==z.node||K.focusOffset!==z.offset)){var L=et.createRange();L.setStart(P.node,P.offset),K.removeAllRanges(),bt>ae?(K.addRange(L),K.extend(z.node,z.offset)):(L.setEnd(z.node,z.offset),K.addRange(L))}}}}for(et=[],K=T;K=K.parentNode;)K.nodeType===1&&et.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<et.length;T++){var J=et[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ih=!!nm,im=nm=null}finally{Xt=f,lt.p=l,Y.T=a}}e.current=i,Le=2}}function z_(){if(Le===2){Le=0;var e=Lr,i=Ya,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=lt.p;lt.p=2;var f=Xt;Xt|=4;try{u_(e,i.alternate,i)}finally{Xt=f,lt.p=l,Y.T=a}}Le=3}}function k_(){if(Le===4||Le===3){Le=0,zu();var e=Lr,i=Ya,a=ar,l=b_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Le=5:(Le=0,Ya=Lr=null,P_(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(jr=null),Fi(a),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ei,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,f=lt.p,lt.p=2,Y.T=null;try{for(var d=e.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{Y.T=i,lt.p=f}}(ar&3)!==0&&Gc(),ki(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Fd?Nl++:(Nl=0,Fd=e):Nl=0,Vl(0)}}function P_(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,fl(i)))}function Gc(){return O_(),z_(),k_(),B_()}function B_(){if(Le!==5)return!1;var e=Lr,i=Ud;Ud=0;var a=Fi(ar),l=Y.T,f=lt.p;try{lt.p=32>a?32:a,Y.T=null,a=qd,qd=null;var d=Lr,_=ar;if(Le=0,Ya=Lr=null,ar=0,(Xt&6)!==0)throw Error(r(331));var T=Xt;if(Xt|=4,v_(d.current),p_(d,d.current,_,a),Xt=T,Vl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ei,d)}catch{}return!0}finally{lt.p=f,Y.T=l,P_(e,i)}}function j_(e,i,a){i=Hn(a,i),i=Td(e.stateNode,i,2),e=Mr(e,i,2),e!==null&&(gs(e,2),ki(e))}function Wt(e,i,a){if(e.tag===3)j_(e,e,a);else for(;i!==null;){if(i.tag===3){j_(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(jr===null||!jr.has(l))){e=Hn(a,e),a=Ly(2),l=Mr(i,a,2),l!==null&&(Uy(a,l,i,e),gs(l,2),ki(l));break}}i=i.return}}function Kd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Ob;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Bd=!0,f.add(a),e=jb.bind(null,e,i,a),i.then(e,e))}function jb(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,oe===e&&(kt&a)===a&&(ve===4||ve===3&&(kt&62914560)===kt&&300>cn()-jc?(Xt&2)===0&&Xa(e,0):jd|=a,Qa===kt&&(Qa=0)),ki(e)}function L_(e,i){i===0&&(i=Uu()),e=Cs(e,i),e!==null&&(gs(e,i),ki(e))}function Lb(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),L_(e,a)}function Ub(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),L_(e,a)}function qb(e,i){return je(e,i)}var Kc=null,Ja=null,Qd=!1,Qc=!1,Yd=!1,qr=0;function ki(e){e!==Ja&&e.next===null&&(Ja===null?Kc=Ja=e:Ja=Ja.next=e),Qc=!0,Qd||(Qd=!0,Hb())}function Vl(e,i){if(!Yd&&Qc){Yd=!0;do for(var a=!1,l=Kc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-be(42|e)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,H_(l,d))}else d=kt,d=_i(l,l===oe?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ni(l,d)||(a=!0,H_(l,d));l=l.next}while(a);Yd=!1}}function Fb(){U_()}function U_(){Qc=Qd=!1;var e=0;qr!==0&&tA()&&(e=qr);for(var i=cn(),a=null,l=Kc;l!==null;){var f=l.next,d=q_(l,i);d===0?(l.next=null,a===null?Kc=f:a.next=f,f===null&&(Ja=a)):(a=l,(e!==0||(d&3)!==0)&&(Qc=!0)),l=f}Le!==0&&Le!==5||Vl(e),qr!==0&&(qr=0)}function q_(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-be(d),T=1<<_,V=f[_];V===-1?((T&a)===0||(T&l)!==0)&&(f[_]=Af(T,i)):V<=i&&(e.expiredLanes|=T),d&=~T}if(i=oe,a=kt,a=_i(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&pr(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ni(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&pr(l),Fi(a)){case 2:case 8:a=qo;break;case 32:a=yr;break;case 268435456:a=ku;break;default:a=yr}return l=F_.bind(null,e),a=je(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&pr(l),e.callbackPriority=2,e.callbackNode=null,2}function F_(e,i){if(Le!==0&&Le!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Gc()&&e.callbackNode!==a)return null;var l=kt;return l=_i(e,e===oe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(S_(e,l,i),q_(e,cn()),e.callbackNode!=null&&e.callbackNode===a?F_.bind(null,e):null)}function H_(e,i){if(Gc())return null;S_(e,i,!0)}function Hb(){nA(function(){(Xt&6)!==0?je(Uo,Fb):U_()})}function Xd(){if(qr===0){var e=ka;e===0&&(e=pi,pi<<=1,(pi&261888)===0&&(pi=256)),qr=e}return qr}function G_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ta(""+e)}function K_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Gb(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=G_((f[Fe]||null).action),_=l.submitter;_&&(i=(i=_[Fe]||null)?G_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new Ci("action","action",null,l,f);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qr!==0){var V=_?K_(f,_):new FormData(f);gd(a,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(T.preventDefault(),V=_?K_(f,_):new FormData(f),gd(a,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var Zd=0;Zd<Vf.length;Zd++){var Jd=Vf[Zd],Kb=Jd.toLowerCase(),Qb=Jd[0].toUpperCase()+Jd.slice(1);ci(Kb,"on"+Qb)}ci(Ap,"onAnimationEnd"),ci(Sp,"onAnimationIteration"),ci(xp,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(ub,"onTransitionRun"),ci(cb,"onTransitionStart"),ci(hb,"onTransitionCancel"),ci(wp,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function Q_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],V=T.instance,U=T.currentTarget;if(T=T.listener,V!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=U;try{d(f)}catch(X){lc(X)}f.currentTarget=null,d=V}else for(_=0;_<l.length;_++){if(T=l[_],V=T.instance,U=T.currentTarget,T=T.listener,V!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=U;try{d(f)}catch(X){lc(X)}f.currentTarget=null,d=V}}}}function zt(e,i){var a=i[pa];a===void 0&&(a=i[pa]=new Set);var l=e+"__bubble";a.has(l)||(Y_(i,e,2,!1),a.add(l))}function $d(e,i,a){var l=0;i&&(l|=4),Y_(a,e,l,i)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function Wd(e){if(!e[Yc]){e[Yc]=!0,Go.forEach(function(a){a!=="selectionchange"&&(Yb.has(a)||$d(a,!1,e),$d(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Yc]||(i[Yc]=!0,$d("selectionchange",!1,i))}}function Y_(e,i,a,l){switch(A0(i)){case 2:var f=bA;break;case 8:f=AA;break;default:f=mm}a=f.bind(null,i,a,e),f=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function tm(e,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var V=_.tag;if((V===3||V===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=bi(T),_===null)return;if(V=_.tag,V===5||V===6||V===26||V===27){l=d=_;continue t}T=T.parentNode}}l=l.return}Ar(function(){var U=d,X=Ln(a),et=[];t:{var F=Ip.get(e);if(F!==void 0){var K=Ci,dt=e;switch(e){case"keypress":if(As(a)===0)break t;case"keydown":case"keyup":K=sc;break;case"focusin":dt="focus",K=xs;break;case"focusout":dt="blur",K=xs;break;case"beforeblur":case"afterblur":K=xs;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=p;break;case Ap:case Sp:case xp:K=$u;break;case wp:K=A;break;case"scroll":case"scrollend":K=il;break;case"wheel":K=G;break;case"copy":case"cut":case"paste":K=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ki;break;case"toggle":case"beforetoggle":K=Rt}var bt=(i&4)!==0,ae=!bt&&(e==="scroll"||e==="scrollend"),P=bt?F!==null?F+"Capture":null:F;bt=[];for(var z=U,L;z!==null;){var J=z;if(L=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||L===null||P===null||(J=ai(z,P),J!=null&&bt.push(Ol(z,J,L))),ae)break;z=z.return}0<bt.length&&(F=new K(F,dt,null,a,X),et.push({event:F,listeners:bt}))}}if((i&7)===0){t:{if(F=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",F&&a!==tl&&(dt=a.relatedTarget||a.fromElement)&&(bi(dt)||dt[Ei]))break t;if((K||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,K?(dt=a.relatedTarget||a.toElement,K=U,dt=dt?bi(dt):null,dt!==null&&(ae=u(dt),bt=dt.tag,dt!==ae||bt!==5&&bt!==27&&bt!==6)&&(dt=null)):(K=null,dt=U),K!==dt)){if(bt=rl,J="onMouseLeave",P="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(bt=Ki,J="onPointerLeave",P="onPointerEnter",z="pointer"),ae=K==null?F:xn(K),L=dt==null?F:xn(dt),F=new bt(J,z+"leave",K,a,X),F.target=ae,F.relatedTarget=L,J=null,bi(X)===U&&(bt=new bt(P,z+"enter",dt,a,X),bt.target=L,bt.relatedTarget=ae,J=bt),ae=J,K&&dt)e:{for(bt=Xb,P=K,z=dt,L=0,J=P;J;J=bt(J))L++;J=0;for(var Et=z;Et;Et=bt(Et))J++;for(;0<L-J;)P=bt(P),L--;for(;0<J-L;)z=bt(z),J--;for(;L--;){if(P===z||z!==null&&P===z.alternate){bt=P;break e}P=bt(P),z=bt(z)}bt=null}else bt=null;K!==null&&X_(et,F,K,bt,!1),dt!==null&&ae!==null&&X_(et,ae,dt,bt,!0)}}t:{if(F=U?xn(U):window,K=F.nodeName&&F.nodeName.toLowerCase(),K==="select"||K==="input"&&F.type==="file")var Gt=fp;else if(cp(F))if(dp)Gt=ab;else{Gt=rb;var pt=ib}else K=F.nodeName,!K||K.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?U&&Ea(U.elementType)&&(Gt=fp):Gt=sb;if(Gt&&(Gt=Gt(e,U))){hp(et,Gt,a,X);break t}pt&&pt(e,F,U),e==="focusout"&&U&&F.type==="number"&&U.memoizedProps.value!=null&&Jo(F,"number",F.value)}switch(pt=U?xn(U):window,e){case"focusin":(cp(pt)||pt.contentEditable==="true")&&(Ra=pt,Cf=U,ul=null);break;case"focusout":ul=Cf=Ra=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,Tp(et,a,X);break;case"selectionchange":if(lb)break;case"keydown":case"keyup":Tp(et,a,X)}var Nt;if(Yt)t:{switch(e){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Ia?ws(e,a)&&(Pt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Pt="onCompositionStart");Pt&&(Vi&&a.locale!=="ko"&&(Ia||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ia&&(Nt=nl()):(Ri=X,el="value"in Ri?Ri.value:Ri.textContent,Ia=!0)),pt=Xc(U,Pt),0<pt.length&&(Pt=new Ni(Pt,e,null,a,X),et.push({event:Pt,listeners:pt}),Nt?Pt.data=Nt:(Nt=wa(a),Nt!==null&&(Pt.data=Nt)))),(Nt=qn?W1(e,a):tb(e,a))&&(Pt=Xc(U,"onBeforeInput"),0<Pt.length&&(pt=new Ni("onBeforeInput","beforeinput",null,a,X),et.push({event:pt,listeners:Pt}),pt.data=Nt)),Gb(et,e,U,a,X)}Q_(et,i)})}function Ol(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Xc(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ai(e,a),f!=null&&l.unshift(Ol(e,f,d)),f=ai(e,i),f!=null&&l.push(Ol(e,f,d))),e.tag===3)return l;e=e.return}return[]}function Xb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function X_(e,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,V=T.alternate,U=T.stateNode;if(T=T.tag,V!==null&&V===l)break;T!==5&&T!==26&&T!==27||U===null||(V=U,f?(U=ai(a,d),U!=null&&_.unshift(Ol(a,U,V))):f||(U=ai(a,d),U!=null&&_.push(Ol(a,U,V)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var Zb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function Z_(e){return(typeof e=="string"?e:""+e).replace(Zb,`
`).replace(Jb,"")}function J_(e,i){return i=Z_(i),Z_(e)===i}function se(e,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||yn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&yn(e,""+l);break;case"className":wn(e,"class",l);break;case"tabIndex":wn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(e,a,l);break;case"style":Wo(e,l,d);break;case"data":if(i!=="object"){wn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ta(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&se(e,i,"name",f.name,f,null),se(e,i,"formEncType",f.formEncType,f,null),se(e,i,"formMethod",f.formMethod,f,null),se(e,i,"formTarget",f.formTarget,f,null)):(se(e,i,"encType",f.encType,f,null),se(e,i,"method",f.method,f,null),se(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ta(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=si);break;case"onScroll":l!=null&&zt("scroll",e);break;case"onScrollEnd":l!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ta(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":zt("beforetoggle",e),zt("toggle",e),_a(e,"popover",l);break;case"xlinkActuate":De(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":De(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":De(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":De(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":De(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":De(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":De(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":De(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":De(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xu.get(a)||a,_a(e,a,l))}}function em(e,i,a,l,f,d){switch(a){case"style":Wo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?yn(e,l):(typeof l=="number"||typeof l=="bigint")&&yn(e,""+l);break;case"onScroll":l!=null&&zt("scroll",e);break;case"onScrollEnd":l!=null&&zt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[Fe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):_a(e,a,l)}}}function We(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:se(e,i,d,_,a,null)}}f&&se(e,i,"srcSet",a.srcSet,a,null),l&&se(e,i,"src",a.src,a,null);return;case"input":zt("invalid",e);var T=d=_=f=null,V=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":f=X;break;case"type":_=X;break;case"checked":V=X;break;case"defaultChecked":U=X;break;case"value":d=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:se(e,i,l,X,a,null)}}Ku(e,d,T,V,U,_,f,!1);return;case"select":zt("invalid",e),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:se(e,i,f,T,a,null)}i=d,a=_,e.multiple=!!l,i!=null?vr(e,!!l,i,!1):a!=null&&vr(e,!!l,a,!0);return;case"textarea":zt("invalid",e),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:se(e,i,_,T,a,null)}Er(e,l,f,d);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:se(e,i,V,l,a,null)}return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(l=0;l<Ml.length;l++)zt(Ml[l],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:se(e,i,U,l,a,null)}return;default:if(Ea(i)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&em(e,i,X,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&se(e,i,T,l,a,null))}function $b(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,V=null,U=null,X=null;for(K in a){var et=a[K];if(a.hasOwnProperty(K)&&et!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":V=et;default:l.hasOwnProperty(K)||se(e,i,K,null,l,et)}}for(var F in l){var K=l[F];if(et=a[F],l.hasOwnProperty(F)&&(K!=null||et!=null))switch(F){case"type":d=K;break;case"name":f=K;break;case"checked":U=K;break;case"defaultChecked":X=K;break;case"value":_=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:K!==et&&se(e,i,F,K,l,et)}}va(e,_,T,V,U,X,d,f);return;case"select":K=_=T=F=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":K=V;default:l.hasOwnProperty(d)||se(e,i,d,null,l,V)}for(f in l)if(d=l[f],V=a[f],l.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":F=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==V&&se(e,i,f,d,l,V)}i=T,a=_,l=K,F!=null?vr(e,!!a,F,!1):!!l!=!!a&&(i!=null?vr(e,!!a,i,!0):vr(e,!!a,a?[]:"",!1));return;case"textarea":K=F=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:se(e,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":F=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&se(e,i,_,f,l,d)}Qu(e,F,K);return;case"option":for(var dt in a)if(F=a[dt],a.hasOwnProperty(dt)&&F!=null&&!l.hasOwnProperty(dt))switch(dt){case"selected":e.selected=!1;break;default:se(e,i,dt,null,l,F)}for(V in l)if(F=l[V],K=a[V],l.hasOwnProperty(V)&&F!==K&&(F!=null||K!=null))switch(V){case"selected":e.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:se(e,i,V,F,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in a)F=a[bt],a.hasOwnProperty(bt)&&F!=null&&!l.hasOwnProperty(bt)&&se(e,i,bt,null,l,F);for(U in l)if(F=l[U],K=a[U],l.hasOwnProperty(U)&&F!==K&&(F!=null||K!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:se(e,i,U,F,l,K)}return;default:if(Ea(i)){for(var ae in a)F=a[ae],a.hasOwnProperty(ae)&&F!==void 0&&!l.hasOwnProperty(ae)&&em(e,i,ae,void 0,l,F);for(X in l)F=l[X],K=a[X],!l.hasOwnProperty(X)||F===K||F===void 0&&K===void 0||em(e,i,X,F,l,K);return}}for(var P in a)F=a[P],a.hasOwnProperty(P)&&F!=null&&!l.hasOwnProperty(P)&&se(e,i,P,null,l,F);for(et in l)F=l[et],K=a[et],!l.hasOwnProperty(et)||F===K||F==null&&K==null||se(e,i,et,F,l,K)}function $_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Wb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&$_(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var V=a[l],U=V.startTime;if(U>T)break;var X=V.transferSize,et=V.initiatorType;X&&$_(et)&&(V=V.responseEnd,_+=X*(V<T?1:(T-U)/(V-U)))}if(--l,i+=8*(d+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nm=null,im=null;function Zc(e){return e.nodeType===9?e:e.ownerDocument}function W_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t0(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function rm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sm=null;function tA(){var e=window.event;return e&&e.type==="popstate"?e===sm?!1:(sm=e,!0):(sm=null,!1)}var e0=typeof setTimeout=="function"?setTimeout:void 0,eA=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(e){return n0.resolve(null).then(e).catch(iA)}:e0;function iA(e){setTimeout(function(){throw e})}function Fr(e){return e==="head"}function i0(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),eo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")zl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,zl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Ti]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&zl(e.ownerDocument.body);a=f}while(a);eo(i)}function r0(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function am(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":am(a),ya(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function rA(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ti])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Xn(e.nextSibling),e===null)break}return null}function sA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Xn(e.nextSibling),e===null))return null;return e}function s0(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Xn(e.nextSibling),e===null))return null;return e}function om(e){return e.data==="$?"||e.data==="$~"}function lm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function aA(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Xn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var um=null;function a0(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Xn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function o0(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function l0(e,i,a){switch(i=Zc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function zl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ya(e)}var Zn=new Map,u0=new Set;function Jc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var or=lt.d;lt.d={f:oA,r:lA,D:uA,C:cA,L:hA,m:fA,X:mA,S:dA,M:gA};function oA(){var e=or.f(),i=qc();return e||i}function lA(e){var i=jn(e);i!==null&&i.tag===5&&i.type==="form"?wy(i):or.r(e)}var $a=typeof document>"u"?null:document;function c0(e,i,a){var l=$a;if(l&&typeof i=="string"&&i){var f=pn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),u0.has(f)||(u0.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),We(i,"link",e),Ce(i),l.head.appendChild(i)))}}function uA(e){or.D(e),c0("dns-prefetch",e,null)}function cA(e,i){or.C(e,i),c0("preconnect",e,i)}function hA(e,i,a){or.L(e,i,a);var l=$a;if(l&&e&&i){var f='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+pn(a.imageSizes)+'"]')):f+='[href="'+pn(e)+'"]';var d=f;switch(i){case"style":d=Wa(e);break;case"script":d=to(e)}Zn.has(d)||(e=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Zn.set(d,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(kl(d))||i==="script"&&l.querySelector(Pl(d))||(i=l.createElement("link"),We(i,"link",e),Ce(i),l.head.appendChild(i)))}}function fA(e,i){or.m(e,i);var a=$a;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+pn(l)+'"][href="'+pn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=to(e)}if(!Zn.has(d)&&(e=b({rel:"modulepreload",href:e},i),Zn.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(d)))return}l=a.createElement("link"),We(l,"link",e),Ce(l),a.head.appendChild(l)}}}function dA(e,i,a){or.S(e,i,a);var l=$a;if(l&&e){var f=Ai(l).hoistableStyles,d=Wa(e);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(kl(d)))T.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Zn.get(d))&&cm(e,a);var V=_=l.createElement("link");Ce(V),We(V,"link",e),V._p=new Promise(function(U,X){V.onload=U,V.onerror=X}),V.addEventListener("load",function(){T.loading|=1}),V.addEventListener("error",function(){T.loading|=2}),T.loading|=4,$c(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function mA(e,i){or.X(e,i);var a=$a;if(a&&e){var l=Ai(a).hoistableScripts,f=to(e),d=l.get(f);d||(d=a.querySelector(Pl(f)),d||(e=b({src:e,async:!0},i),(i=Zn.get(f))&&hm(e,i),d=a.createElement("script"),Ce(d),We(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function gA(e,i){or.M(e,i);var a=$a;if(a&&e){var l=Ai(a).hoistableScripts,f=to(e),d=l.get(f);d||(d=a.querySelector(Pl(f)),d||(e=b({src:e,async:!0,type:"module"},i),(i=Zn.get(f))&&hm(e,i),d=a.createElement("script"),Ce(d),We(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function h0(e,i,a,l){var f=(f=Dt.current)?Jc(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Wa(a.href),a=Ai(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Wa(a.href);var d=Ai(f).hoistableStyles,_=d.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=f.querySelector(kl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Zn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(e,a),d||pA(f,e,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=to(a),a=Ai(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Wa(e){return'href="'+pn(e)+'"'}function kl(e){return'link[rel="stylesheet"]['+e+"]"}function f0(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function pA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),We(i,"link",a),Ce(i),e.head.appendChild(i))}function to(e){return'[src="'+pn(e)+'"]'}function Pl(e){return"script[async]"+e}function d0(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+pn(a.href)+'"]');if(l)return i.instance=l,Ce(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ce(l),We(l,"style",f),$c(l,a.precedence,e),i.instance=l;case"stylesheet":f=Wa(a.href);var d=e.querySelector(kl(f));if(d)return i.state.loading|=4,i.instance=d,Ce(d),d;l=f0(a),(f=Zn.get(f))&&cm(l,f),d=(e.ownerDocument||e).createElement("link"),Ce(d);var _=d;return _._p=new Promise(function(T,V){_.onload=T,_.onerror=V}),We(d,"link",l),i.state.loading|=4,$c(d,a.precedence,e),i.instance=d;case"script":return d=to(a.src),(f=e.querySelector(Pl(d)))?(i.instance=f,Ce(f),f):(l=a,(f=Zn.get(d))&&(l=b({},a),hm(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ce(f),We(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,$c(l,a.precedence,e));return i.instance}function $c(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function cm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function hm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Wc=null;function m0(e,i,a){if(Wc===null){var l=new Map,f=Wc=new Map;f.set(a,l)}else f=Wc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Ti]||d[Re]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=e+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function g0(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function yA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function p0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _A(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Wa(l.href),d=i.querySelector(kl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=th.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Ce(d);return}d=i.ownerDocument||i,l=f0(l),(f=Zn.get(f))&&cm(l,f),d=d.createElement("link"),Ce(d);var _=d;_._p=new Promise(function(T,V){_.onload=T,_.onerror=V}),We(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=th.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var fm=0;function vA(e,i){return e.stylesheets&&e.count===0&&nh(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&nh(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&fm===0&&(fm=62500*Wb());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&nh(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>fm?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var eh=null;function nh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,eh=new Map,i.forEach(EA,e),eh=null,th.call(e))}function EA(e,i){if(!(i.state.loading&4)){var a=eh.get(e);if(a)var l=a.get(null);else{a=new Map,eh.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=th.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Bl={$$typeof:tt,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function TA(e,i,a,l,f,d,_,T,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function y0(e,i,a,l,f,d,_,T,V,U,X,et){return e=new TA(e,i,a,_,V,U,X,et,T),i=1,d===!0&&(i|=24),d=Rn(3,null,null,i),e.current=d,d.stateNode=e,i=Gf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Xf(d),e}function _0(e){return e?(e=Na,e):Na}function v0(e,i,a,l,f,d){f=_0(f),l.context===null?l.context=f:l.pendingContext=f,l=Vr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Mr(e,l,i),a!==null&&(bn(a,e,i),pl(a,e,i))}function E0(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function dm(e,i){E0(e,i),(e=e.alternate)&&E0(e,i)}function T0(e){if(e.tag===13||e.tag===31){var i=Cs(e,67108864);i!==null&&bn(i,e,67108864),dm(e,67108864)}}function b0(e){if(e.tag===13||e.tag===31){var i=Mn();i=ys(i);var a=Cs(e,i);a!==null&&bn(a,e,i),dm(e,i)}}var ih=!0;function bA(e,i,a,l){var f=Y.T;Y.T=null;var d=lt.p;try{lt.p=2,mm(e,i,a,l)}finally{lt.p=d,Y.T=f}}function AA(e,i,a,l){var f=Y.T;Y.T=null;var d=lt.p;try{lt.p=8,mm(e,i,a,l)}finally{lt.p=d,Y.T=f}}function mm(e,i,a,l){if(ih){var f=gm(l);if(f===null)tm(e,i,l,rh,a),S0(e,l);else if(xA(f,e,i,a,l))l.stopPropagation();else if(S0(e,l),i&4&&-1<SA.indexOf(e)){for(;f!==null;){var d=jn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=yi(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var V=1<<31-be(_);T.entanglements[1]|=V,_&=~V}ki(d),(Xt&6)===0&&(Lc=cn()+500,Vl(0))}}break;case 31:case 13:T=Cs(d,2),T!==null&&bn(T,d,2),qc(),dm(d,2)}if(d=gm(l),d===null&&tm(e,i,l,rh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else tm(e,i,l,null,a)}}function gm(e){return e=Ln(e),pm(e)}var rh=null;function pm(e){if(rh=null,e=bi(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=h(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return rh=e,null}function A0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ds()){case Uo:return 2;case qo:return 8;case yr:case bf:return 32;case ku:return 268435456;default:return 32}default:return 32}}var ym=!1,Hr=null,Gr=null,Kr=null,jl=new Map,Ll=new Map,Qr=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S0(e,i){switch(e){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":jl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(i.pointerId)}}function Ul(e,i,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=jn(i),i!==null&&T0(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function xA(e,i,a,l,f){switch(i){case"focusin":return Hr=Ul(Hr,e,i,a,l,f),!0;case"dragenter":return Gr=Ul(Gr,e,i,a,l,f),!0;case"mouseover":return Kr=Ul(Kr,e,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return jl.set(d,Ul(jl.get(d)||null,e,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Ll.set(d,Ul(Ll.get(d)||null,e,i,a,l,f)),!0}return!1}function x0(e){var i=bi(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){e.blockedOn=i,ii(e.priority,function(){b0(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,ii(e.priority,function(){b0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=gm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);tl=l,a.target.dispatchEvent(l),tl=null}else return i=jn(a),i!==null&&T0(i),e.blockedOn=a,!1;i.shift()}return!0}function w0(e,i,a){sh(e)&&a.delete(i)}function wA(){ym=!1,Hr!==null&&sh(Hr)&&(Hr=null),Gr!==null&&sh(Gr)&&(Gr=null),Kr!==null&&sh(Kr)&&(Kr=null),jl.forEach(w0),Ll.forEach(w0)}function ah(e,i){e.blockedOn===i&&(e.blockedOn=null,ym||(ym=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wA)))}var oh=null;function I0(e){oh!==e&&(oh=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){oh===e&&(oh=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(pm(l||a)===null)continue;break}var d=jn(a);d!==null&&(e.splice(i,3),i-=3,gd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function eo(e){function i(V){return ah(V,e)}Hr!==null&&ah(Hr,e),Gr!==null&&ah(Gr,e),Kr!==null&&ah(Kr,e),jl.forEach(i),Ll.forEach(i);for(var a=0;a<Qr.length;a++){var l=Qr[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Qr.length&&(a=Qr[0],a.blockedOn===null);)x0(a),a.blockedOn===null&&Qr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Fe]||null;if(typeof d=="function")_||I0(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Fe]||null)T=_.formAction;else if(pm(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),I0(a)}}}function R0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function _m(e){this._internalRoot=e}lh.prototype.render=_m.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Mn();v0(a,l,e,i,null,null)},lh.prototype.unmount=_m.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;v0(e.current,2,null,e,null,null),qc(),i[Ei]=null}};function lh(e){this._internalRoot=e}lh.prototype.unstable_scheduleHydration=function(e){if(e){var i=qu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Qr.length&&i!==0&&i<Qr[a].priority;a++);Qr.splice(a,0,e),a===0&&x0(e)}};var C0=t.version;if(C0!=="19.2.3")throw Error(r(527,C0,"19.2.3"));lt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var IA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{ei=uh.inject(IA),Ye=uh}catch{}}return Fl.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",f=ky,d=Py,_=By;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=y0(e,1,!1,null,null,a,l,null,f,d,_,R0),e[Ei]=i.current,Wd(e),new _m(i)},Fl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,f="",d=ky,_=Py,T=By,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),i=y0(e,1,!0,i,a??null,l,f,V,d,_,T,R0),i.context=_0(null),a=i.current,l=Mn(),l=ys(l),f=Vr(l),f.callback=null,Mr(a,f,l),a=l,i.current.lanes=a,gs(i,a),ki(i),e[Ei]=i.current,Wd(e),new lh(i)},Fl.version="19.2.3",Fl}var j0;function PA(){if(j0)return Tm.exports;j0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Tm.exports=kA(),Tm.exports}var BA=PA();const jA=TE(BA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UA=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),L0=s=>{const t=UA(s);return t.charAt(0).toUpperCase()+t.slice(1)},bE=(...s)=>s.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),qA=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=ct.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:h,...m},g)=>ct.createElement("svg",{ref:g,...FA,width:t,height:t,stroke:s,strokeWidth:r?Number(n)*24/Number(t):n,className:bE("lucide",o),...!u&&!qA(m)&&{"aria-hidden":"true"},...m},[...h.map(([y,E])=>ct.createElement(y,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=(s,t)=>{const n=ct.forwardRef(({className:r,...o},u)=>ct.createElement(HA,{ref:u,iconNode:t,className:bE(`lucide-${LA(L0(s))}`,`lucide-${s}`,r),...o}));return n.displayName=L0(s),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],KA=gn("arrow-left",GA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],YA=gn("bookmark",QA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ZA=gn("chevron-left",XA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$A=gn("chevron-right",JA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tS=gn("file-text",WA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],nS=gn("folder",eS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rS=gn("grip-vertical",iS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],AE=gn("house",sS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],oS=gn("layout-dashboard",aS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],uS=gn("lock-open",lS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Bm=gn("lock",cS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fS=gn("plus",hS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mS=gn("save",dS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],pS=gn("sticky-note",gS);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_S=gn("trash-2",yS),Qt={Plus:fS,Trash:_S,Save:mS,File:tS,Folder:nS,Memo:pS,ChevronRight:$A,ChevronLeft:ZA,Dashboard:oS,DragHandle:rS,Back:KA,Bookmark:YA,Home:AE},vS=()=>{};var U0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},ES=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],m=s[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,O=y&63;g||(O=64,h||(S=64)),r.push(n[E],n[b],n[S],n[O])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(SE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):ES(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const b=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||b==null)throw new TS;const S=u<<2|m>>4;if(r.push(S),y!==64){const O=m<<4&240|y>>2;if(r.push(O),b!==64){const H=y<<6&192|b;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class TS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bS=function(s){const t=SE(s);return xE.encodeByteArray(t,!0)},Dh=function(s){return bS(s).replace(/\./g,"")},AS=function(s){try{return xE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=()=>wE().__FIREBASE_DEFAULTS__,xS=()=>{if(typeof process>"u"||typeof U0>"u")return;const s=U0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},wS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&AS(s[1]);return t&&JSON.parse(t)},_g=()=>{try{return vS()||SS()||xS()||wS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},IS=s=>{var t,n;return(n=(t=_g())==null?void 0:t.emulatorHosts)==null?void 0:n[s]},RS=s=>{const t=IS(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},IE=()=>{var s;return(s=_g())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DS(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Dh(JSON.stringify(n)),Dh(JSON.stringify(h)),""].join(".")}const Wl={};function VS(){const s={prod:[],emulator:[]};for(const t of Object.keys(Wl))Wl[t]?s.emulator.push(t):s.prod.push(t);return s}function MS(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let q0=!1;function OS(s,t){if(typeof window>"u"||typeof document>"u"||!vg(window.location.host)||Wl[s]===t||Wl[s]||q0)return;Wl[s]=t;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=VS().prod.length>0;function h(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{q0=!0,h()},S}function E(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=MS(r),O=n("text"),H=document.getElementById(O)||document.createElement("span"),q=n("learnmore"),Q=document.getElementById(q)||document.createElement("a"),rt=n("preprendIcon"),W=document.getElementById(rt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const tt=S.element;m(tt),E(Q,q);const it=y();g(W,rt),tt.append(W,H,Q,it),document.body.appendChild(tt)}u?(H.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RE(){var t;const s=(t=_g())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CE(){return!RE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DE(){return!RE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function NE(){try{return typeof indexedDB=="object"}catch{return!1}}function zS(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="FirebaseError";class Mo extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=kS,Object.setPrototypeOf(this,Mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,VE.prototype.create)}}class VE{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?PS(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Mo(o,m,r)}}function PS(s,t){return s.replace(BS,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const BS=/\{\$([^}]+)}/g;function Vh(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const u=s[o],h=t[o];if(F0(u)&&F0(h)){if(!Vh(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function F0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(s){return s&&s._delegate?s._delegate:s}class lu{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new CS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(US(t))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Hs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Hs){return this.instances.has(t)}getOptions(t=Hs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LS(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Hs){return this.component?this.component.multipleInstances?t:Hs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LS(s){return s===Hs?void 0:s}function US(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new jS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ft||(Ft={}));const FS={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},HS=Ft.INFO,GS={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},KS=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=GS[t];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ME{constructor(t){this.name=t,this._logLevel=HS,this._logHandler=KS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?FS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const QS=(s,t)=>t.some(n=>s instanceof n);let H0,G0;function YS(){return H0||(H0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XS(){return G0||(G0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OE=new WeakMap,jm=new WeakMap,zE=new WeakMap,xm=new WeakMap,Eg=new WeakMap;function ZS(s){const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(ts(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(n=>{n instanceof IDBCursor&&OE.set(n,s)}).catch(()=>{}),Eg.set(t,s),t}function JS(s){if(jm.has(s))return;const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});jm.set(s,t)}let Lm={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return jm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||zE.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function $S(s){Lm=s(Lm)}function WS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(wm(this),t,...n);return zE.set(r,t.sort?t.sort():[t]),ts(r)}:XS().includes(s)?function(...t){return s.apply(wm(this),t),ts(OE.get(this))}:function(...t){return ts(s.apply(wm(this),t))}}function tx(s){return typeof s=="function"?WS(s):(s instanceof IDBTransaction&&JS(s),QS(s,YS())?new Proxy(s,Lm):s)}function ts(s){if(s instanceof IDBRequest)return ZS(s);if(xm.has(s))return xm.get(s);const t=tx(s);return t!==s&&(xm.set(s,t),Eg.set(t,s)),t}const wm=s=>Eg.get(s);function ex(s,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),m=ts(h);return r&&h.addEventListener("upgradeneeded",g=>{r(ts(h.result),g.oldVersion,g.newVersion,ts(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const nx=["get","getKey","getAll","getAllKeys","count"],ix=["put","add","delete","clear"],Im=new Map;function K0(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Im.get(t))return Im.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=ix.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||nx.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Im.set(t,u),u}$S(s=>({...s,get:(t,n,r)=>K0(t,n)||s.get(t,n,r),has:(t,n)=>!!K0(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sx(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Um="@firebase/app",Q0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new ME("@firebase/app"),ax="@firebase/app-compat",ox="@firebase/analytics-compat",lx="@firebase/analytics",ux="@firebase/app-check-compat",cx="@firebase/app-check",hx="@firebase/auth",fx="@firebase/auth-compat",dx="@firebase/database",mx="@firebase/data-connect",gx="@firebase/database-compat",px="@firebase/functions",yx="@firebase/functions-compat",_x="@firebase/installations",vx="@firebase/installations-compat",Ex="@firebase/messaging",Tx="@firebase/messaging-compat",bx="@firebase/performance",Ax="@firebase/performance-compat",Sx="@firebase/remote-config",xx="@firebase/remote-config-compat",wx="@firebase/storage",Ix="@firebase/storage-compat",Rx="@firebase/firestore",Cx="@firebase/ai",Dx="@firebase/firestore-compat",Nx="firebase",Vx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",Mx={[Um]:"fire-core",[ax]:"fire-core-compat",[lx]:"fire-analytics",[ox]:"fire-analytics-compat",[cx]:"fire-app-check",[ux]:"fire-app-check-compat",[hx]:"fire-auth",[fx]:"fire-auth-compat",[dx]:"fire-rtdb",[mx]:"fire-data-connect",[gx]:"fire-rtdb-compat",[px]:"fire-fn",[yx]:"fire-fn-compat",[_x]:"fire-iid",[vx]:"fire-iid-compat",[Ex]:"fire-fcm",[Tx]:"fire-fcm-compat",[bx]:"fire-perf",[Ax]:"fire-perf-compat",[Sx]:"fire-rc",[xx]:"fire-rc-compat",[wx]:"fire-gcs",[Ix]:"fire-gcs-compat",[Rx]:"fire-fst",[Dx]:"fire-fst-compat",[Cx]:"fire-vertex","fire-js":"fire-js",[Nx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map,Ox=new Map,Fm=new Map;function Y0(s,t){try{s.container.addComponent(t)}catch(n){cr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function Oh(s){const t=s.name;if(Fm.has(t))return cr.debug(`There were multiple attempts to register component ${t}.`),!1;Fm.set(t,s);for(const n of Mh.values())Y0(n,s);for(const n of Ox.values())Y0(n,s);return!0}function zx(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function kx(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new VE("app","Firebase",Px);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=Vx;function kE(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r={name:qm,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw es.create("bad-app-name",{appName:String(o)});if(n||(n=IE()),!n)throw es.create("no-options");const u=Mh.get(o);if(u){if(Vh(n,u.options)&&Vh(r,u.config))return u;throw es.create("duplicate-app",{appName:o})}const h=new qS(o);for(const g of Fm.values())h.addComponent(g);const m=new Bx(n,r,h);return Mh.set(o,m),m}function Lx(s=qm){const t=Mh.get(s);if(!t&&s===qm&&IE())return kE();if(!t)throw es.create("no-app",{appName:s});return t}function po(s,t,n){let r=Mx[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${r}" with version "${t}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cr.warn(h.join(" "));return}Oh(new lu(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebase-heartbeat-database",qx=1,uu="firebase-heartbeat-store";let Rm=null;function PE(){return Rm||(Rm=ex(Ux,qx,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(s=>{throw es.create("idb-open",{originalErrorMessage:s.message})})),Rm}async function Fx(s){try{const n=(await PE()).transaction(uu),r=await n.objectStore(uu).get(BE(s));return await n.done,r}catch(t){if(t instanceof Mo)cr.warn(t.message);else{const n=es.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});cr.warn(n.message)}}}async function X0(s,t){try{const r=(await PE()).transaction(uu,"readwrite");await r.objectStore(uu).put(t,BE(s)),await r.done}catch(n){if(n instanceof Mo)cr.warn(n.message);else{const r=es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cr.warn(r.message)}}}function BE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=1024,Gx=30;class Kx{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Yx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Z0();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>Gx){const h=Xx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){cr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Z0(),{heartbeatsToSend:r,unsentEntries:o}=Qx(this._heartbeatsCache.heartbeats),u=Dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return cr.warn(n),""}}}function Z0(){return new Date().toISOString().substring(0,10)}function Qx(s,t=Hx){const n=[];let r=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),J0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),J0(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Yx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NE()?zS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return X0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return X0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function J0(s){return Dh(JSON.stringify({version:2,heartbeats:s})).length}function Xx(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(s){Oh(new lu("platform-logger",t=>new rx(t),"PRIVATE")),Oh(new lu("heartbeat",t=>new Kx(t),"PRIVATE")),po(Um,Q0,s),po(Um,Q0,"esm2020"),po("fire-js","")}Zx("");var Jx="firebase",$x="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(Jx,$x,"app");var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,jE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,I){function D(){}D.prototype=I.prototype,C.F=I.prototype,C.prototype=new D,C.prototype.constructor=C,C.D=function(x,R,k){for(var N=Array(arguments.length-2),le=2;le<arguments.length;le++)N[le-2]=arguments[le];return I.prototype[R].apply(x,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,I,D){D||(D=0);const x=Array(16);if(typeof I=="string")for(var R=0;R<16;++R)x[R]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(R=0;R<16;++R)x[R]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=C.g[0],D=C.g[1],R=C.g[2];let k=C.g[3],N;N=I+(k^D&(R^k))+x[0]+3614090360&4294967295,I=D+(N<<7&4294967295|N>>>25),N=k+(R^I&(D^R))+x[1]+3905402710&4294967295,k=I+(N<<12&4294967295|N>>>20),N=R+(D^k&(I^D))+x[2]+606105819&4294967295,R=k+(N<<17&4294967295|N>>>15),N=D+(I^R&(k^I))+x[3]+3250441966&4294967295,D=R+(N<<22&4294967295|N>>>10),N=I+(k^D&(R^k))+x[4]+4118548399&4294967295,I=D+(N<<7&4294967295|N>>>25),N=k+(R^I&(D^R))+x[5]+1200080426&4294967295,k=I+(N<<12&4294967295|N>>>20),N=R+(D^k&(I^D))+x[6]+2821735955&4294967295,R=k+(N<<17&4294967295|N>>>15),N=D+(I^R&(k^I))+x[7]+4249261313&4294967295,D=R+(N<<22&4294967295|N>>>10),N=I+(k^D&(R^k))+x[8]+1770035416&4294967295,I=D+(N<<7&4294967295|N>>>25),N=k+(R^I&(D^R))+x[9]+2336552879&4294967295,k=I+(N<<12&4294967295|N>>>20),N=R+(D^k&(I^D))+x[10]+4294925233&4294967295,R=k+(N<<17&4294967295|N>>>15),N=D+(I^R&(k^I))+x[11]+2304563134&4294967295,D=R+(N<<22&4294967295|N>>>10),N=I+(k^D&(R^k))+x[12]+1804603682&4294967295,I=D+(N<<7&4294967295|N>>>25),N=k+(R^I&(D^R))+x[13]+4254626195&4294967295,k=I+(N<<12&4294967295|N>>>20),N=R+(D^k&(I^D))+x[14]+2792965006&4294967295,R=k+(N<<17&4294967295|N>>>15),N=D+(I^R&(k^I))+x[15]+1236535329&4294967295,D=R+(N<<22&4294967295|N>>>10),N=I+(R^k&(D^R))+x[1]+4129170786&4294967295,I=D+(N<<5&4294967295|N>>>27),N=k+(D^R&(I^D))+x[6]+3225465664&4294967295,k=I+(N<<9&4294967295|N>>>23),N=R+(I^D&(k^I))+x[11]+643717713&4294967295,R=k+(N<<14&4294967295|N>>>18),N=D+(k^I&(R^k))+x[0]+3921069994&4294967295,D=R+(N<<20&4294967295|N>>>12),N=I+(R^k&(D^R))+x[5]+3593408605&4294967295,I=D+(N<<5&4294967295|N>>>27),N=k+(D^R&(I^D))+x[10]+38016083&4294967295,k=I+(N<<9&4294967295|N>>>23),N=R+(I^D&(k^I))+x[15]+3634488961&4294967295,R=k+(N<<14&4294967295|N>>>18),N=D+(k^I&(R^k))+x[4]+3889429448&4294967295,D=R+(N<<20&4294967295|N>>>12),N=I+(R^k&(D^R))+x[9]+568446438&4294967295,I=D+(N<<5&4294967295|N>>>27),N=k+(D^R&(I^D))+x[14]+3275163606&4294967295,k=I+(N<<9&4294967295|N>>>23),N=R+(I^D&(k^I))+x[3]+4107603335&4294967295,R=k+(N<<14&4294967295|N>>>18),N=D+(k^I&(R^k))+x[8]+1163531501&4294967295,D=R+(N<<20&4294967295|N>>>12),N=I+(R^k&(D^R))+x[13]+2850285829&4294967295,I=D+(N<<5&4294967295|N>>>27),N=k+(D^R&(I^D))+x[2]+4243563512&4294967295,k=I+(N<<9&4294967295|N>>>23),N=R+(I^D&(k^I))+x[7]+1735328473&4294967295,R=k+(N<<14&4294967295|N>>>18),N=D+(k^I&(R^k))+x[12]+2368359562&4294967295,D=R+(N<<20&4294967295|N>>>12),N=I+(D^R^k)+x[5]+4294588738&4294967295,I=D+(N<<4&4294967295|N>>>28),N=k+(I^D^R)+x[8]+2272392833&4294967295,k=I+(N<<11&4294967295|N>>>21),N=R+(k^I^D)+x[11]+1839030562&4294967295,R=k+(N<<16&4294967295|N>>>16),N=D+(R^k^I)+x[14]+4259657740&4294967295,D=R+(N<<23&4294967295|N>>>9),N=I+(D^R^k)+x[1]+2763975236&4294967295,I=D+(N<<4&4294967295|N>>>28),N=k+(I^D^R)+x[4]+1272893353&4294967295,k=I+(N<<11&4294967295|N>>>21),N=R+(k^I^D)+x[7]+4139469664&4294967295,R=k+(N<<16&4294967295|N>>>16),N=D+(R^k^I)+x[10]+3200236656&4294967295,D=R+(N<<23&4294967295|N>>>9),N=I+(D^R^k)+x[13]+681279174&4294967295,I=D+(N<<4&4294967295|N>>>28),N=k+(I^D^R)+x[0]+3936430074&4294967295,k=I+(N<<11&4294967295|N>>>21),N=R+(k^I^D)+x[3]+3572445317&4294967295,R=k+(N<<16&4294967295|N>>>16),N=D+(R^k^I)+x[6]+76029189&4294967295,D=R+(N<<23&4294967295|N>>>9),N=I+(D^R^k)+x[9]+3654602809&4294967295,I=D+(N<<4&4294967295|N>>>28),N=k+(I^D^R)+x[12]+3873151461&4294967295,k=I+(N<<11&4294967295|N>>>21),N=R+(k^I^D)+x[15]+530742520&4294967295,R=k+(N<<16&4294967295|N>>>16),N=D+(R^k^I)+x[2]+3299628645&4294967295,D=R+(N<<23&4294967295|N>>>9),N=I+(R^(D|~k))+x[0]+4096336452&4294967295,I=D+(N<<6&4294967295|N>>>26),N=k+(D^(I|~R))+x[7]+1126891415&4294967295,k=I+(N<<10&4294967295|N>>>22),N=R+(I^(k|~D))+x[14]+2878612391&4294967295,R=k+(N<<15&4294967295|N>>>17),N=D+(k^(R|~I))+x[5]+4237533241&4294967295,D=R+(N<<21&4294967295|N>>>11),N=I+(R^(D|~k))+x[12]+1700485571&4294967295,I=D+(N<<6&4294967295|N>>>26),N=k+(D^(I|~R))+x[3]+2399980690&4294967295,k=I+(N<<10&4294967295|N>>>22),N=R+(I^(k|~D))+x[10]+4293915773&4294967295,R=k+(N<<15&4294967295|N>>>17),N=D+(k^(R|~I))+x[1]+2240044497&4294967295,D=R+(N<<21&4294967295|N>>>11),N=I+(R^(D|~k))+x[8]+1873313359&4294967295,I=D+(N<<6&4294967295|N>>>26),N=k+(D^(I|~R))+x[15]+4264355552&4294967295,k=I+(N<<10&4294967295|N>>>22),N=R+(I^(k|~D))+x[6]+2734768916&4294967295,R=k+(N<<15&4294967295|N>>>17),N=D+(k^(R|~I))+x[13]+1309151649&4294967295,D=R+(N<<21&4294967295|N>>>11),N=I+(R^(D|~k))+x[4]+4149444226&4294967295,I=D+(N<<6&4294967295|N>>>26),N=k+(D^(I|~R))+x[11]+3174756917&4294967295,k=I+(N<<10&4294967295|N>>>22),N=R+(I^(k|~D))+x[2]+718787259&4294967295,R=k+(N<<15&4294967295|N>>>17),N=D+(k^(R|~I))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+k&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const D=I-this.blockSize,x=this.C;let R=this.h,k=0;for(;k<I;){if(R==0)for(;k<=D;)o(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<I;)if(x[R++]=C.charCodeAt(k++),R==this.blockSize){o(this,x),R=0;break}}else for(;k<I;)if(x[R++]=C[k++],R==this.blockSize){o(this,x),R=0;break}}this.h=R,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var D=C.length-8;D<C.length;++D)C[D]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,D=0;D<4;++D)for(let x=0;x<32;x+=8)C[I++]=this.g[D]>>>x&255;return C};function u(C,I){var D=m;return Object.prototype.hasOwnProperty.call(D,C)?D[C]:D[C]=I(C)}function h(C,I){this.h=I;const D=[];let x=!0;for(let R=C.length-1;R>=0;R--){const k=C[R]|0;x&&k==I||(D[R]=k,x=!1)}this.g=D}var m={};function g(C){return-128<=C&&C<128?u(C,function(I){return new h([I|0],I<0?-1:0)}):new h([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return b;if(C<0)return Q(y(-C));const I=[];let D=1;for(let x=0;C>=D;x++)I[x]=C/D|0,D*=4294967296;return new h(I,0)}function E(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return Q(E(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(I,8));let x=b;for(let k=0;k<C.length;k+=8){var R=Math.min(8,C.length-k);const N=parseInt(C.substring(k,k+R),I);R<8?(R=y(Math.pow(I,R)),x=x.j(R).add(y(N))):(x=x.j(D),x=x.add(y(N)))}return x}var b=g(0),S=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(q(this))return-Q(this).m();let C=0,I=1;for(let D=0;D<this.g.length;D++){const x=this.i(D);C+=(x>=0?x:4294967296+x)*I,I*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(H(this))return"0";if(q(this))return"-"+Q(this).toString(C);const I=y(Math.pow(C,6));var D=this;let x="";for(;;){const R=it(D,I).g;D=rt(D,R.j(I));let k=((D.g.length>0?D.g[0]:D.h)>>>0).toString(C);if(D=R,H(D))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function H(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function q(C){return C.h==-1}s.l=function(C){return C=rt(this,C),q(C)?-1:H(C)?0:1};function Q(C){const I=C.g.length,D=[];for(let x=0;x<I;x++)D[x]=~C.g[x];return new h(D,~C.h).add(S)}s.abs=function(){return q(this)?Q(this):this},s.add=function(C){const I=Math.max(this.g.length,C.g.length),D=[];let x=0;for(let R=0;R<=I;R++){let k=x+(this.i(R)&65535)+(C.i(R)&65535),N=(k>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);x=N>>>16,k&=65535,N&=65535,D[R]=N<<16|k}return new h(D,D[D.length-1]&-2147483648?-1:0)};function rt(C,I){return C.add(Q(I))}s.j=function(C){if(H(this)||H(C))return b;if(q(this))return q(C)?Q(this).j(Q(C)):Q(Q(this).j(C));if(q(C))return Q(this.j(Q(C)));if(this.l(O)<0&&C.l(O)<0)return y(this.m()*C.m());const I=this.g.length+C.g.length,D=[];for(var x=0;x<2*I;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(let R=0;R<C.g.length;R++){const k=this.i(x)>>>16,N=this.i(x)&65535,le=C.i(R)>>>16,Te=C.i(R)&65535;D[2*x+2*R]+=N*Te,W(D,2*x+2*R),D[2*x+2*R+1]+=k*Te,W(D,2*x+2*R+1),D[2*x+2*R+1]+=N*le,W(D,2*x+2*R+1),D[2*x+2*R+2]+=k*le,W(D,2*x+2*R+2)}for(C=0;C<I;C++)D[C]=D[2*C+1]<<16|D[2*C];for(C=I;C<2*I;C++)D[C]=0;return new h(D,0)};function W(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function tt(C,I){this.g=C,this.h=I}function it(C,I){if(H(I))throw Error("division by zero");if(H(C))return new tt(b,b);if(q(C))return I=it(Q(C),I),new tt(Q(I.g),Q(I.h));if(q(I))return I=it(C,Q(I)),new tt(Q(I.g),I.h);if(C.g.length>30){if(q(C)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var D=S,x=I;x.l(C)<=0;)D=gt(D),x=gt(x);var R=ft(D,1),k=ft(x,1);for(x=ft(x,2),D=ft(D,2);!H(x);){var N=k.add(x);N.l(C)<=0&&(R=R.add(D),k=N),x=ft(x,1),D=ft(D,1)}return I=rt(C,R.j(I)),new tt(R,I)}for(R=b;C.l(I)>=0;){for(D=Math.max(1,Math.floor(C.m()/I.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=y(D),N=k.j(I);q(N)||N.l(C)>0;)D-=x,k=y(D),N=k.j(I);H(k)&&(k=S),R=R.add(k),C=rt(C,N)}return new tt(R,C)}s.B=function(C){return it(this,C).h},s.and=function(C){const I=Math.max(this.g.length,C.g.length),D=[];for(let x=0;x<I;x++)D[x]=this.i(x)&C.i(x);return new h(D,this.h&C.h)},s.or=function(C){const I=Math.max(this.g.length,C.g.length),D=[];for(let x=0;x<I;x++)D[x]=this.i(x)|C.i(x);return new h(D,this.h|C.h)},s.xor=function(C){const I=Math.max(this.g.length,C.g.length),D=[];for(let x=0;x<I;x++)D[x]=this.i(x)^C.i(x);return new h(D,this.h^C.h)};function gt(C){const I=C.g.length+1,D=[];for(let x=0;x<I;x++)D[x]=C.i(x)<<1|C.i(x-1)>>>31;return new h(D,C.h)}function ft(C,I){const D=I>>5;I%=32;const x=C.g.length-D,R=[];for(let k=0;k<x;k++)R[k]=I>0?C.i(k+D)>>>I|C.i(k+D+1)<<32-I:C.i(k+D);return new h(R,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,jE=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,ns=h}).apply(typeof $0<"u"?$0:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LE,Xl,UE,_h,Hm,qE,FE,HE;(function(){var s,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)t:{var v=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var j=c[A];if(!(j in v))break t;v=v[j]}c=c[c.length-1],A=v[c],p=p(A),p!=A&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function g(c,p,v){return c.call.apply(c.bind,arguments)}function y(c,p,v){return y=g,y.apply(null,arguments)}function E(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function b(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,j,G){for(var st=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)st[Rt-2]=arguments[Rt];return p.prototype[j].apply(A,st)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function O(c){const p=c.length;if(p>0){const v=Array(p);for(let A=0;A<p;A++)v[A]=c[A];return v}return[]}function H(c,p){for(let A=1;A<arguments.length;A++){const j=arguments[A];var v=typeof j;if(v=v!="object"?v:j?Array.isArray(j)?"array":v:"null",v=="array"||v=="object"&&typeof j.length=="number"){v=c.length||0;const G=j.length||0;c.length=v+G;for(let st=0;st<G;st++)c[v+st]=j[st]}else c.push(j)}}class q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Q(c){h.setTimeout(()=>{throw c},0)}function rt(){var c=C;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,v){const A=tt.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var tt=new q(()=>new it,c=>c.reset());class it{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,ft=!1,C=new W,I=()=>{const c=Promise.resolve(void 0);gt=()=>{c.then(D)}};function D(){for(var c;c=rt();){try{c.h.call(c.g)}catch(v){Q(v)}var p=tt;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}ft=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return c})();function N(c){return/^[\s\xa0]*$/.test(c)}function le(c,p){R.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}b(le,R),le.prototype.init=function(c,p){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),Y=0;function lt(c,p,v,A,j){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=j,this.key=++Y,this.da=this.fa=!1}function _t(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vt(c,p,v){for(const A in c)p.call(v,c[A],A,c)}function vt(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function M(c){const p={};for(const v in c)p[v]=c[v];return p}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(c,p){let v,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(v in A)c[v]=A[v];for(let G=0;G<$.length;G++)v=$[G],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ht(c){this.src=c,this.g={},this.h=0}ht.prototype.add=function(c,p,v,A,j){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const st=Dt(c,p,A,j);return st>-1?(p=c[st],v||(p.fa=!1)):(p=new lt(p,this.src,G,!!A,j),p.fa=v,c.push(p)),p};function At(c,p){const v=p.type;if(v in c.g){var A=c.g[v],j=Array.prototype.indexOf.call(A,p,void 0),G;(G=j>=0)&&Array.prototype.splice.call(A,j,1),G&&(_t(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Dt(c,p,v,A){for(let j=0;j<c.length;++j){const G=c[j];if(!G.da&&G.listener==p&&G.capture==!!v&&G.ha==A)return j}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Be={};function he(c,p,v,A,j){if(Array.isArray(p)){for(let G=0;G<p.length;G++)he(c,p[G],v,A,j);return null}return v=Lo(v),c&&c[Te]?c.J(p,v,m(A)?!!A.capture:!1,j):hs(c,p,v,!1,A,j)}function hs(c,p,v,A,j,G){if(!p)throw Error("Invalid event type");const st=m(j)?!!j.capture:!!j;let Rt=fs(c);if(Rt||(c[Ut]=Rt=new ht(c)),v=Rt.add(p,v,A,st,G),v.proxy)return v;if(A=fa(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)k||(j=st),j===void 0&&(j=!1),c.addEventListener(p.toString(),A,j);else if(c.attachEvent)c.attachEvent(gi(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function fa(){function c(v){return p.call(c.src,c.listener,v)}const p=Bo;return c}function da(c,p,v,A,j){if(Array.isArray(p))for(var G=0;G<p.length;G++)da(c,p[G],v,A,j);else A=m(A)?!!A.capture:!!A,v=Lo(v),c&&c[Te]?(c=c.i,G=String(p).toString(),G in c.g&&(p=c.g[G],v=Dt(p,v,A,j),v>-1&&(_t(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[G],c.h--)))):c&&(c=fs(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Dt(p,v,A,j)),(v=c>-1?p[c]:null)&&ma(v))}function ma(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Te])At(p.i,c);else{var v=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(v,A,c.capture):p.detachEvent?p.detachEvent(gi(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=fs(p))?(At(v,c),v.h==0&&(v.src=null,p[Ut]=null)):_t(c)}}}function gi(c){return c in Be?Be[c]:Be[c]="on"+c}function Bo(c,p){if(c.da)c=!0;else{p=new le(p,this);const v=c.listener,A=c.ha||c.src;c.fa&&ma(c),c=v.call(A,p)}return c}function fs(c){return c=c[Ut],c instanceof ht?c:null}var jo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lo(c){return typeof c=="function"?c:(c[jo]||(c[jo]=function(p){return c.handleEvent(p)}),c[jo])}function we(){x.call(this),this.i=new ht(this),this.M=this,this.G=null}b(we,x),we.prototype[Te]=!0,we.prototype.removeEventListener=function(c,p,v,A){da(this,c,p,v,A)};function je(c,p){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new R(p,c);else if(p instanceof R)p.target=p.target||c;else{var j=p;p=new R(A,c),ot(p,j)}j=!0;let G,st;if(v)for(st=v.length-1;st>=0;st--)G=p.g=v[st],j=pr(G,A,!0,p)&&j;if(G=p.g=c,j=pr(G,A,!0,p)&&j,j=pr(G,A,!1,p)&&j,v)for(st=0;st<v.length;st++)G=p.g=v[st],j=pr(G,A,!1,p)&&j}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let A=0;A<v.length;A++)_t(v[A]);delete c.g[p],c.h--}}this.G=null},we.prototype.J=function(c,p,v,A){return this.i.add(String(c),p,!1,v,A)},we.prototype.K=function(c,p,v,A){return this.i.add(String(c),p,!0,v,A)};function pr(c,p,v,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let j=!0;for(let G=0;G<p.length;++G){const st=p[G];if(st&&!st.da&&st.capture==v){const Rt=st.listener,Ae=st.ha||st.src;st.fa&&At(c.i,st),j=Rt.call(Ae,A)!==!1&&j}}return j&&!A.defaultPrevented}function Tf(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(c,p||0)}function zu(c){c.g=Tf(()=>{c.g=null,c.i&&(c.i=!1,zu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class cn extends x{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:zu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(c){x.call(this),this.h=c,this.g={}}b(ds,x);var Uo=[];function qo(c){Vt(c.g,function(p,v){this.g.hasOwnProperty(v)&&ma(p)},c),c.g={}}ds.prototype.N=function(){ds.Z.N.call(this),qo(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yr=h.JSON.stringify,bf=h.JSON.parse,ku=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Pu(){}function Bu(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){R.call(this,"d")}b(Ye,R);function Bn(){R.call(this,"c")}b(Bn,R);var be={},ju=null;function ga(){return ju=ju||new we}be.Ia="serverreachability";function Lu(c){R.call(this,be.Ia,c)}b(Lu,R);function pi(c){const p=ga();je(p,new Lu(p))}be.STAT_EVENT="statevent";function ms(c,p){R.call(this,be.STAT_EVENT,c),this.stat=p}b(ms,R);function Ie(c){const p=ga();je(p,new ms(p,c))}be.Ja="timingevent";function yi(c,p){R.call(this,be.Ja,c),this.size=p}b(yi,R);function _i(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},p)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function Af(c,p,v,A,j,G){c.info(function(){if(c.g)if(G){var st="",Rt=G.split("&");for(let Yt=0;Yt<Rt.length;Yt++){var Ae=Rt[Yt].split("=");if(Ae.length>1){const fe=Ae[0];Ae=Ae[1];const qn=fe.split("_");st=qn.length>=2&&qn[1]=="type"?st+(fe+"="+Ae+"&"):st+(fe+"=redacted&")}}}else st=null;else st=G;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+p+`
`+v+`
`+st})}function Uu(c,p,v,A,j,G,st){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+p+`
`+v+`
`+G+" "+st})}function vi(c,p,v,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Sf(c,v)+(A?" "+A:"")})}function gs(c,p){c.info(function(){return"TIMEOUT: "+p})}ni.prototype.info=function(){};function Sf(c,p){if(!c.g)return p;if(!p)return null;try{const G=JSON.parse(p);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var v=G[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var j=A[0];if(j!="noop"&&j!="stop"&&j!="close")for(let st=1;st<A.length;st++)A[st]=""}}}}return yr(G)}catch{return p}}var ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ho;function ys(){}b(ys,Pu),ys.prototype.g=function(){return new XMLHttpRequest},Ho=new ys;function Fi(c){return encodeURIComponent(String(c))}function qu(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function ii(c,p,v,A){this.j=c,this.i=p,this.l=v,this.S=A||1,this.V=new ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Re={},Fe={};function Ei(c,p,v){c.M=1,c.A=_s(De(p)),c.u=v,c.R=!0,pa(c,null)}function pa(c,p){c.F=Date.now(),Ti(c),c.B=De(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Ea(v.i,"t",A),c.C=0,v=c.j.L,c.h=new ri,c.g=ic(c.j,v?p:null,!c.u),c.P>0&&(c.O=new cn(y(c.Y,c,c.g),c.P)),p=c.V,v=c.g,A=c.ba;var j="readystatechange";Array.isArray(j)||(j&&(Uo[0]=j.toString()),j=Uo);for(let G=0;G<j.length;G++){const st=he(v,j[G],A||p.handleEvent,!1,p.h||p);if(!st)break;p.g[st.key]=st}p=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),pi(),Af(c.i,c.v,c.B,c.l,c.S,c.u)}ii.prototype.ba=function(c){c=c.target;const p=this.O;p&&oi(c)==3?p.j():this.Y(c)},ii.prototype.Y=function(c){try{if(c==this.g)t:{const Rt=oi(this.g),Ae=this.g.ya(),Yt=this.g.ca();if(!(Rt<3)&&(Rt!=3||this.g&&(this.h.h||this.g.la()||Xe(this.g)))){this.K||Rt!=4||Ae==7||(Ae==8||Yt<=0?pi(3):pi(2)),bi(this);var p=this.g.ca();this.X=p;var v=xf(this);if(this.o=p==200,Uu(this.i,this.v,this.B,this.l,this.S,Rt,p),this.o){if(this.U&&!this.L){e:{if(this.g){var A,j=this.g;if((A=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var G=A;break e}}G=null}if(c=G)vi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ai(this,c);else{this.o=!1,this.m=3,Ie(12),xn(this),jn(this);break t}}if(this.R){c=!0;let fe;for(;!this.K&&this.C<v.length;)if(fe=Hu(this,v),fe==Fe){Rt==4&&(this.m=4,Ie(14),c=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(fe==Re){this.m=4,Ie(15),vi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else vi(this.i,this.l,fe,null),Ai(this,fe);if(Fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||v.length!=0||this.h.h||(this.m=1,Ie(16),c=!1),this.o=this.o&&c,!c)vi(this.i,this.l,v,"[Invalid Chunked Response]"),xn(this),jn(this);else if(v.length>0&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.aa&&!st.P&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),sl(st),st.P=!0,Ie(11))}}else vi(this.i,this.l,v,null),Ai(this,v);Rt==4&&xn(this),this.o&&!this.K&&(Rt==4?Wu(this.j,this):(this.o=!1,Ti(this)))}else Gi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),xn(this),jn(this)}}}catch{}finally{}};function xf(c){if(!Fu(c))return c.g.la();const p=Xe(c.g);if(p==="")return"";let v="";const A=p.length,j=oi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return xn(c),jn(c),"";c.h.i=new h.TextDecoder}for(let G=0;G<A;G++)c.h.h=!0,v+=c.h.i.decode(p[G],{stream:!(j&&G==A-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function Fu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Hu(c,p){var v=c.C,A=p.indexOf(`
`,v);return A==-1?Fe:(v=Number(p.substring(v,A)),isNaN(v)?Re:(A+=1,A+v>p.length?Fe:(p=p.slice(A,A+v),c.C=A+v,p)))}ii.prototype.cancel=function(){this.K=!0,xn(this)};function Ti(c){c.T=Date.now()+c.H,ya(c,c.H)}function ya(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=_i(y(c.aa,c),p)}function bi(c){c.D&&(h.clearTimeout(c.D),c.D=null)}ii.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(gs(this.i,this.B),this.M!=2&&(pi(),Ie(17)),xn(this),this.m=2,jn(this)):ya(this,this.T-c)};function jn(c){c.j.I==0||c.K||Wu(c.j,c)}function xn(c){bi(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,qo(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Ai(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||xi(v.h,c))){if(!c.L&&xi(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)xa(v),xr(v);else break t;xs(v),Ie(18)}}else v.xa=j[1],0<v.xa-v.K&&j[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=_i(y(v.Va,v),6e3));Si(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ni(v,11)}else if((c.L||v.g==c)&&xa(v),!N(p))for(j=v.Ba.g.parse(p),p=0;p<j.length;p++){let Yt=j[p];const fe=Yt[0];if(!(fe<=v.K))if(v.K=fe,Yt=Yt[1],v.I==2)if(Yt[0]=="c"){v.M=Yt[1],v.ba=Yt[2];const qn=Yt[3];qn!=null&&(v.ka=qn,v.j.info("VER="+v.ka));const Vi=Yt[4];Vi!=null&&(v.za=Vi,v.j.info("SVER="+v.za));const li=Yt[5];li!=null&&typeof li=="number"&&li>0&&(A=1.5*li,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const ui=c.g;if(ui){const ws=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ws){var G=A.h;G.g||ws.indexOf("spdy")==-1&&ws.indexOf("quic")==-1&&ws.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Qo(G,G.h),G.h=null))}if(A.G){const wa=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(A.wa=wa,Jt(A.J,A.G,wa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var st=c;if(A.na=nc(A,A.L?A.ba:null,A.W),st.L){Yo(A.h,st);var Rt=st,Ae=A.O;Ae&&(Rt.H=Ae),Rt.D&&(bi(Rt),Ti(Rt)),A.g=st}else Ju(A);v.i.length>0&&Di(v)}else Yt[0]!="stop"&&Yt[0]!="close"||Ni(v,7);else v.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Ni(v,7):il(v):Yt[0]!="noop"&&v.l&&v.l.qa(Yt),v.A=0)}}pi(4)}catch{}}var Ce=class{constructor(c,p){this.g=c,this.map=p}};function Go(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Si(c){return c.h?1:c.g?c.g.size:0}function xi(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Qo(c,p){c.g?c.g.add(p):c.h=p}function Yo(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Go.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return O(c.i)}var Gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let j,G=null;A>=0?(j=c[v].substring(0,A),G=c[v].substring(A+1)):j=c[v],p(j,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function wn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof wn?(this.l=c.l,He(this,c.j),this.o=c.o,this.g=c.g,_r(this,c.u),this.h=c.h,Zo(this,Xu(c.i)),this.m=c.m):c&&(p=String(c).match(Gu))?(this.l=!1,He(this,p[1]||"",!0),this.o=wi(p[2]||""),this.g=wi(p[3]||"",!0),_r(this,p[4]),this.h=wi(p[5]||"",!0),Zo(this,p[6]||"",!0),this.m=wi(p[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}wn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(vs(p,va,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(vs(p,va,!0),"@"),c.push(Fi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(vs(v,v.charAt(0)=="/"?Jo:Ku,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",vs(v,Qu)),c.join("")},wn.prototype.resolve=function(c){const p=De(this);let v=!!c.j;v?He(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var A=c.h;if(v)_r(p,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var j=p.h.lastIndexOf("/");j!=-1&&(A=p.h.slice(0,j+1)+A)}if(j=A,j==".."||j==".")A="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){A=j.lastIndexOf("/",0)==0,j=j.split("/");const G=[];for(let st=0;st<j.length;){const Rt=j[st++];Rt=="."?A&&st==j.length&&G.push(""):Rt==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&st==j.length&&G.push("")):(G.push(Rt),A=!0)}A=G.join("/")}else A=j}return v?p.h=A:v=c.i.toString()!=="",v?Zo(p,Xu(c.i)):v=!!c.m,v&&(p.m=c.m),p};function De(c){return new wn(c)}function He(c,p,v){c.j=v?wi(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function _r(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Zo(c,p,v){p instanceof Er?(c.i=p,Ta(c.i,c.l)):(v||(p=vs(p,vr)),c.i=new Er(p,c.l))}function Jt(c,p,v){c.i.set(p,v)}function _s(c){return Jt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function wi(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vs(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,pn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var va=/[#\/\?@]/g,Ku=/[#\?:]/g,Jo=/[#\?]/g,vr=/[#\?@]/g,Qu=/#/g;function Er(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function yn(c){c.g||(c.g=new Map,c.h=0,c.i&&_a(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=Er.prototype,s.add=function(c,p){yn(this),this.i=null,c=Tr(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Yu(c,p){yn(c),p=Tr(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function $o(c,p){return yn(c),p=Tr(c,p),c.g.has(p)}s.forEach=function(c,p){yn(this),this.g.forEach(function(v,A){v.forEach(function(j){c.call(p,j,A,this)},this)},this)};function Wo(c,p){yn(c);let v=[];if(typeof p=="string")$o(c,p)&&(v=v.concat(c.g.get(Tr(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}s.set=function(c,p){return yn(this),this.i=null,c=Tr(this,c),$o(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=Wo(this,c),c.length>0?String(c[0]):p):p};function Ea(c,p,v){Yu(c,p),v.length>0&&(c.i=null,c.g.set(Tr(c,p),O(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];const j=Fi(v);v=Wo(this,v);for(let G=0;G<v.length;G++){let st=j;v[G]!==""&&(st+="="+Fi(v[G])),c.push(st)}}return this.i=c.join("&")};function Xu(c){const p=new Er;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Tr(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ta(c,p){p&&!c.j&&(yn(c),c.i=null,c.g.forEach(function(v,A){const j=A.toLowerCase();A!=j&&(Yu(this,A),Ea(this,j,v))},c)),c.j=p}function si(c,p){const v=new ni;if(h.Image){const A=new Image;A.onload=E(Ln,v,"TestLoadImage: loaded",!0,p,A),A.onerror=E(Ln,v,"TestLoadImage: error",!1,p,A),A.onabort=E(Ln,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=E(Ln,v,"TestLoadImage: timeout",!1,p,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function tl(c,p){const v=new ni,A=new AbortController,j=setTimeout(()=>{A.abort(),Ln(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(j),G.ok?Ln(v,"TestPingServer: ok",!0,p):Ln(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Ln(v,"TestPingServer: error",!1,p)})}function Ln(c,p,v,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(v)}catch{}}function br(){this.g=new ku}function Ii(c){this.i=c.Sb||null,this.h=c.ab||!1}b(Ii,Pu),Ii.prototype.g=function(){return new Es(this.i,this.h)};function Es(c,p){we.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Es,we),s=Es.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ai(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ba(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ba(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ar(this):ai(this),this.readyState==3&&ba(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,Ar(this))},s.Na=function(c){this.g&&(this.response=c,Ar(this))},s.ga=function(){this.g&&Ar(this)};function Ar(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ai(c)}s.setRequestHeader=function(c,p){this.A.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function ai(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Un(c){let p="";return Vt(c,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function Ts(c,p,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Un(v),typeof c=="string"?v!=null&&Fi(v):Jt(c,p,v))}function ie(c){we.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(ie,we);var Ri=/^https?$/i,el=["POST","PUT"];s=ie.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ho.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(G){bs(this,G);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)v.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())v.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),j=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(el,p,void 0)>=0)||A||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,st]of v)this.g.setRequestHeader(G,st);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){bs(this,G)}};function bs(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,nl(c),Hi(c)}function nl(c){c.A||(c.A=!0,je(c,"complete"),je(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,je(this,"complete"),je(this,"abort"),Hi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),ie.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?As(this):this.Xa())},s.Xa=function(){As(this)};function As(c){if(c.h&&typeof u<"u"){if(c.v&&oi(c)==4)setTimeout(c.Ca.bind(c),0);else if(je(c,"readystatechange"),oi(c)==4){c.h=!1;try{const G=c.ca();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var A;if(A=G===0){let st=String(c.D).match(Gu)[1]||null;!st&&h.self&&h.self.location&&(st=h.self.location.protocol.slice(0,-1)),A=!Ri.test(st?st.toLowerCase():"")}v=A}if(v)je(c,"complete"),je(c,"success");else{c.o=6;try{var j=oi(c)>2?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.ca()+"]",nl(c)}}finally{Hi(c)}}}}function Hi(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||je(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function oi(c){return c.g?c.g.readyState:0}s.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),bf(p)}};function Xe(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(c){const p={};c=(c.g&&oi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(N(c[A]))continue;var v=qu(c[A]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=p[j]||[];p[j]=G,G.push(v)}vt(p,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Sr(c){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ci("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ci("baseRetryDelayMs",5e3,c),this.Za=Ci("retryDelaySeedMs",1e4,c),this.Ta=Ci("forwardChannelMaxRetries",2,c),this.va=Ci("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Go(c&&c.concurrentRequestLimit),this.Ba=new br,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Sr.prototype,s.ka=8,s.I=1,s.connect=function(c,p,v,A){Ie(0),this.W=c,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=nc(this,null,this.W),Di(this)};function il(c){if(Aa(c),c.I==3){var p=c.V++,v=De(c.J);if(Jt(v,"SID",c.M),Jt(v,"RID",p),Jt(v,"TYPE","terminate"),Ss(c,v),p=new ii(c,c.j,p),p.M=2,p.A=_s(De(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.A,v=!0),v||(p.g=ic(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ti(p)}ec(c)}function xr(c){c.g&&(sl(c),c.g.cancel(),c.g=null)}function Aa(c){xr(c),c.v&&(h.clearTimeout(c.v),c.v=null),xa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Di(c){if(!Ko(c.h)&&!c.m){c.m=!0;var p=c.Ea;gt||I(),ft||(gt(),ft=!0),C.add(p,c),c.D=0}}function Sa(c,p){return Si(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=_i(y(c.Ea,c,p),tc(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const j=new ii(this,this.j,c);let G=this.o;if(this.U&&(G?(G=M(G),ot(G,this.U)):G=this.U),this.u!==null||this.R||(j.J=G,G=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Zu(this,j,p),v=De(this.J),Jt(v,"RID",c),Jt(v,"CVER",22),this.G&&Jt(v,"X-HTTP-Session-Id",this.G),Ss(this,v),G&&(this.R?p="headers="+Fi(Un(G))+"&"+p:this.u&&Ts(v,this.u,G)),Qo(this.h,j),this.Ra&&Jt(v,"TYPE","init"),this.S?(Jt(v,"$req",p),Jt(v,"SID","null"),j.U=!0,Ei(j,v,null)):Ei(j,v,p),this.I=2}}else this.I==3&&(c?rl(this,c):this.i.length==0||Ko(this.h)||rl(this))};function rl(c,p){var v;p?v=p.l:v=c.V++;const A=De(c.J);Jt(A,"SID",c.M),Jt(A,"RID",v),Jt(A,"AID",c.K),Ss(c,A),c.u&&c.o&&Ts(A,c.u,c.o),v=new ii(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Zu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Qo(c.h,v),Ei(v,A,p)}function Ss(c,p){c.H&&Vt(c.H,function(v,A){Jt(p,A,v)}),c.l&&Vt({},function(v,A){Jt(p,A,v)})}function Zu(c,p,v){v=Math.min(c.i.length,v);const A=c.l?y(c.l.Ka,c.l,c):null;t:{var j=c.i;let Rt=-1;for(;;){const Ae=["count="+v];Rt==-1?v>0?(Rt=j[0].g,Ae.push("ofs="+Rt)):Rt=0:Ae.push("ofs="+Rt);let Yt=!0;for(let fe=0;fe<v;fe++){var G=j[fe].g;const qn=j[fe].map;if(G-=Rt,G<0)Rt=Math.max(0,j[fe].g-100),Yt=!1;else try{G="req"+G+"_"||"";try{var st=qn instanceof Map?qn:Object.entries(qn);for(const[Vi,li]of st){let ui=li;m(li)&&(ui=yr(li)),Ae.push(G+Vi+"="+encodeURIComponent(ui))}}catch(Vi){throw Ae.push(G+"type="+encodeURIComponent("_badmap")),Vi}}catch{A&&A(qn)}}if(Yt){st=Ae.join("&");break t}}st=void 0}return c=c.i.splice(0,v),p.G=c,st}function Ju(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;gt||I(),ft||(gt(),ft=!0),C.add(p,c),c.A=0}}function xs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=_i(y(c.Da,c),tc(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,$u(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=_i(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),xr(this),$u(this))};function sl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function $u(c){c.g=new ii(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=De(c.na);Jt(p,"RID","rpc"),Jt(p,"SID",c.M),Jt(p,"AID",c.K),Jt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Jt(p,"TO",c.ia),Jt(p,"TYPE","xmlhttp"),Ss(c,p),c.u&&c.o&&Ts(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=_s(De(p)),v.u=null,v.R=!0,pa(v,c)}s.Va=function(){this.C!=null&&(this.C=null,xr(this),xs(this),Ie(19))};function xa(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Wu(c,p){var v=null;if(c.g==p){xa(c),sl(c),c.g=null;var A=2}else if(xi(c.h,p))v=p.G,Yo(c.h,p),A=1;else return;if(c.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var j=c.D;A=ga(),je(A,new yi(A,v)),Di(c)}else Ju(c);else if(j=p.m,j==3||j==0&&p.X>0||!(A==1&&Sa(c,p)||A==2&&xs(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),j){case 1:Ni(c,5);break;case 4:Ni(c,10);break;case 3:Ni(c,6);break;default:Ni(c,2)}}}function tc(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function Ni(c,p){if(c.j.info("Error code "+p),p==2){var v=y(c.bb,c),A=c.Ua;const j=!A;A=new wn(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||He(A,"https"),_s(A),j?si(A.toString(),v):tl(A.toString(),v)}else Ie(2);c.I=0,c.l&&c.l.pa(p),ec(c),Aa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function ec(c){if(c.I=0,c.ja=[],c.l){const p=Xo(c.h);(p.length!=0||c.i.length!=0)&&(H(c.ja,p),H(c.ja,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.oa()}}function nc(c,p,v){var A=v instanceof wn?De(v):new wn(v);if(A.g!="")p&&(A.g=p+"."+A.g),_r(A,A.u);else{var j=h.location;A=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;const G=new wn(null);A&&He(G,A),p&&(G.g=p),j&&_r(G,j),v&&(G.h=v),A=G}return v=c.G,p=c.wa,v&&p&&Jt(A,v,p),Jt(A,"VER",c.ka),Ss(c,A),A}function ic(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new ie(new Ii({ab:v})):new ie(c.ma),p.Fa(c.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}s=rc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function wr(){}wr.prototype.g=function(c,p){return new hn(c,p)};function hn(c,p){we.call(this),this.g=new Sr(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!N(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!N(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ki(this)}b(hn,we),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){il(this.g)},hn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=yr(c),c=v);p.i.push(new Ce(p.Ya++,c)),p.I==3&&Di(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,hn.Z.N.call(this)};function sc(c){Ye.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}b(sc,Ye);function ac(){Bn.call(this),this.status=1}b(ac,Bn);function Ki(c){this.g=c}b(Ki,rc),Ki.prototype.ra=function(){je(this.g,"a")},Ki.prototype.qa=function(c){je(this.g,new sc(c))},Ki.prototype.pa=function(c){je(this.g,new ac)},Ki.prototype.oa=function(){je(this.g,"b")},wr.prototype.createWebChannel=wr.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,HE=function(){return new wr},FE=function(){return ga()},qE=be,Hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ps.NO_ERROR=0,ps.TIMEOUT=8,ps.HTTP_ERROR=6,_h=ps,Fo.COMPLETE="complete",UE=Fo,Bu.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",we.prototype.listen=we.prototype.J,Xl=Bu,ie.prototype.listenOnce=ie.prototype.K,ie.prototype.getLastError=ie.prototype.Ha,ie.prototype.getLastErrorCode=ie.prototype.ya,ie.prototype.getStatus=ie.prototype.ca,ie.prototype.getResponseJson=ie.prototype.La,ie.prototype.getResponseText=ie.prototype.la,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Fa,LE=ie}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore",tv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new ME("@firebase/firestore");function co(){return ea.logLevel}function nt(s,...t){if(ea.logLevel<=Ft.DEBUG){const n=t.map(Tg);ea.debug(`Firestore (${Oo}): ${s}`,...n)}}function dn(s,...t){if(ea.logLevel<=Ft.ERROR){const n=t.map(Tg);ea.error(`Firestore (${Oo}): ${s}`,...n)}}function na(s,...t){if(ea.logLevel<=Ft.WARN){const n=t.map(Tg);ea.warn(`Firestore (${Oo}): ${s}`,...n)}}function Tg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(s,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,GE(s,r,n)}function GE(s,t,n){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dn(r),new Error(r)}function yt(s,t,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||GE(t,o,r)}function xt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Mo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Wx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class tw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ew{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ur,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ur)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new KE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class nw{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iw{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new nw(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ev{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rw{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kx(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const r=u=>{u.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,nt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ev(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ev(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=sw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%62))}return r}}function St(s,t){return s<t?-1:s>t?1:0}function Gm(s,t){const n=Math.min(s.length,t.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Cm(o)===Cm(u)?St(o,u):Cm(o)?1:-1}return St(s.length,t.length)}const aw=55296,ow=57343;function Cm(s){const t=s.charCodeAt(0);return t>=aw&&t<=ow}function Eo(s,t,n){return s.length===t.length&&s.every(((r,o)=>n(r,t[o])))}function QE(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Pi{constructor(t,n,r){n===void 0?n=0:n>t.length&&mt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&mt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Pi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Pi?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const u=Pi.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return St(t.length,n.length)}static compareSegments(t,n){const r=Pi.isNumericId(t),o=Pi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Pi.extractNumericId(t).compare(Pi.extractNumericId(n)):Gm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ns.fromString(t.substring(4,t.length-2))}}class Zt extends Pi{construct(t,n,r){return new Zt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new at(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new Zt(n)}static emptyPath(){return new Zt([])}}const lw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ye extends Pi{construct(t,n,r){return new ye(t,n,r)}static isValidIdentifier(t){return lw.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ye.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new ye([nv])}static fromServerFormat(t){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new at(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new at(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new at(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new at(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ye(n)}static emptyPath(){return new ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Zt.fromString(t))}static fromName(t){return new ut(Zt.fromString(t).popFirst(5))}static empty(){return new ut(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Zt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Zt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Zt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(s,t,n){if(!n)throw new at(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function uw(s,t,n,r){if(t===!0&&r===!0)throw new at(Z.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function iv(s){if(!ut.isDocumentKey(s))throw new at(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rv(s){if(ut.isDocumentKey(s))throw new at(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function XE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function $h(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":mt(12329,{type:typeof s})}function hr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new at(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(s);throw new at(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(s,t){const n={typeString:s};return t&&(n.value=t),n}function Au(s,t){if(!XE(s))throw new at(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new at(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=-62135596800,av=1e6;class te{static now(){return te.fromMillis(Date.now())}static fromDate(t){return te.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*av);return new te(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new at(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<sv)throw new at(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Au(t,te._jsonSchema))return new te(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-sv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}te._jsonSchemaVersion="firestore/timestamp/1.0",te._jsonSchema={type:ke("string",te._jsonSchemaVersion),seconds:ke("number"),nanoseconds:ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(t){return new Tt(t)}static min(){return new Tt(new te(0,0))}static max(){return new Tt(new te(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;class zh{constructor(t,n,r,o){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=o}}function Km(s){return s.fields.find((t=>t.kind===2))}function Gs(s){return s.fields.filter((t=>t.kind!==2))}zh.UNKNOWN_ID=-1;class vh{constructor(t,n){this.fieldPath=t,this.kind=n}}class hu{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new hu(0,Pn.min())}}function cw(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Tt.fromTimestamp(r===1e9?new te(n+1,0):new te(n,r));return new Pn(o,ut.empty(),t)}function ZE(s){return new Pn(s.readTime,s.key,cu)}class Pn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Pn(Tt.min(),ut.empty(),cu)}static max(){return new Pn(Tt.max(),ut.empty(),cu)}}function Ag(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=ut.comparator(s.documentKey,t.documentKey),n!==0?n:St(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $E{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==JE)throw s;nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new B(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):B.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):B.reject(n)}static resolve(t){return new B(((n,r)=>{n(t)}))}static reject(t){return new B(((n,r)=>{r(t)}))}static waitFor(t){return new B(((n,r)=>{let o=0,u=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(g=>r(g)))})),h=!0,u===o&&n()}))}static or(t){let n=B.resolve(!1);for(const r of t)n=n.next((o=>o?B.resolve(o):r()));return n}static forEach(t,n){const r=[];return t.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(t,n){return new B(((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(t[y]).next((E=>{h[y]=E,++m,m===u&&r(h)}),(E=>o(E)))}}))}static doWhile(t,n){return new B(((r,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="SimpleDb";class Wh{static open(t,n,r,o){try{return new Wh(n,t.transaction(o,r))}catch(u){throw new tu(n,u)}}constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.S=new ur,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new tu(t,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Sg(r.target.error);this.S.reject(new tu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(nt(zn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new fw(n)}}class is{static delete(t){return nt(zn,"Removing database:",t),Qs(wE().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!NE())return!1;if(is.F())return!0;const t=Nh(),n=is.M(t),r=0<n&&n<10,o=WE(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,n){return t.store(n)}static M(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,is.M(Nh())===12.2&&dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(nt(zn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;n(h)},o.onblocked=()=>{r(new tu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new at(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new at(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new tu(t,h))},o.onupgradeneeded=u=>{nt(zn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.N.k(h,o.transaction,u.oldVersion,this.version).next((()=>{nt(zn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,o){const u=n==="readonly";let h=0;for(;;){++h;try{this.db=await this.L(t);const m=Wh.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),B.reject(y)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,y=g.name!=="FirebaseError"&&h<3;if(nt(zn,"Transaction failed with error:",g.message,"Retrying:",y),this.close(),!y)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WE(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class hw{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return Qs(this.U.delete())}}class tu extends at{constructor(t,n){super(Z.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function us(s){return s.name==="IndexedDbTransactionError"}class fw{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(nt(zn,"PUT",this.store.name,t,n),r=this.store.put(n,t)):(nt(zn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Qs(r)}add(t){return nt(zn,"ADD",this.store.name,t,t),Qs(this.store.add(t))}get(t){return Qs(this.store.get(t)).next((n=>(n===void 0&&(n=null),nt(zn,"GET",this.store.name,t,n),n)))}delete(t){return nt(zn,"DELETE",this.store.name,t),Qs(this.store.delete(t))}count(){return nt(zn,"COUNT",this.store.name),Qs(this.store.count())}J(t,n){const r=this.options(t,n),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new B(((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}}))}{const u=this.cursor(r),h=[];return this.H(u,((m,g)=>{h.push(g)})).next((()=>h))}}Y(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new B(((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}}))}Z(t,n){nt(zn,"DELETE ALL",this.store.name);const r=this.options(t,n);r.X=!1;const o=this.cursor(r);return this.H(o,((u,h,m)=>m.delete()))}ee(t,n){let r;n?r=t:(r={},n=t);const o=this.cursor(r);return this.H(o,n)}te(t){const n=this.cursor({});return new B(((r,o)=>{n.onerror=u=>{const h=Sg(u.target.error);o(h)},n.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next((m=>{m?h.continue():r()})):r()}}))}H(t,n){const r=[];return new B(((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const g=new hw(m),y=n(m.primaryKey,m.value,g);if(y instanceof B){const E=y.catch((b=>(g.done(),B.reject(b))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>B.waitFor(r)))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function Qs(s){return new B(((t,n)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Sg(r.target.error);n(o)}}))}let ov=!1;function Sg(s){const t=is.M(Nh());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(n)>=0){const r=new at("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ov||(ov=!0,setTimeout((()=>{throw r}),0)),r}}return s}const eu="IndexBackfiller";class dw{constructor(t,n){this.asyncQueue=t,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){nt(eu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const n=await this.ne.ie();nt(eu,`Documents written: ${n}`)}catch(n){us(n)?nt(eu,"Ignoring IndexedDB error during index backfill: ",n):await ua(n)}await this.re(6e4)}))}}class mw{constructor(t,n){this.localStore=t,this.persistence=n}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,t)))}se(t,n){const r=new Set;let o=n,u=!0;return B.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((h=>{if(h!==null&&!r.has(h))return nt(eu,`Processing collection: ${h}`),this.oe(t,h,o).next((m=>{o-=m,r.add(h)}));u=!1})))).next((()=>n-o))}oe(t,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next((o=>this.localStore.localDocuments.getNextDocuments(t,n,o,r).next((u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next((()=>this._e(o,u))).next((m=>(nt(eu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,n,m)))).next((()=>h.size))}))))}_e(t,n){let r=t;return n.changes.forEach(((o,u)=>{const h=ZE(u);Ag(h,r)>0&&(r=h)})),new Pn(r.readTime,r.documentKey,Math.max(n.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=-1;function tf(s){return s==null}function fu(s){return s===0&&1/s==-1/0}function gw(s){return typeof s=="number"&&Number.isInteger(s)&&!fu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="";function un(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=lv(t)),t=pw(s.get(n),t);return lv(t)}function pw(s,t){let n=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case kh:n+="";break;default:n+=u}}return n}function lv(s){return s+kh+""}function Bi(s){const t=s.length;if(yt(t>=2,64408,{path:s}),t===2)return yt(s.charAt(0)===kh&&s.charAt(1)==="",56145,{path:s}),Zt.emptyPath();const n=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf(kh,u);switch((h<0||h>n)&&mt(50515,{path:s}),s.charAt(h+1)){case"":const m=s.substring(u,h);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:mt(61167,{path:s})}u=h+2}return new Zt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="remoteDocuments",Su="owner",no="owner",du="mutationQueues",yw="userId",di="mutations",uv="batchId",Js="userMutationsIndex",cv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(s,t){return[s,un(t)]}function tT(s,t,n){return[s,un(t),n]}const _w={},To="documentMutations",Ph="remoteDocumentsV14",vw=["prefixPath","collectionGroup","readTime","documentId"],Th="documentKeyIndex",Ew=["prefixPath","collectionGroup","documentId"],eT="collectionGroupIndex",Tw=["collectionGroup","readTime","prefixPath","documentId"],mu="remoteDocumentGlobal",Qm="remoteDocumentGlobalKey",bo="targets",nT="queryTargetsIndex",bw=["canonicalId","targetId"],Ao="targetDocuments",Aw=["targetId","path"],xg="documentTargetsIndex",Sw=["path","targetId"],Bh="targetGlobalKey",Ws="targetGlobal",gu="collectionParents",xw=["collectionId","parent"],So="clientMetadata",ww="clientId",ef="bundles",Iw="bundleId",nf="namedQueries",Rw="name",wg="indexConfiguration",Cw="indexId",Ym="collectionGroupIndex",Dw="collectionGroup",nu="indexState",Nw=["indexId","uid"],iT="sequenceNumberIndex",Vw=["uid","sequenceNumber"],iu="indexEntries",Mw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rT="documentKeyIndex",Ow=["indexId","uid","orderedDocumentKey"],rf="documentOverlays",zw=["userId","collectionPath","documentId"],Xm="collectionPathOverlayIndex",kw=["userId","collectionPath","largestBatchId"],sT="collectionGroupOverlayIndex",Pw=["userId","collectionGroup","largestBatchId"],Ig="globals",Bw="name",aT=[du,di,To,Ks,bo,Su,Ws,Ao,So,mu,gu,ef,nf],jw=[...aT,rf],oT=[du,di,To,Ph,bo,Su,Ws,Ao,So,mu,gu,ef,nf,rf],lT=oT,Rg=[...lT,wg,nu,iu],Lw=Rg,uT=[...Rg,Ig],Uw=uT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends $E{constructor(t,n){super(),this.le=t,this.currentSequenceNumber=n}}function qe(s,t){const n=xt(s);return is.O(n.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function cs(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function cT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,n){this.comparator=t,this.root=n||rn.EMPTY}insert(t,n){return new pe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(t){return new pe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hh(this.root,t,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hh(this.root,t,this.comparator,!0)}}class hh{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rn{constructor(t,n,r,o,u){this.key=t,this.value=n,this.color=r??rn.RED,this.left=o??rn.EMPTY,this.right=u??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,u){return new rn(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw mt(27949);return t+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(t,n,r,o,u){return this}insert(t,n,r){return new rn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.comparator=t,this.data=new pe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(t){return new fv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof ne)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new ne(this.comparator);return n.data=t,n}}class fv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function io(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.fields=t,t.sort(ye.comparator)}static empty(){return new Sn([])}unionWith(t){let n=new ne(ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Sn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Eo(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new hT("Invalid base64 string: "+u):u}})(t);return new Pe(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(t);return new Pe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pe.EMPTY_BYTE_STRING=new Pe("");const qw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(s){if(yt(!!s,39018),typeof s=="string"){let t=0;const n=qw.exec(s);if(yt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ge(s.seconds),nanos:ge(s.nanos)}}function ge(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function dr(s){return typeof s=="string"?Pe.fromBase64String(s):Pe.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="server_timestamp",dT="__type__",mT="__previous_value__",gT="__local_write_time__";function Cg(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[dT])==null?void 0:r.stringValue)===fT}function sf(s){const t=s.mapValue.fields[mT];return Cg(t)?sf(t):t}function pu(s){const t=fr(s.mapValue.fields[gT].timestampValue);return new te(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n,r,o,u,h,m,g,y,E){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}}const jh="(default)";class ia{constructor(t,n){this.projectId=t,this.database=n||jh}static empty(){return new ia("","")}get isDefaultDatabase(){return this.database===jh}isEqual(t){return t instanceof ia&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="__type__",pT="__max__",Wr={mapValue:{fields:{__type__:{stringValue:pT}}}},Ng="__vector__",xo="value",bh={nullValue:"NULL_VALUE"};function ss(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cg(s)?4:yT(s)?9007199254740991:af(s)?10:11:mt(28295,{value:s})}function qi(s,t){if(s===t)return!0;const n=ss(s);if(n!==ss(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return pu(s).isEqual(pu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=fr(o.timestampValue),m=fr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return dr(o.bytesValue).isEqual(dr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return ge(o.geoPointValue.latitude)===ge(u.geoPointValue.latitude)&&ge(o.geoPointValue.longitude)===ge(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ge(o.integerValue)===ge(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ge(o.doubleValue),m=ge(u.doubleValue);return h===m?fu(h)===fu(m):isNaN(h)&&isNaN(m)}return!1})(s,t);case 9:return Eo(s.arrayValue.values||[],t.arrayValue.values||[],qi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(hv(h)!==hv(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!qi(h[g],m[g])))return!1;return!0})(s,t);default:return mt(52216,{left:s})}}function yu(s,t){return(s.values||[]).find((n=>qi(n,t)))!==void 0}function as(s,t){if(s===t)return 0;const n=ss(s),r=ss(t);if(n!==r)return St(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(s.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=ge(u.integerValue||u.doubleValue),g=ge(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return dv(s.timestampValue,t.timestampValue);case 4:return dv(pu(s),pu(t));case 5:return Gm(s.stringValue,t.stringValue);case 6:return(function(u,h){const m=dr(u),g=dr(h);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let y=0;y<m.length&&y<g.length;y++){const E=St(m[y],g[y]);if(E!==0)return E}return St(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=St(ge(u.latitude),ge(h.latitude));return m!==0?m:St(ge(u.longitude),ge(h.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return mv(s.arrayValue,t.arrayValue);case 10:return(function(u,h){var S,O,H,q;const m=u.fields||{},g=h.fields||{},y=(S=m[xo])==null?void 0:S.arrayValue,E=(O=g[xo])==null?void 0:O.arrayValue,b=St(((H=y==null?void 0:y.values)==null?void 0:H.length)||0,((q=E==null?void 0:E.values)==null?void 0:q.length)||0);return b!==0?b:mv(y,E)})(s.mapValue,t.mapValue);case 11:return(function(u,h){if(u===Wr.mapValue&&h===Wr.mapValue)return 0;if(u===Wr.mapValue)return 1;if(h===Wr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let b=0;b<g.length&&b<E.length;++b){const S=Gm(g[b],E[b]);if(S!==0)return S;const O=as(m[g[b]],y[E[b]]);if(O!==0)return O}return St(g.length,E.length)})(s.mapValue,t.mapValue);default:throw mt(23264,{he:n})}}function dv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return St(s,t);const n=fr(s),r=fr(t),o=St(n.seconds,r.seconds);return o!==0?o:St(n.nanos,r.nanos)}function mv(s,t){const n=s.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=as(n[o],r[o]);if(u)return u}return St(n.length,r.length)}function wo(s){return Jm(s)}function Jm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return dr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ut.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Jm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Jm(n.fields[h])}`;return o+"}"})(s.mapValue):mt(61005,{value:s})}function Ah(s){switch(ss(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sf(s);return t?16+Ah(t):16;case 5:return 2*s.stringValue.length;case 6:return dr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Ah(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return cs(r.fields,((u,h)=>{o+=u.length+Ah(h)})),o})(s.mapValue);default:throw mt(13486,{value:s})}}function _u(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function $m(s){return!!s&&"integerValue"in s}function vu(s){return!!s&&"arrayValue"in s}function gv(s){return!!s&&"nullValue"in s}function pv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Sh(s){return!!s&&"mapValue"in s}function af(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Dg])==null?void 0:r.stringValue)===Ng}function ru(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return cs(s.mapValue.fields,((n,r)=>t.mapValue.fields[n]=ru(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ru(s.arrayValue.values[n]);return t}return{...s}}function yT(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===pT}const _T={mapValue:{fields:{[Dg]:{stringValue:Ng},[xo]:{arrayValue:{}}}}};function Hw(s){return"nullValue"in s?bh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?_u(ia.empty(),ut.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?af(s)?_T:{mapValue:{}}:mt(35942,{value:s})}function Gw(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?_u(ia.empty(),ut.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?_T:"mapValue"in s?af(s)?{mapValue:{}}:Wr:mt(61959,{value:s})}function yv(s,t){const n=as(s.value,t.value);return n!==0?n:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function _v(s,t){const n=as(s.value,t.value);return n!==0?n:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.value=t}static empty(){return new ln({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Sh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ru(n)}setAll(t){let n=ye.emptyPath(),r={},o=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}h?r[m.lastSegment()]=ru(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(t){const n=this.field(t.popLast());Sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];Sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){cs(n,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new ln(ru(this.value))}}function vT(s){const t=[];return cs(s.fields,((n,r)=>{const o=new ye([n]);if(Sh(r)){const u=vT(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)})),new Sn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,n,r,o,u,h,m){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new Ee(t,0,Tt.min(),Tt.min(),Tt.min(),ln.empty(),0)}static newFoundDocument(t,n,r,o){return new Ee(t,1,n,Tt.min(),r,o,0)}static newNoDocument(t,n){return new Ee(t,2,n,Tt.min(),Tt.min(),ln.empty(),0)}static newUnknownDocument(t,n){return new Ee(t,3,n,Tt.min(),Tt.min(),ln.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,n){this.position=t,this.inclusive=n}}function vv(s,t,n){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=ut.comparator(ut.fromName(h.referenceValue),n.key):r=as(h,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ev(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!qi(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,n="asc"){this.field=t,this.dir=n}}function Kw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{}class jt extends ET{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Qw(t,n,r):n==="array-contains"?new Zw(t,r):n==="in"?new wT(t,r):n==="not-in"?new Jw(t,r):n==="array-contains-any"?new $w(t,r):new jt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Yw(t,r):new Xw(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(as(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(as(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ee extends ET{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ee(t,n)}matches(t){return Ro(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ro(s){return s.op==="and"}function Wm(s){return s.op==="or"}function Vg(s){return TT(s)&&Ro(s)}function TT(s){for(const t of s.filters)if(t instanceof ee)return!1;return!0}function tg(s){if(s instanceof jt)return s.field.canonicalString()+s.op.toString()+wo(s.value);if(Vg(s))return s.filters.map((t=>tg(t))).join(",");{const t=s.filters.map((n=>tg(n))).join(",");return`${s.op}(${t})`}}function bT(s,t){return s instanceof jt?(function(r,o){return o instanceof jt&&r.op===o.op&&r.field.isEqual(o.field)&&qi(r.value,o.value)})(s,t):s instanceof ee?(function(r,o){return o instanceof ee&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,h,m)=>u&&bT(h,o.filters[m])),!0):!1})(s,t):void mt(19439)}function AT(s,t){const n=s.filters.concat(t);return ee.create(n,s.op)}function ST(s){return s instanceof jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`})(s):s instanceof ee?(function(n){return n.op.toString()+" {"+n.getFilters().map(ST).join(" ,")+"}"})(s):"Filter"}class Qw extends jt{constructor(t,n,r){super(t,n,r),this.key=ut.fromName(r.referenceValue)}matches(t){const n=ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class Yw extends jt{constructor(t,n){super(t,"in",n),this.keys=xT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class Xw extends jt{constructor(t,n){super(t,"not-in",n),this.keys=xT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function xT(s,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>ut.fromName(r.referenceValue)))}class Zw extends jt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vu(n)&&yu(n.arrayValue,this.value)}}class wT extends jt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}}class Jw extends jt{constructor(t,n){super(t,"not-in",n)}matches(t){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yu(this.value.arrayValue,n)}}class $w extends jt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t,n=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function eg(s,t=null,n=[],r=[],o=null,u=null,h=null){return new Ww(s,t,n,r,o,u,h)}function ra(s){const t=xt(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>tg(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),tf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>wo(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>wo(r))).join(",")),t.Te=n}return t.Te}function xu(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Kw(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!bT(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Ev(s.startAt,t.startAt)&&Ev(s.endAt,t.endAt)}function Uh(s){return ut.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function qh(s,t){return s.filters.filter((n=>n instanceof jt&&n.field.isEqual(t)))}function Tv(s,t,n){let r=bh,o=!0;for(const u of qh(s,t)){let h=bh,m=!0;switch(u.op){case"<":case"<=":h=Hw(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=bh}yv({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(n!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=n.position[u];yv({value:r,inclusive:o},{value:h,inclusive:n.inclusive})<0&&(r=h,o=n.inclusive);break}}return{value:r,inclusive:o}}function bv(s,t,n){let r=Wr,o=!0;for(const u of qh(s,t)){let h=Wr,m=!0;switch(u.op){case">=":case">":h=Gw(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Wr}_v({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(n!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=n.position[u];_v({value:r,inclusive:o},{value:h,inclusive:n.inclusive})>0&&(r=h,o=n.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t,n=null,r=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t2(s,t,n,r,o,u,h,m){return new wu(s,t,n,r,o,u,h,m)}function Mg(s){return new wu(s)}function Av(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function IT(s){return s.collectionGroup!==null}function su(s){const t=xt(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new ne(ye.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Lh(u,r))})),n.has(ye.keyField().canonicalString())||t.Ie.push(new Lh(ye.keyField(),r))}return t.Ie}function ti(s){const t=xt(s);return t.Ee||(t.Ee=e2(t,su(s))),t.Ee}function e2(s,t){if(s.limitType==="F")return eg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Lh(o.field,u)}));const n=s.endAt?new Io(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Io(s.startAt.position,s.startAt.inclusive):null;return eg(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function ng(s,t){const n=s.filters.concat([t]);return new wu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function ig(s,t,n){return new wu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function of(s,t){return xu(ti(s),ti(t))&&s.limitType===t.limitType}function RT(s){return`${ra(ti(s))}|lt:${s.limitType}`}function ho(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>ST(o))).join(", ")}]`),tf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>wo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>wo(o))).join(",")),`Target(${r})`})(ti(s))}; limitType=${s.limitType})`}function Iu(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ut.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of su(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(h,m,g){const y=vv(h,m,g);return h.inclusive?y<=0:y<0})(r.startAt,su(r),o)||r.endAt&&!(function(h,m,g){const y=vv(h,m,g);return h.inclusive?y>=0:y>0})(r.endAt,su(r),o))})(s,t)}function n2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function CT(s){return(t,n)=>{let r=!1;for(const o of su(s)){const u=i2(o,t,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function i2(s,t,n){const r=s.field.isKeyField()?ut.comparator(t.key,n.key):(function(u,h,m){const g=h.data.field(u),y=m.data.field(u);return g!==null&&y!==null?as(g,y):mt(42886)})(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return mt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){cs(this.inner,((n,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return cT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new pe(ut.comparator);function kn(){return r2}const DT=new pe(ut.comparator);function Zl(...s){let t=DT;for(const n of s)t=t.insert(n.key,n);return t}function NT(s){let t=DT;return s.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function ji(){return au()}function VT(){return au()}function au(){return new mr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const s2=new pe(ut.comparator),a2=new ne(ut.comparator);function Mt(...s){let t=a2;for(const n of s)t=t.add(n);return t}const o2=new ne(St);function l2(){return o2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(t)?"-0":t}}function MT(s){return{integerValue:""+s}}function u2(s,t){return gw(t)?MT(t):Og(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function c2(s,t,n){return s instanceof Eu?(function(o,u){const h={fields:{[dT]:{stringValue:fT},[gT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Cg(u)&&(u=sf(u)),u&&(h.fields[mT]=u),{mapValue:h}})(n,t):s instanceof Co?zT(s,t):s instanceof Do?kT(s,t):(function(o,u){const h=OT(o,u),m=Sv(h)+Sv(o.Ae);return $m(h)&&$m(o.Ae)?MT(m):Og(o.serializer,m)})(s,t)}function h2(s,t,n){return s instanceof Co?zT(s,t):s instanceof Do?kT(s,t):n}function OT(s,t){return s instanceof Tu?(function(r){return $m(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Eu extends lf{}class Co extends lf{constructor(t){super(),this.elements=t}}function zT(s,t){const n=PT(t);for(const r of s.elements)n.some((o=>qi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Do extends lf{constructor(t){super(),this.elements=t}}function kT(s,t){let n=PT(t);for(const r of s.elements)n=n.filter((o=>!qi(o,r)));return{arrayValue:{values:n}}}class Tu extends lf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Sv(s){return ge(s.integerValue||s.doubleValue)}function PT(s){return vu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t,n){this.field=t,this.transform=n}}function d2(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Co&&o instanceof Co||r instanceof Do&&o instanceof Do?Eo(r.elements,o.elements,qi):r instanceof Tu&&o instanceof Tu?qi(r.Ae,o.Ae):r instanceof Eu&&o instanceof Eu})(s.transform,t.transform)}class m2{constructor(t,n){this.version=t,this.transformResults=n}}class Qe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Qe}static exists(t){return new Qe(void 0,t)}static updateTime(t){return new Qe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class uf{}function BT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Ru(s.key,Qe.none()):new zo(s.key,s.data,Qe.none());{const n=s.data,r=ln.empty();let o=new ne(ye.comparator);for(let u of t.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new gr(s.key,r,new Sn(o.toArray()),Qe.none())}}function g2(s,t,n){s instanceof zo?(function(o,u,h){const m=o.value.clone(),g=wv(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,t,n):s instanceof gr?(function(o,u,h){if(!xh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=wv(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(jT(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,t,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function ou(s,t,n,r){return s instanceof zo?(function(u,h,m,g){if(!xh(u.precondition,h))return m;const y=u.value.clone(),E=Iv(u.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,t,n,r):s instanceof gr?(function(u,h,m,g){if(!xh(u.precondition,h))return m;const y=Iv(u.fieldTransforms,g,h),E=h.data;return E.setAll(jT(u)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(s,t,n,r):(function(u,h,m){return xh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,t,n)}function p2(s,t){let n=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=OT(r.transform,o||null);u!=null&&(n===null&&(n=ln.empty()),n.set(r.field,u))}return n||null}function xv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Eo(r,o,((u,h)=>d2(u,h)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class zo extends uf{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gr extends uf{constructor(t,n,r,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function jT(s){const t=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}})),t}function wv(s,t,n){const r=new Map;yt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,h2(h,m,n[o]))}return r}function Iv(s,t,n){const r=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);r.set(o.field,c2(u,h,t))}return r}class Ru extends uf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends uf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&g2(u,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ou(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ou(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=VT();return this.mutations.forEach((o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const g=BT(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Tt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Mt())}isEqual(t){return this.batchId===t.batchId&&Eo(this.mutations,t.mutations,((n,r)=>xv(n,r)))&&Eo(this.baseMutations,t.baseMutations,((n,r)=>xv(n,r)))}}class kg{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){yt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return s2})();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new kg(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,qt;function _2(s){switch(s){case Z.OK:return mt(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return mt(15467,{code:s})}}function UT(s){if(s===void 0)return dn("GRPC error has no .code"),Z.UNKNOWN;switch(s){case ze.OK:return Z.OK;case ze.CANCELLED:return Z.CANCELLED;case ze.UNKNOWN:return Z.UNKNOWN;case ze.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ze.INTERNAL:return Z.INTERNAL;case ze.UNAVAILABLE:return Z.UNAVAILABLE;case ze.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ze.NOT_FOUND:return Z.NOT_FOUND;case ze.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ze.ABORTED:return Z.ABORTED;case ze.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ze.DATA_LOSS:return Z.DATA_LOSS;default:return mt(39323,{code:s})}}(qt=ze||(ze={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new ns([4294967295,4294967295],0);function Rv(s){const t=v2().encode(s),n=new jE;return n.update(t),new Uint8Array(n.digest())}function Cv(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new ns([n,r],0),new ns([o,u],0)]}class Bg{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ns.fromNumber(this.ge)}ye(t,n,r){let o=t.add(n.multiply(ns.fromNumber(r)));return o.compare(E2)===1&&(o=new ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Rv(t),[r,o]=Cv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);if(!this.we(h))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Bg(u,o,n);return r.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=Rv(t),[r,o]=Cv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);this.Se(h)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,n,r,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,Cu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new cf(Tt.min(),o,new pe(St),kn(),Mt())}}class Cu{constructor(t,n,r,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Cu(r,n,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t,n,r,o){this.be=t,this.removedTargetIds=n,this.key=r,this.De=o}}class qT{constructor(t,n){this.targetId=t,this.Ce=n}}class FT{constructor(t,n,r=Pe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Dv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=Pe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),n=Mt(),r=Mt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:mt(38017,{changeType:u})}})),new Cu(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T2{constructor(t){this.Ge=t,this.ze=new Map,this.je=kn(),this.Je=fh(),this.He=fh(),this.Ye=new pe(St)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:mt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,r=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Uh(u))if(r===0){const h=new ut(u.path);this.et(n,h,Ee.newNoDocument(h,Tt.min()))}else yt(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const m=this.ut(t),g=m?this.ct(m,t,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=dr(r).toUint8Array()}catch(g){if(g instanceof hT)return na("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Bg(h,o,u)}catch(g){return na(g instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&Uh(m.target)){const g=new ut(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Ee.newNoDocument(g,t))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let r=Mt();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const o=new cf(t,n,this.Ye,this.je,r);return this.je=kn(),this.Je=fh(),this.He=fh(),this.Ye=new pe(St),o}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Dv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ne(St),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ne(St),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||nt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Dv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function fh(){return new pe(ut.comparator)}function Nv(){return new pe(ut.comparator)}const b2={asc:"ASCENDING",desc:"DESCENDING"},A2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S2={and:"AND",or:"OR"};class x2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function rg(s,t){return s.useProto3Json||tf(t)?t:{value:t}}function No(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function HT(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function w2(s,t){return No(s,t.toTimestamp())}function mn(s){return yt(!!s,49232),Tt.fromTimestamp((function(n){const r=fr(n);return new te(r.seconds,r.nanos)})(s))}function jg(s,t){return sg(s,t).canonicalString()}function sg(s,t){const n=(function(o){return new Zt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?n:n.child(t)}function GT(s){const t=Zt.fromString(s);return yt(t1(t),10190,{key:t.toString()}),t}function Fh(s,t){return jg(s.databaseId,t.path)}function ta(s,t){const n=GT(t);if(n.get(1)!==s.databaseId.projectId)throw new at(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new at(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ut(YT(n))}function KT(s,t){return jg(s.databaseId,t)}function QT(s){const t=GT(s);return t.length===4?Zt.emptyPath():YT(t)}function ag(s){return new Zt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function YT(s){return yt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Vv(s,t,n){return{name:Fh(s,t),fields:n.value.mapValue.fields}}function I2(s,t,n){const r=ta(s,t.name),o=mn(t.updateTime),u=t.createTime?mn(t.createTime):Tt.min(),h=new ln({mapValue:{fields:t.fields}}),m=Ee.newFoundDocument(r,o,u,h);return n&&m.setHasCommittedMutations(),n?m.setHasCommittedMutations():m}function R2(s,t){let n;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:mt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(yt(E===void 0||typeof E=="string",58123),Pe.fromBase64String(E||"")):(yt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Pe.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(y){const E=y.code===void 0?Z.UNKNOWN:UT(y.code);return new at(E,y.message||"")})(h);n=new FT(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=ta(s,r.document.name),u=mn(r.document.updateTime),h=r.document.createTime?mn(r.document.createTime):Tt.min(),m=new ln({mapValue:{fields:r.document.fields}}),g=Ee.newFoundDocument(o,u,h,m),y=r.targetIds||[],E=r.removedTargetIds||[];n=new wh(y,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=ta(s,r.document),u=r.readTime?mn(r.readTime):Tt.min(),h=Ee.newNoDocument(o,u),m=r.removedTargetIds||[];n=new wh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=ta(s,r.document),u=r.removedTargetIds||[];n=new wh([],u,o,null)}else{if(!("filter"in t))return mt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new y2(o,u),m=r.targetId;n=new qT(m,h)}}return n}function Hh(s,t){let n;if(t instanceof zo)n={update:Vv(s,t.key,t.value)};else if(t instanceof Ru)n={delete:Fh(s,t.key)};else if(t instanceof gr)n={update:Vv(s,t.key,t.data),updateMask:O2(t.fieldMask)};else{if(!(t instanceof LT))return mt(16599,{Vt:t.type});n={verify:Fh(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(u,h){const m=h.transform;if(m instanceof Eu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Co)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Do)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Tu)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw mt(20930,{transform:h.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:w2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:mt(27497)})(s,t.precondition)),n}function og(s,t){const n=t.currentDocument?(function(u){return u.updateTime!==void 0?Qe.updateTime(mn(u.updateTime)):u.exists!==void 0?Qe.exists(u.exists):Qe.none()})(t.currentDocument):Qe.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(h,m){let g=null;if("setToServerValue"in m)yt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Eu;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Co(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new Do(E)}else"increment"in m?g=new Tu(h,m.increment):mt(16584,{proto:m});const y=ye.fromServerFormat(m.fieldPath);return new f2(y,g)})(s,o))):[];if(t.update){t.update.name;const o=ta(s,t.update.name),u=new ln({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=(function(g){const y=g.fieldPaths||[];return new Sn(y.map((E=>ye.fromServerFormat(E))))})(t.updateMask);return new gr(o,u,h,n,r)}return new zo(o,u,n,r)}if(t.delete){const o=ta(s,t.delete);return new Ru(o,n)}if(t.verify){const o=ta(s,t.verify);return new LT(o,n)}return mt(1463,{proto:t})}function C2(s,t){return s&&s.length>0?(yt(t!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?mn(o.updateTime):mn(u);return h.isEqual(Tt.min())&&(h=mn(u)),new m2(h,o.transformResults||[])})(n,t)))):[]}function XT(s,t){return{documents:[KT(s,t.path)]}}function ZT(s,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KT(s,o);const u=(function(y){if(y.length!==0)return WT(ee.create(y,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((E=>(function(S){return{field:fo(S.field),direction:N2(S.dir)}})(E)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=rg(s,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:o}}function JT(s){let t=QT(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){yt(r===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(b){const S=$T(b);return S instanceof ee&&Vg(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(b){return b.map((S=>(function(H){return new Lh(mo(H.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(b){let S;return S=typeof b=="object"?b.value:b,tf(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(b){const S=!!b.before,O=b.values||[];return new Io(O,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const S=!b.before,O=b.values||[];return new Io(O,S)})(n.endAt)),t2(t,o,h,u,m,"F",g,y)}function D2(s,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function $T(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mo(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=mo(n.unaryFilter.field);return jt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return jt.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ee.create(n.compositeFilter.filters.map((r=>$T(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return mt(1026)}})(n.compositeFilter.op))})(s):mt(30097,{filter:s})}function N2(s){return b2[s]}function V2(s){return A2[s]}function M2(s){return S2[s]}function fo(s){return{fieldPath:s.canonicalString()}}function mo(s){return ye.fromServerFormat(s.fieldPath)}function WT(s){return s instanceof jt?(function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:V2(n.op),value:n.value}}})(s):s instanceof ee?(function(n){const r=n.getFilters().map((o=>WT(o)));return r.length===1?r[0]:{compositeFilter:{op:M2(n.op),filters:r}}})(s):mt(54877,{filter:s})}function O2(s){const t=[];return s.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function t1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t,n,r,o,u=Tt.min(),h=Tt.min(),m=Pe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new lr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t){this.yt=t}}function z2(s,t){let n;if(t.document)n=I2(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=ut.fromSegments(t.noDocument.path),o=aa(t.noDocument.readTime);n=Ee.newNoDocument(r,o),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt(56709);{const r=ut.fromSegments(t.unknownDocument.path),o=aa(t.unknownDocument.version);n=Ee.newUnknownDocument(r,o)}}return t.readTime&&n.setReadTime((function(o){const u=new te(o[0],o[1]);return Tt.fromTimestamp(u)})(t.readTime)),n}function Mv(s,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Gh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,h){return{name:Fh(u,h.key),fields:h.data.value.mapValue.fields,updateTime:No(u,h.version.toTimestamp()),createTime:No(u,h.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sa(t.version)};else{if(!t.isUnknownDocument())return mt(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:sa(t.version)}}return r}function Gh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function sa(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function aa(s){const t=new te(s.seconds,s.nanoseconds);return Tt.fromTimestamp(t)}function Ys(s,t){const n=(t.baseMutations||[]).map((u=>og(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>og(s.yt,u))),o=te.fromMillis(t.localWriteTimeMs);return new zg(t.batchId,o,n,r)}function $l(s){const t=aa(s.readTime),n=s.lastLimboFreeSnapshotVersion!==void 0?aa(s.lastLimboFreeSnapshotVersion):Tt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const h=u.documents.length;return yt(h===1,1966,{count:h}),ti(Mg(QT(u.documents[0])))})(s.query):(function(u){return ti(JT(u))})(s.query),new lr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,n,Pe.fromBase64String(s.resumeToken))}function n1(s,t){const n=sa(t.snapshotVersion),r=sa(t.lastLimboFreeSnapshotVersion);let o;o=Uh(t.target)?XT(s.yt,t.target):ZT(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ra(t.target),readTime:n,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function i1(s){const t=JT({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ig(t,t.limit,"L"):t}function Dm(s,t){return new Pg(t.largestBatchId,og(s.yt,t.overlayMutation))}function Ov(s,t){const n=t.path.lastSegment();return[s,un(t.path.popLast()),n]}function zv(s,t,n,r){return{indexId:s,uid:t,sequenceNumber:n,readTime:sa(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{getBundleMetadata(t,n){return kv(t).get(n).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:aa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,n){return kv(t).put((function(o){return{bundleId:o.id,createTime:sa(mn(o.createTime)),version:o.version}})(n))}getNamedQuery(t,n){return Pv(t).get(n).next((r=>{if(r)return(function(u){return{name:u.name,query:i1(u.bundledQuery),readTime:aa(u.readTime)}})(r)}))}saveNamedQuery(t,n){return Pv(t).put((function(o){return{name:o.name,readTime:sa(mn(o.readTime)),bundledQuery:o.bundledQuery}})(n))}}function kv(s){return qe(s,ef)}function Pv(s){return qe(s,nf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,n){this.serializer=t,this.userId=n}static wt(t,n){const r=n.uid||"";return new hf(t,r)}getOverlay(t,n){return Hl(t).get(Ov(this.userId,n)).next((r=>r?Dm(this.serializer,r):null))}getOverlays(t,n){const r=ji();return B.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){const o=[];return r.forEach(((u,h)=>{const m=new Pg(n,h);o.push(this.St(t,m))})),B.waitFor(o)}removeOverlaysForBatchId(t,n,r){const o=new Set;n.forEach((h=>o.add(un(h.getCollectionPath()))));const u=[];return o.forEach((h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(Hl(t).Z(Xm,m))})),B.waitFor(u)}getOverlaysForCollection(t,n,r){const o=ji(),u=un(n),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Hl(t).J(Xm,h).next((m=>{for(const g of m){const y=Dm(this.serializer,g);o.set(y.getKey(),y)}return o}))}getOverlaysForCollectionGroup(t,n,r,o){const u=ji();let h;const m=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Hl(t).ee({index:sT,range:m},((g,y,E)=>{const b=Dm(this.serializer,y);u.size()<o||b.largestBatchId===h?(u.set(b.getKey(),b),h=b.largestBatchId):E.done()})).next((()=>u))}St(t,n){return Hl(t).put((function(o,u,h){const[m,g,y]=Ov(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:y,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Hh(o.yt,h.mutation)}})(this.serializer,this.userId,n))}}function Hl(s){return qe(s,rf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{bt(t){return qe(t,Ig)}getSessionToken(t){return this.bt(t).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?Pe.fromUint8Array(r):Pe.EMPTY_BYTE_STRING}))}setSessionToken(t,n){return this.bt(t).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){}Dt(t,n){this.Ct(t,n),n.vt()}Ct(t,n){if("nullValue"in t)this.Ft(n,5);else if("booleanValue"in t)this.Ft(n,10),n.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(n,15),n.Mt(ge(t.integerValue));else if("doubleValue"in t){const r=ge(t.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),fu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=fr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,n),this.Nt(n);else if("bytesValue"in t)this.Ft(n,30),n.Bt(dr(t.bytesValue)),this.Nt(n);else if("referenceValue"in t)this.Lt(t.referenceValue,n);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in t?yT(t)?this.Ft(n,Number.MAX_SAFE_INTEGER):af(t)?this.kt(t.mapValue,n):(this.qt(t.mapValue,n),this.Nt(n)):"arrayValue"in t?(this.Qt(t.arrayValue,n),this.Nt(n)):mt(19022,{$t:t})}Ot(t,n){this.Ft(n,25),this.Ut(t,n)}Ut(t,n){n.xt(t)}qt(t,n){const r=t.fields||{};this.Ft(n,55);for(const o of Object.keys(r))this.Ot(o,n),this.Ct(r[o],n)}kt(t,n){var h,m;const r=t.fields||{};this.Ft(n,53);const o=xo,u=((m=(h=r[o].arrayValue)==null?void 0:h.values)==null?void 0:m.length)||0;this.Ft(n,15),n.Mt(ge(u)),this.Ot(o,n),this.Ct(r[o],n)}Qt(t,n){const r=t.values||[];this.Ft(n,50);for(const o of r)this.Ct(o,n)}Lt(t,n){this.Ft(n,37),ut.fromName(t).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(t,n){t.Mt(n)}Nt(t){t.Mt(2)}}Xs.Kt=new Xs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=255;function B2(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function Bv(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const h=B2(255&r[u]);if(o+=h,h!==8)break}return o})(s);return Math.ceil(t/8)}class j2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=n.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=n.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const n=this.en(t),r=Bv(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=255&n[o]}nn(t){const n=this.en(t),r=Bv(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=~(255&n[o])}rn(){this.sn(ro),this.sn(255)}_n(){this.an(ro),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const n=(function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)})(t),r=!!(128&n[0]);n[0]^=r?255:128;for(let o=1;o<n.length;++o)n[o]^=r?255:0;return n}Gt(t){const n=255&t;n===0?(this.sn(0),this.sn(255)):n===ro?(this.sn(ro),this.sn(0)):this.sn(n)}Jt(t){const n=255&t;n===0?(this.an(0),this.an(255)):n===ro?(this.an(ro),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const n=t+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class L2{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class U2{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Gl{constructor(){this.cn=new j2,this.ln=new L2(this.cn),this.hn=new U2(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,n,r,o){this.Tn=t,this.In=n,this.En=r,this.dn=o}An(){const t=this.dn.length,n=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.dn,0),n!==t?r.set([0],this.dn.length):++r[r.length-1],new Zs(this.Tn,this.In,this.En,r)}Rn(t,n,r){return{indexId:this.Tn,uid:t,arrayValue:Ih(this.En),directionalValue:Ih(this.dn),orderedDocumentKey:Ih(n),documentKey:r.path.toArray()}}Vn(t,n,r){const o=this.Rn(t,n,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Xr(s,t){let n=s.Tn-t.Tn;return n!==0?n:(n=jv(s.En,t.En),n!==0?n:(n=jv(s.dn,t.dn),n!==0?n:ut.comparator(s.In,t.In)))}function jv(s,t){for(let n=0;n<s.length&&n<t.length;++n){const r=s[n]-t[n];if(r!==0)return r}return s.length-t.length}function Ih(s){return DE()?(function(n){let r="";for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return r})(s):s}function Lv(s){return typeof s!="string"?s:(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(s)}class Uv{constructor(t){this.mn=new ne(((n,r)=>ye.comparator(n.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const n of t.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(yt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Km(t);if(n!==void 0&&!this.wn(n))return!1;const r=Gs(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.fn.length||!this.bn(this.fn[h++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new ne(ye.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new vh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),n.push(new vh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),n.push(new vh(r.field,r.dir==="asc"?0:1)));return new zh(zh.UNKNOWN_ID,this.collectionId,n,hu.empty())}wn(t){for(const n of this.gn)if(this.Sn(n,t))return!0;return!1}Sn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===r}bn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(s){var n,r;if(yt(s instanceof jt||s instanceof ee,20012),s instanceof jt){if(s instanceof wT){const o=((r=(n=s.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((u=>jt.create(s.field,"==",u))))||[];return ee.create(o,"or")}return s}const t=s.filters.map((o=>r1(o)));return ee.create(t,s.op)}function q2(s){if(s.getFilters().length===0)return[];const t=cg(r1(s));return yt(s1(t),7391),lg(t)||ug(t)?[t]:t.getFilters()}function lg(s){return s instanceof jt}function ug(s){return s instanceof ee&&Vg(s)}function s1(s){return lg(s)||ug(s)||(function(n){if(n instanceof ee&&Wm(n)){for(const r of n.getFilters())if(!lg(r)&&!ug(r))return!1;return!0}return!1})(s)}function cg(s){if(yt(s instanceof jt||s instanceof ee,34018),s instanceof jt)return s;if(s.filters.length===1)return cg(s.filters[0]);const t=s.filters.map((r=>cg(r)));let n=ee.create(t,s.op);return n=Kh(n),s1(n)?n:(yt(n instanceof ee,64498),yt(Ro(n),40251),yt(n.filters.length>1,57927),n.filters.reduce(((r,o)=>Lg(r,o))))}function Lg(s,t){let n;return yt(s instanceof jt||s instanceof ee,38388),yt(t instanceof jt||t instanceof ee,25473),n=s instanceof jt?t instanceof jt?(function(o,u){return ee.create([o,u],"and")})(s,t):qv(s,t):t instanceof jt?qv(t,s):(function(o,u){if(yt(o.filters.length>0&&u.filters.length>0,48005),Ro(o)&&Ro(u))return AT(o,u.getFilters());const h=Wm(o)?o:u,m=Wm(o)?u:o,g=h.filters.map((y=>Lg(y,m)));return ee.create(g,"or")})(s,t),Kh(n)}function qv(s,t){if(Ro(t))return AT(t,s.getFilters());{const n=t.filters.map((r=>Lg(s,r)));return ee.create(n,"or")}}function Kh(s){if(yt(s instanceof jt||s instanceof ee,11850),s instanceof jt)return s;const t=s.getFilters();if(t.length===1)return Kh(t[0]);if(TT(s))return s;const n=t.map((o=>Kh(o))),r=[];return n.forEach((o=>{o instanceof jt?r.push(o):o instanceof ee&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:ee.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.Cn=new Ug}addToCollectionParentIndex(t,n){return this.Cn.add(n),B.resolve()}getCollectionParents(t,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return B.resolve()}deleteFieldIndex(t,n){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,n){return B.resolve()}getDocumentsMatchingTarget(t,n){return B.resolve(null)}getIndexType(t,n){return B.resolve(0)}getFieldIndexes(t,n){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,n){return B.resolve(Pn.min())}getMinOffsetFromCollectionGroup(t,n){return B.resolve(Pn.min())}updateCollectionGroup(t,n,r){return B.resolve()}updateIndexEntries(t,n){return B.resolve()}}class Ug{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new ne(Zt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new ne(Zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="IndexedDbIndexManager",dh=new Uint8Array(0);class H2{constructor(t,n){this.databaseId=n,this.vn=new Ug,this.Fn=new mr((r=>ra(r)),((r,o)=>xu(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.vn.has(n)){const r=n.lastSegment(),o=n.popLast();t.addOnCommittedListener((()=>{this.vn.add(n)}));const u={collectionId:r,parent:un(o)};return Hv(t).put(u)}return B.resolve()}getCollectionParents(t,n){const r=[],o=IDBKeyRange.bound([n,""],[QE(n),""],!1,!0);return Hv(t).J(o).next((u=>{for(const h of u){if(h.collectionId!==n)break;r.push(Bi(h.parent))}return r}))}addFieldIndex(t,n){const r=Kl(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(n);delete o.indexId;const u=r.add(o);if(n.indexState){const h=ao(t);return u.next((m=>{h.put(zv(m,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return u.next()}deleteFieldIndex(t,n){const r=Kl(t),o=ao(t),u=so(t);return r.delete(n.indexId).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const n=Kl(t),r=so(t),o=ao(t);return n.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,n){return B.forEach(this.Mn(n),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new Uv(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,n){const r=so(t);let o=!0;const u=new Map;return B.forEach(this.Mn(n),(h=>this.xn(t,h).next((m=>{o&&(o=!!m),u.set(h,m)})))).next((()=>{if(o){let h=Mt();const m=[];return B.forEach(u,((g,y)=>{nt(Fv,`Using index ${(function(tt){return`id=${tt.indexId}|cg=${tt.collectionGroup}|f=${tt.fields.map((it=>`${it.fieldPath}:${it.kind}`)).join(",")}`})(g)} to execute ${ra(n)}`);const E=(function(tt,it){const gt=Km(it);if(gt===void 0)return null;for(const ft of qh(tt,gt.fieldPath))switch(ft.op){case"array-contains-any":return ft.value.arrayValue.values||[];case"array-contains":return[ft.value]}return null})(y,g),b=(function(tt,it){const gt=new Map;for(const ft of Gs(it))for(const C of qh(tt,ft.fieldPath))switch(C.op){case"==":case"in":gt.set(ft.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return gt.set(ft.fieldPath.canonicalString(),C.value),Array.from(gt.values())}return null})(y,g),S=(function(tt,it){const gt=[];let ft=!0;for(const C of Gs(it)){const I=C.kind===0?Tv(tt,C.fieldPath,tt.startAt):bv(tt,C.fieldPath,tt.startAt);gt.push(I.value),ft&&(ft=I.inclusive)}return new Io(gt,ft)})(y,g),O=(function(tt,it){const gt=[];let ft=!0;for(const C of Gs(it)){const I=C.kind===0?bv(tt,C.fieldPath,tt.endAt):Tv(tt,C.fieldPath,tt.endAt);gt.push(I.value),ft&&(ft=I.inclusive)}return new Io(gt,ft)})(y,g),H=this.On(g,y,S),q=this.On(g,y,O),Q=this.Nn(g,y,b),rt=this.Bn(g.indexId,E,H,S.inclusive,q,O.inclusive,Q);return B.forEach(rt,(W=>r.Y(W,n.limit).next((tt=>{tt.forEach((it=>{const gt=ut.fromSegments(it.documentKey);h.has(gt)||(h=h.add(gt),m.push(gt))}))}))))})).next((()=>m))}return B.resolve(null)}))}Mn(t){let n=this.Fn.get(t);return n||(t.filters.length===0?n=[t]:n=q2(ee.create(t.filters,"and")).map((r=>eg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,n),n)}Bn(t,n,r,o,u,h,m){const g=(n!=null?n.length:1)*Math.max(r.length,u.length),y=g/(n!=null?n.length:1),E=[];for(let b=0;b<g;++b){const S=n?this.Ln(n[b/y]):dh,O=this.kn(t,S,r[b%y],o),H=this.qn(t,S,u[b%y],h),q=m.map((Q=>this.kn(t,S,Q,!0)));E.push(...this.createRange(O,H,q))}return E}kn(t,n,r,o){const u=new Zs(t,ut.empty(),n,r);return o?u:u.An()}qn(t,n,r,o){const u=new Zs(t,ut.empty(),n,r);return o?u.An():u}xn(t,n){const r=new Uv(n),o=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let h=null;for(const m of u)r.yn(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h}))}getIndexType(t,n){let r=2;const o=this.Mn(n);return B.forEach(o,(u=>this.xn(t,u).next((h=>{h?r!==0&&h.fields.length<(function(g){let y=new ne(ye.comparator),E=!1;for(const b of g.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:y=y.add(S.field));for(const b of g.orderBy)b.field.isKeyField()||(y=y.add(b.field));return y.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(h){return h.limit!==null})(n)&&o.length>1&&r===2?1:r))}Qn(t,n){const r=new Gl;for(const o of Gs(t)){const u=n.data.field(o.fieldPath);if(u==null)return null;const h=r.Pn(o.kind);Xs.Kt.Dt(u,h)}return r.un()}Ln(t){const n=new Gl;return Xs.Kt.Dt(t,n.Pn(0)),n.un()}$n(t,n){const r=new Gl;return Xs.Kt.Dt(_u(this.databaseId,n),r.Pn((function(u){const h=Gs(u);return h.length===0?0:h[h.length-1].kind})(t))),r.un()}Nn(t,n,r){if(r===null)return[];let o=[];o.push(new Gl);let u=0;for(const h of Gs(t)){const m=r[u++];for(const g of o)if(this.Un(n,h.fieldPath)&&vu(m))o=this.Kn(o,h,m);else{const y=g.Pn(h.kind);Xs.Kt.Dt(m,y)}}return this.Wn(o)}On(t,n,r){return this.Nn(t,n,r.position)}Wn(t){const n=[];for(let r=0;r<t.length;++r)n[r]=t[r].un();return n}Kn(t,n,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const g=new Gl;g.seed(m.un()),Xs.Kt.Dt(h,g.Pn(n.kind)),u.push(g)}return u}Un(t,n){return!!t.filters.find((r=>r instanceof jt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,n){const r=Kl(t),o=ao(t);return(n?r.J(Ym,IDBKeyRange.bound(n,n)):r.J()).next((u=>{const h=[];return B.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{h.push((function(E,b){const S=b?new hu(b.sequenceNumber,new Pn(aa(b.readTime),new ut(Bi(b.documentKey)),b.largestBatchId)):hu.empty(),O=E.fields.map((([H,q])=>new vh(ye.fromServerFormat(H),q)));return new zh(E.indexId,E.collectionGroup,O,S)})(m,g))})))).next((()=>h))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((n=>n.length===0?null:(n.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:St(r.collectionGroup,o.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(t,n,r){const o=Kl(t),u=ao(t);return this.Gn(t).next((h=>o.J(Ym,IDBKeyRange.bound(n,n)).next((m=>B.forEach(m,(g=>u.put(zv(g.indexId,this.uid,h,r))))))))}updateIndexEntries(t,n){const r=new Map;return B.forEach(n,((o,u)=>{const h=r.get(o.collectionGroup);return(h?B.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),B.forEach(m,(g=>this.zn(t,o,g).next((y=>{const E=this.jn(u,g);return y.isEqual(E)?B.resolve():this.Jn(t,u,g,y,E)})))))))}))}Hn(t,n,r,o){return so(t).put(o.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(t,n,r,o){return so(t).delete(o.Vn(this.uid,this.$n(r,n.key),n.key))}zn(t,n,r){const o=so(t);let u=new ne(Xr);return o.ee({index:rT,range:IDBKeyRange.only([r.indexId,this.uid,Ih(this.$n(r,n))])},((h,m)=>{u=u.add(new Zs(r.indexId,n,Lv(m.arrayValue),Lv(m.directionalValue)))})).next((()=>u))}jn(t,n){let r=new ne(Xr);const o=this.Qn(n,t);if(o==null)return r;const u=Km(n);if(u!=null){const h=t.data.field(u.fieldPath);if(vu(h))for(const m of h.arrayValue.values||[])r=r.add(new Zs(n.indexId,t.key,this.Ln(m),o))}else r=r.add(new Zs(n.indexId,t.key,dh,o));return r}Jn(t,n,r,o,u){nt(Fv,"Updating index entries for document '%s'",n.key);const h=[];return(function(g,y,E,b,S){const O=g.getIterator(),H=y.getIterator();let q=io(O),Q=io(H);for(;q||Q;){let rt=!1,W=!1;if(q&&Q){const tt=E(q,Q);tt<0?W=!0:tt>0&&(rt=!0)}else q!=null?W=!0:rt=!0;rt?(b(Q),Q=io(H)):W?(S(q),q=io(O)):(q=io(O),Q=io(H))}})(o,u,Xr,(m=>{h.push(this.Hn(t,n,r,m))}),(m=>{h.push(this.Yn(t,n,r,m))})),B.waitFor(h)}Gn(t){let n=1;return ao(t).ee({index:iT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),n=o.sequenceNumber+1})).next((()=>n))}createRange(t,n,r){r=r.sort(((h,m)=>Xr(h,m))).filter(((h,m,g)=>!m||Xr(h,g[m-1])!==0));const o=[];o.push(t);for(const h of r){const m=Xr(h,t),g=Xr(h,n);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(h),o.push(h.An());else if(g>0)break}o.push(n);const u=[];for(let h=0;h<o.length;h+=2){if(this.Zn(o[h],o[h+1]))return[];const m=o[h].Vn(this.uid,dh,ut.empty()),g=o[h+1].Vn(this.uid,dh,ut.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,n){return Xr(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(Gv)}getMinOffset(t,n){return B.mapArray(this.Mn(n),(r=>this.xn(t,r).next((o=>o||mt(44426))))).next(Gv)}}function Hv(s){return qe(s,gu)}function so(s){return qe(s,iu)}function Kl(s){return qe(s,wg)}function ao(s){return qe(s,nu)}function Gv(s){yt(s.length!==0,28825);let t=s[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Ag(o,t)<0&&(t=o),n<o.largestBatchId&&(n=o.largestBatchId)}return new Pn(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a1=41943040;class on{static withCacheSize(t){return new on(t,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(s,t,n){const r=s.store(di),o=s.store(To),u=[],h=IDBKeyRange.only(n.batchId);let m=0;const g=r.ee({range:h},((E,b,S)=>(m++,S.delete())));u.push(g.next((()=>{yt(m===1,47070,{batchId:n.batchId})})));const y=[];for(const E of n.mutations){const b=tT(t,E.key.path,n.batchId);u.push(o.delete(b)),y.push(E.key)}return B.waitFor(u).next((()=>y))}function Qh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw mt(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(a1,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class ff{constructor(t,n,r,o){this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,n,r,o){yt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new ff(u,n,r,o)}checkEmpty(t){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zr(t).ee({index:Js,range:r},((o,u,h)=>{n=!1,h.done()})).next((()=>n))}addMutationBatch(t,n,r,o){const u=go(t),h=Zr(t);return h.add({}).next((m=>{yt(typeof m=="number",49019);const g=new zg(m,n,r,o),y=(function(O,H,q){const Q=q.baseMutations.map((W=>Hh(O.yt,W))),rt=q.mutations.map((W=>Hh(O.yt,W)));return{userId:H,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:Q,mutations:rt}})(this.serializer,this.userId,g),E=[];let b=new ne(((S,O)=>St(S.canonicalString(),O.canonicalString())));for(const S of o){const O=tT(this.userId,S.key.path,m);b=b.add(S.key.path.popLast()),E.push(h.put(y)),E.push(u.put(O,_w))}return b.forEach((S=>{E.push(this.indexManager.addToCollectionParentIndex(t,S))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),B.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,n){return Zr(t).get(n).next((r=>r?(yt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ys(this.serializer,r)):null))}er(t,n){return this.Xn[n]?B.resolve(this.Xn[n]):this.lookupMutationBatch(t,n).next((r=>{if(r){const o=r.keys();return this.Xn[n]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Zr(t).ee({index:Js,range:o},((h,m,g)=>{m.userId===this.userId&&(yt(m.batchId>=r,47524,{tr:r}),u=Ys(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=$s;return Zr(t).ee({index:Js,range:n,reverse:!0},((o,u,h)=>{r=u.batchId,h.done()})).next((()=>r))}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,$s],[this.userId,Number.POSITIVE_INFINITY]);return Zr(t).J(Js,n).next((r=>r.map((o=>Ys(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,n){const r=Eh(this.userId,n.path),o=IDBKeyRange.lowerBound(r),u=[];return go(t).ee({range:o},((h,m,g)=>{const[y,E,b]=h,S=Bi(E);if(y===this.userId&&n.path.isEqual(S))return Zr(t).get(b).next((O=>{if(!O)throw mt(61480,{nr:h,batchId:b});yt(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:b}),u.push(Ys(this.serializer,O))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ne(St);const o=[];return n.forEach((u=>{const h=Eh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=go(t).ee({range:m},((y,E,b)=>{const[S,O,H]=y,q=Bi(O);S===this.userId&&u.path.isEqual(q)?r=r.add(H):b.done()}));o.push(g)})),B.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1,u=Eh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new ne(St);return go(t).ee({range:h},((g,y,E)=>{const[b,S,O]=g,H=Bi(S);b===this.userId&&r.isPrefixOf(H)?H.length===o&&(m=m.add(O)):E.done()})).next((()=>this.rr(t,m)))}rr(t,n){const r=[],o=[];return n.forEach((u=>{o.push(Zr(t).get(u).next((h=>{if(h===null)throw mt(35274,{batchId:u});yt(h.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:h.userId,batchId:u}),r.push(Ys(this.serializer,h))})))})),B.waitFor(o).next((()=>r))}removeMutationBatch(t,n){return o1(t.le,this.userId,n).next((r=>(t.addOnCommittedListener((()=>{this.ir(n.batchId)})),B.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((n=>{if(!n)return B.resolve();const r=IDBKeyRange.lowerBound((function(h){return[h]})(this.userId)),o=[];return go(t).ee({range:r},((u,h,m)=>{if(u[0]===this.userId){const g=Bi(u[1]);o.push(g)}else m.done()})).next((()=>{yt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,n){return l1(t,this.userId,n)}_r(t){return u1(t).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:$s,lastStreamToken:""}))}}function l1(s,t,n){const r=Eh(t,n.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return go(s).ee({range:u,X:!0},((m,g,y)=>{const[E,b,S]=m;E===t&&b===o&&(h=!0),y.done()})).next((()=>h))}function Zr(s){return qe(s,di)}function go(s){return qe(s,To)}function u1(s){return qe(s,du)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new oa(0)}static cr(){return new oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.lr(t).next((n=>{const r=new oa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(t,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((n=>Tt.fromTimestamp(new te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(t,n,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),this.hr(t,o))))}addTargetData(t,n){return this.Pr(t,n).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(t,r))))))}updateTargetData(t,n){return this.Pr(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next((()=>oo(t).delete(n.targetId))).next((()=>this.lr(t))).next((r=>(yt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,n,r){let o=0;const u=[];return oo(t).ee(((h,m)=>{const g=$l(m);g.sequenceNumber<=n&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>B.waitFor(u))).next((()=>o))}forEachTarget(t,n){return oo(t).ee(((r,o)=>{const u=$l(o);n(u)}))}lr(t){return Qv(t).get(Bh).next((n=>(yt(n!==null,2888),n)))}hr(t,n){return Qv(t).put(Bh,n)}Pr(t,n){return oo(t).put(n1(this.serializer,n))}Tr(t,n){let r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((n=>n.targetCount))}getTargetData(t,n){const r=ra(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return oo(t).ee({range:o,index:nT},((h,m,g)=>{const y=$l(m);xu(n,y.target)&&(u=y,g.done())})).next((()=>u))}addMatchingKeys(t,n,r){const o=[],u=$r(t);return n.forEach((h=>{const m=un(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,h))})),B.waitFor(o)}removeMatchingKeys(t,n,r){const o=$r(t);return B.forEach(n,(u=>{const h=un(u.path);return B.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,n){const r=$r(t),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),o=$r(t);let u=Mt();return o.ee({range:r,X:!0},((h,m,g)=>{const y=Bi(h[1]),E=new ut(y);u=u.add(E)})).next((()=>u))}containsKey(t,n){const r=un(n.path),o=IDBKeyRange.bound([r],[QE(r)],!1,!0);let u=0;return $r(t).ee({index:xg,X:!0,range:o},(([h,m],g,y)=>{h!==0&&(u++,y.done())})).next((()=>u>0))}At(t,n){return oo(t).get(n).next((r=>r?$l(r):null))}}function oo(s){return qe(s,bo)}function Qv(s){return qe(s,Ws)}function $r(s){return qe(s,Ao)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="LruGarbageCollector",K2=1048576;function Xv([s,t],[n,r]){const o=St(s,n);return o===0?St(t,r):o}class Q2{constructor(t){this.Ir=t,this.buffer=new ne(Xv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c1{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){nt(Yv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){us(n)?nt(Yv,"Ignoring IndexedDB error during garbage collection: ",n):await ua(n)}await this.Vr(3e5)}))}}class Y2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return B.resolve(Wn.ce);const r=new Q2(n);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Kv)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,o,u,h,m,g,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(t,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(t,r,n)))).next((b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((b=>(y=Date.now(),co()<=Ft.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function h1(s,t){return new Y2(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t,n){this.db=t,this.garbageCollector=h1(this,n)}gr(t){const n=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}pr(t,n){return this.Sr(t,((r,o)=>n(o)))}addReference(t,n,r){return mh(t,r)}removeReference(t,n,r){return mh(t,r)}removeTargets(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)}markPotentiallyOrphaned(t,n){return mh(t,n)}br(t,n){return(function(o,u){let h=!1;return u1(o).te((m=>l1(o,m,u).next((g=>(g&&(h=!0),B.resolve(!g)))))).next((()=>h))})(t,n)}removeOrphanedDocuments(t,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((h,m)=>{if(m<=n){const g=this.br(t,h).next((y=>{if(!y)return u++,r.getEntry(t,h).next((()=>(r.removeEntry(h,Tt.min()),$r(t).delete((function(b){return[0,un(b.path)]})(h)))))}));o.push(g)}})).next((()=>B.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,n){return mh(t,n)}Sr(t,n){const r=$r(t);let o,u=Wn.ce;return r.ee({index:xg},(([h,m],{path:g,sequenceNumber:y})=>{h===0?(u!==Wn.ce&&n(new ut(Bi(o)),u),u=y,o=g):u=Wn.ce})).next((()=>{u!==Wn.ce&&n(new ut(Bi(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function mh(s,t){return $r(s).put((function(r,o){return{targetId:0,path:un(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.changes=new mr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ee.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,r){return qs(t).put(r)}removeEntry(t,n,r){return qs(t).delete((function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Gh(h),m[m.length-1]]})(n,r))}updateMetadata(t,n){return this.getMetadata(t).next((r=>(r.byteSize+=n,this.Dr(t,r))))}getEntry(t,n){let r=Ee.newInvalidDocument(n);return qs(t).ee({index:Th,range:IDBKeyRange.only(Ql(n))},((o,u)=>{r=this.Cr(n,u)})).next((()=>r))}vr(t,n){let r={size:0,document:Ee.newInvalidDocument(n)};return qs(t).ee({index:Th,range:IDBKeyRange.only(Ql(n))},((o,u)=>{r={document:this.Cr(n,u),size:Qh(u)}})).next((()=>r))}getEntries(t,n){let r=kn();return this.Fr(t,n,((o,u)=>{const h=this.Cr(o,u);r=r.insert(o,h)})).next((()=>r))}Mr(t,n){let r=kn(),o=new pe(ut.comparator);return this.Fr(t,n,((u,h)=>{const m=this.Cr(u,h);r=r.insert(u,m),o=o.insert(u,Qh(h))})).next((()=>({documents:r,Or:o})))}Fr(t,n,r){if(n.isEmpty())return B.resolve();let o=new ne($v);n.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Ql(o.first()),Ql(o.last())),h=o.getIterator();let m=h.getNext();return qs(t).ee({index:Th,range:u},((g,y,E)=>{const b=ut.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&$v(m,b)<0;)r(m,null),m=h.getNext();m&&m.isEqual(b)&&(r(m,y),m=h.hasNext()?h.getNext():null),m?E.j(Ql(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null}))}getDocumentsMatchingQuery(t,n,r,o,u){const h=n.path,m=[h.popLast().toArray(),h.lastSegment(),Gh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qs(t).J(IDBKeyRange.bound(m,g,!0)).next((y=>{u==null||u.incrementDocumentReadCount(y.length);let E=kn();for(const b of y){const S=this.Cr(ut.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Iu(n,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E}))}getAllFromCollectionGroup(t,n,r,o){let u=kn();const h=Jv(n,r),m=Jv(n,Pn.max());return qs(t).ee({index:eT,range:IDBKeyRange.bound(h,m,!0)},((g,y,E)=>{const b=this.Cr(ut.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);u=u.insert(b.key,b),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new J2(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((n=>n.byteSize))}getMetadata(t){return Zv(t).get(Qm).next((n=>(yt(!!n,20021),n)))}Dr(t,n){return Zv(t).put(Qm,n)}Cr(t,n){if(n){const r=z2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Tt.min())))return r}return Ee.newInvalidDocument(t)}}function d1(s){return new Z2(s)}class J2 extends f1{constructor(t,n){super(),this.Nr=t,this.trackRemovals=n,this.Br=new mr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const n=[];let r=0,o=new ne(((u,h)=>St(u.canonicalString(),h.canonicalString())));return this.changes.forEach(((u,h)=>{const m=this.Br.get(u);if(n.push(this.Nr.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=Mv(this.Nr.serializer,h);o=o.add(u.path.popLast());const y=Qh(g);r+=y-m.size,n.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=Mv(this.Nr.serializer,h.convertToNoDocument(Tt.min()));n.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),n.push(this.Nr.updateMetadata(t,r)),B.waitFor(n)}getFromCache(t,n){return this.Nr.vr(t,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,n){return this.Nr.Mr(t,n).next((({documents:r,Or:o})=>(o.forEach(((u,h)=>{this.Br.set(u,{size:h,readTime:r.get(u).readTime})})),r)))}}function Zv(s){return qe(s,mu)}function qs(s){return qe(s,Ph)}function Ql(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Jv(s,t){const n=t.documentKey.path.toArray();return[s,Gh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $v(s,t){const n=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<n.length-2&&u<r.length-2;++u)if(o=St(n[u],r[u]),o)return o;return o=St(n.length,r.length),o||(o=St(n[n.length-2],r[r.length-2]),o||St(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(r!==null&&ou(r.mutation,o,Sn.empty(),te.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,Mt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=Mt()){const o=ji();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,r).next((u=>{let h=Zl();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const r=ji();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,Mt())))}populateOverlays(t,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,r,o){let u=kn();const h=au(),m=(function(){return au()})();return n.forEach(((g,y)=>{const E=r.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof gr)?u=u.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),ou(E.mutation,y,E.mutation.getFieldMask(),te.now())):h.set(y.key,Sn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,E)=>h.set(y,E))),n.forEach(((y,E)=>m.set(y,new $2(E,h.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,n){const r=au();let o=new pe(((h,m)=>h-m)),u=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let E=r.get(g)||Sn.empty();E=m.applyToLocalView(y,E),r.set(g,E);const b=(o.get(m.batchId)||Mt()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,E=g.value,b=VT();E.forEach((S=>{if(!u.has(S)){const O=BT(n.get(S),r.get(S));O!==null&&b.set(S,O),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(t,y,b))}return B.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,o){return(function(h){return ut.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):IT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-u.size):B.resolve(ji());let m=cu,g=u;return h.next((y=>B.forEach(y,((E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?B.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,Mt()))).next((E=>({batchId:m,changes:NT(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ut(n)).next((r=>{let o=Zl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const u=n.collectionGroup;let h=Zl();return this.indexManager.getCollectionParents(t,u).next((m=>B.forEach(m,(g=>{const y=(function(b,S){return new wu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,o).next((E=>{E.forEach(((b,S)=>{h=h.insert(b,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,o)))).next((h=>{u.forEach(((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Ee.newInvalidDocument(E)))}));let m=Zl();return h.forEach(((g,y)=>{const E=u.get(g);E!==void 0&&ou(E.mutation,y,Sn.empty(),te.now()),Iu(n,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:mn(o.createTime)}})(n)),B.resolve()}getNamedQuery(t,n){return B.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:i1(o.bundledQuery),readTime:mn(o.readTime)}})(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.overlays=new pe(ut.comparator),this.qr=new Map}getOverlay(t,n){return B.resolve(this.overlays.get(n))}getOverlays(t,n){const r=ji();return B.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((o,u)=>{this.St(t,n,u)})),B.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(t,n,r){const o=ji(),u=n.length+1,h=new ut(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return B.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let u=new pe(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let E=u.get(y.largestBatchId);E===null&&(E=ji(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=ji(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=o)););return B.resolve(m)}St(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Pg(n,r));let u=this.qr.get(n);u===void 0&&(u=Mt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.sessionToken=Pe.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this.Qr=new ne(Ke.$r),this.Ur=new ne(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Ke(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Ke(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new ut(new Zt([])),r=new Ke(n,t),o=new Ke(n,t+1),u=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ut(new Zt([])),r=new Ke(n,t),o=new Ke(n,t+1);let u=Mt();return this.Ur.forEachInRange([r,o],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new Ke(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ke{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ut.comparator(t.key,n.key)||St(t.Yr,n.Yr)}static Kr(t,n){return St(t.Yr,n.Yr)||ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ne(Ke.$r)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new zg(u,n,r,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Ke(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return B.resolve(h)}lookupMutationBatch(t,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return B.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?$s:this.tr-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ke(n,0),o=new Ke(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),B.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ne(St);return n.forEach((o=>{const u=new Ke(o,0),h=new Ke(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{r=r.add(m.Yr)}))})),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let u=r;ut.isDocumentKey(u)||(u=u.child(""));const h=new Ke(new ut(u),0);let m=new ne(St);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)}),h),B.resolve(this.ti(m))}ti(t){const n=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,(o=>{const u=new Ke(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Ke(n,0),o=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t){this.ri=t,this.docs=(function(){return new pe(ut.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Ee.newInvalidDocument(n))}getEntries(t,n){let r=kn();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Ee.newInvalidDocument(o))})),B.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let u=kn();const h=n.path,m=new ut(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||Ag(ZE(E),r)<=0||(o.has(E.key)||Iu(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return B.resolve(u)}getAllFromCollectionGroup(t,n,r,o){mt(9500)}ii(t,n){return B.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new rI(this)}getSize(t){return B.resolve(this.size)}}class rI extends f1{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),B.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this.persistence=t,this.si=new mr((n=>ra(n)),xu),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.oi=0,this._i=new qg,this.targetCount=0,this.ai=oa.ur()}forEachTarget(t,n){return this.si.forEach(((r,o)=>n(o))),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new oa(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(t,n){return this.Pr(n),B.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,n,r){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),B.waitFor(u).next((()=>o))}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(t,h))})),B.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(t,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,n){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new eI,this.referenceDelegate=t(this),this.Pi=new sI(this),this.indexManager=new F2,this.remoteDocumentCache=(function(o){return new iI(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new e1(n),this.Ii=new W2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new tI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new nI(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){nt("MemoryPersistence","Starting transaction:",t);const o=new aI(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return B.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class aI extends $E{constructor(t){super(),this.currentSequenceNumber=t}}class df{constructor(t){this.persistence=t,this.Ri=new qg,this.Vi=null}static mi(t){return new df(t)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(r=>{const o=ut.fromPath(r);return this.gi(t,o).next((u=>{u||n.removeEntry(o,Tt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Yh{constructor(t,n){this.persistence=t,this.pi=new mr((r=>un(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=h1(this,n)}static mi(t,n){return new Yh(t,n)}Ei(){}di(t){return B.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return B.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?B.resolve():n(o)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,n).next((m=>{m||(r++,u.removeEntry(h,Tt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),B.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),B.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),B.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ah(t.data.value)),n}br(t,n,r){return B.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return B.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t){this.serializer=t}k(t,n,r,o){const u=new Wh("createOrUpgrade",n);r<1&&o>=1&&((function(g){g.createObjectStore(Su)})(t),(function(g){g.createObjectStore(du,{keyPath:yw}),g.createObjectStore(di,{keyPath:uv,autoIncrement:!0}).createIndex(Js,cv,{unique:!0}),g.createObjectStore(To)})(t),Wv(t),(function(g){g.createObjectStore(Ks)})(t));let h=B.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Ao),g.deleteObjectStore(bo),g.deleteObjectStore(Ws)})(t),Wv(t)),h=h.next((()=>(function(g){const y=g.store(Ws),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return y.put(Bh,E)})(u)))),r<4&&o>=4&&(r!==0&&(h=h.next((()=>(function(g,y){return y.store(di).J().next((b=>{g.deleteObjectStore(di),g.createObjectStore(di,{keyPath:uv,autoIncrement:!0}).createIndex(Js,cv,{unique:!0});const S=y.store(di),O=b.map((H=>S.put(H)));return B.waitFor(O)}))})(t,u)))),h=h.next((()=>{(function(g){g.createObjectStore(So,{keyPath:ww})})(t)}))),r<5&&o>=5&&(h=h.next((()=>this.yi(u)))),r<6&&o>=6&&(h=h.next((()=>((function(g){g.createObjectStore(mu)})(t),this.wi(u))))),r<7&&o>=7&&(h=h.next((()=>this.Si(u)))),r<8&&o>=8&&(h=h.next((()=>this.bi(t,u)))),r<9&&o>=9&&(h=h.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(h=h.next((()=>this.Di(u)))),r<11&&o>=11&&(h=h.next((()=>{(function(g){g.createObjectStore(ef,{keyPath:Iw})})(t),(function(g){g.createObjectStore(nf,{keyPath:Rw})})(t)}))),r<12&&o>=12&&(h=h.next((()=>{(function(g){const y=g.createObjectStore(rf,{keyPath:zw});y.createIndex(Xm,kw,{unique:!1}),y.createIndex(sT,Pw,{unique:!1})})(t)}))),r<13&&o>=13&&(h=h.next((()=>(function(g){const y=g.createObjectStore(Ph,{keyPath:vw});y.createIndex(Th,Ew),y.createIndex(eT,Tw)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(Ks)))),r<14&&o>=14&&(h=h.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(h=h.next((()=>(function(g){g.createObjectStore(wg,{keyPath:Cw,autoIncrement:!0}).createIndex(Ym,Dw,{unique:!1}),g.createObjectStore(nu,{keyPath:Nw}).createIndex(iT,Vw,{unique:!1}),g.createObjectStore(iu,{keyPath:Mw}).createIndex(rT,Ow,{unique:!1})})(t)))),r<16&&o>=16&&(h=h.next((()=>{n.objectStore(nu).clear()})).next((()=>{n.objectStore(iu).clear()}))),r<17&&o>=17&&(h=h.next((()=>{(function(g){g.createObjectStore(Ig,{keyPath:Bw})})(t)}))),r<18&&o>=18&&DE()&&(h=h.next((()=>{n.objectStore(nu).clear()})).next((()=>{n.objectStore(iu).clear()}))),h}wi(t){let n=0;return t.store(Ks).ee(((r,o)=>{n+=Qh(o)})).next((()=>{const r={byteSize:n};return t.store(mu).put(Qm,r)}))}yi(t){const n=t.store(du),r=t.store(di);return n.J().next((o=>B.forEach(o,(u=>{const h=IDBKeyRange.bound([u.userId,$s],[u.userId,u.lastAcknowledgedBatchId]);return r.J(Js,h).next((m=>B.forEach(m,(g=>{yt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const y=Ys(this.serializer,g);return o1(t,u.userId,y).next((()=>{}))}))))}))))}Si(t){const n=t.store(Ao),r=t.store(Ks);return t.store(Ws).get(Bh).next((o=>{const u=[];return r.ee(((h,m)=>{const g=new Zt(h),y=(function(b){return[0,un(b)]})(g);u.push(n.get(y).next((E=>E?B.resolve():(b=>n.put({targetId:0,path:un(b),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>B.waitFor(u)))}))}bi(t,n){t.createObjectStore(gu,{keyPath:xw});const r=n.store(gu),o=new Ug,u=h=>{if(o.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:un(g)})}};return n.store(Ks).ee({X:!0},((h,m)=>{const g=new Zt(h);return u(g.popLast())})).next((()=>n.store(To).ee({X:!0},(([h,m,g],y)=>{const E=Bi(m);return u(E.popLast())}))))}Di(t){const n=t.store(bo);return n.ee(((r,o)=>{const u=$l(o),h=n1(this.serializer,u);return n.put(h)}))}Ci(t,n){const r=n.store(Ks),o=[];return r.ee(((u,h)=>{const m=n.store(Ph),g=(function(b){return b.document?new ut(Zt.fromString(b.document.name).popFirst(5)):b.noDocument?ut.fromSegments(b.noDocument.path):b.unknownDocument?ut.fromSegments(b.unknownDocument.path):mt(36783)})(h).path.toArray(),y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(y))})).next((()=>B.waitFor(o)))}Fi(t,n){const r=n.store(di),o=d1(this.serializer),u=new Fg(df.mi,this.serializer.yt);return r.J().next((h=>{const m=new Map;return h.forEach((g=>{let y=m.get(g.userId)??Mt();Ys(this.serializer,g).keys().forEach((E=>y=y.add(E))),m.set(g.userId,y)})),B.forEach(m,((g,y)=>{const E=new nn(y),b=hf.wt(this.serializer,E),S=u.getIndexManager(E),O=ff.wt(E,this.serializer,S,u.referenceDelegate);return new m1(o,O,b,S).recalculateAndSaveOverlaysForDocumentKeys(new Zm(n,Wn.ce),g).next()}))}))}}function Wv(s){s.createObjectStore(Ao,{keyPath:Aw}).createIndex(xg,Sw,{unique:!0}),s.createObjectStore(bo,{keyPath:"targetId"}).createIndex(nT,bw,{unique:!0}),s.createObjectStore(Ws)}const Jr="IndexedDbPersistence",Nm=18e5,Vm=5e3,Mm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lI="main";class Hg{constructor(t,n,r,o,u,h,m,g,y,E,b=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Mi=u,this.window=h,this.document=m,this.xi=y,this.Oi=E,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Hg.v())throw new at(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new X2(this,o),this.$i=n+lI,this.serializer=new e1(g),this.Ui=new is(this.$i,this.Ni,new oI(this.serializer)),this.hi=new P2,this.Pi=new G2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=d1(this.serializer),this.Ii=new k2,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&dn(Jr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new at(Z.FAILED_PRECONDITION,Mm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new Wn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async n=>{n.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>gh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((n=>this.isPrimary&&!n?this.Zi(t).next((()=>!1)):!!n&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(us(t))return nt(Jr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return nt(Jr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Yl(t).get(no).next((n=>B.resolve(this.es(n))))}ts(t){return gh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Nm)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=qe(n,So);return r.J().next((o=>{const u=this.ss(o,Nm),h=o.filter((m=>u.indexOf(m)===-1));return B.forEach(h,(m=>r.delete(m.clientId))).next((()=>h))}))})).catch((()=>[]));if(this.Ki)for(const n of t)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?B.resolve(!0):Yl(t).get(no).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Vm)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new at(Z.FAILED_PRECONDITION,Mm);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(t).J().next((r=>this.ss(r,Vm).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&nt(Jr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Su,So],(t=>{const n=new Zm(t,Wn.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(t,n){return t.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>gh(t).J().next((n=>this.ss(n,Nm).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,n){return ff.wt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new H2(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return hf.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,n,r){nt(Jr,"Starting transaction:",t);const o=n==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?Uw:g===17?uT:g===16?Lw:g===15?Rg:g===14?lT:g===13?oT:g===12?jw:g===11?aT:void mt(60245)})(this.Ni);let h;return this.Ui.runTransaction(t,o,u,(m=>(h=new Zm(m,this.ci?this.ci.next():Wn.ce),n==="readwrite-primary"?this.Hi(h).next((g=>!!g||this.Yi(h))).next((g=>{if(!g)throw dn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new at(Z.FAILED_PRECONDITION,JE);return r(h)})).next((g=>this.Xi(h).next((()=>g)))):this.Is(h).next((()=>r(h)))))).then((m=>(h.raiseOnCommittedEvent(),m)))}Is(t){return Yl(t).get(no).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Vm)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new at(Z.FAILED_PRECONDITION,Mm)}))}Xi(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yl(t).put(no,n)}static v(){return is.v()}Zi(t){const n=Yl(t);return n.get(no).next((r=>this.es(r)?(nt(Jr,"Releasing primary lease."),n.delete(no)):B.resolve()))}rs(t,n){const r=Date.now();return!(t<r-n)&&(!(t>r)||(dn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;CE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(t)))!==null;return nt(Jr,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dn(Jr,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){dn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Yl(s){return qe(s,Su)}function gh(s){return qe(s,So)}function uI(s,t){let n=s.projectId;return s.isDefaultDatabase||(n+="."+s.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=o}static As(t,n){let r=Mt(),o=Mt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gg(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CE()?8:WE(Nh())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,o){const u={result:null};return this.ys(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(t,n,o,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new cI;return this.Ss(t,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(t,n,h,m.size)}))})).next((()=>u.result))}bs(t,n,r,o){return r.documentReadCount<this.fs?(co()<=Ft.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(co()<=Ft.DEBUG&&nt("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(co()<=Ft.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ti(n))):B.resolve())}ys(t,n){if(Av(n))return B.resolve(null);let r=ti(n);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=ig(n,null,"F"),r=ti(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const h=Mt(...u);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(n,m);return this.Cs(n,y,h,g.readTime)?this.ys(t,ig(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,r,o){return Av(n)||o.isEqual(Tt.min())?B.resolve(null):this.ps.getDocuments(t,r).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,r,o)?B.resolve(null):(co()<=Ft.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(n)),this.vs(t,h,n,cw(o,cu)).next((m=>m)))}))}Ds(t,n){let r=new ne(CT(t));return n.forEach(((o,u)=>{Iu(t,u)&&(r=r.add(u))})),r}Cs(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,r){return co()<=Ft.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",ho(n)),this.ps.getDocumentsMatchingQuery(t,n,Pn.min(),r)}vs(t,n,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="LocalStore",hI=3e8;class fI{constructor(t,n,r,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new pe(St),this.xs=new mr((u=>ra(u)),xu),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new m1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function p1(s,t,n,r){return new fI(s,t,n,r)}async function y1(s,t){const n=xt(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],m=[];let g=Mt();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:m})))}))}))}function dI(s,t){const n=xt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,E){const b=y.batch,S=b.keys();let O=B.resolve();return S.forEach((H=>{O=O.next((()=>E.getEntry(g,H))).next((q=>{const Q=y.docVersions.get(H);yt(Q!==null,48541),q.version.compareTo(Q)<0&&(b.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),E.addEntry(q)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(n,r,t,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Mt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function _1(s){const t=xt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function mI(s,t){const n=xt(s),r=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach(((E,b)=>{const S=o.get(b);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,b))));let O=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?O=O.withResumeToken(Pe.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,r)),o=o.insert(b,O),(function(q,Q,rt){return q.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=hI?!0:rt.addedDocuments.size+rt.modifiedDocuments.size+rt.removedDocuments.size>0})(S,O,E)&&m.push(n.Pi.updateTargetData(u,O))}));let g=kn(),y=Mt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(gI(u,h,t.documentUpdates).next((E=>{g=E.ks,y=E.qs}))),!r.isEqual(Tt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((b=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return B.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function gI(s,t,n){let r=Mt(),o=Mt();return n.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let h=kn();return n.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Tt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):nt(Kg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function pI(s,t){const n=xt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=$s),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function yI(s,t){const n=xt(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,t).next((u=>u?(o=u,B.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new lr(t,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function hg(s,t,n){const r=xt(s),o=r.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!us(h))throw h;nt(Kg,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function tE(s,t,n){const r=xt(s);let o=Tt.min(),u=Mt();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,E){const b=xt(g),S=b.xs.get(E);return S!==void 0?B.resolve(b.Ms.get(S)):b.Pi.getTargetData(y,E)})(r,h,ti(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,t,n?o:Tt.min(),n?u:Mt()))).next((m=>(_I(r,n2(t),m),{documents:m,Qs:u})))))}function _I(s,t,n){let r=s.Os.get(t)||Tt.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class eE{constructor(){this.activeTargetIds=l2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class v1{constructor(){this.Mo=new eE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new eE,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="ConnectivityMonitor";class iE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){nt(nE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){nt(nE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph=null;function fg(){return ph===null?ph=(function(){return 268435456+Math.round(2147483648*Math.random())})():ph++,"0x"+ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===jh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,n,r,o,u){const h=fg(),m=this.zo(t,n.toUriEncodedString());nt(Om,`Sending RPC '${t}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(m),E=vg(y);return this.Jo(t,m,g,r,E).then((b=>(nt(Om,`Received RPC '${t}' ${h}: `,b),b)),(b=>{throw na(Om,`RPC '${t}' ${h} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(t,n,r,o,u,h){return this.Go(t,n,r,o,u)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const r=EI[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class AI extends TI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,o,u){const h=fg();return new Promise(((m,g)=>{const y=new LE;y.setWithCredentials(!0),y.listenOnce(UE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case _h.NO_ERROR:const b=y.getResponseJson();nt(an,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(b)),m(b);break;case _h.TIMEOUT:nt(an,`RPC '${t}' ${h} timed out`),g(new at(Z.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const S=y.getStatus();if(nt(an,`RPC '${t}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O==null?void 0:O.error;if(H&&H.status&&H.message){const q=(function(rt){const W=rt.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(W)>=0?W:Z.UNKNOWN})(H.status);g(new at(q,H.message))}else g(new at(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new at(Z.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:t,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{nt(an,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(o);nt(an,`RPC '${t}' ${h} sending request:`,o),y.send(n,"POST",E,r,15)}))}T_(t,n,r){const o=fg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=HE(),m=FE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const E=u.join("");nt(an,`Creating RPC '${t}' stream ${o}: ${E}`,g);const b=h.createWebChannel(E,g);this.I_(b);let S=!1,O=!1;const H=new bI({Yo:Q=>{O?nt(an,`Not sending because RPC '${t}' stream ${o} is closed:`,Q):(S||(nt(an,`Opening RPC '${t}' stream ${o} transport.`),b.open(),S=!0),nt(an,`RPC '${t}' stream ${o} sending:`,Q),b.send(Q))},Zo:()=>b.close()}),q=(Q,rt,W)=>{Q.listen(rt,(tt=>{try{W(tt)}catch(it){setTimeout((()=>{throw it}),0)}}))};return q(b,Xl.EventType.OPEN,(()=>{O||(nt(an,`RPC '${t}' stream ${o} transport opened.`),H.o_())})),q(b,Xl.EventType.CLOSE,(()=>{O||(O=!0,nt(an,`RPC '${t}' stream ${o} transport closed`),H.a_(),this.E_(b))})),q(b,Xl.EventType.ERROR,(Q=>{O||(O=!0,na(an,`RPC '${t}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),H.a_(new at(Z.UNAVAILABLE,"The operation could not be completed")))})),q(b,Xl.EventType.MESSAGE,(Q=>{var rt;if(!O){const W=Q.data[0];yt(!!W,16349);const tt=W,it=(tt==null?void 0:tt.error)||((rt=tt[0])==null?void 0:rt.error);if(it){nt(an,`RPC '${t}' stream ${o} received error:`,it);const gt=it.status;let ft=(function(D){const x=ze[D];if(x!==void 0)return UT(x)})(gt),C=it.message;ft===void 0&&(ft=Z.INTERNAL,C="Unknown error status: "+gt+" with message "+it.message),O=!0,H.a_(new at(ft,C)),b.close()}else nt(an,`RPC '${t}' stream ${o} received:`,W),H.u_(W)}})),q(m,qE.STAT_EVENT,(Q=>{Q.stat===Hm.PROXY?nt(an,`RPC '${t}' stream ${o} detected buffering proxy`):Q.stat===Hm.NOPROXY&&nt(an,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return typeof window<"u"?window:null}function Rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(s){return new x2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t,n,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&nt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="PersistentStream";class T1{constructor(t,n,r,o,u,h,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new E1(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(dn(n.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{t((()=>{const o=new at(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return nt(rE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(nt(rE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xI extends T1{constructor(t,n,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=R2(this.serializer,t),r=(function(u){if(!("targetChange"in u))return Tt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Tt.min():h.readTime?mn(h.readTime):Tt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=ag(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=Uh(g)?{documents:XT(u,g)}:{query:ZT(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=HT(u,h.resumeToken);const y=rg(u,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(Tt.min())>0){m.readTime=No(u,h.snapshotVersion.toTimestamp());const y=rg(u,h.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=D2(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=ag(this.serializer),n.removeTarget=t,this.q_(n)}}class wI extends T1{constructor(t,n,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=C2(t.writeResults,t.commitTime),r=mn(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=ag(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>Hh(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class RI extends II{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new at(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(t,sg(n,r),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new at(Z.UNKNOWN,u.toString())}))}Ho(t,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,sg(n,r),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new at(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dn(n),this.aa=!1):nt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class DI{constructor(t,n,r,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{ca(this)&&(nt(la,"Restarting streams for network reachability change."),await(async function(g){const y=xt(g);y.Ea.add(4),await Du(y),y.Ra.set("Unknown"),y.Ea.delete(4),await gf(y)})(this))}))})),this.Ra=new CI(r,o)}}async function gf(s){if(ca(s))for(const t of s.da)await t(!0)}async function Du(s){for(const t of s.da)await t(!1)}function b1(s,t){const n=xt(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Zg(n)?Xg(n):ko(n).O_()&&Yg(n,t))}function Qg(s,t){const n=xt(s),r=ko(n);n.Ia.delete(t),r.O_()&&A1(n,t),n.Ia.size===0&&(r.O_()?r.L_():ca(n)&&n.Ra.set("Unknown"))}function Yg(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ko(s).Y_(t)}function A1(s,t){s.Va.Ue(t),ko(s).Z_(t)}function Xg(s){s.Va=new T2({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),ko(s).start(),s.Ra.ua()}function Zg(s){return ca(s)&&!ko(s).x_()&&s.Ia.size>0}function ca(s){return xt(s).Ea.size===0}function S1(s){s.Va=void 0}async function NI(s){s.Ra.set("Online")}async function VI(s){s.Ia.forEach(((t,n)=>{Yg(s,t)}))}async function MI(s,t){S1(s),Zg(s)?(s.Ra.ha(t),Xg(s)):s.Ra.set("Unknown")}async function OI(s,t,n){if(s.Ra.set("Online"),t instanceof FT&&t.state===2&&t.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){nt(la,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Xh(s,r)}else if(t instanceof wh?s.Va.Ze(t):t instanceof qT?s.Va.st(t):s.Va.tt(t),!n.isEqual(Tt.min()))try{const r=await _1(s.localStore);n.compareTo(r)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,y)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Pe.EMPTY_BYTE_STRING,E.snapshotVersion)),A1(u,g);const b=new lr(E.target,g,y,E.sequenceNumber);Yg(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){nt(la,"Failed to raise snapshot:",r),await Xh(s,r)}}async function Xh(s,t,n){if(!us(t))throw t;s.Ea.add(1),await Du(s),s.Ra.set("Offline"),n||(n=()=>_1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{nt(la,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await gf(s)}))}function x1(s,t){return t().catch((n=>Xh(s,n,t)))}async function Nu(s){const t=xt(s),n=os(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$s;for(;zI(t);)try{const o=await pI(t.localStore,r);if(o===null){t.Ta.length===0&&n.L_();break}r=o.batchId,kI(t,o)}catch(o){await Xh(t,o)}w1(t)&&I1(t)}function zI(s){return ca(s)&&s.Ta.length<10}function kI(s,t){s.Ta.push(t);const n=os(s);n.O_()&&n.X_&&n.ea(t.mutations)}function w1(s){return ca(s)&&!os(s).x_()&&s.Ta.length>0}function I1(s){os(s).start()}async function PI(s){os(s).ra()}async function BI(s){const t=os(s);for(const n of s.Ta)t.ea(n.mutations)}async function jI(s,t,n){const r=s.Ta.shift(),o=kg.from(r,t,n);await x1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Nu(s)}async function LI(s,t){t&&os(s).X_&&await(async function(r,o){if((function(h){return _2(h)&&h!==Z.ABORTED})(o.code)){const u=r.Ta.shift();os(r).B_(),await x1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Nu(r)}})(s,t),w1(s)&&I1(s)}async function sE(s,t){const n=xt(s);n.asyncQueue.verifyOperationInProgress(),nt(la,"RemoteStore received new credentials");const r=ca(n);n.Ea.add(3),await Du(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await gf(n)}async function UI(s,t){const n=xt(s);t?(n.Ea.delete(2),await gf(n)):t||(n.Ea.add(2),await Du(n),n.Ra.set("Unknown"))}function ko(s){return s.ma||(s.ma=(function(n,r,o){const u=xt(n);return u.sa(),new xI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:NI.bind(null,s),t_:VI.bind(null,s),r_:MI.bind(null,s),H_:OI.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Zg(s)?Xg(s):s.Ra.set("Unknown")):(await s.ma.stop(),S1(s))}))),s.ma}function os(s){return s.fa||(s.fa=(function(n,r,o){const u=xt(n);return u.sa(),new wI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:PI.bind(null,s),r_:LI.bind(null,s),ta:BI.bind(null,s),na:jI.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Nu(s)):(await s.fa.stop(),s.Ta.length>0&&(nt(la,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t,n,r,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,u){const h=Date.now()+r,m=new Jg(t,n,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(s,t){if(dn("AsyncQueue",`${t}: ${s}`),us(s))return new at(Z.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(t){return new yo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Zl(),this.sortedSet=new pe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof yo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ga=new pe(ut.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):mt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Vo{constructor(t,n,r,o,u,h,m,g,y){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,r,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new Vo(t,n,yo.emptySet(n),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&of(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class FI{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=xt(n),u=o.queries;o.queries=oE(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new at(Z.ABORTED,"Firestore shutting down"))}}function oE(){return new mr((s=>RT(s)),of)}async function HI(s,t){const n=xt(s);let r=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new qI,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=$g(h,`Initialization of query '${ho(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Wg(n)}async function GI(s,t){const n=xt(s),r=t.query;let o=3;const u=n.queries.get(r);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KI(s,t){const n=xt(s);let r=!1;for(const o of t){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(r=!0);h.wa=o}}r&&Wg(n)}function QI(s,t,n){const r=xt(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(t)}function Wg(s){s.Ca.forEach((t=>{t.next()}))}var dg,lE;(lE=dg||(dg={})).Ma="default",lE.Cache="cache";class YI{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Vo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Vo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t){this.key=t}}class C1{constructor(t){this.key=t}}class XI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=CT(t),this.tu=new yo(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new aE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,b)=>{const S=o.get(E),O=Iu(this.query,b)?b:null,H=!!S&&this.mutatedKeys.has(S.key),q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Q=!1;S&&O?S.data.isEqual(O.data)?H!==q&&(r.track({type:3,doc:O}),Q=!0):this.su(S,O)||(r.track({type:2,doc:O}),Q=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(m=!0)):!S&&O?(r.track({type:0,doc:O}),Q=!0):S&&!O&&(r.track({type:1,doc:S}),Q=!0,(g||y)&&(m=!0)),Q&&(O?(h=h.add(O),u=q?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:h,iu:r,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,b)=>(function(O,H){const q=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:Q})}};return q(O)-q(H)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Vo(this.query,t.tu,u,h,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new C1(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new R1(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=Mt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tp="SyncEngine";class ZI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class JI{constructor(t){this.key=t,this.hu=!1}}class $I{constructor(t,n,r,o,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new mr((m=>RT(m)),of),this.Iu=new Map,this.Eu=new Set,this.du=new pe(ut.comparator),this.Au=new Map,this.Ru=new qg,this.Vu={},this.mu=new Map,this.fu=oa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WI(s,t,n=!0){const r=z1(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await D1(r,t,n,!0),o}async function tR(s,t){const n=z1(s);await D1(n,t,!0,!1)}async function D1(s,t,n,r){const o=await yI(s.localStore,ti(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await eR(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&b1(s.remoteStore,o),m}async function eR(s,t,n,r,o){s.pu=(b,S,O)=>(async function(q,Q,rt,W){let tt=Q.view.ru(rt);tt.Cs&&(tt=await tE(q.localStore,Q.query,!1).then((({documents:C})=>Q.view.ru(C,tt))));const it=W&&W.targetChanges.get(Q.targetId),gt=W&&W.targetMismatches.get(Q.targetId)!=null,ft=Q.view.applyChanges(tt,q.isPrimaryClient,it,gt);return cE(q,Q.targetId,ft.au),ft.snapshot})(s,b,S,O);const u=await tE(s.localStore,t,!0),h=new XI(t,u.Qs),m=h.ru(u.documents),g=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=h.applyChanges(m,s.isPrimaryClient,g);cE(s,n,y.au);const E=new ZI(t,n,h);return s.Tu.set(t,E),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),y.snapshot}async function nR(s,t,n){const r=xt(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((h=>!of(h,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await hg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Qg(r.remoteStore,o.targetId),mg(r,o.targetId)})).catch(ua)):(mg(r,o.targetId),await hg(r.localStore,o.targetId,!0))}async function iR(s,t){const n=xt(s),r=n.Tu.get(t),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qg(n.remoteStore,r.targetId))}async function rR(s,t,n){const r=k1(s);try{const o=await(function(h,m){const g=xt(h),y=te.now(),E=m.reduce(((O,H)=>O.add(H.key)),Mt());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=kn(),q=Mt();return g.Ns.getEntries(O,E).next((Q=>{H=Q,H.forEach(((rt,W)=>{W.isValidDocument()||(q=q.add(rt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,H))).next((Q=>{b=Q;const rt=[];for(const W of m){const tt=p2(W,b.get(W.key).overlayedDocument);tt!=null&&rt.push(new gr(W.key,tt,vT(tt.value.mapValue),Qe.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,rt,m)})).next((Q=>{S=Q;const rt=Q.applyToLocalDocumentSet(b,q);return g.documentOverlayCache.saveOverlays(O,Q.batchId,rt)}))})).then((()=>({batchId:S.batchId,changes:NT(b)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new pe(St)),y=y.insert(m,g),h.Vu[h.currentUser.toKey()]=y})(r,o.batchId,n),await Vu(r,o.changes),await Nu(r.remoteStore)}catch(o){const u=$g(o,"Failed to persist write");n.reject(u)}}async function N1(s,t){const n=xt(s);try{const r=await mI(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(yt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?yt(h.hu,14607):o.removedDocuments.size>0&&(yt(h.hu,42227),h.hu=!1))})),await Vu(n,r,t)}catch(r){await ua(r)}}function uE(s,t,n){const r=xt(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=xt(h);g.onlineState=m;let y=!1;g.queries.forEach(((E,b)=>{for(const S of b.Sa)S.va(m)&&(y=!0)})),y&&Wg(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sR(s,t,n){const r=xt(s);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Au.get(t),u=o&&o.key;if(u){let h=new pe(ut.comparator);h=h.insert(u,Ee.newNoDocument(u,Tt.min()));const m=Mt().add(u),g=new cf(Tt.min(),new Map,new pe(St),h,m);await N1(r,g),r.du=r.du.remove(u),r.Au.delete(t),ep(r)}else await hg(r.localStore,t,!1).then((()=>mg(r,t,n))).catch(ua)}async function aR(s,t){const n=xt(s),r=t.batch.batchId;try{const o=await dI(n.localStore,t);M1(n,r,null),V1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vu(n,o)}catch(o){await ua(o)}}async function oR(s,t,n){const r=xt(s);try{const o=await(function(h,m){const g=xt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,m).next((b=>(yt(b!==null,37113),E=b.keys(),g.mutationQueue.removeMutationBatch(y,b)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(r.localStore,t);M1(r,t,n),V1(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Vu(r,o)}catch(o){await ua(o)}}function V1(s,t){(s.mu.get(t)||[]).forEach((n=>{n.resolve()})),s.mu.delete(t)}function M1(s,t,n){const r=xt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function mg(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||O1(s,r)}))}function O1(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(Qg(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),ep(s))}function cE(s,t,n){for(const r of n)r instanceof R1?(s.Ru.addReference(r.key,t),lR(s,r)):r instanceof C1?(nt(tp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||O1(s,r.key)):mt(19791,{wu:r})}function lR(s,t){const n=t.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(nt(tp,"New document in limbo: "+n),s.Eu.add(r),ep(s))}function ep(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new ut(Zt.fromString(t)),r=s.fu.next();s.Au.set(r,new JI(n)),s.du=s.du.insert(n,r),b1(s.remoteStore,new lr(ti(Mg(n.path)),r,"TargetPurposeLimboResolution",Wn.ce))}}async function Vu(s,t,n){const r=xt(s),o=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{h.push(r.pu(g,t,n).then((y=>{var E;if((y||n)&&r.isPrimaryClient){const b=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){o.push(y);const b=Gg.As(g.targetId,y);u.push(b)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,y){const E=xt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>B.forEach(y,(S=>B.forEach(S.Es,(O=>E.persistence.referenceDelegate.addReference(b,S.targetId,O))).next((()=>B.forEach(S.ds,(O=>E.persistence.referenceDelegate.removeReference(b,S.targetId,O)))))))))}catch(b){if(!us(b))throw b;nt(Kg,"Failed to update sequence numbers: "+b)}for(const b of y){const S=b.targetId;if(!b.fromCache){const O=E.Ms.get(S),H=O.snapshotVersion,q=O.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(S,q)}}})(r.localStore,u))}async function uR(s,t){const n=xt(s);if(!n.currentUser.isEqual(t)){nt(tp,"User change. New user:",t.toKey());const r=await y1(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new at(Z.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Vu(n,r.Ls)}}function cR(s,t){const n=xt(s),r=n.Au.get(t);if(r&&r.hu)return Mt().add(r.key);{let o=Mt();const u=n.Iu.get(t);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function z1(s){const t=xt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=N1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sR.bind(null,t),t.Pu.H_=KI.bind(null,t.eventManager),t.Pu.yu=QI.bind(null,t.eventManager),t}function k1(s){const t=xt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oR.bind(null,t),t}class bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=mf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return p1(this.persistence,new g1,t.initialUser,this.serializer)}Cu(t){return new Fg(df.mi,this.serializer)}Du(t){return new v1}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bu.provider={build:()=>new bu};class hR extends bu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){yt(this.persistence.referenceDelegate instanceof Yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new c1(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Fg((r=>Yh.mi(r,n)),this.serializer)}}class fR extends bu{constructor(t,n,r){super(),this.xu=t,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await k1(this.xu.syncEngine),await Nu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return p1(this.persistence,new g1,t.initialUser,this.serializer)}Fu(t,n){const r=this.persistence.referenceDelegate.garbageCollector;return new c1(r,t.asyncQueue,n)}Mu(t,n){const r=new mw(n,this.persistence);return new dw(t.asyncQueue,r)}Cu(t){const n=uI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Hg(this.synchronizeTabs,n,t.clientId,r,t.asyncQueue,SI(),Rh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new v1}}class Zh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uR.bind(null,this.syncEngine),await UI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new FI})()}createDatastore(t){const n=mf(t.databaseInfo.databaseId),r=(function(u){return new AI(u)})(t.databaseInfo);return(function(u,h,m,g){return new RI(u,h,m,g)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,o,u,h,m){return new DI(r,o,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>uE(this.syncEngine,n,0)),(function(){return iE.v()?new iE:new vI})())}createSyncEngine(t,n){return(function(o,u,h,m,g,y,E){const b=new $I(o,u,h,m,g,y);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(o){const u=xt(o);nt(la,"RemoteStore shutting down."),u.Ea.add(5),await Du(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Zh.provider={build:()=>new Zh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):dn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class mR{constructor(t,n,r,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=bg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{nt(ls,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(nt(ls,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$g(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function zm(s,t){s.asyncQueue.verifyOperationInProgress(),nt(ls,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await y1(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function hE(s,t){s.asyncQueue.verifyOperationInProgress();const n=await gR(s);nt(ls,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener((r=>sE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>sE(t.remoteStore,o))),s._onlineComponents=t}async function gR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){nt(ls,"Using user provided OfflineComponentProvider");try{await zm(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;na("Error using user provided cache. Falling back to memory cache: "+n),await zm(s,new bu)}}else nt(ls,"Using default OfflineComponentProvider"),await zm(s,new hR(void 0));return s._offlineComponents}async function P1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(nt(ls,"Using user provided OnlineComponentProvider"),await hE(s,s._uninitializedComponentsProvider._online)):(nt(ls,"Using default OnlineComponentProvider"),await hE(s,new Zh))),s._onlineComponents}function pR(s){return P1(s).then((t=>t.syncEngine))}async function yR(s){const t=await P1(s),n=t.eventManager;return n.onListen=WI.bind(null,t.syncEngine),n.onUnlisten=nR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=tR.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=iR.bind(null,t.syncEngine),n}function _R(s,t,n={}){const r=new ur;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,y){const E=new dR({next:S=>{E.Nu(),h.enqueueAndForget((()=>GI(u,b))),S.fromCache&&g.source==="server"?y.reject(new at(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),b=new YI(m,E,{includeMetadataChanges:!0,qa:!0});return HI(u,b)})(await yR(s),s.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="firestore.googleapis.com",dE=!0;class mE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new at(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j1,this.ssl=dE}else this.host=t.host,this.ssl=t.ssl??dE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=a1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<K2)throw new at(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}uw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B1(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new at(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new at(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new at(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class pf{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Wx;switch(r.type){case"firstParty":return new iw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=fE.get(n);r&&(nt("ComponentProvider","Removing Datastore"),fE.delete(n),r.terminate())})(this),Promise.resolve()}}function vR(s,t,n,r={}){var y;s=hr(s,pf);const o=vg(t),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${n}`;o&&(DS(`https://${m}`),OS("Firestore",!0)),u.host!==j1&&u.host!==m&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!Vh(g,h)&&(s._setSettings(g),r.mockUserToken)){let E,b;if(typeof r.mockUserToken=="string")E=r.mockUserToken,b=nn.MOCK_USER;else{E=NS(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new at(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new nn(S)}s._authCredentials=new tw(new KE(E,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class Ue{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ue(this.firestore,t,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Au(n,Ue._jsonSchema))return new Ue(t,r||null,new ut(Zt.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:ke("string",Ue._jsonSchemaVersion),referencePath:ke("string")};class rs extends Po{constructor(t,n,r){super(t,n,Mg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ue(this.firestore,null,new ut(t))}withConverter(t){return new rs(this.firestore,t,this._path)}}function me(s,t,...n){if(s=mi(s),YE("collection","path",t),s instanceof pf){const r=Zt.fromString(t,...n);return rv(r),new rs(s,null,r)}{if(!(s instanceof Ue||s instanceof rs))throw new at(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Zt.fromString(t,...n));return rv(r),new rs(s.firestore,null,r)}}function An(s,t,...n){if(s=mi(s),arguments.length===1&&(t=bg.newId()),YE("doc","path",t),s instanceof pf){const r=Zt.fromString(t,...n);return iv(r),new Ue(s,null,new ut(r))}{if(!(s instanceof Ue||s instanceof rs))throw new at(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Zt.fromString(t,...n));return iv(r),new Ue(s.firestore,s instanceof rs?s.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="AsyncQueue";class pE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new E1(this,"async_queue_retry"),this._c=()=>{const r=Rh();r&&nt(gE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Rh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Rh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ur;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!us(t))throw t;nt(gE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,dn("INTERNAL UNHANDLED ERROR: ",yE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Jg.createAndSchedule(this,t,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&mt(47125,{Pc:yE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function yE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class ha extends pf{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new pE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pE(t),this._firestoreClient=void 0,await t}}}function ER(s,t){const n=typeof s=="object"?s:Lx(),r=typeof s=="string"?s:jh,o=zx(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=RS("firestore");u&&vR(o,...u)}return o}function np(s){if(s._terminated)throw new at(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||L1(s),s._firestoreClient}function L1(s){var r,o,u;const t=s._freezeSettings(),n=(function(m,g,y,E){return new Fw(m,g,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,B1(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new mR(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function TR(s,t){na("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=s._freezeSettings();return bR(s,Zh.provider,{build:r=>new fR(r,n.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}function bR(s,t,n){if((s=hr(s,ha))._firestoreClient||s._terminated)throw new at(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new at(Z.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:n},L1(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $n(Pe.fromBase64String(t))}catch(n){throw new at(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $n(Pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Au(t,$n._jsonSchema))return $n.fromBase64String(t.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:ke("string",$n._jsonSchemaVersion),bytes:ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new at(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new at(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new at(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(t){if(Au(t,Li._jsonSchema))return new Li(t.latitude,t.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:ke("string",Li._jsonSchemaVersion),latitude:ke("number"),longitude:ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Au(t,Ui._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ui(t.vectorValues);throw new at(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:ke("string",Ui._jsonSchemaVersion),vectorValues:ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^__.*__$/;class SR{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new gr(t,this.data,this.fieldMask,n,this.fieldTransforms):new zo(t,this.data,n,this.fieldTransforms)}}class U1{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new gr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function q1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:s})}}class rp{constructor(t,n,r,o,u,h){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new rp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Jh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(q1(this.Ac)&&AR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class xR{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||mf(t)}Cc(t,n,r,o=!1){return new rp({Ac:t,methodName:n,Dc:r,path:ye.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(s){const t=s._freezeSettings(),n=mf(s._databaseId);return new xR(s._databaseId,!!t.ignoreUndefinedProperties,n)}function F1(s,t,n,r,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,t,n,o);sp("Data must be an object, but it was:",h,r);const m=K1(r,h);let g,y;if(u.merge)g=new Sn(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const S=gg(t,b,n);if(!h.contains(S))throw new at(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Y1(E,S)||E.push(S)}g=new Sn(E),y=h.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,y=h.fieldTransforms;return new SR(new ln(m),g,y)}class _f extends ip{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _f}}function H1(s,t,n,r){const o=s.Cc(1,t,n);sp("Data must be an object, but it was:",o,r);const u=[],h=ln.empty();cs(r,((g,y)=>{const E=ap(t,g,n);y=mi(y);const b=o.yc(E);if(y instanceof _f)u.push(E);else{const S=Ou(y,b);S!=null&&(u.push(E),h.set(E,S))}}));const m=new Sn(u);return new U1(h,m,o.fieldTransforms)}function G1(s,t,n,r,o,u){const h=s.Cc(1,t,n),m=[gg(t,r,n)],g=[o];if(u.length%2!=0)throw new at(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(gg(t,u[S])),g.push(u[S+1]);const y=[],E=ln.empty();for(let S=m.length-1;S>=0;--S)if(!Y1(y,m[S])){const O=m[S];let H=g[S];H=mi(H);const q=h.yc(O);if(H instanceof _f)y.push(O);else{const Q=Ou(H,q);Q!=null&&(y.push(O),E.set(O,Q))}}const b=new Sn(y);return new U1(E,b,h.fieldTransforms)}function wR(s,t,n,r=!1){return Ou(n,s.Cc(r?4:3,t))}function Ou(s,t){if(Q1(s=mi(s)))return sp("Unsupported field value:",t,s),K1(s,t);if(s instanceof ip)return(function(r,o){if(!q1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let h=0;for(const m of r){let g=Ou(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=mi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=te.fromDate(r);return{timestampValue:No(o.serializer,u)}}if(r instanceof te){const u=new te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:No(o.serializer,u)}}if(r instanceof Li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:HT(o.serializer,r._byteString)};if(r instanceof Ue){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:jg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ui)return(function(h,m){return{mapValue:{fields:{[Dg]:{stringValue:Ng},[xo]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Og(m.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${$h(r)}`)})(s,t)}function K1(s,t){const n={};return cT(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cs(s,((r,o)=>{const u=Ou(o,t.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function Q1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof te||s instanceof Li||s instanceof $n||s instanceof Ue||s instanceof ip||s instanceof Ui)}function sp(s,t,n){if(!Q1(n)||!XE(n)){const r=$h(n);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function gg(s,t,n){if((t=mi(t))instanceof Mu)return t._internalPath;if(typeof t=="string")return ap(s,t);throw Jh("Field path arguments must be of type string or ",s,!1,void 0,n)}const IR=new RegExp("[~\\*/\\[\\]]");function ap(s,t,n){if(t.search(IR)>=0)throw Jh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Mu(...t.split("."))._internalPath}catch{throw Jh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Jh(s,t,n,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new at(Z.INVALID_ARGUMENT,m+s+g)}function Y1(s,t){return s.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(t,n,r,o,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new RR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(op("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RR extends X1{data(){return super.data()}}function op(s,t){return typeof t=="string"?ap(s,t):t instanceof Mu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new at(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lp{}class DR extends lp{}function tn(s,t,...n){let r=[];t instanceof lp&&r.push(t),r=r.concat(n),(function(u){const h=u.filter((g=>g instanceof up)).length,m=u.filter((g=>g instanceof vf)).length;if(h>1||h>0&&m>0)throw new at(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class vf extends DR{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new vf(t,n,r)}_apply(t){const n=this._parse(t);return Z1(t._query,n),new Po(t.firestore,t.converter,ng(t._query,n))}_parse(t){const n=yf(t.firestore);return(function(u,h,m,g,y,E,b){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new at(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){vE(b,E);const H=[];for(const q of b)H.push(_E(g,u,q));S={arrayValue:{values:H}}}else S=_E(g,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||vE(b,E),S=wR(m,h,b,E==="in"||E==="not-in");return jt.create(y,E,S)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Jn(s,t,n){const r=t,o=op("where",s);return vf._create(o,r,n)}class up extends lp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new up(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ee.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)Z1(h,g),h=ng(h,g)})(t._query,n),new Po(t.firestore,t.converter,ng(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _E(s,t,n){if(typeof(n=mi(n))=="string"){if(n==="")throw new at(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IT(t)&&n.indexOf("/")!==-1)throw new at(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Zt.fromString(n));if(!ut.isDocumentKey(r))throw new at(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _u(s,new ut(r))}if(n instanceof Ue)return _u(s,n._key);throw new at(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function vE(s,t){if(!Array.isArray(s)||s.length===0)throw new at(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Z1(s,t){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new at(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new at(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class NR{convertValue(t,n="none"){switch(ss(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ge(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(dr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw mt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return cs(t,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(t){var r,o,u;const n=(u=(o=(r=t.fields)==null?void 0:r[xo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>ge(h.doubleValue)));return new Ui(n)}convertGeoPoint(t){return new Li(ge(t.latitude),ge(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=sf(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pu(t));default:return null}}convertTimestamp(t){const n=fr(t);return new te(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Zt.fromString(t);yt(t1(r),9688,{name:t});const o=new ia(r.get(1),r.get(3)),u=new ut(r.popFirst(5));return o.isEqual(n)||dn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(s,t,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(t,n):s.toFirestore(t):t,r}class yh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _o extends X1{constructor(t,n,r,o,u,h){super(t,n,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(op("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=_o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:ke("string",_o._jsonSchemaVersion),bundleSource:ke("string","DocumentSnapshot"),bundleName:ke("string"),bundle:ke("string")};class Ch extends _o{data(t={}){return super.data(t)}}class vo{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new yh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Ch(this._firestore,this._userDataWriter,r.key,r,new yh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:VR(m.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=vo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function VR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:s})}}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:ke("string",vo._jsonSchemaVersion),bundleSource:ke("string","QuerySnapshot"),bundleName:ke("string"),bundle:ke("string")};class MR extends NR{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function en(s){s=hr(s,Po);const t=hr(s.firestore,ha),n=np(t),r=new MR(t);return CR(s._query),_R(n,s._query).then((o=>new vo(t,r,s,o)))}function lo(s,t,n,...r){s=hr(s,Ue);const o=hr(s.firestore,ha),u=yf(o);let h;return h=typeof(t=mi(t))=="string"||t instanceof Mu?G1(u,"updateDoc",s._key,t,n,r):H1(u,"updateDoc",s._key,t),Ef(o,[h.toMutation(s._key,Qe.exists(!0))])}function EE(s){return Ef(hr(s.firestore,ha),[new Ru(s._key,Qe.none())])}function uo(s,t){const n=hr(s.firestore,ha),r=An(s),o=J1(s.converter,t);return Ef(n,[F1(yf(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Qe.exists(!1))]).then((()=>r))}function Ef(s,t){return(function(r,o){const u=new ur;return r.asyncQueue.enqueueAndForget((async()=>rR(await pR(r),o,u))),u.promise})(np(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yf(t)}set(t,n,r){this._verifyNotCommitted();const o=km(t,this._firestore),u=J1(o.converter,n,r),h=F1(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,Qe.none())),this}update(t,n,r,...o){this._verifyNotCommitted();const u=km(t,this._firestore);let h;return h=typeof(n=mi(n))=="string"||n instanceof Mu?G1(this._dataReader,"WriteBatch.update",u._key,n,r,o):H1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,Qe.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=km(t,this._firestore);return this._mutations=this._mutations.concat(new Ru(n._key,Qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function km(s,t){if((s=mi(s)).firestore!==t)throw new at(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(s){return np(s=hr(s,ha)),new OR(s,(t=>Ef(s,t)))}(function(t,n=!0){(function(o){Oo=o})(jx),Oh(new lu("firestore",((r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new ha(new ew(r.getProvider("auth-internal")),new rw(h,r.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new at(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(y.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),po(W0,tv,t),po(W0,tv,"esm2020")})();const zR={apiKey:"AIzaSyCpZ1iVrU_JwK10gEvi9FGderKYaffgMGg",authDomain:"data-library-5cf6c.firebaseapp.com",projectId:"data-library-5cf6c",storageBucket:"data-library-5cf6c.firebasestorage.app",messagingSenderId:"976961164680",appId:"1:976961164680:web:4aa7027e61f13425bc163d"},kR=kE(zR),It=ER(kR);TR(It).catch(s=>{s.code==="failed-precondition"?console.warn("IndexedDB  :      ."):s.code==="unimplemented"&&console.warn("IndexedDB  ")});const On=()=>new Date().toISOString(),Bt={WORKSPACES:"workspaces",CATEGORIES:"categories",ITEMS:"items",CHECKLISTS:"checklists",BOOKMARK_ZONES:"bookmark_zones",BOOKMARKS:"bookmarks"},Pm=[{name:"1",default_color:"#D99B71",order:0},{name:"2",default_color:"#D9C659",order:1},{name:"3",default_color:"#C5E6A5",order:2},{name:"4",default_color:"#9CBFF5",order:3},{name:"5",default_color:"#C9B3E6",order:4},{name:"6",default_color:"#E6B3D9",order:5}],Ht={workspaces:{list:async()=>{try{const s=tn(me(It,Bt.WORKSPACES));return(await en(s)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>(n.order??0)-(r.order??0))}catch(s){return console.error("Workspaces  :",s),[]}},create:async s=>{try{const t=tn(me(It,Bt.WORKSPACES)),o=(await en(t)).docs.map(h=>h.data()).reduce((h,m)=>Math.max(h,m.order??0),-1);return{id:(await uo(me(It,Bt.WORKSPACES),{name:s,is_locked:!1,order:o+1,created_at:On()})).id,name:s,is_locked:!1,order:o+1,created_at:On()}}catch(t){throw console.error("Workspace  :",t),t}},update:async(s,t)=>{try{const n=An(It,Bt.WORKSPACES,s);await lo(n,t)}catch(n){throw console.error("Workspace  :",n),n}},delete:async s=>{try{const t=Fs(It),n=tn(me(It,Bt.CATEGORIES),Jn("workspace_id","==",s)),r=await en(n),o=r.docs.map(E=>E.id),u=tn(me(It,Bt.ITEMS),Jn("category_id","in",o.length>0?o:["__placeholder__"])),h=await en(u),m=h.docs.map(E=>E.id),g=tn(me(It,Bt.CHECKLISTS),Jn("item_id","in",m.length>0?m:["__placeholder__"]));(await en(g)).docs.forEach(E=>t.delete(E.ref)),h.docs.forEach(E=>t.delete(E.ref)),r.docs.forEach(E=>t.delete(E.ref)),t.delete(An(It,Bt.WORKSPACES,s)),await t.commit()}catch(t){throw console.error("Workspace  :",t),t}},reorder:async s=>{try{const t=Fs(It),n=tn(me(It,Bt.WORKSPACES));(await en(n)).docs.forEach(o=>{const u=s.indexOf(o.id);u!==-1&&t.update(o.ref,{order:u})}),await t.commit()}catch(t){throw console.error("Workspace   :",t),t}}},categories:{listByWorkspace:async s=>{try{const t=tn(me(It,Bt.CATEGORIES),Jn("workspace_id","==",s));return(await en(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>r.name.localeCompare(o.name,"ko"))}catch(t){return console.error("Categories  :",t),[]}},create:async(s,t)=>{try{return{id:(await uo(me(It,Bt.CATEGORIES),{workspace_id:s,name:t,created_at:On()})).id,workspace_id:s,name:t,created_at:On()}}catch(n){throw console.error("Category  :",n),n}},update:async(s,t)=>{try{const n=An(It,Bt.CATEGORIES,s);await lo(n,{name:t})}catch(n){throw console.error("Category  :",n),n}},delete:async s=>{try{const t=Fs(It),n=tn(me(It,Bt.ITEMS),Jn("category_id","==",s)),r=await en(n),o=r.docs.map(u=>u.id);if(o.length>0){const u=tn(me(It,Bt.CHECKLISTS),Jn("item_id","in",o));(await en(u)).docs.forEach(m=>t.delete(m.ref))}r.docs.forEach(u=>t.delete(u.ref)),t.delete(An(It,Bt.CATEGORIES,s)),await t.commit()}catch(t){throw console.error("Category  :",t),t}}},items:{listByCategory:async s=>{try{const t=tn(me(It,Bt.ITEMS),Jn("category_id","==",s));return(await en(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(t){return console.error("Items  :",t),[]}},create:async s=>{try{const t=tn(me(It,Bt.ITEMS),Jn("category_id","==",s)),o=(await en(t)).docs.map(h=>h.data()).reduce((h,m)=>Math.max(h,m.order??0),-1);return{id:(await uo(me(It,Bt.ITEMS),{category_id:s,title:" ",description:"",order:o+1,created_at:On()})).id,category_id:s,title:" ",description:"",order:o+1,created_at:On()}}catch(t){throw console.error("Item  :",t),t}},update:async s=>{try{const t=An(It,Bt.ITEMS,s.id),n={...s};delete n.id,await lo(t,n)}catch(t){throw console.error("Item  :",t),t}},reorder:async(s,t)=>{try{const n=Fs(It),r=tn(me(It,Bt.ITEMS),Jn("category_id","==",s));(await en(r)).docs.forEach(u=>{const h=t.indexOf(u.id);h!==-1&&n.update(u.ref,{order:h})}),await n.commit()}catch(n){throw console.error("Item  :",n),n}},delete:async s=>{try{const t=Fs(It),n=tn(me(It,Bt.CHECKLISTS),Jn("item_id","==",s));(await en(n)).docs.forEach(o=>t.delete(o.ref)),t.delete(An(It,Bt.ITEMS,s)),await t.commit()}catch(t){throw console.error("Item  :",t),t}}},checklist:{listByItem:async s=>{try{const t=tn(me(It,Bt.CHECKLISTS),Jn("item_id","==",s));return(await en(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){return console.error("Checklists  :",t),[]}},create:async s=>{try{return{id:(await uo(me(It,Bt.CHECKLISTS),{item_id:s,text:"",is_checked:!1,memo:"",created_at:On()})).id,item_id:s,text:"",is_checked:!1,memo:"",created_at:On()}}catch(t){throw console.error("Checklist  :",t),t}},update:async s=>{try{const t=An(It,Bt.CHECKLISTS,s.id),n={...s};delete n.id,await lo(t,n)}catch(t){throw console.error("Checklist  :",t),t}},delete:async s=>{try{await EE(An(It,Bt.CHECKLISTS,s))}catch(t){throw console.error("Checklist  :",t),t}}},bookmarkZones:{list:async()=>{try{const s=tn(me(It,Bt.BOOKMARK_ZONES));return(await en(s)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>(n.order??0)-(r.order??0))}catch(s){return console.error("BookmarkZones  :",s),[]}},create:async(s,t,n)=>{try{return{id:(await uo(me(It,Bt.BOOKMARK_ZONES),{name:s,default_color:t,order:n,created_at:On()})).id,name:s,default_color:t,order:n,created_at:On()}}catch(r){throw console.error("BookmarkZone  :",r),r}},update:async(s,t)=>{try{const n=An(It,Bt.BOOKMARK_ZONES,s);await lo(n,t)}catch(n){throw console.error("BookmarkZone  :",n),n}},initializeDefaults:async()=>{try{const s=await Ht.bookmarkZones.list();if(s.length===0){const t=Fs(It);Pm.forEach(n=>{const r=An(me(It,Bt.BOOKMARK_ZONES));t.set(r,{...n,created_at:On()})}),await t.commit()}else if(s.length===Pm.length){const t=Fs(It);s.forEach((n,r)=>{const o=Pm[r],u=An(It,Bt.BOOKMARK_ZONES,n.id);t.update(u,{default_color:o.default_color,order:o.order})}),await t.commit()}}catch(s){console.error("Default zones  :",s)}}},bookmarks:{list:async()=>{try{const s=tn(me(It,Bt.BOOKMARKS));return(await en(s)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>(n.order??0)-(r.order??0))}catch(s){return console.error("Bookmarks  :",s),[]}},listByZone:async s=>{try{const t=tn(me(It,Bt.BOOKMARKS),Jn("zone_id","==",s));return(await en(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(t){return console.error("Zone bookmarks  :",t),[]}},create:async(s,t,n,r)=>{try{const u=(await Ht.bookmarks.listByZone(s)).reduce((m,g)=>Math.max(m,g.order??0),-1);return{id:(await uo(me(It,Bt.BOOKMARKS),{zone_id:s,name:t,url:n,color:r,order:u+1,created_at:On()})).id,zone_id:s,name:t,url:n,color:r,order:u+1,created_at:On()}}catch(o){throw console.error("Bookmark  :",o),o}},update:async(s,t)=>{try{const n=An(It,Bt.BOOKMARKS,s),r={...t};await lo(n,r)}catch(n){throw console.error("Bookmark  :",n),n}},delete:async s=>{try{await EE(An(It,Bt.BOOKMARKS,s))}catch(t){throw console.error("Bookmark  :",t),t}}}},PR=({categories:s,selectedCategoryId:t,onSelectCategory:n,onRefresh:r,workspaceName:o,isLocked:u,onAddCategory:h,onDeleteWorkspace:m,onToggleLock:g,onShowBookmarks:y})=>{const[E,b]=ct.useState(!1),[S,O]=ct.useState(""),[H,q]=ct.useState(null),[Q,rt]=ct.useState(""),[W,tt]=ct.useState("light");ct.useEffect(()=>{document.documentElement.classList.contains("light-mode")?tt("light"):tt("dark")},[]);const it=x=>{tt(x),x==="light"?document.documentElement.classList.add("light-mode"):document.documentElement.classList.remove("light-mode")},gt=()=>{if(!S.trim()){b(!1);return}h(S),O(""),b(!1)},ft=(x,R,k)=>{x.stopPropagation(),q(R),rt(k)},C=async x=>{if(!Q.trim()){q(null);return}await Ht.categories.update(x,Q),r(),q(null)},I=async(x,R)=>{x.stopPropagation(),window.confirm("    . ?")&&(await Ht.categories.delete(R),r(),t===R&&n(""))},D=x=>{if(x.preventDefault(),x.stopPropagation(),u){alert("     .");return}window.confirm(`'${o}'  ?
    ,      .`)&&m()};return w.jsxs("div",{className:"flex flex-col h-full w-full",children:[w.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-border bg-zinc-950/50 flex-shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("span",{className:"font-bold text-lg tracking-tight text-white leading-none",children:["",w.jsx("span",{className:"text-accent",children:""})]}),u&&w.jsx(Bm,{className:"w-3.5 h-3.5 text-amber-500/80"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{type:"button",onClick:()=>y==null?void 0:y(),className:"p-1.5 text-green-500 border border-green-500/50 hover:text-white hover:bg-green-500/20 hover:border-green-500 rounded transition-colors",title:" ",children:w.jsx(AE,{className:"w-5 h-5"})}),w.jsxs("div",{className:"flex bg-zinc-900 p-0.5 rounded-md border border-zinc-800/50",children:[w.jsx("button",{onClick:()=>it("dark"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${W==="dark"?"bg-zinc-700 text-white shadow ring-1 ring-black/20":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Dark Mode",children:"D"}),w.jsx("button",{onClick:()=>it("light"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${W==="light"?"bg-white text-zinc-900 shadow ring-1 ring-black/5":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Light Mode",children:"L"})]})]})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar",children:[w.jsx("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider px-2 mb-2",children:" "}),s.map(x=>w.jsxs("div",{onClick:()=>n(x.id),onDoubleClick:R=>ft(R,x.id,x.name),className:`group flex items-center justify-between px-4 py-3 md:py-2.5 rounded-lg cursor-pointer transition-all ${t===x.id?"bg-accent/10 text-accent border border-accent/20":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/50 border border-transparent"}`,children:[w.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[w.jsx(Qt.Folder,{className:`w-5 h-5 md:w-4 md:h-4 flex-shrink-0 ${t===x.id?"fill-accent/20":""}`}),H===x.id?w.jsx("input",{autoFocus:!0,type:"text",value:Q,onChange:R=>rt(R.target.value),onBlur:()=>C(x.id),onKeyDown:R=>{R.stopPropagation(),R.key==="Enter"&&C(x.id),R.key==="Escape"&&q(null)},onClick:R=>R.stopPropagation(),className:"flex-1 bg-zinc-950 border border-accent rounded px-1 py-0 text-sm text-white focus:outline-none"}):w.jsx("span",{className:"text-base md:text-sm font-medium truncate",children:x.name})]}),H!==x.id&&w.jsxs("div",{className:"flex items-center",children:[w.jsx(Qt.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden"}),w.jsx("button",{type:"button",onClick:R=>I(R,x.id),className:"hidden md:block opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",children:w.jsx(Qt.Trash,{className:"w-3.5 h-3.5"})})]})]},x.id)),E?w.jsx("div",{className:"px-3 py-2",children:w.jsx("input",{autoFocus:!0,type:"text",value:S,onChange:x=>O(x.target.value),onBlur:gt,onKeyDown:x=>x.key==="Enter"&&gt(),placeholder:"...",className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none"})}):w.jsxs("button",{type:"button",onClick:()=>b(!0),className:"w-full flex items-center gap-2 px-3 py-3 md:py-2.5 text-sm text-zinc-500 hover:text-accent hover:bg-zinc-800/50 rounded-lg transition-colors border border-dashed border-zinc-800 hover:border-zinc-700 mt-2",children:[w.jsx(Qt.Plus,{className:"w-4 h-4"}),"  "]})]}),w.jsx("div",{className:"p-4 border-t border-border bg-zinc-950/50 mt-auto",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("button",{type:"button",onClick:g,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-amber-500/10 border-amber-500/30 text-amber-500 hover:bg-amber-500/20":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:text-zinc-200 hover:bg-zinc-700"}`,title:u?" ":" ",children:[u?w.jsx(Bm,{className:"w-3.5 h-3.5"}):w.jsx(uS,{className:"w-3.5 h-3.5"}),u?" ":" "]}),w.jsxs("button",{type:"button",onClick:D,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-zinc-900 border-zinc-800 text-zinc-600 cursor-not-allowed opacity-50":"bg-red-500/10 border-red-500/20 text-red-500 hover:bg-red-500/20 hover:border-red-500/40"}`,children:[w.jsx(Qt.Trash,{className:"w-3.5 h-3.5"})," "]})]})})]})},BR=({categoryName:s,items:t,selectedItemId:n,onSelectItem:r,onAddItem:o,onDeleteItem:u,onReorder:h,loading:m,onBack:g})=>{const y=ct.useRef(null),E=ct.useRef(null),[b,S]=ct.useState(t);ct.useEffect(()=>{S(t)},[t]);const O=(rt,W)=>{y.current=W,rt.dataTransfer.effectAllowed="move",rt.dataTransfer.setData("text/html",rt.currentTarget.innerHTML)},H=(rt,W)=>{E.current=W,rt.preventDefault()},q=rt=>{rt.preventDefault(),rt.dataTransfer.dropEffect="move"},Q=rt=>{rt.preventDefault();const W=y.current,tt=E.current;if(W!==null&&tt!==null&&W!==tt){const it=[...b],gt=it[W];it.splice(W,1),it.splice(tt,0,gt),S(it),h(it)}y.current=null,E.current=null};return w.jsxs("div",{className:"flex flex-col h-full w-full",children:[w.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-border bg-background/50 flex-shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[w.jsx("button",{onClick:g,className:"md:hidden p-1 -ml-1 text-zinc-400 hover:text-white",children:w.jsx(Qt.Back,{className:"w-5 h-5"})}),w.jsx("h2",{className:"font-semibold text-zinc-200 truncate pr-2 text-base md:text-sm",title:s,children:s||""})]}),w.jsx("button",{onClick:o,className:"p-1.5 text-zinc-400 hover:text-accent hover:bg-zinc-800 rounded-md transition-colors",title:"  ",children:w.jsx(Qt.Plus,{className:"w-5 h-5"})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto",children:m?w.jsx("div",{className:"p-4 space-y-3 opacity-50",children:[1,2,3].map(rt=>w.jsx("div",{className:"h-12 bg-zinc-800/50 rounded animate-pulse"},rt))}):b.length>0?w.jsx("div",{className:"divide-y divide-border/50",children:b.map((rt,W)=>w.jsxs("div",{draggable:!0,onDragStart:tt=>O(tt,W),onDragEnter:tt=>H(tt,W),onDragOver:q,onDrop:Q,onClick:()=>r(rt.id),className:`group px-3 py-4 md:py-3 cursor-pointer hover:bg-zinc-900 transition-colors relative flex items-center gap-2 ${n===rt.id?"bg-zinc-900 border-l-2 border-accent":"border-l-2 border-transparent"}`,children:[w.jsx("div",{className:"cursor-grab active:cursor-grabbing p-1 text-zinc-600 hover:text-zinc-400 hidden md:block",children:w.jsx(Qt.DragHandle,{className:"w-4 h-4"})}),w.jsx("div",{className:"flex-1 min-w-0 pr-6",children:w.jsx("h3",{className:`text-base md:text-sm font-medium leading-tight truncate ${n===rt.id?"text-white":"text-zinc-300"}`,children:rt.title||" "})}),w.jsx(Qt.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden absolute right-3 top-1/2 -translate-y-1/2"}),w.jsx("button",{onClick:tt=>{tt.stopPropagation(),window.confirm("?")&&u(rt.id)},className:"hidden md:block opacity-0 group-hover:opacity-100 p-1.5 text-zinc-600 hover:text-danger hover:bg-zinc-800 rounded transition-all absolute right-2 top-1/2 -translate-y-1/2",children:w.jsx(Qt.Trash,{className:"w-4 h-4"})})]},rt.id))}):w.jsxs("div",{className:"p-8 text-center text-zinc-500",children:[w.jsx("p",{className:"text-sm",children:" ."}),w.jsx("button",{onClick:o,className:"text-xs text-accent mt-2 hover:underline",children:"+   "})]})})]})},jR=({itemId:s,onOpenMemo:t})=>{const[n,r]=ct.useState([]),[o,u]=ct.useState(!0),[h,m]=ct.useState(""),[g,y]=ct.useState(null),[E,b]=ct.useState(null),[S,O]=ct.useState(""),H=yg.useRef(null),q=async()=>{const x=await Ht.checklist.listByItem(s);r(x),u(!1)};ct.useEffect(()=>{q()},[s]);const Q=async()=>{if(!h.trim())return;const x=await Ht.checklist.create(s),R={...x,text:h};r(k=>[...k,R]),m(""),await Ht.checklist.update({id:x.id,text:R.text})},rt=x=>{x.key==="Enter"&&!x.nativeEvent.isComposing&&(x.preventDefault(),Q())},W=async(x,R)=>{r(k=>k.map(N=>N.id===x?{...N,...R}:N)),await Ht.checklist.update({id:x,...R})},tt=(x,R)=>{y(null),W(x,{memo:R})},it=async x=>{window.confirm("  ?")&&(r(R=>R.filter(k=>k.id!==x)),await Ht.checklist.delete(x))},gt=(x,R)=>{b(x),O(R)},ft=async x=>{var R;S!==((R=n.find(k=>k.id===x))==null?void 0:R.text)&&await W(x,{text:S}),b(null)},C=(x,R)=>{gt(x,R)},I=(x,R)=>{H.current=setTimeout(()=>{gt(x,R)},300)},D=()=>{H.current&&(clearTimeout(H.current),H.current=null)};return o?w.jsx("div",{className:"text-secondary text-sm",children:" ..."}):w.jsxs("div",{className:"h-full flex flex-col pt-2",children:[w.jsxs("div",{className:"mb-4 flex-shrink-0 flex items-center gap-2",children:[w.jsx("input",{type:"text",value:h,onChange:x=>m(x.target.value),onKeyDown:rt,placeholder:"   ",className:"flex-1 bg-zinc-900/50 border border-zinc-700 text-sm text-zinc-200 rounded-lg py-2.5 px-3 focus:ring-1 focus:ring-accent focus:border-accent focus:outline-none transition-all placeholder-zinc-600 shadow-sm"}),w.jsx("button",{onClick:Q,disabled:!h.trim(),className:"flex-shrink-0 p-2.5 bg-accent/10 border border-accent/30 text-accent rounded-lg hover:bg-accent/20 hover:border-accent/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",title:"  ( Enter )",children:w.jsx(Qt.Plus,{className:"w-5 h-5"})})]}),w.jsxs("div",{className:"space-y-2 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:[n.map(x=>w.jsxs("div",{className:"group flex items-start gap-3 p-2.5 rounded-lg hover:bg-green-500/20 transition-colors border border-transparent hover:border-green-500/30",children:[w.jsx("div",{className:"pt-1",children:w.jsx("input",{type:"checkbox",checked:x.is_checked,onChange:R=>W(x.id,{is_checked:R.target.checked}),className:"w-4 h-4 rounded border-zinc-600 bg-zinc-900 text-emerald-500 focus:ring-emerald-500/20 focus:ring-offset-0 cursor-pointer accent-emerald-500"})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[E===x.id?w.jsx("input",{autoFocus:!0,type:"text",value:S,onChange:R=>O(R.target.value),onBlur:()=>ft(x.id),onKeyDown:R=>{R.key==="Enter"&&ft(x.id),R.key==="Escape"&&b(null)},className:"w-full bg-zinc-950 border border-accent rounded px-1 py-3 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent min-h-10"}):w.jsx("div",{onDoubleClick:()=>C(x.id,x.text),onTouchStart:()=>I(x.id,x.text),onTouchEnd:D,className:`w-full p-0 text-sm cursor-text ${x.is_checked?"text-black line-through decoration-black":"text-zinc-200"}`,children:x.text||"  ..."}),x.memo&&(g===x.id?w.jsx("div",{className:"mt-1.5 w-full",children:w.jsx("input",{autoFocus:!0,type:"text",defaultValue:x.memo,onBlur:R=>tt(x.id,R.target.value),onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),R.currentTarget.blur()),R.key==="Escape"&&y(null)},className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-xs text-zinc-200 focus:outline-none placeholder-zinc-500 shadow-sm"})}):w.jsxs("div",{className:"mt-1.5 text-xs text-zinc-500/80 flex items-center gap-1.5 cursor-pointer w-fit py-0.5 rounded transition-colors hover:text-zinc-300 select-none group/memo",onDoubleClick:()=>y(x.id),title:"  ",children:[w.jsx(Qt.Memo,{className:"w-3 h-3 flex-shrink-0"}),w.jsx("span",{className:"truncate max-w-[200px]",children:x.memo})]}))]}),w.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[w.jsx("button",{onClick:()=>t(x),className:`p-1.5 rounded transition-colors ${x.memo?"text-accent bg-accent/10":"text-zinc-500 hover:text-accent hover:bg-zinc-700"}`,title:"  ",children:w.jsx(Qt.Memo,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>it(x.id),className:"p-1.5 text-zinc-500 hover:text-danger hover:bg-zinc-700 rounded transition-colors",title:"",children:w.jsx(Qt.Trash,{className:"w-4 h-4"})})]})]},x.id)),n.length===0&&w.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-zinc-800/50 rounded-xl text-zinc-600 text-sm bg-zinc-900/20",children:["  .",w.jsx("br",{}),w.jsx("span",{className:"text-xs text-zinc-700 mt-1 block",children:"    ."})]})]})]})},LR=({item:s,onUpdateItem:t,onOpenMemo:n,onBack:r})=>{const[o,u]=ct.useState(s.title),[h,m]=ct.useState(s.description),[g,y]=ct.useState(!1),[E,b]=ct.useState(!1),[S,O]=ct.useState(!1),[H,q]=ct.useState(!1),Q=yg.useRef(null);ct.useEffect(()=>{u(s.title),m(s.description),b(!1)},[s.id,s.title,s.description]);const rt=async()=>{o!==s.title&&(y(!0),await Ht.items.update({id:s.id,title:o}),t(s.id,{title:o}),y(!1))},W=async()=>{b(!1),h!==s.description&&(y(!0),await Ht.items.update({id:s.id,description:h}),t(s.id,{description:h}),y(!1))},tt=()=>{b(!0)},it=()=>{Q.current=setTimeout(()=>{b(!0)},300)},gt=()=>{Q.current&&(clearTimeout(Q.current),Q.current=null)},ft=C=>{if(!C)return null;const I=/(https?:\/\/[^\s]+)/g;return C.split(I).map((D,x)=>D.match(I)?w.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline break-all relative z-20",onClick:R=>R.stopPropagation(),children:D},x):D)};return w.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[w.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[w.jsx("button",{onClick:r,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white",children:w.jsx(Qt.Back,{className:"w-5 h-5"})}),w.jsx("input",{type:"text",value:o,onChange:C=>u(C.target.value),onBlur:rt,className:"flex-1 bg-transparent text-lg md:text-xl font-bold text-white placeholder-zinc-600 border-none p-0 focus:ring-0 focus:outline-none truncate",placeholder:"  "}),g&&w.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 text-xs text-accent bg-accent/10 px-2 py-1 rounded-full animate-pulse",children:[w.jsx(Qt.Save,{className:"w-3.5 h-3.5"}),w.jsx("span",{className:"hidden sm:inline",children:" ..."})]})]}),w.jsx("div",{className:"flex-1 flex flex-col p-4 md:p-6 gap-4 md:gap-5 min-h-0",children:w.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[w.jsxs("div",{className:"h-[40%] min-h-[200px] flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden group focus-within:border-zinc-600 transition-colors",children:[w.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2.5 border-b border-border/50 bg-zinc-900/30",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Qt.File,{className:"w-4 h-4 text-zinc-400"}),w.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:" "})]}),w.jsx("button",{onClick:()=>O(!0),className:"text-xs px-2 py-1 rounded bg-accent/20 text-accent hover:bg-accent/30 transition-colors",title:"  ",children:""})]}),E?w.jsx("textarea",{autoFocus:!0,value:h,onChange:C=>m(C.target.value),onBlur:W,className:"flex-1 w-full bg-transparent border-none p-4 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):w.jsx("div",{onDoubleClick:tt,onTouchStart:it,onTouchEnd:gt,className:"flex-1 w-full p-4 text-sm text-zinc-300 overflow-y-auto whitespace-pre-wrap leading-relaxed custom-scrollbar cursor-text hover:bg-white/5 transition-colors",title:"  ",children:h?ft(h):w.jsx("span",{className:"text-zinc-700",children:"      ..."})})]}),w.jsx("div",{className:"flex-1 flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden min-h-0 group focus-within:border-zinc-600 transition-colors",children:w.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:w.jsx(jR,{itemId:s.id,onOpenMemo:n})})})]})}),S&&w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>O(!1),children:w.jsxs("div",{className:"bg-surface rounded-lg shadow-lg flex flex-col h-[90vh] max-w-2xl w-full",onClick:C=>C.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border bg-zinc-900/30",children:[w.jsx("span",{className:"text-lg font-semibold text-white",children:" "}),w.jsx("button",{onClick:()=>{O(!1),q(!1)},className:"text-zinc-400 hover:text-white text-2xl",children:""})]}),H?w.jsx("textarea",{autoFocus:!0,value:h,onChange:C=>m(C.target.value),className:"flex-1 w-full bg-transparent border-none p-6 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):w.jsx("div",{className:"flex-1 overflow-y-auto p-6 text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed custom-scrollbar",children:h?ft(h):w.jsx("span",{className:"text-zinc-700",children:" ."})}),w.jsx("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-border bg-zinc-900/30",children:H?w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{m(s.description),q(!1)},className:"px-4 py-2 rounded bg-zinc-700 text-white hover:bg-zinc-600 transition-colors text-sm",children:""}),w.jsx("button",{onClick:async()=>{h!==s.description&&(y(!0),await Ht.items.update({id:s.id,description:h}),t(s.id,{description:h}),y(!1)),q(!1)},className:"px-4 py-2 rounded bg-accent text-white hover:bg-accent/90 transition-colors text-sm",children:""})]}):w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600 transition-colors text-sm",children:""}),w.jsx("button",{onClick:()=>q(!0),className:"px-4 py-2 rounded bg-yellow-500 text-white hover:bg-yellow-600 transition-colors text-sm",children:""})]})})]})})]})},UR=({bookmark:s,onEdit:t,onDelete:n})=>{const r=o=>{o.preventDefault(),t(s)};return w.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center justify-center gap-0 p-0 rounded-none border border-black transition-all hover:opacity-90 aspect-[4/2.4] cursor-pointer relative",style:{backgroundColor:s.color},onContextMenu:r,title:`${s.name}
${s.url}`,children:w.jsx("div",{className:"flex-1 flex flex-col items-center justify-center gap-0 min-w-0 px-1 py-1",children:w.jsx("span",{className:"text-[14px] font-bold text-white text-center line-clamp-2 w-full",children:s.name})})})},qR=["#C0C0BD","#D9A891","#D99B71","#D9C659","#C5E6A5","#A8D5B8","#9CBFF5","#C9B3E6","#E6B3D9","#E67A7A","#B8B8B3","#C9B8A3","#D9C9A3","#A3D9D1","#B3C9FF","#FF8080","#E8B8A3","#FFDE71","#C9FF99","#99D9D1","#B3D9FF","#FF99FF","#FF9999","#99CCFF","#D9B3FF","#FFCC99","#99FFD9","#E6CCFF","#FFB3D9","#99E6FF"],FR=({isOpen:s,currentColor:t,onColorSelect:n,onClose:r})=>{if(!s)return null;const o=u=>{n(u),r()};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:r,children:w.jsxs("div",{className:"bg-surface rounded-lg shadow-lg w-full max-w-md",onClick:u=>u.stopPropagation(),children:[w.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[w.jsx("h2",{className:"text-base font-semibold text-white",children:"  "}),w.jsx("button",{onClick:r,className:"p-1 text-zinc-400 hover:text-white transition-colors",title:"",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"p-6",children:w.jsx("div",{className:"grid grid-cols-6 gap-2",children:qR.map(u=>w.jsx("button",{onClick:()=>o(u),className:`w-10 h-10 rounded-lg border-2 transition-all transform hover:scale-110 ${u===t?"border-white scale-110 shadow-lg":"border-transparent hover:border-zinc-600"}`,style:{backgroundColor:u},title:u},u))})})]})})},HR=({zone:s,bookmarks:t,onEditZone:n,onAddBookmark:r,onEditBookmark:o,onDeleteBookmark:u})=>{const[h,m]=ct.useState(!1),[g,y]=ct.useState(s.name),[E,b]=ct.useState(!1),S=async()=>{g.trim()&&g!==s.name?await n(s.id,{name:g}):y(s.name),m(!1)},O=Q=>{Q.key==="Enter"?S():Q.key==="Escape"&&(y(s.name),m(!1))},H=async Q=>{await n(s.id,{default_color:Q}),b(!1)},q=Q=>{Q.preventDefault(),b(!0)};return w.jsxs("div",{className:"flex flex-col bg-surface rounded-xl border border-border overflow-hidden shadow-sm",children:[w.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-zinc-900/30 flex-shrink-0",children:[h?w.jsx("input",{autoFocus:!0,type:"text",value:g,onChange:Q=>y(Q.target.value),onBlur:S,onKeyDown:O,className:"flex-1 bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none focus:ring-1 focus:ring-accent"}):w.jsx("h3",{onDoubleClick:()=>m(!0),className:"flex-1 font-semibold text-sm text-white cursor-text hover:bg-white/5 px-2 py-1 rounded transition-colors",children:s.name}),w.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[w.jsx("button",{onClick:r,className:"p-1 hover:bg-white/10 rounded transition-colors",title:" ",children:w.jsx(Qt.Plus,{className:"w-4 h-4 text-zinc-400 hover:text-zinc-200 transition-colors"})}),w.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 border border-zinc-600 cursor-pointer hover:border-zinc-400 transition-colors",style:{backgroundColor:s.default_color},title:`${s.default_color}
  `,onContextMenu:q})]})]}),w.jsx("div",{className:"overflow-y-auto p-0 custom-scrollbar max-h-[240px]",children:t.length>0?w.jsx("div",{className:"grid grid-cols-4 gap-0",children:t.map(Q=>w.jsx(UR,{bookmark:Q,onEdit:o,onDelete:u},Q.id))}):w.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[w.jsx(Qt.Bookmark,{className:"w-8 h-8 text-zinc-700 mb-2"}),w.jsx("p",{className:"text-xs text-zinc-600 mb-3",children:" ."}),w.jsx("button",{onClick:r,className:"text-xs px-3 py-1.5 rounded-md bg-accent/20 text-accent hover:bg-accent/30 transition-colors",children:"  "})]})}),w.jsx(FR,{isOpen:E,currentColor:s.default_color,onColorSelect:H,onClose:()=>b(!1)})]})},GR=["#C0C0BD","#D9A891","#D99B71","#D9C659","#C5E6A5","#A8D5B8","#9CBFF5","#C9B3E6","#E6B3D9","#E67A7A","#B8B8B3","#C9B8A3","#D9C9A3","#A3D9D1","#B3C9FF","#FF8080","#E8B8A3","#FFDE71","#C9FF99","#99D9D1","#B3D9FF","#FF99FF","#FF9999","#99CCFF","#D9B3FF","#FFCC99","#99FFD9","#E6CCFF","#FFB3D9","#99E6FF"],KR=({selectedColor:s,onChange:t,label:n=""})=>w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:n}),w.jsx("div",{className:"grid grid-cols-6 gap-2",children:GR.map(r=>w.jsx("button",{onClick:()=>t(r),className:`w-10 h-10 rounded-lg border-2 transition-all transform hover:scale-110 ${s===r?"border-white scale-110 shadow-lg":"border-transparent hover:border-zinc-600"}`,style:{backgroundColor:r},title:r},r))}),w.jsxs("div",{className:"mt-3",children:[w.jsx("label",{className:"text-xs text-zinc-400 mb-1.5 block",children:" "}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"color",value:s,onChange:r=>t(r.target.value),className:"w-12 h-10 rounded border border-border cursor-pointer"}),w.jsx("input",{type:"text",value:s,onChange:r=>t(r.target.value),placeholder:"#000000",className:"flex-1 bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent"})]})]})]}),QR=({zones:s,bookmark:t,defaultZoneId:n,onSave:r,onDelete:o,onClose:u})=>{const[h,m]=ct.useState(""),[g,y]=ct.useState(""),[E,b]=ct.useState(""),[S,O]=ct.useState("#ef4444"),[H,q]=ct.useState("");ct.useEffect(()=>{var it;if(s.length>0){const gt=(t==null?void 0:t.zone_id)||n||s[0].id,ft=((it=s.find(C=>C.id===gt))==null?void 0:it.default_color)||"#ef4444";b(gt),O((t==null?void 0:t.color)||ft)}t?(m(t.name),y(t.url)):(m(""),y("")),q("")},[t,n,s]);const Q=it=>{const gt=it.target.value;b(gt);const ft=s.find(C=>C.id===gt);ft&&O(ft.default_color)},rt=it=>{try{const gt=new URL(it.startsWith("http")?it:`https://${it}`);return!0}catch{return!1}},W=it=>!it.startsWith("http://")&&!it.startsWith("https://")?`https://${it}`:it,tt=()=>{if(q(""),!h.trim()){q("  .");return}if(!g.trim()){q("URL .");return}if(!rt(g)){q(" URL .");return}if(!E){q(" .");return}const it=W(g);r({id:t==null?void 0:t.id,name:h.trim(),url:it,zone_id:E,color:S})};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:u,children:w.jsxs("div",{className:"bg-surface rounded-lg shadow-lg w-full max-w-2xl",onClick:it=>it.stopPropagation(),children:[w.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[w.jsx("h2",{className:"text-base font-semibold text-white",children:t?" ":" "}),w.jsxs("div",{className:"flex gap-2",children:[t&&w.jsx("button",{onClick:()=>{window.confirm(`'${t.name}'  ?`)&&(o==null||o(t.id),u())},className:"px-3 py-1.5 rounded bg-red-500/90 text-white hover:bg-red-600 transition-colors text-xs font-medium",children:""}),w.jsx("button",{onClick:tt,className:"px-3 py-1.5 rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors text-xs font-bold",children:t?"":""}),w.jsx("button",{onClick:u,className:"px-3 py-1.5 rounded bg-yellow-500 text-black hover:bg-yellow-600 transition-colors text-xs font-medium",children:""})]})]}),w.jsxs("div",{className:"p-6 flex gap-6",children:[w.jsxs("div",{className:"flex-1 space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:""}),w.jsx("input",{type:"text",value:h,onChange:it=>m(it.target.value),placeholder:" ",className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:"URL"}),w.jsx("input",{type:"text",value:g,onChange:it=>y(it.target.value),placeholder:"https://example.com",className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:""}),w.jsx("select",{value:E,onChange:Q,className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all",children:s.map(it=>w.jsx("option",{value:it.id,children:it.name},it.id))})]}),H&&w.jsx("div",{className:"px-3 py-2 rounded-lg bg-red-500/10 border border-red-500/30 text-xs text-red-400",children:H})]}),w.jsx("div",{className:"flex flex-col items-center gap-4",children:w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-3 block text-center",children:""}),w.jsx(KR,{selectedColor:S,onChange:O})]})})]})]})})},YR=({onBack:s})=>{const[t,n]=ct.useState([]),[r,o]=ct.useState([]),[u,h]=ct.useState(!0),[m,g]=ct.useState(!1),[y,E]=ct.useState(null),[b,S]=ct.useState(null);ct.useEffect(()=>{(async()=>{h(!0);try{await Ht.bookmarkZones.initializeDefaults();const tt=await Ht.bookmarkZones.list();n(tt);const it=await Ht.bookmarks.list();o(it)}catch(tt){console.error("Failed to load bookmark data:",tt)}finally{h(!1)}})()},[]);const O=W=>{S(W),E(null),g(!0)},H=async(W,tt)=>{try{await Ht.bookmarkZones.update(W,tt),n(t.map(it=>it.id===W?{...it,...tt}:it))}catch(it){console.error("Failed to update zone:",it)}},q=W=>{E(W),S(W.zone_id),g(!0)},Q=async W=>{try{await Ht.bookmarks.delete(W),o(r.filter(tt=>tt.id!==W))}catch(tt){console.error("Failed to delete bookmark:",tt)}},rt=async W=>{try{if(y)await Ht.bookmarks.update(y.id,{name:W.name,url:W.url,color:W.color,zone_id:W.zone_id}),o(r.map(tt=>tt.id===y.id?{...tt,name:W.name||tt.name,url:W.url||tt.url,color:W.color||tt.color,zone_id:W.zone_id||tt.zone_id}:tt));else{const tt=await Ht.bookmarks.create(W.zone_id,W.name||"",W.url||"",W.color||"#ef4444");o([...r,tt])}g(!1),E(null),S(null)}catch(tt){console.error("Failed to save bookmark:",tt)}};return u?w.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin mb-4",children:w.jsx(Qt.Bookmark,{className:"w-8 h-8 text-accent"})}),w.jsx("p",{className:"text-sm text-secondary",children:"  ..."})]})}):w.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[w.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[w.jsx("button",{onClick:s,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white transition-colors",title:"",children:w.jsx(Qt.Back,{className:"w-5 h-5"})}),w.jsxs("h1",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[w.jsx(Qt.Bookmark,{className:"w-5 h-5 text-accent"})," "]}),w.jsxs("button",{onClick:()=>{var W;return O(((W=t[0])==null?void 0:W.id)||"")},className:"flex items-center gap-2 px-3 py-1.5 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium ml-auto",disabled:t.length===0,children:[w.jsx(Qt.Plus,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden sm:inline",children:" "})]})]}),w.jsx("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto custom-scrollbar",children:t.length===0?w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsxs("div",{className:"text-center",children:[w.jsx(Qt.Bookmark,{className:"w-12 h-12 text-zinc-700 mx-auto mb-4"}),w.jsx("p",{className:"text-secondary text-sm",children:"   ."})]})}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 auto-rows-max",children:t.map(W=>w.jsx(HR,{zone:W,bookmarks:r.filter(tt=>tt.zone_id===W.id),onEditZone:H,onAddBookmark:()=>O(W.id),onEditBookmark:q,onDeleteBookmark:Q},W.id))})}),m&&w.jsx(QR,{zones:t,bookmark:y,defaultZoneId:b||void 0,onSave:rt,onDelete:Q,onClose:()=>{g(!1),E(null),S(null)}})]})},XR=({isOpen:s,onClose:t,checklistItem:n,onSave:r})=>{const[o,u]=ct.useState(""),[h,m]=ct.useState(!1);if(ct.useEffect(()=>{n&&(u(n.memo||""),m(!1))},[n]),!s||!n)return null;const g=()=>{r(n.id,o),m(!1)},y=()=>{g()};return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:w.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col shadow-black/50",children:[w.jsx("div",{className:"p-6 flex-1 flex flex-col min-h-[450px]",children:h?w.jsx("textarea",{className:"flex-1 w-full bg-zinc-950 border border-border rounded-lg p-5 text-base text-zinc-200 resize-none focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent custom-scrollbar leading-relaxed",placeholder:"   ...",value:o,onChange:E=>u(E.target.value),onBlur:y,autoFocus:!0}):w.jsx("div",{className:"flex-1 w-full bg-zinc-900/30 rounded-lg p-5 text-base text-zinc-300 overflow-y-auto custom-scrollbar whitespace-pre-wrap cursor-pointer hover:bg-zinc-900/50 transition-colors border border-transparent hover:border-zinc-800",onDoubleClick:()=>m(!0),title:" ",children:o||w.jsx("span",{className:"text-zinc-500 italic",children:"  .   ."})})}),w.jsxs("div",{className:"p-4 border-t border-border bg-zinc-950/30 flex justify-end gap-3",children:[h?w.jsxs("button",{onClick:g,className:"px-6 py-2.5 text-sm font-medium text-white bg-accent hover:bg-blue-600 rounded-md shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[w.jsx(Qt.Save,{className:"w-4 h-4"}),""]}):w.jsx("button",{onClick:()=>m(!0),className:"px-6 py-2.5 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-800 rounded-md transition-colors",children:""}),w.jsx("button",{onClick:t,className:"px-6 py-2.5 text-sm font-medium text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-md transition-colors border border-zinc-800 hover:border-zinc-700",children:""})]})]})})},ZR=({workspace:s,onDelete:t,onUpdate:n,onShowBookmarks:r,showBookmarks:o=!1,onCloseBookmarks:u,registerHandlers:h})=>{const[m,g]=ct.useState([]),[y,E]=ct.useState(null),[b,S]=ct.useState([]),[O,H]=ct.useState(null),[q,Q]=ct.useState(!1),[rt,W]=ct.useState(!1),[tt,it]=ct.useState(null);ct.useEffect(()=>{gt(),E(null),S([]),H(null)},[s.id]),ct.useEffect(()=>{y?(ft(y),H(null)):(S([]),H(null))},[y]),ct.useEffect(()=>{y&&o&&u&&u()},[y]);const gt=async()=>{const vt=await Ht.categories.listByWorkspace(s.id);g(vt)},ft=async vt=>{Q(!0);const M=await Ht.items.listByCategory(vt);S(M),Q(!1)},C=async vt=>{const M=await Ht.categories.create(s.id,vt);await gt(),E(M.id)},I=async()=>{if(!y)return;const vt=await Ht.items.create(y);S([...b,vt]),H(vt.id)},D=async vt=>{await Ht.items.delete(vt),S(M=>M.filter($=>$.id!==vt)),O===vt&&H(null)},x=async vt=>{S(vt),y&&await Ht.items.reorder(y,vt.map(M=>M.id))},R=(vt,M)=>{S($=>$.map(ot=>ot.id===vt?{...ot,...M}:ot))},k=vt=>{it(vt),W(!0)},N=async(vt,M)=>{await Ht.checklist.update({id:vt,memo:M}),Vt&&H(Vt.id)},le=()=>{t(s.id)},Te=()=>{n(s.id,{is_locked:!s.is_locked})},Y=()=>{E(null)},lt=()=>{H(null)};ct.useEffect(()=>{h&&h({selectedCategoryId:y,selectedItemId:O,handleBackToCategories:Y,handleBackToItems:lt})},[y,O,h]);const _t=m.find(vt=>vt.id===y),Vt=b.find(vt=>vt.id===O);return w.jsxs("div",{className:"flex h-full w-full bg-background text-zinc-100 font-sans selection:bg-accent/30 overflow-hidden relative",children:[w.jsx("div",{className:`${y||o?"hidden md:flex":"flex"} w-full md:w-64 flex-col border-r border-border bg-surface`,children:w.jsx(PR,{categories:m,selectedCategoryId:y,onSelectCategory:E,onRefresh:gt,workspaceName:s.name,isLocked:s.is_locked,onAddCategory:C,onDeleteWorkspace:le,onToggleLock:Te,onShowBookmarks:r})}),w.jsx("div",{className:`${y&&!O&&!o?"flex":"hidden md:flex"} ${y?"w-full md:w-80":"hidden md:flex md:w-80"} flex-col border-r border-border bg-background`,children:y?w.jsx(BR,{categoryName:_t==null?void 0:_t.name,items:b,selectedItemId:O,onSelectItem:H,onAddItem:I,onDeleteItem:D,onReorder:x,loading:q,onBack:Y}):w.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[w.jsx(Qt.Folder,{className:"w-12 h-12 mb-2 opacity-20"}),w.jsx("p",{className:"text-sm",children:" "})]})}),w.jsx("div",{className:`${O||o?"flex":"hidden md:flex"} flex-1 flex-col h-full bg-background relative min-w-0`,children:o?w.jsx(YR,{onBack:u||(()=>{})}):Vt?w.jsx(LR,{item:Vt,onUpdateItem:R,onOpenMemo:k,onBack:lt},Vt.id):w.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[w.jsx("div",{className:"w-16 h-16 bg-zinc-900/50 rounded-2xl flex items-center justify-center mb-4 border border-zinc-800",children:w.jsx(Qt.File,{className:"w-8 h-8 text-zinc-700"})}),w.jsx("p",{className:"text-zinc-500",children:"   ."})]})}),w.jsx(XR,{isOpen:rt,onClose:()=>W(!1),checklistItem:tt,onSave:N})]})},JR=({workspaces:s,activeWorkspaceId:t,onSwitch:n,onUpdate:r})=>{const[o,u]=ct.useState(null),[h,m]=ct.useState(""),g=async()=>{const O=await Ht.workspaces.create(`  ${s.length+1}`);r(),n(O.id)},y=O=>{O.is_locked||(u(O.id),m(O.name))},E=async()=>{o&&h.trim()&&(await Ht.workspaces.update(o,{name:h}),r()),u(null)},b=async O=>{const H=s.findIndex(q=>q.id===O);if(H>0){const q=[...s];[q[H-1],q[H]]=[q[H],q[H-1]],await Ht.workspaces.reorder(q.map(Q=>Q.id)),r()}},S=async O=>{const H=s.findIndex(q=>q.id===O);if(H<s.length-1){const q=[...s];[q[H],q[H+1]]=[q[H+1],q[H]],await Ht.workspaces.reorder(q.map(Q=>Q.id)),r()}};return w.jsxs("div",{className:"h-12 bg-zinc-950 border-t border-border flex items-center flex-shrink-0 z-50 relative",children:[w.jsxs("div",{className:"flex-1 flex items-center gap-2 px-4 overflow-x-auto h-full [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:[s.map((O,H)=>w.jsxs("div",{className:`group flex-shrink-0 relative flex items-center rounded-md transition-all min-w-max border select-none ${t===O.id?"bg-zinc-800 text-white border-zinc-700 shadow-sm":"bg-transparent text-zinc-500 border-transparent hover:bg-zinc-900 hover:text-zinc-300"}`,children:[w.jsx("button",{onClick:q=>{q.stopPropagation(),b(O.id)},className:`p-1 transition-opacity ${H===0?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:H===0,title:" ",children:w.jsx(Qt.ChevronLeft,{className:"w-3.5 h-3.5"})}),w.jsx("div",{onClick:()=>n(O.id),className:"flex items-center gap-2 px-3 py-1.5 cursor-pointer flex-1",onDoubleClick:()=>y(O),children:o===O.id?w.jsx("input",{autoFocus:!0,className:"bg-zinc-950 text-white text-xs px-1 py-0.5 rounded border border-accent w-full focus:outline-none",value:h,onChange:q=>m(q.target.value),onBlur:E,onKeyDown:q=>q.key==="Enter"&&E(),onClick:q=>q.stopPropagation()}):w.jsxs(w.Fragment,{children:[O.is_locked?w.jsx(Bm,{className:"w-3 h-3 text-amber-500/70"}):w.jsx(Qt.Dashboard,{className:`w-3.5 h-3.5 ${t===O.id?"text-accent":"opacity-70"}`}),w.jsx("span",{className:"text-xs font-medium truncate",children:O.name})]})}),w.jsx("button",{onClick:q=>{q.stopPropagation(),S(O.id)},className:`p-1 transition-opacity ${H===s.length-1?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:H===s.length-1,title:" ",children:w.jsx(Qt.ChevronRight,{className:"w-3.5 h-3.5"})})]},O.id)),w.jsx("div",{className:"w-2 flex-shrink-0"})]}),w.jsx("div",{className:"flex-shrink-0 flex items-center pl-2 pr-2 h-full bg-zinc-950 border-l border-border relative z-10 shadow-[-10px_0_20px_-5px_rgba(0,0,0,0.8)]",children:w.jsx("button",{onClick:g,className:"p-1.5 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",title:"  ",children:w.jsx(Qt.Plus,{className:"w-5 h-5"})})})]})},$R=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.matchMedia("(max-width: 768px)").matches,WR=()=>{const[s,t]=ct.useState([]),[n,r]=ct.useState(null),[o,u]=ct.useState(!1),h=ct.useRef({selectedCategoryId:null,selectedItemId:null,handleBackToCategories:()=>{},handleBackToItems:()=>{}}),m=ct.useCallback(S=>{h.current=S},[]),g=ct.useCallback(async()=>{const S=await Ht.workspaces.list();t(S)},[]);ct.useEffect(()=>{g()},[g]),ct.useEffect(()=>{s.length>0?n&&s.find(S=>S.id===n)||r(s[0].id):r(null)},[s,n]);const y=ct.useCallback(async S=>{await Ht.workspaces.delete(S),await g()},[g]),E=ct.useCallback(async(S,O)=>{await Ht.workspaces.update(S,O),t(H=>H.map(q=>q.id===S?{...q,...O}:q))},[]);ct.useEffect(()=>{if(!$R())return;let S=!1;const O=()=>{if(S)return;S=!0;const H=h.current;if(o)u(!1);else if(H.selectedItemId)H.handleBackToItems();else if(H.selectedCategoryId)H.handleBackToCategories();else{S=!1;return}setTimeout(()=>{history.pushState(null,""),S=!1},0)};return history.pushState(null,""),window.addEventListener("popstate",O),()=>{window.removeEventListener("popstate",O)}},[o]);const b=s.find(S=>S.id===n);return w.jsxs("div",{className:"flex flex-col h-screen bg-black text-zinc-100 font-sans overflow-hidden",children:[w.jsx("div",{className:"flex-1 overflow-hidden relative",children:b?w.jsx(ZR,{workspace:b,onDelete:y,onUpdate:E,onShowBookmarks:()=>u(!0),showBookmarks:o,onCloseBookmarks:()=>u(!1),registerHandlers:m}):w.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:" ."})}),b&&!o&&w.jsx("button",{onClick:()=>u(!0),className:"md:hidden fixed bottom-20 right-6 w-14 h-14 bg-accent rounded-full shadow-lg flex items-center justify-center hover:bg-accent/90 transition-all z-50 border-2 border-white/10",title:" ",children:w.jsx(Qt.Home,{className:"w-6 h-6 text-white"})}),w.jsx(JR,{workspaces:s,activeWorkspaceId:n,onSwitch:r,onUpdate:g})]})};if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("/Data-Library/sw.js").then(t=>{console.log("ServiceWorker registration successful"),setInterval(()=>{t.update()},6e4)}).catch(t=>{console.log("ServiceWorker registration failed:",t)})});let s=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{s||(s=!0,window.location.reload())})}const $1=document.getElementById("root");if(!$1)throw new Error("Could not find root element to mount to");const tC=jA.createRoot($1);tC.render(w.jsx(yg.StrictMode,{children:w.jsx(WR,{})}));
