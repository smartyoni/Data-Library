(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function FT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cg={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function Vw(){if(k0)return pu;k0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var P0;function Ow(){return P0||(P0=1,cg.exports=Vw()),cg.exports}var R=Ow(),hg={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function Mw(){if(z0)return xe;z0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function O(k){return k===null||typeof k!="object"?null:(k=A&&k[A]||k["@@iterator"],typeof k=="function"?k:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,K={};function ie(k,W,ue){this.props=k,this.context=W,this.refs=K,this.updater=ue||F}ie.prototype.isReactComponent={},ie.prototype.setState=function(k,W){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,W,"setState")},ie.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ee(){}ee.prototype=ie.prototype;function Q(k,W,ue){this.props=k,this.context=W,this.refs=K,this.updater=ue||F}var le=Q.prototype=new ee;le.constructor=Q,H(le,ie.prototype),le.isPureReactComponent=!0;var _e=Array.isArray;function de(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function N(k,W,ue){var he=ue.ref;return{$$typeof:s,type:k,key:W,ref:he!==void 0?he:null,props:ue}}function w(k,W){return N(k.type,W,k.props)}function x(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function P(k){var W={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return W[ue]})}var D=/\/+/g;function ut(k,W){return typeof k=="object"&&k!==null&&k.key!=null?P(""+k.key):W.toString(36)}function bt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(de,de):(k.status="pending",k.then(function(W){k.status==="pending"&&(k.status="fulfilled",k.value=W)},function(W){k.status==="pending"&&(k.status="rejected",k.reason=W)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function X(k,W,ue,he,Ae){var Ve=typeof k;(Ve==="undefined"||Ve==="boolean")&&(k=null);var Fe=!1;if(k===null)Fe=!0;else switch(Ve){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(k.$$typeof){case s:case e:Fe=!0;break;case E:return Fe=k._init,X(Fe(k._payload),W,ue,he,Ae)}}if(Fe)return Ae=Ae(k),Fe=he===""?"."+ut(k,0):he,_e(Ae)?(ue="",Fe!=null&&(ue=Fe.replace(D,"$&/")+"/"),X(Ae,W,ue,"",function(Rs){return Rs})):Ae!=null&&(x(Ae)&&(Ae=w(Ae,ue+(Ae.key==null||k&&k.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Fe)),W.push(Ae)),1;Fe=0;var Ut=he===""?".":he+":";if(_e(k))for(var ft=0;ft<k.length;ft++)he=k[ft],Ve=Ut+ut(he,ft),Fe+=X(he,W,ue,Ve,Ae);else if(ft=O(k),typeof ft=="function")for(k=ft.call(k),ft=0;!(he=k.next()).done;)he=he.value,Ve=Ut+ut(he,ft++),Fe+=X(he,W,ue,Ve,Ae);else if(Ve==="object"){if(typeof k.then=="function")return X(bt(k),W,ue,he,Ae);throw W=String(k),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function ae(k,W,ue){if(k==null)return k;var he=[],Ae=0;return X(k,he,"","",function(Ve){return W.call(ue,Ve,Ae++)}),he}function pe(k){if(k._status===-1){var W=k._result;W=W(),W.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=W)}if(k._status===1)return k._result.default;throw k._result}var ye=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},De={map:ae,forEach:function(k,W,ue){ae(k,function(){W.apply(this,arguments)},ue)},count:function(k){var W=0;return ae(k,function(){W++}),W},toArray:function(k){return ae(k,function(W){return W})||[]},only:function(k){if(!x(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return xe.Activity=T,xe.Children=De,xe.Component=ie,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=Q,xe.StrictMode=r,xe.Suspense=g,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,xe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return C.H.useMemoCache(k)}},xe.cache=function(k){return function(){return k.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(k,W,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var he=H({},k.props),Ae=k.key;if(W!=null)for(Ve in W.key!==void 0&&(Ae=""+W.key),W)!I.call(W,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&W.ref===void 0||(he[Ve]=W[Ve]);var Ve=arguments.length-2;if(Ve===1)he.children=ue;else if(1<Ve){for(var Fe=Array(Ve),Ut=0;Ut<Ve;Ut++)Fe[Ut]=arguments[Ut+2];he.children=Fe}return N(k.type,Ae,he)},xe.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},xe.createElement=function(k,W,ue){var he,Ae={},Ve=null;if(W!=null)for(he in W.key!==void 0&&(Ve=""+W.key),W)I.call(W,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=W[he]);var Fe=arguments.length-2;if(Fe===1)Ae.children=ue;else if(1<Fe){for(var Ut=Array(Fe),ft=0;ft<Fe;ft++)Ut[ft]=arguments[ft+2];Ae.children=Ut}if(k&&k.defaultProps)for(he in Fe=k.defaultProps,Fe)Ae[he]===void 0&&(Ae[he]=Fe[he]);return N(k,Ve,Ae)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(k){return{$$typeof:m,render:k}},xe.isValidElement=x,xe.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:pe}},xe.memo=function(k,W){return{$$typeof:p,type:k,compare:W===void 0?null:W}},xe.startTransition=function(k){var W=C.T,ue={};C.T=ue;try{var he=k(),Ae=C.S;Ae!==null&&Ae(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(de,ye)}catch(Ve){ye(Ve)}finally{W!==null&&ue.types!==null&&(W.types=ue.types),C.T=W}},xe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},xe.use=function(k){return C.H.use(k)},xe.useActionState=function(k,W,ue){return C.H.useActionState(k,W,ue)},xe.useCallback=function(k,W){return C.H.useCallback(k,W)},xe.useContext=function(k){return C.H.useContext(k)},xe.useDebugValue=function(){},xe.useDeferredValue=function(k,W){return C.H.useDeferredValue(k,W)},xe.useEffect=function(k,W){return C.H.useEffect(k,W)},xe.useEffectEvent=function(k){return C.H.useEffectEvent(k)},xe.useId=function(){return C.H.useId()},xe.useImperativeHandle=function(k,W,ue){return C.H.useImperativeHandle(k,W,ue)},xe.useInsertionEffect=function(k,W){return C.H.useInsertionEffect(k,W)},xe.useLayoutEffect=function(k,W){return C.H.useLayoutEffect(k,W)},xe.useMemo=function(k,W){return C.H.useMemo(k,W)},xe.useOptimistic=function(k,W){return C.H.useOptimistic(k,W)},xe.useReducer=function(k,W,ue){return C.H.useReducer(k,W,ue)},xe.useRef=function(k){return C.H.useRef(k)},xe.useState=function(k){return C.H.useState(k)},xe.useSyncExternalStore=function(k,W,ue){return C.H.useSyncExternalStore(k,W,ue)},xe.useTransition=function(){return C.H.useTransition()},xe.version="19.2.3",xe}var L0;function fp(){return L0||(L0=1,hg.exports=Mw()),hg.exports}var ce=fp();const dp=FT(ce);var fg={exports:{}},yu={},dg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function kw(){return U0||(U0=1,(function(s){function e(X,ae){var pe=X.length;X.push(ae);e:for(;0<pe;){var ye=pe-1>>>1,De=X[ye];if(0<o(De,ae))X[ye]=ae,X[pe]=De,pe=ye;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],pe=X.pop();if(pe!==ae){X[0]=pe;e:for(var ye=0,De=X.length,k=De>>>1;ye<k;){var W=2*(ye+1)-1,ue=X[W],he=W+1,Ae=X[he];if(0>o(ue,pe))he<De&&0>o(Ae,ue)?(X[ye]=Ae,X[he]=pe,ye=he):(X[ye]=ue,X[W]=pe,ye=W);else if(he<De&&0>o(Ae,pe))X[ye]=Ae,X[he]=pe,ye=he;else break e}}return ae}function o(X,ae){var pe=X.sortIndex-ae.sortIndex;return pe!==0?pe:X.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,T=null,A=3,O=!1,F=!1,H=!1,K=!1,ie=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function le(X){for(var ae=t(p);ae!==null;){if(ae.callback===null)r(p);else if(ae.startTime<=X)r(p),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(p)}}function _e(X){if(H=!1,le(X),!F)if(t(g)!==null)F=!0,de||(de=!0,P());else{var ae=t(p);ae!==null&&bt(_e,ae.startTime-X)}}var de=!1,C=-1,I=5,N=-1;function w(){return K?!0:!(s.unstable_now()-N<I)}function x(){if(K=!1,de){var X=s.unstable_now();N=X;var ae=!0;try{e:{F=!1,H&&(H=!1,ee(C),C=-1),O=!0;var pe=A;try{t:{for(le(X),T=t(g);T!==null&&!(T.expirationTime>X&&w());){var ye=T.callback;if(typeof ye=="function"){T.callback=null,A=T.priorityLevel;var De=ye(T.expirationTime<=X);if(X=s.unstable_now(),typeof De=="function"){T.callback=De,le(X),ae=!0;break t}T===t(g)&&r(g),le(X)}else r(g);T=t(g)}if(T!==null)ae=!0;else{var k=t(p);k!==null&&bt(_e,k.startTime-X),ae=!1}}break e}finally{T=null,A=pe,O=!1}ae=void 0}}finally{ae?P():de=!1}}}var P;if(typeof Q=="function")P=function(){Q(x)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ut=D.port2;D.port1.onmessage=x,P=function(){ut.postMessage(null)}}else P=function(){ie(x,0)};function bt(X,ae){C=ie(function(){X(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(X){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var pe=A;A=ae;try{return X()}finally{A=pe}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var pe=A;A=X;try{return ae()}finally{A=pe}},s.unstable_scheduleCallback=function(X,ae,pe){var ye=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ye+pe:ye):pe=ye,X){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=pe+De,X={id:E++,callback:ae,priorityLevel:X,startTime:pe,expirationTime:De,sortIndex:-1},pe>ye?(X.sortIndex=pe,e(p,X),t(g)===null&&X===t(p)&&(H?(ee(C),C=-1):H=!0,bt(_e,pe-ye))):(X.sortIndex=De,e(g,X),F||O||(F=!0,de||(de=!0,P()))),X},s.unstable_shouldYield=w,s.unstable_wrapCallback=function(X){var ae=A;return function(){var pe=A;A=ae;try{return X.apply(this,arguments)}finally{A=pe}}}})(mg)),mg}var j0;function Pw(){return j0||(j0=1,dg.exports=kw()),dg.exports}var gg={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function zw(){if(B0)return ln;B0=1;var s=fp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},ln.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},ln.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},ln.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},ln.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:O}):E==="script"&&r.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ln.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},ln.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ln.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},ln.requestFormReset=function(g){r.d.r(g)},ln.unstable_batchedUpdates=function(g,p){return g(p)},ln.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var q0;function Lw(){if(q0)return gg.exports;q0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gg.exports=zw(),gg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Uw(){if(F0)return yu;F0=1;var s=Pw(),e=fp(),t=Lw();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),w=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ut(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case ie:return"Profiler";case K:return"StrictMode";case _e:return"Suspense";case de:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case F:return"Portal";case Q:return n.displayName||"Context";case ee:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:ut(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return ut(n(i))}catch{}}return null}var bt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ye=[],De=-1;function k(n){return{current:n}}function W(n){0>De||(n.current=ye[De],ye[De]=null,De--)}function ue(n,i){De++,ye[De]=n.current,n.current=i}var he=k(null),Ae=k(null),Ve=k(null),Fe=k(null);function Ut(n,i){switch(ue(Ve,i),ue(Ae,n),ue(he,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?r0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=r0(i),n=s0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(he),ue(he,n)}function ft(){W(he),W(Ae),W(Ve)}function Rs(n){n.memoizedState!==null&&ue(Fe,n);var i=he.current,a=s0(i,n.type);i!==a&&(ue(Ae,n),ue(he,a))}function Va(n){Ae.current===n&&(W(he),W(Ae)),Fe.current===n&&(W(Fe),fu._currentValue=pe)}var Oa,Ma;function _i(n){if(Oa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Oa=i&&i[1]||"",Ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oa+n+Ma}var fl=!1;function Cs(n,i){if(!n||fl)return"";fl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var q=Y}Reflect.construct(n,[],te)}else{try{te.call()}catch(Y){q=Y}n.call(te.prototype)}}else{try{throw Error()}catch(Y){q=Y}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&q&&typeof Y.stack=="string")return[Y.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var V=_.split(`
`),B=b.split(`
`);for(f=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===V.length||f===B.length)for(l=V.length-1,f=B.length-1;1<=l&&0<=f&&V[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(V[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||V[l]!==B[f]){var $=`
`+V[l].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=l&&0<=f);break}}}finally{fl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?_i(a):""}function dl(n,i){switch(n.tag){case 26:case 27:case 5:return _i(n.type);case 16:return _i("Lazy");case 13:return n.child!==i&&i!==null?_i("Suspense Fallback"):_i("Suspense");case 19:return _i("SuspenseList");case 0:case 15:return Cs(n.type,!1);case 11:return Cs(n.type.render,!1);case 1:return Cs(n.type,!0);case 31:return _i("Activity");default:return""}}function ml(n){try{var i="",a=null;do i+=dl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var xt=Object.prototype.hasOwnProperty,jt=s.unstable_scheduleCallback,xr=s.unstable_cancelCallback,fd=s.unstable_shouldYield,gc=s.unstable_requestPaint,dn=s.unstable_now,Ns=s.unstable_getCurrentPriorityLevel,gl=s.unstable_ImmediatePriority,pl=s.unstable_UserBlockingPriority,Rr=s.unstable_NormalPriority,dd=s.unstable_LowPriority,pc=s.unstable_IdlePriority,yc=s.log,_c=s.unstable_setDisableYieldValue,ri=null,$t=null;function Bn(n){if(typeof yc=="function"&&_c(n),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(ri,n)}catch{}}var St=Math.clz32?Math.clz32:Ec,vc=Math.log,ka=Math.LN2;function Ec(n){return n>>>=0,n===0?32:31-(vc(n)/ka|0)|0}var vi=256,Ds=262144,Rt=4194304;function Ei(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ti(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=Ei(l):(_&=b,_!==0?f=Ei(_):a||(a=b&~n,a!==0&&(f=Ei(a))))):(b=l&~d,b!==0?f=Ei(b):_!==0?f=Ei(_):a||(a=l&~n,a!==0&&(f=Ei(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function si(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function md(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tc(){var n=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),n}function bi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Vs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,V=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var $=31-St(a),te=1<<$;b[$]=0,V[$]=-1;var q=B[$];if(q!==null)for(B[$]=null,$=0;$<q.length;$++){var Y=q[$];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&Os(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Os(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-St(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function yl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-St(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function _l(n,i){var a=i&-i;return a=(a&42)!==0?1:Ms(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ms(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Xi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bc(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:R0(n.type))}function ai(n,i){var a=ae.p;try{return ae.p=n,i()}finally{ae.p=a}}var oi=Math.random().toString(36).slice(2),Ct="__reactFiber$"+oi,Gt="__reactProps$"+oi,Si="__reactContainer$"+oi,Pa="__reactEvents$"+oi,pd="__reactListeners$"+oi,Sc="__reactHandles$"+oi,Ac="__reactResources$"+oi,Ai="__reactMarker$"+oi;function za(n){delete n[Ct],delete n[Gt],delete n[Pa],delete n[pd],delete n[Sc]}function wi(n){var i=n[Ct];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Si]||a[Ct]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=f0(n);n!==null;){if(a=n[Ct])return a;n=f0(n)}return i}n=a,a=n.parentNode}return null}function qn(n){if(n=n[Ct]||n[Si]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function xn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Ii(n){var i=n[Ac];return i||(i=n[Ac]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Nt(n){n[Ai]=!0}var vl=new Set,El={};function xi(n,i){Ri(n,i),Ri(n+"Capture",i)}function Ri(n,i){for(El[n]=i,n=0;n<i.length;n++)vl.add(i[n])}var Tl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},Sl={};function wc(n){return xt.call(Sl,n)?!0:xt.call(bl,n)?!1:Tl.test(n)?Sl[n]=!0:(bl[n]=!0,!1)}function La(n,i,a){if(wc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Rn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Dt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Kt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Al(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Je(n){if(!n._valueTracker){var i=Cr(n)?"checked":"value";n._valueTracker=Al(n,i,""+n[i])}}function ks(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Cr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ci(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ps=/[\n"\\]/g;function vn(n){return n.replace(Ps,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ua(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Kt(i)):n.value!==""+Kt(i)&&(n.value=""+Kt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?wl(n,_,Kt(i)):a!=null?wl(n,_,Kt(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Kt(b):n.removeAttribute("name")}function Ic(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Je(n);return}a=a!=null?""+Kt(a):"",i=i!=null?""+Kt(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Je(n)}function wl(n,i,a){i==="number"&&Ci(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Nr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Kt(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function xc(n,i,a){if(i!=null&&(i=""+Kt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Kt(a):""}function Dr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(bt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Kt(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Je(n)}function En(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Rc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function xl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Il(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Il(n,d,i[d])}function ja(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(n){return Vr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function li(){}var Rl=null;function Fn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Or=null,Ni=null;function zs(n){var i=qn(n);if(i&&(n=i.stateNode)){var a=n[Gt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ua(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Gt]||null;if(!f)throw Error(r(90));Ua(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&ks(l)}break e;case"textarea":xc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Nr(n,!!a.multiple,i,!1)}}}var qa=!1;function Mr(n,i,a){if(qa)return n(i,a);qa=!0;try{var l=n(i);return l}finally{if(qa=!1,(Or!==null||Ni!==null)&&(bh(),Or&&(i=Or,n=Ni,Ni=Or=null,zs(i),n)))for(i=0;i<n.length;i++)zs(n[i])}}function ui(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Gt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if(Hn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Ls=!1}var Di=null,Cl=null,Us=null;function Nl(){if(Us)return Us;var n,i=Cl,a=i.length,l,f="value"in Di?Di.value:Di.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Us=f.slice(n,1<l?1-l:void 0)}function js(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function $i(){return!0}function ci(){return!1}function Zt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?$i:ci,this.isPropagationStopped=ci,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),i}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Zt(Zi),kr=T({},Zi,{view:0,detail:0}),Dl=Zt(kr),Pr,Fa,Oi,Ha=T({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oi&&(Oi&&n.type==="mousemove"?(Pr=n.screenX-Oi.screenX,Fa=n.screenY-Oi.screenY):Fa=Pr=0,Oi=n),Pr)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),Vl=Zt(Ha),Bs=T({},Ha,{dataTransfer:0}),Nc=Zt(Bs),Dc=T({},kr,{relatedTarget:0}),qs=Zt(Dc),Ol=T({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=Zt(Ol),Ga=T({},Zi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Oc=Zt(Ga),Mc=T({},Zi,{data:0}),Mi=Zt(Mc),kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=zc[n])?!!i[n]:!1}function zr(){return Lc}var mn=T({},kr,{key:function(n){if(n.key){var i=kc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(n){return n.type==="keypress"?js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Uc=Zt(mn),jc=T({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=Zt(jc),h=T({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),y=Zt(h),v=T({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Zt(v),U=T({},Ha,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Zt(U),re=T({},Zi,{newState:0,oldState:0}),Re=Zt(re),At=[9,13,27,32],Ye=Hn&&"CompositionEvent"in window,dt=null;Hn&&"documentMode"in document&&(dt=document.documentMode);var Gn=Hn&&"TextEvent"in window&&!dt,ki=Hn&&(!Ye||dt&&8<dt&&11>=dt),hi=" ",fi=!1;function Fs(n,i){switch(n){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ka(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qa=!1;function n1(n,i){switch(n){case"compositionend":return Ka(i);case"keypress":return i.which!==32?null:(fi=!0,hi);case"textInput":return n=i.data,n===hi&&fi?null:n;default:return null}}function i1(n,i){if(Qa)return n==="compositionend"||!Ye&&Fs(n,i)?(n=Nl(),Us=Cl=Di=null,Qa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ki&&i.locale!=="ko"?null:i.data;default:return null}}var r1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!r1[n.type]:i==="textarea"}function py(n,i,a,l){Or?Ni?Ni.push(l):Ni=[l]:Or=l,i=Ch(i,"onChange"),0<i.length&&(a=new Vi("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ml=null,kl=null;function s1(n){Jv(n,0)}function Bc(n){var i=xn(n);if(ks(i))return n}function yy(n,i){if(n==="change")return i}var _y=!1;if(Hn){var yd;if(Hn){var _d="oninput"in document;if(!_d){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),_d=typeof vy.oninput=="function"}yd=_d}else yd=!1;_y=yd&&(!document.documentMode||9<document.documentMode)}function Ey(){Ml&&(Ml.detachEvent("onpropertychange",Ty),kl=Ml=null)}function Ty(n){if(n.propertyName==="value"&&Bc(kl)){var i=[];py(i,kl,n,Fn(n)),Mr(s1,i)}}function a1(n,i,a){n==="focusin"?(Ey(),Ml=i,kl=a,Ml.attachEvent("onpropertychange",Ty)):n==="focusout"&&Ey()}function o1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bc(kl)}function l1(n,i){if(n==="click")return Bc(i)}function u1(n,i){if(n==="input"||n==="change")return Bc(i)}function c1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Cn=typeof Object.is=="function"?Object.is:c1;function Pl(n,i){if(Cn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!xt.call(i,f)||!Cn(n[f],i[f]))return!1}return!0}function by(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sy(n,i){var a=by(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=by(a)}}function Ay(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ay(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function wy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ci(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ci(n.document)}return i}function vd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var h1=Hn&&"documentMode"in document&&11>=document.documentMode,Ya=null,Ed=null,zl=null,Td=!1;function Iy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Td||Ya==null||Ya!==Ci(l)||(l=Ya,"selectionStart"in l&&vd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Pl(zl,l)||(zl=l,l=Ch(Ed,"onSelect"),0<l.length&&(i=new Vi("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ya)))}function Hs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Xa={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},bd={},xy={};Hn&&(xy=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Gs(n){if(bd[n])return bd[n];if(!Xa[n])return n;var i=Xa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in xy)return bd[n]=i[a];return n}var Ry=Gs("animationend"),Cy=Gs("animationiteration"),Ny=Gs("animationstart"),f1=Gs("transitionrun"),d1=Gs("transitionstart"),m1=Gs("transitioncancel"),Dy=Gs("transitionend"),Vy=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function di(n,i){Vy.set(n,i),xi(i,[n])}var qc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Kn=[],$a=0,Ad=0;function Fc(){for(var n=$a,i=Ad=$a=0;i<n;){var a=Kn[i];Kn[i++]=null;var l=Kn[i];Kn[i++]=null;var f=Kn[i];Kn[i++]=null;var d=Kn[i];if(Kn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Oy(a,f,d)}}function Hc(n,i,a,l){Kn[$a++]=n,Kn[$a++]=i,Kn[$a++]=a,Kn[$a++]=l,Ad|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function wd(n,i,a,l){return Hc(n,i,a,l),Gc(n)}function Ks(n,i){return Hc(n,null,null,i),Gc(n)}function Oy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-St(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Gc(n){if(50<su)throw su=0,Mm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Za={};function g1(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,i,a,l){return new g1(n,i,a,l)}function Id(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wi(n,i){var a=n.alternate;return a===null?(a=Nn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function My(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Kc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Id(n)&&(_=1);else if(typeof n=="string")_=Ew(n,a,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Nn(31,a,i,f),n.elementType=N,n.lanes=d,n;case H:return Qs(a.children,f,d,i);case K:_=8,f|=24;break;case ie:return n=Nn(12,a,i,f|2),n.elementType=ie,n.lanes=d,n;case _e:return n=Nn(13,a,i,f),n.elementType=_e,n.lanes=d,n;case de:return n=Nn(19,a,i,f),n.elementType=de,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:_=10;break e;case ee:_=9;break e;case le:_=11;break e;case C:_=14;break e;case I:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Nn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Qs(n,i,a,l){return n=Nn(7,n,l,i),n.lanes=a,n}function xd(n,i,a){return n=Nn(6,n,null,i),n.lanes=a,n}function ky(n){var i=Nn(18,null,null,0);return i.stateNode=n,i}function Rd(n,i,a){return i=Nn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Py=new WeakMap;function Qn(n,i){if(typeof n=="object"&&n!==null){var a=Py.get(n);return a!==void 0?a:(i={value:n,source:i,stack:ml(i)},Py.set(n,i),i)}return{value:n,source:i,stack:ml(i)}}var Ja=[],Wa=0,Qc=null,Ll=0,Yn=[],Xn=0,Lr=null,Pi=1,zi="";function er(n,i){Ja[Wa++]=Ll,Ja[Wa++]=Qc,Qc=n,Ll=i}function zy(n,i,a){Yn[Xn++]=Pi,Yn[Xn++]=zi,Yn[Xn++]=Lr,Lr=n;var l=Pi;n=zi;var f=32-St(l)-1;l&=~(1<<f),a+=1;var d=32-St(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Pi=1<<32-St(i)+f|a<<f|l,zi=d+n}else Pi=1<<d|a<<f|l,zi=n}function Cd(n){n.return!==null&&(er(n,1),zy(n,1,0))}function Nd(n){for(;n===Qc;)Qc=Ja[--Wa],Ja[Wa]=null,Ll=Ja[--Wa],Ja[Wa]=null;for(;n===Lr;)Lr=Yn[--Xn],Yn[Xn]=null,zi=Yn[--Xn],Yn[Xn]=null,Pi=Yn[--Xn],Yn[Xn]=null}function Ly(n,i){Yn[Xn++]=Pi,Yn[Xn++]=zi,Yn[Xn++]=Lr,Pi=i.id,zi=i.overflow,Lr=n}var Jt=null,ct=null,Be=!1,Ur=null,$n=!1,Dd=Error(r(519));function jr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(Qn(i,n)),Dd}function Uy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ct]=n,i[Gt]=l,a){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(a=0;a<ou.length;a++)Pe(ou[a],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),Ic(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Dr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||n0(i.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),l.onScroll!=null&&Pe("scroll",i),l.onScrollEnd!=null&&Pe("scrollend",i),l.onClick!=null&&(i.onclick=li),i=!0):i=!1,i||jr(n,!0)}function jy(n){for(Jt=n.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Jt=Jt.return}}function eo(n){if(n!==Jt)return!1;if(!Be)return jy(n),Be=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Xm(n.type,n.memoizedProps)),a=!a),a&&ct&&jr(n),jy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ct=h0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ct=h0(n)}else i===27?(i=ct,es(n.type)?(n=eg,eg=null,ct=n):ct=i):ct=Jt?Jn(n.stateNode.nextSibling):null;return!0}function Ys(){ct=Jt=null,Be=!1}function Vd(){var n=Ur;return n!==null&&(An===null?An=n:An.push.apply(An,n),Ur=null),n}function Ul(n){Ur===null?Ur=[n]:Ur.push(n)}var Od=k(null),Xs=null,tr=null;function Br(n,i,a){ue(Od,i._currentValue),i._currentValue=a}function nr(n){n._currentValue=Od.current,W(Od)}function Md(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function kd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var V=0;V<i.length;V++)if(b.context===i[V]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Md(d.return,a,n),l||(_=null);break e}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Md(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function to(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=f.type;Cn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===Fe.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(fu):n=[fu])}f=f.return}n!==null&&kd(i,n,a,l),i.flags|=262144}function Yc(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $s(n){Xs=n,tr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return By(Xs,n)}function Xc(n,i){return Xs===null&&$s(n),By(n,i)}function By(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},tr===null){if(n===null)throw Error(r(308));tr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else tr=tr.next=i;return a}var p1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},y1=s.unstable_scheduleCallback,_1=s.unstable_NormalPriority,Vt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new p1,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&y1(_1,function(){n.controller.abort()})}var Bl=null,zd=0,no=0,io=null;function v1(n,i){if(Bl===null){var a=Bl=[];zd=0,no=jm(),io={status:"pending",value:void 0,then:function(l){a.push(l)}}}return zd++,i.then(qy,qy),i}function qy(){if(--zd===0&&Bl!==null){io!==null&&(io.status="fulfilled");var n=Bl;Bl=null,no=0,io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function E1(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Fy=X.S;X.S=function(n,i){Iv=dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&v1(n,i),Fy!==null&&Fy(n,i)};var Zs=k(null);function Ld(){var n=Zs.current;return n!==null?n:lt.pooledCache}function $c(n,i){i===null?ue(Zs,Zs.current):ue(Zs,i.pool)}function Hy(){var n=Ld();return n===null?null:{parent:Vt._currentValue,pool:n}}var ro=Error(r(460)),Ud=Error(r(474)),Zc=Error(r(542)),Jc={then:function(){}};function Gy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ky(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(li,li),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Yy(n),n;default:if(typeof i.status=="string")i.then(li,li);else{if(n=lt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Yy(n),n}throw Ws=i,ro}}function Js(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ws=a,ro):a}}var Ws=null;function Qy(){if(Ws===null)throw Error(r(459));var n=Ws;return Ws=null,n}function Yy(n){if(n===ro||n===Zc)throw Error(r(483))}var so=null,ql=0;function Wc(n){var i=ql;return ql+=1,so===null&&(so=[]),Ky(so,n,i)}function Fl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function eh(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Xy(n){function i(z,M){if(n){var j=z.deletions;j===null?(z.deletions=[M],z.flags|=16):j.push(M)}}function a(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function l(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function f(z,M){return z=Wi(z,M),z.index=0,z.sibling=null,z}function d(z,M,j){return z.index=j,n?(j=z.alternate,j!==null?(j=j.index,j<M?(z.flags|=67108866,M):j):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function b(z,M,j,J){return M===null||M.tag!==6?(M=xd(j,z.mode,J),M.return=z,M):(M=f(M,j),M.return=z,M)}function V(z,M,j,J){var Ee=j.type;return Ee===H?$(z,M,j.props.children,J,j.key):M!==null&&(M.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===I&&Js(Ee)===M.type)?(M=f(M,j.props),Fl(M,j),M.return=z,M):(M=Kc(j.type,j.key,j.props,null,z.mode,J),Fl(M,j),M.return=z,M)}function B(z,M,j,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=Rd(j,z.mode,J),M.return=z,M):(M=f(M,j.children||[]),M.return=z,M)}function $(z,M,j,J,Ee){return M===null||M.tag!==7?(M=Qs(j,z.mode,J,Ee),M.return=z,M):(M=f(M,j),M.return=z,M)}function te(z,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=xd(""+M,z.mode,j),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case O:return j=Kc(M.type,M.key,M.props,null,z.mode,j),Fl(j,M),j.return=z,j;case F:return M=Rd(M,z.mode,j),M.return=z,M;case I:return M=Js(M),te(z,M,j)}if(bt(M)||P(M))return M=Qs(M,z.mode,j,null),M.return=z,M;if(typeof M.then=="function")return te(z,Wc(M),j);if(M.$$typeof===Q)return te(z,Xc(z,M),j);eh(z,M)}return null}function q(z,M,j,J){var Ee=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return Ee!==null?null:b(z,M,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case O:return j.key===Ee?V(z,M,j,J):null;case F:return j.key===Ee?B(z,M,j,J):null;case I:return j=Js(j),q(z,M,j,J)}if(bt(j)||P(j))return Ee!==null?null:$(z,M,j,J,null);if(typeof j.then=="function")return q(z,M,Wc(j),J);if(j.$$typeof===Q)return q(z,M,Xc(z,j),J);eh(z,j)}return null}function Y(z,M,j,J,Ee){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(j)||null,b(M,z,""+J,Ee);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return z=z.get(J.key===null?j:J.key)||null,V(M,z,J,Ee);case F:return z=z.get(J.key===null?j:J.key)||null,B(M,z,J,Ee);case I:return J=Js(J),Y(z,M,j,J,Ee)}if(bt(J)||P(J))return z=z.get(j)||null,$(M,z,J,Ee,null);if(typeof J.then=="function")return Y(z,M,j,Wc(J),Ee);if(J.$$typeof===Q)return Y(z,M,j,Xc(M,J),Ee);eh(M,J)}return null}function fe(z,M,j,J){for(var Ee=null,Ke=null,ge=M,Oe=M=0,Le=null;ge!==null&&Oe<j.length;Oe++){ge.index>Oe?(Le=ge,ge=null):Le=ge.sibling;var Qe=q(z,ge,j[Oe],J);if(Qe===null){ge===null&&(ge=Le);break}n&&ge&&Qe.alternate===null&&i(z,ge),M=d(Qe,M,Oe),Ke===null?Ee=Qe:Ke.sibling=Qe,Ke=Qe,ge=Le}if(Oe===j.length)return a(z,ge),Be&&er(z,Oe),Ee;if(ge===null){for(;Oe<j.length;Oe++)ge=te(z,j[Oe],J),ge!==null&&(M=d(ge,M,Oe),Ke===null?Ee=ge:Ke.sibling=ge,Ke=ge);return Be&&er(z,Oe),Ee}for(ge=l(ge);Oe<j.length;Oe++)Le=Y(ge,z,Oe,j[Oe],J),Le!==null&&(n&&Le.alternate!==null&&ge.delete(Le.key===null?Oe:Le.key),M=d(Le,M,Oe),Ke===null?Ee=Le:Ke.sibling=Le,Ke=Le);return n&&ge.forEach(function(ss){return i(z,ss)}),Be&&er(z,Oe),Ee}function be(z,M,j,J){if(j==null)throw Error(r(151));for(var Ee=null,Ke=null,ge=M,Oe=M=0,Le=null,Qe=j.next();ge!==null&&!Qe.done;Oe++,Qe=j.next()){ge.index>Oe?(Le=ge,ge=null):Le=ge.sibling;var ss=q(z,ge,Qe.value,J);if(ss===null){ge===null&&(ge=Le);break}n&&ge&&ss.alternate===null&&i(z,ge),M=d(ss,M,Oe),Ke===null?Ee=ss:Ke.sibling=ss,Ke=ss,ge=Le}if(Qe.done)return a(z,ge),Be&&er(z,Oe),Ee;if(ge===null){for(;!Qe.done;Oe++,Qe=j.next())Qe=te(z,Qe.value,J),Qe!==null&&(M=d(Qe,M,Oe),Ke===null?Ee=Qe:Ke.sibling=Qe,Ke=Qe);return Be&&er(z,Oe),Ee}for(ge=l(ge);!Qe.done;Oe++,Qe=j.next())Qe=Y(ge,z,Oe,Qe.value,J),Qe!==null&&(n&&Qe.alternate!==null&&ge.delete(Qe.key===null?Oe:Qe.key),M=d(Qe,M,Oe),Ke===null?Ee=Qe:Ke.sibling=Qe,Ke=Qe);return n&&ge.forEach(function(Dw){return i(z,Dw)}),Be&&er(z,Oe),Ee}function ot(z,M,j,J){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case O:e:{for(var Ee=j.key;M!==null;){if(M.key===Ee){if(Ee=j.type,Ee===H){if(M.tag===7){a(z,M.sibling),J=f(M,j.props.children),J.return=z,z=J;break e}}else if(M.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===I&&Js(Ee)===M.type){a(z,M.sibling),J=f(M,j.props),Fl(J,j),J.return=z,z=J;break e}a(z,M);break}else i(z,M);M=M.sibling}j.type===H?(J=Qs(j.props.children,z.mode,J,j.key),J.return=z,z=J):(J=Kc(j.type,j.key,j.props,null,z.mode,J),Fl(J,j),J.return=z,z=J)}return _(z);case F:e:{for(Ee=j.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){a(z,M.sibling),J=f(M,j.children||[]),J.return=z,z=J;break e}else{a(z,M);break}else i(z,M);M=M.sibling}J=Rd(j,z.mode,J),J.return=z,z=J}return _(z);case I:return j=Js(j),ot(z,M,j,J)}if(bt(j))return fe(z,M,j,J);if(P(j)){if(Ee=P(j),typeof Ee!="function")throw Error(r(150));return j=Ee.call(j),be(z,M,j,J)}if(typeof j.then=="function")return ot(z,M,Wc(j),J);if(j.$$typeof===Q)return ot(z,M,Xc(z,j),J);eh(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(a(z,M.sibling),J=f(M,j),J.return=z,z=J):(a(z,M),J=xd(j,z.mode,J),J.return=z,z=J),_(z)):a(z,M)}return function(z,M,j,J){try{ql=0;var Ee=ot(z,M,j,J);return so=null,Ee}catch(ge){if(ge===ro||ge===Zc)throw ge;var Ke=Nn(29,ge,null,z.mode);return Ke.lanes=J,Ke.return=z,Ke}finally{}}}var ea=Xy(!0),$y=Xy(!1),qr=!1;function jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Hr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Gc(n),Oy(n,null,a),i}return Hc(n,l,i,a),Gc(n)}function Hl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,yl(n,a)}}function qd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Fd=!1;function Gl(){if(Fd){var n=io;if(n!==null)throw n}}function Kl(n,i,a,l){Fd=!1;var f=n.updateQueue;qr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var V=b,B=V.next;V.next=null,_===null?d=B:_.next=B,_=V;var $=n.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==_&&(b===null?$.firstBaseUpdate=B:b.next=B,$.lastBaseUpdate=V))}if(d!==null){var te=f.baseState;_=0,$=B=V=null,b=d;do{var q=b.lane&-536870913,Y=q!==b.lane;if(Y?(ze&q)===q:(l&q)===q){q!==0&&q===no&&(Fd=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var fe=n,be=b;q=i;var ot=a;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){te=fe.call(ot,te,q);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,q=typeof fe=="function"?fe.call(ot,te,q):fe,q==null)break e;te=T({},te,q);break e;case 2:qr=!0}}q=b.callback,q!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[q]:Y.push(q))}else Y={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(B=$=Y,V=te):$=$.next=Y,_|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);$===null&&(V=te),f.baseState=V,f.firstBaseUpdate=B,f.lastBaseUpdate=$,d===null&&(f.shared.lanes=0),Xr|=_,n.lanes=_,n.memoizedState=te}}function Zy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Jy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Zy(a[n],i)}var ao=k(null),th=k(0);function Wy(n,i){n=hr,ue(th,n),ue(ao,i),hr=n|i.baseLanes}function Hd(){ue(th,hr),ue(ao,ao.current)}function Gd(){hr=th.current,W(ao),W(th)}var Dn=k(null),Zn=null;function Gr(n){var i=n.alternate;ue(wt,wt.current&1),ue(Dn,n),Zn===null&&(i===null||ao.current!==null||i.memoizedState!==null)&&(Zn=n)}function Kd(n){ue(wt,wt.current),ue(Dn,n),Zn===null&&(Zn=n)}function e_(n){n.tag===22?(ue(wt,wt.current),ue(Dn,n),Zn===null&&(Zn=n)):Kr()}function Kr(){ue(wt,wt.current),ue(Dn,Dn.current)}function Vn(n){W(Dn),Zn===n&&(Zn=null),W(wt)}var wt=k(0);function nh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Jm(a)||Wm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ir=0,Ce=null,st=null,Ot=null,ih=!1,oo=!1,ta=!1,rh=0,Ql=0,lo=null,T1=0;function vt(){throw Error(r(321))}function Qd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Cn(n[a],i[a]))return!1;return!0}function Yd(n,i,a,l,f,d){return ir=d,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?z_:um,ta=!1,d=a(l,f),ta=!1,oo&&(d=n_(i,a,l,f)),t_(n),d}function t_(n){X.H=$l;var i=st!==null&&st.next!==null;if(ir=0,Ot=st=Ce=null,ih=!1,Ql=0,lo=null,i)throw Error(r(300));n===null||Mt||(n=n.dependencies,n!==null&&Yc(n)&&(Mt=!0))}function n_(n,i,a,l){Ce=n;var f=0;do{if(oo&&(lo=null),Ql=0,oo=!1,25<=f)throw Error(r(301));if(f+=1,Ot=st=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=L_,d=i(a,l)}while(oo);return d}function b1(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?Yl(i):i,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(Ce.flags|=1024),i}function Xd(){var n=rh!==0;return rh=0,n}function $d(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Zd(n){if(ih){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ih=!1}ir=0,Ot=st=Ce=null,oo=!1,Ql=rh=0,lo=null}function gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ce.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function It(){if(st===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var i=Ot===null?Ce.memoizedState:Ot.next;if(i!==null)Ot=i,st=n;else{if(n===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Ot===null?Ce.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(n){var i=Ql;return Ql+=1,lo===null&&(lo=[]),n=Ky(lo,n,i),i=Ce,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?z_:um),n}function ah(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yl(n);if(n.$$typeof===Q)return Wt(n)}throw Error(r(438,String(n)))}function Jd(n){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=sh(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=w;return i.index++,a}function rr(n,i){return typeof i=="function"?i(n):i}function oh(n){var i=It();return Wd(i,st,n)}function Wd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,V=null,B=i,$=!1;do{var te=B.lane&-536870913;if(te!==B.lane?(ze&te)===te:(ir&te)===te){var q=B.revertLane;if(q===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),te===no&&($=!0);else if((ir&q)===q){B=B.next,q===no&&($=!0);continue}else te={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},V===null?(b=V=te,_=d):V=V.next=te,Ce.lanes|=q,Xr|=q;te=B.action,ta&&a(d,te),d=B.hasEagerState?B.eagerState:a(d,te)}else q={lane:te,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},V===null?(b=V=q,_=d):V=V.next=q,Ce.lanes|=te,Xr|=te;B=B.next}while(B!==null&&B!==i);if(V===null?_=d:V.next=b,!Cn(d,n.memoizedState)&&(Mt=!0,$&&(a=io,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=V,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function em(n){var i=It(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Cn(d,i.memoizedState)||(Mt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function i_(n,i,a){var l=Ce,f=It(),d=Be;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Cn((st||f).memoizedState,a);if(_&&(f.memoizedState=a,Mt=!0),f=f.queue,im(a_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,uo(9,{destroy:void 0},s_.bind(null,l,f,a,i),null),lt===null)throw Error(r(349));d||(ir&127)!==0||r_(l,i,a)}return a}function r_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=sh(),Ce.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function s_(n,i,a,l){i.value=a,i.getSnapshot=l,o_(i)&&l_(n)}function a_(n,i,a){return a(function(){o_(i)&&l_(n)})}function o_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Cn(n,a)}catch{return!0}}function l_(n){var i=Ks(n,2);i!==null&&wn(i,n,2)}function tm(n){var i=gn();if(typeof n=="function"){var a=n;if(n=a(),ta){Bn(!0);try{a()}finally{Bn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:n},i}function u_(n,i,a,l){return n.baseState=a,Wd(n,st,typeof l=="function"?l:rr)}function S1(n,i,a,l,f){if(ch(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,c_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function c_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=X.T,_={};X.T=_;try{var b=a(f,l),V=X.S;V!==null&&V(_,b),h_(n,i,b)}catch(B){nm(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),X.T=d}}else try{d=a(f,l),h_(n,i,d)}catch(B){nm(n,i,B)}}function h_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){f_(n,i,l)},function(l){return nm(n,i,l)}):f_(n,i,a)}function f_(n,i,a){i.status="fulfilled",i.value=a,d_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,c_(n,a)))}function nm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,d_(i),i=i.next;while(i!==l)}n.action=null}function d_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function m_(n,i){return i}function g_(n,i){if(Be){var a=lt.formState;if(a!==null){e:{var l=Ce;if(Be){if(ct){t:{for(var f=ct,d=$n;f.nodeType!==8;){if(!d){f=null;break t}if(f=Jn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ct=Jn(f.nextSibling),l=f.data==="F!";break e}}jr(l)}l=!1}l&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m_,lastRenderedState:i},a.queue=l,a=M_.bind(null,Ce,l),l.dispatch=a,l=tm(!1),d=lm.bind(null,Ce,!1,l.queue),l=gn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=S1.bind(null,Ce,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function p_(n){var i=It();return y_(i,st,n)}function y_(n,i,a){if(i=Wd(n,i,m_)[0],n=oh(rr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Yl(i)}catch(_){throw _===ro?Zc:_}else l=i;i=It();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,uo(9,{destroy:void 0},A1.bind(null,f,a),null)),[l,d,n]}function A1(n,i){n.action=i}function __(n){var i=It(),a=st;if(a!==null)return y_(i,a,n);It(),i=i.memoizedState,a=It();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function uo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=sh(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function v_(){return It().memoizedState}function lh(n,i,a,l){var f=gn();Ce.flags|=n,f.memoizedState=uo(1|i,{destroy:void 0},a,l===void 0?null:l)}function uh(n,i,a,l){var f=It();l=l===void 0?null:l;var d=f.memoizedState.inst;st!==null&&l!==null&&Qd(l,st.memoizedState.deps)?f.memoizedState=uo(i,d,a,l):(Ce.flags|=n,f.memoizedState=uo(1|i,d,a,l))}function E_(n,i){lh(8390656,8,n,i)}function im(n,i){uh(2048,8,n,i)}function w1(n){Ce.flags|=4;var i=Ce.updateQueue;if(i===null)i=sh(),Ce.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function T_(n){var i=It().memoizedState;return w1({ref:i,nextImpl:n}),function(){if((Xe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function b_(n,i){return uh(4,2,n,i)}function S_(n,i){return uh(4,4,n,i)}function A_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function w_(n,i,a){a=a!=null?a.concat([n]):null,uh(4,4,A_.bind(null,i,n),a)}function rm(){}function I_(n,i){var a=It();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Qd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function x_(n,i){var a=It();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Qd(i,l[1]))return l[0];if(l=n(),ta){Bn(!0);try{n()}finally{Bn(!1)}}return a.memoizedState=[l,i],l}function sm(n,i,a){return a===void 0||(ir&1073741824)!==0&&(ze&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Rv(),Ce.lanes|=n,Xr|=n,a)}function R_(n,i,a,l){return Cn(a,i)?a:ao.current!==null?(n=sm(n,a,l),Cn(n,i)||(Mt=!0),n):(ir&42)===0||(ir&1073741824)!==0&&(ze&261930)===0?(Mt=!0,n.memoizedState=a):(n=Rv(),Ce.lanes|=n,Xr|=n,i)}function C_(n,i,a,l,f){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=X.T,b={};X.T=b,lm(n,!1,i,a);try{var V=f(),B=X.S;if(B!==null&&B(b,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var $=E1(V,l);Xl(n,i,$,kn(n))}else Xl(n,i,l,kn(n))}catch(te){Xl(n,i,{then:function(){},status:"rejected",reason:te},kn())}finally{ae.p=d,_!==null&&b.types!==null&&(_.types=b.types),X.T=_}}function I1(){}function am(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=N_(n).queue;C_(n,f,i,pe,a===null?I1:function(){return D_(n),a(l)})}function N_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function D_(n){var i=N_(n);i.next===null&&(i=n.alternate.memoizedState),Xl(n,i.next.queue,{},kn())}function om(){return Wt(fu)}function V_(){return It().memoizedState}function O_(){return It().memoizedState}function x1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=kn();n=Fr(a);var l=Hr(i,n,a);l!==null&&(wn(l,i,a),Hl(l,i,a)),i={cache:Pd()},n.payload=i;return}i=i.return}}function R1(n,i,a){var l=kn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ch(n)?k_(i,a):(a=wd(n,i,a,l),a!==null&&(wn(a,n,l),P_(a,i,l)))}function M_(n,i,a){var l=kn();Xl(n,i,a,l)}function Xl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ch(n))k_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,Cn(b,_))return Hc(n,i,f,0),lt===null&&Fc(),!1}catch{}finally{}if(a=wd(n,i,f,l),a!==null)return wn(a,n,l),P_(a,i,l),!0}return!1}function lm(n,i,a,l){if(l={lane:2,revertLane:jm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(i)throw Error(r(479))}else i=wd(n,a,l,2),i!==null&&wn(i,n,2)}function ch(n){var i=n.alternate;return n===Ce||i!==null&&i===Ce}function k_(n,i){oo=ih=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function P_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,yl(n,a)}}var $l={readContext:Wt,use:ah,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};$l.useEffectEvent=vt;var z_={readContext:Wt,use:ah,useCallback:function(n,i){return gn().memoizedState=[n,i===void 0?null:i],n},useContext:Wt,useEffect:E_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,lh(4194308,4,A_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return lh(4194308,4,n,i)},useInsertionEffect:function(n,i){lh(4,2,n,i)},useMemo:function(n,i){var a=gn();i=i===void 0?null:i;var l=n();if(ta){Bn(!0);try{n()}finally{Bn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=gn();if(a!==void 0){var f=a(i);if(ta){Bn(!0);try{a(i)}finally{Bn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=R1.bind(null,Ce,n),[l.memoizedState,n]},useRef:function(n){var i=gn();return n={current:n},i.memoizedState=n},useState:function(n){n=tm(n);var i=n.queue,a=M_.bind(null,Ce,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:rm,useDeferredValue:function(n,i){var a=gn();return sm(a,n,i)},useTransition:function(){var n=tm(!1);return n=C_.bind(null,Ce,n.queue,!0,!1),gn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Ce,f=gn();if(Be){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),lt===null)throw Error(r(349));(ze&127)!==0||r_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,E_(a_.bind(null,l,d,n),[n]),l.flags|=2048,uo(9,{destroy:void 0},s_.bind(null,l,d,a,i),null),a},useId:function(){var n=gn(),i=lt.identifierPrefix;if(Be){var a=zi,l=Pi;a=(l&~(1<<32-St(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=rh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=T1++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:om,useFormState:g_,useActionState:g_,useOptimistic:function(n){var i=gn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=lm.bind(null,Ce,!0,a),a.dispatch=i,[n,i]},useMemoCache:Jd,useCacheRefresh:function(){return gn().memoizedState=x1.bind(null,Ce)},useEffectEvent:function(n){var i=gn(),a={impl:n};return i.memoizedState=a,function(){if((Xe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},um={readContext:Wt,use:ah,useCallback:I_,useContext:Wt,useEffect:im,useImperativeHandle:w_,useInsertionEffect:b_,useLayoutEffect:S_,useMemo:x_,useReducer:oh,useRef:v_,useState:function(){return oh(rr)},useDebugValue:rm,useDeferredValue:function(n,i){var a=It();return R_(a,st.memoizedState,n,i)},useTransition:function(){var n=oh(rr)[0],i=It().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:i_,useId:V_,useHostTransitionStatus:om,useFormState:p_,useActionState:p_,useOptimistic:function(n,i){var a=It();return u_(a,st,n,i)},useMemoCache:Jd,useCacheRefresh:O_};um.useEffectEvent=T_;var L_={readContext:Wt,use:ah,useCallback:I_,useContext:Wt,useEffect:im,useImperativeHandle:w_,useInsertionEffect:b_,useLayoutEffect:S_,useMemo:x_,useReducer:em,useRef:v_,useState:function(){return em(rr)},useDebugValue:rm,useDeferredValue:function(n,i){var a=It();return st===null?sm(a,n,i):R_(a,st.memoizedState,n,i)},useTransition:function(){var n=em(rr)[0],i=It().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:i_,useId:V_,useHostTransitionStatus:om,useFormState:__,useActionState:__,useOptimistic:function(n,i){var a=It();return st!==null?u_(a,st,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:O_};L_.useEffectEvent=T_;function cm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var hm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=kn(),f=Fr(l);f.payload=i,a!=null&&(f.callback=a),i=Hr(n,f,l),i!==null&&(wn(i,n,l),Hl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=kn(),f=Fr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Hr(n,f,l),i!==null&&(wn(i,n,l),Hl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=kn(),l=Fr(a);l.tag=2,i!=null&&(l.callback=i),i=Hr(n,l,a),i!==null&&(wn(i,n,a),Hl(i,n,a))}};function U_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Pl(a,l)||!Pl(f,d):!0}function j_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&hm.enqueueReplaceState(i,i.state,null)}function na(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function B_(n){qc(n)}function q_(n){console.error(n)}function F_(n){qc(n)}function hh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function H_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function fm(n,i,a){return a=Fr(a),a.tag=3,a.payload={element:null},a.callback=function(){hh(n,i)},a}function G_(n){return n=Fr(n),n.tag=3,n}function K_(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){H_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){H_(i,a,l),typeof f!="function"&&($r===null?$r=new Set([this]):$r.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function C1(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&to(i,a,f,!0),a=Dn.current,a!==null){switch(a.tag){case 31:case 13:return Zn===null?Sh():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Jc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),zm(n,l,f)),!1;case 22:return a.flags|=65536,l===Jc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),zm(n,l,f)),!1}throw Error(r(435,a.tag))}return zm(n,l,f),Sh(),!1}if(Be)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Dd&&(n=Error(r(422),{cause:l}),Ul(Qn(n,a)))):(l!==Dd&&(i=Error(r(423),{cause:l}),Ul(Qn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Qn(l,a),f=fm(n.stateNode,l,f),qd(n,f),Et!==4&&(Et=2)),!1;var d=Error(r(520),{cause:l});if(d=Qn(d,a),ru===null?ru=[d]:ru.push(d),Et!==4&&(Et=2),i===null)return!0;l=Qn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=fm(a.stateNode,l,n),qd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&($r===null||!$r.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=G_(f),K_(f,n,a,l),qd(a,f),!1}a=a.return}while(a!==null);return!1}var dm=Error(r(461)),Mt=!1;function en(n,i,a,l){i.child=n===null?$y(i,null,a,l):ea(i,n.child,a,l)}function Q_(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return $s(i),l=Yd(n,i,a,_,d,f),b=Xd(),n!==null&&!Mt?($d(n,i,f),sr(n,i,f)):(Be&&b&&Cd(i),i.flags|=1,en(n,i,l,f),i.child)}function Y_(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Id(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,X_(n,i,d,l,f)):(n=Kc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Tm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Pl,a(_,l)&&n.ref===i.ref)return sr(n,i,f)}return i.flags|=1,n=Wi(d,l),n.ref=i.ref,n.return=i,i.child=n}function X_(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Pl(d,l)&&n.ref===i.ref)if(Mt=!1,i.pendingProps=l=d,Tm(n,f))(n.flags&131072)!==0&&(Mt=!0);else return i.lanes=n.lanes,sr(n,i,f)}return mm(n,i,a,l,f)}function $_(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Z_(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&$c(i,d!==null?d.cachePool:null),d!==null?Wy(i,d):Hd(),e_(i);else return l=i.lanes=536870912,Z_(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?($c(i,d.cachePool),Wy(i,d),Kr(),i.memoizedState=null):(n!==null&&$c(i,null),Hd(),Kr());return en(n,i,f,a),i.child}function Zl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Z_(n,i,a,l,f){var d=Ld();return d=d===null?null:{parent:Vt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&$c(i,null),Hd(),e_(i),n!==null&&to(n,i,l,!0),i.childLanes=f,null}function fh(n,i){return i=mh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function J_(n,i,a){return ea(i,n.child,null,a),n=fh(i,i.pendingProps),n.flags|=2,Vn(i),i.memoizedState=null,n}function N1(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Be){if(l.mode==="hidden")return n=fh(i,l),i.lanes=536870912,Zl(null,n);if(Kd(i),(n=ct)?(n=c0(n,$n),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Lr!==null?{id:Pi,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=ky(n),a.return=i,i.child=a,Jt=i,ct=null)):n=null,n===null)throw jr(i);return i.lanes=536870912,null}return fh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Kd(i),f)if(i.flags&256)i.flags&=-257,i=J_(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Mt||to(n,i,a,!1),f=(a&n.childLanes)!==0,Mt||f){if(l=lt,l!==null&&(_=_l(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ks(n,_),wn(l,n,_),dm;Sh(),i=J_(n,i,a)}else n=d.treeContext,ct=Jn(_.nextSibling),Jt=i,Be=!0,Ur=null,$n=!1,n!==null&&Ly(i,n),i=fh(i,l),i.flags|=4096;return i}return n=Wi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function dh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function mm(n,i,a,l,f){return $s(i),a=Yd(n,i,a,l,void 0,f),l=Xd(),n!==null&&!Mt?($d(n,i,f),sr(n,i,f)):(Be&&l&&Cd(i),i.flags|=1,en(n,i,a,f),i.child)}function W_(n,i,a,l,f,d){return $s(i),i.updateQueue=null,a=n_(i,l,a,f),t_(n),l=Xd(),n!==null&&!Mt?($d(n,i,d),sr(n,i,d)):(Be&&l&&Cd(i),i.flags|=1,en(n,i,a,d),i.child)}function ev(n,i,a,l,f){if($s(i),i.stateNode===null){var d=Za,_=a.contextType;typeof _=="object"&&_!==null&&(d=Wt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},jd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Wt(_):Za,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(cm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&hm.enqueueReplaceState(d,d.state,null),Kl(i,l,d,f),Gl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,V=na(a,b);d.props=V;var B=d.context,$=a.contextType;_=Za,typeof $=="object"&&$!==null&&(_=Wt($));var te=a.getDerivedStateFromProps;$=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&j_(i,d,l,_),qr=!1;var q=i.memoizedState;d.state=q,Kl(i,l,d,f),Gl(),B=i.memoizedState,b||q!==B||qr?(typeof te=="function"&&(cm(i,a,te,l),B=i.memoizedState),(V=qr||U_(i,a,V,l,q,B,_))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=V):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Bd(n,i),_=i.memoizedProps,$=na(a,_),d.props=$,te=i.pendingProps,q=d.context,B=a.contextType,V=Za,typeof B=="object"&&B!==null&&(V=Wt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==te||q!==V)&&j_(i,d,l,V),qr=!1,q=i.memoizedState,d.state=q,Kl(i,l,d,f),Gl();var Y=i.memoizedState;_!==te||q!==Y||qr||n!==null&&n.dependencies!==null&&Yc(n.dependencies)?(typeof b=="function"&&(cm(i,a,b,l),Y=i.memoizedState),($=qr||U_(i,a,$,l,q,Y,V)||n!==null&&n.dependencies!==null&&Yc(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,V)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=V,l=$):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,dh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=ea(i,n.child,null,f),i.child=ea(i,null,a,f)):en(n,i,a,f),i.memoizedState=d.state,n=i.child):n=sr(n,i,f),n}function tv(n,i,a,l){return Ys(),i.flags|=256,en(n,i,a,l),i.child}var gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pm(n){return{baseLanes:n,cachePool:Hy()}}function ym(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Mn),n}function nv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(wt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Be){if(f?Gr(i):Kr(),(n=ct)?(n=c0(n,$n),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Lr!==null?{id:Pi,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=ky(n),a.return=i,i.child=a,Jt=i,ct=null)):n=null,n===null)throw jr(i);return Wm(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Kr(),f=i.mode,b=mh({mode:"hidden",children:b},f),l=Qs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=pm(a),l.childLanes=ym(n,_,a),i.memoizedState=gm,Zl(null,l)):(Gr(i),_m(i,b))}var V=n.memoizedState;if(V!==null&&(b=V.dehydrated,b!==null)){if(d)i.flags&256?(Gr(i),i.flags&=-257,i=vm(n,i,a)):i.memoizedState!==null?(Kr(),i.child=n.child,i.flags|=128,i=null):(Kr(),b=l.fallback,f=i.mode,l=mh({mode:"visible",children:l.children},f),b=Qs(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,ea(i,n.child,null,a),l=i.child,l.memoizedState=pm(a),l.childLanes=ym(n,_,a),i.memoizedState=gm,i=Zl(null,l));else if(Gr(i),Wm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,Ul({value:l,source:null,stack:null}),i=vm(n,i,a)}else if(Mt||to(n,i,a,!1),_=(a&n.childLanes)!==0,Mt||_){if(_=lt,_!==null&&(l=_l(_,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,Ks(n,l),wn(_,n,l),dm;Jm(b)||Sh(),i=vm(n,i,a)}else Jm(b)?(i.flags|=192,i.child=n.child,i=null):(n=V.treeContext,ct=Jn(b.nextSibling),Jt=i,Be=!0,Ur=null,$n=!1,n!==null&&Ly(i,n),i=_m(i,l.children),i.flags|=4096);return i}return f?(Kr(),b=l.fallback,f=i.mode,V=n.child,B=V.sibling,l=Wi(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,B!==null?b=Wi(B,b):(b=Qs(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Zl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=pm(a):(f=b.cachePool,f!==null?(V=Vt._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=Hy(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=ym(n,_,a),i.memoizedState=gm,Zl(n.child,l)):(Gr(i),a=n.child,n=a.sibling,a=Wi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function _m(n,i){return i=mh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function mh(n,i){return n=Nn(22,n,null,i),n.lanes=0,n}function vm(n,i,a){return ea(i,n.child,null,a),n=_m(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function iv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Md(n.return,i,a)}function Em(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function rv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=wt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ue(wt,_),en(n,i,l,a),l=Be?Ll:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&iv(n,a,i);else if(n.tag===19)iv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&nh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Em(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&nh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Em(i,!0,a,null,d,l);break;case"together":Em(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function sr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Xr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(to(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Wi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Wi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Tm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Yc(n)))}function D1(n,i,a){switch(i.tag){case 3:Ut(i,i.stateNode.containerInfo),Br(i,Vt,n.memoizedState.cache),Ys();break;case 27:case 5:Rs(i);break;case 4:Ut(i,i.stateNode.containerInfo);break;case 10:Br(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Gr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?nv(n,i,a):(Gr(i),n=sr(n,i,a),n!==null?n.sibling:null);Gr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(to(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return rv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(wt,wt.current),l)break;return null;case 22:return i.lanes=0,$_(n,i,a,i.pendingProps);case 24:Br(i,Vt,n.memoizedState.cache)}return sr(n,i,a)}function sv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Mt=!0;else{if(!Tm(n,a)&&(i.flags&128)===0)return Mt=!1,D1(n,i,a);Mt=(n.flags&131072)!==0}else Mt=!1,Be&&(i.flags&1048576)!==0&&zy(i,Ll,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Js(i.elementType),i.type=n,typeof n=="function")Id(n)?(l=na(n,l),i.tag=1,i=ev(null,i,n,l,a)):(i.tag=0,i=mm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===le){i.tag=11,i=Q_(null,i,n,l,a);break e}else if(f===C){i.tag=14,i=Y_(null,i,n,l,a);break e}}throw i=ut(n)||n,Error(r(306,i,""))}}return i;case 0:return mm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=na(l,i.pendingProps),ev(n,i,l,f,a);case 3:e:{if(Ut(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Bd(n,i),Kl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Br(i,Vt,l),l!==d.cache&&kd(i,[Vt],a,!0),Gl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=tv(n,i,l,a);break e}else if(l!==f){f=Qn(Error(r(424)),i),Ul(f),i=tv(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ct=Jn(n.firstChild),Jt=i,Be=!0,Ur=null,$n=!0,a=$y(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ys(),l===f){i=sr(n,i,a);break e}en(n,i,l,a)}i=i.child}return i;case 26:return dh(n,i),n===null?(a=p0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,n=i.pendingProps,l=Nh(Ve.current).createElement(a),l[Ct]=i,l[Gt]=n,tn(l,a,n),Nt(l),i.stateNode=l):i.memoizedState=p0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Rs(i),n===null&&Be&&(l=i.stateNode=d0(i.type,i.pendingProps,Ve.current),Jt=i,$n=!0,f=ct,es(i.type)?(eg=f,ct=Jn(l.firstChild)):ct=f),en(n,i,i.pendingProps.children,a),dh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Be&&((f=l=ct)&&(l=ow(l,i.type,i.pendingProps,$n),l!==null?(i.stateNode=l,Jt=i,ct=Jn(l.firstChild),$n=!1,f=!0):f=!1),f||jr(i)),Rs(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Xm(f,d)?l=null:_!==null&&Xm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Yd(n,i,b1,null,null,a),fu._currentValue=f),dh(n,i),en(n,i,l,a),i.child;case 6:return n===null&&Be&&((n=a=ct)&&(a=lw(a,i.pendingProps,$n),a!==null?(i.stateNode=a,Jt=i,ct=null,n=!0):n=!1),n||jr(i)),null;case 13:return nv(n,i,a);case 4:return Ut(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=ea(i,null,l,a):en(n,i,l,a),i.child;case 11:return Q_(n,i,i.type,i.pendingProps,a);case 7:return en(n,i,i.pendingProps,a),i.child;case 8:return en(n,i,i.pendingProps.children,a),i.child;case 12:return en(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Br(i,i.type,l.value),en(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,$s(i),f=Wt(f),l=l(f),i.flags|=1,en(n,i,l,a),i.child;case 14:return Y_(n,i,i.type,i.pendingProps,a);case 15:return X_(n,i,i.type,i.pendingProps,a);case 19:return rv(n,i,a);case 31:return N1(n,i,a);case 22:return $_(n,i,a,i.pendingProps);case 24:return $s(i),l=Wt(Vt),n===null?(f=Ld(),f===null&&(f=lt,d=Pd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},jd(i),Br(i,Vt,f)):((n.lanes&a)!==0&&(Bd(n,i),Kl(i,null,null,a),Gl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Br(i,Vt,l)):(l=d.cache,Br(i,Vt,l),l!==f.cache&&kd(i,[Vt],a,!0))),en(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ar(n){n.flags|=4}function bm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Vv())n.flags|=8192;else throw Ws=Jc,Ud}else n.flags&=-16777217}function av(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!T0(i))if(Vv())n.flags|=8192;else throw Ws=Jc,Ud}function gh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Tc():536870912,n.lanes|=i,mo|=i)}function Jl(n,i){if(!Be)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function V1(n,i,a){var l=i.pendingProps;switch(Nd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),nr(Vt),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(eo(i)?ar(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vd())),ht(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(ar(i),d!==null?(ht(i),av(i,d)):(ht(i),bm(i,f,null,l,a))):d?d!==n.memoizedState?(ar(i),ht(i),av(i,d)):(ht(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&ar(i),ht(i),bm(i,f,n,l,a)),null;case 27:if(Va(i),a=Ve.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ar(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ht(i),null}n=he.current,eo(i)?Uy(i):(n=d0(f,l,a),i.stateNode=n,ar(i))}return ht(i),null;case 5:if(Va(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ar(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ht(i),null}if(d=he.current,eo(i))Uy(i);else{var _=Nh(Ve.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ct]=i,d[Gt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(tn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ar(i)}}return ht(i),bm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ar(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ve.current,eo(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Jt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ct]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||n0(n.nodeValue,a)),n||jr(i,!0)}else n=Nh(n).createTextNode(l),n[Ct]=i,i.stateNode=n}return ht(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=eo(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ct]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),n=!1}else a=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(Vn(i),i):(Vn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ht(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=eo(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ct]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),f=!1}else f=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vn(i),i):(Vn(i),null)}return Vn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),gh(i,i.updateQueue),ht(i),null);case 4:return ft(),n===null&&Hm(i.stateNode.containerInfo),ht(i),null;case 10:return nr(i.type),ht(i),null;case 19:if(W(wt),l=i.memoizedState,l===null)return ht(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Jl(l,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=nh(n),d!==null){for(i.flags|=128,Jl(l,!1),n=d.updateQueue,i.updateQueue=n,gh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)My(a,n),a=a.sibling;return ue(wt,wt.current&1|2),Be&&er(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&dn()>Eh&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304)}else{if(!f)if(n=nh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,gh(i,n),Jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Be)return ht(i),null}else 2*dn()-l.renderingStartTime>Eh&&a!==536870912&&(i.flags|=128,f=!0,Jl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=dn(),n.sibling=null,a=wt.current,ue(wt,f?a&1|2:a&1),Be&&er(i,l.treeForkCount),n):(ht(i),null);case 22:case 23:return Vn(i),Gd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),a=i.updateQueue,a!==null&&gh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&W(Zs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),nr(Vt),ht(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function O1(n,i){switch(Nd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return nr(Vt),ft(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Va(i),null;case 31:if(i.memoizedState!==null){if(Vn(i),i.alternate===null)throw Error(r(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Vn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(wt),null;case 4:return ft(),null;case 10:return nr(i.type),null;case 22:case 23:return Vn(i),Gd(),n!==null&&W(Zs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return nr(Vt),null;case 25:return null;default:return null}}function ov(n,i){switch(Nd(i),i.tag){case 3:nr(Vt),ft();break;case 26:case 27:case 5:Va(i);break;case 4:ft();break;case 31:i.memoizedState!==null&&Vn(i);break;case 13:Vn(i);break;case 19:W(wt);break;case 10:nr(i.type);break;case 22:case 23:Vn(i),Gd(),n!==null&&W(Zs);break;case 24:nr(Vt)}}function Wl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){et(i,i.return,b)}}function Qr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var V=a,B=b;try{B()}catch($){et(f,V,$)}}}l=l.next}while(l!==d)}}catch($){et(i,i.return,$)}}function lv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Jy(i,a)}catch(l){et(n,n.return,l)}}}function uv(n,i,a){a.props=na(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){et(n,i,l)}}function eu(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){et(n,i,f)}}function Li(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){et(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){et(n,i,f)}else a.current=null}function cv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){et(n,n.return,f)}}function Sm(n,i,a){try{var l=n.stateNode;tw(l,n.type,a,i),l[Gt]=i}catch(f){et(n,n.return,f)}}function hv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&es(n.type)||n.tag===4}function Am(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&es(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=li));else if(l!==4&&(l===27&&es(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(wm(n,i,a),n=n.sibling;n!==null;)wm(n,i,a),n=n.sibling}function ph(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&es(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ph(n,i,a),n=n.sibling;n!==null;)ph(n,i,a),n=n.sibling}function fv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);tn(i,l,a),i[Ct]=n,i[Gt]=a}catch(d){et(n,n.return,d)}}var or=!1,kt=!1,Im=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function M1(n,i){if(n=n.containerInfo,Qm=zh,n=wy(n),vd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,V=-1,B=0,$=0,te=n,q=null;t:for(;;){for(var Y;te!==a||f!==0&&te.nodeType!==3||(b=_+f),te!==d||l!==0&&te.nodeType!==3||(V=_+l),te.nodeType===3&&(_+=te.nodeValue.length),(Y=te.firstChild)!==null;)q=te,te=Y;for(;;){if(te===n)break t;if(q===a&&++B===f&&(b=_),q===d&&++$===l&&(V=_),(Y=te.nextSibling)!==null)break;te=q,q=te.parentNode}te=Y}a=b===-1||V===-1?null:{start:b,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ym={focusedElem:n,selectionRange:a},zh=!1,Qt=i;Qt!==null;)if(i=Qt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Qt=n;else for(;Qt!==null;){switch(i=Qt,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=na(a.type,f);n=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(be){et(a,a.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Zm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Qt=n;break}Qt=i.return}}function mv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ur(n,a),l&4&&Wl(5,a);break;case 1:if(ur(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){et(a,a.return,_)}else{var f=na(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){et(a,a.return,_)}}l&64&&lv(a),l&512&&eu(a,a.return);break;case 3:if(ur(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Jy(n,i)}catch(_){et(a,a.return,_)}}break;case 27:i===null&&l&4&&fv(a);case 26:case 5:ur(n,a),i===null&&l&4&&cv(a),l&512&&eu(a,a.return);break;case 12:ur(n,a);break;case 31:ur(n,a),l&4&&yv(n,a);break;case 13:ur(n,a),l&4&&_v(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=F1.bind(null,a),uw(n,a))));break;case 22:if(l=a.memoizedState!==null||or,!l){i=i!==null&&i.memoizedState!==null||kt,f=or;var d=kt;or=l,(kt=i)&&!d?cr(n,a,(a.subtreeFlags&8772)!==0):ur(n,a),or=f,kt=d}break;case 30:break;default:ur(n,a)}}function gv(n){var i=n.alternate;i!==null&&(n.alternate=null,gv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&za(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,Tn=!1;function lr(n,i,a){for(a=a.child;a!==null;)pv(n,i,a),a=a.sibling}function pv(n,i,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 26:kt||Li(a,i),lr(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Li(a,i);var l=mt,f=Tn;es(a.type)&&(mt=a.stateNode,Tn=!1),lr(n,i,a),uu(a.stateNode),mt=l,Tn=f;break;case 5:kt||Li(a,i);case 6:if(l=mt,f=Tn,mt=null,lr(n,i,a),mt=l,Tn=f,mt!==null)if(Tn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(d){et(a,i,d)}else try{mt.removeChild(a.stateNode)}catch(d){et(a,i,d)}break;case 18:mt!==null&&(Tn?(n=mt,l0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),bo(n)):l0(mt,a.stateNode));break;case 4:l=mt,f=Tn,mt=a.stateNode.containerInfo,Tn=!0,lr(n,i,a),mt=l,Tn=f;break;case 0:case 11:case 14:case 15:Qr(2,a,i),kt||Qr(4,a,i),lr(n,i,a);break;case 1:kt||(Li(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&uv(a,i,l)),lr(n,i,a);break;case 21:lr(n,i,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,lr(n,i,a),kt=l;break;default:lr(n,i,a)}}function yv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{bo(n)}catch(a){et(i,i.return,a)}}}function _v(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bo(n)}catch(a){et(i,i.return,a)}}function k1(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new dv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new dv),i;default:throw Error(r(435,n.tag))}}function yh(n,i){var a=k1(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=H1.bind(null,n,l);l.then(f,f)}})}function bn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(es(b.type)){mt=b.stateNode,Tn=!1;break e}break;case 5:mt=b.stateNode,Tn=!1;break e;case 3:case 4:mt=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(mt===null)throw Error(r(160));pv(d,_,f),mt=null,Tn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)vv(i,n),i=i.sibling}var mi=null;function vv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(i,n),Sn(n),l&4&&(Qr(3,n,n.return),Wl(3,n),Qr(5,n,n.return));break;case 1:bn(i,n),Sn(n),l&512&&(kt||a===null||Li(a,a.return)),l&64&&or&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=mi;if(bn(i,n),Sn(n),l&512&&(kt||a===null||Li(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ai]||d[Ct]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),tn(d,l,a),d[Ct]=n,Nt(d),l=d;break e;case"link":var _=v0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=f.createElement(l),tn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=v0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=f.createElement(l),tn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ct]=n,Nt(d),l=d}n.stateNode=l}else E0(f,n.type,n.stateNode);else n.stateNode=_0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?E0(f,n.type,n.stateNode):_0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Sm(n,n.memoizedProps,a.memoizedProps)}break;case 27:bn(i,n),Sn(n),l&512&&(kt||a===null||Li(a,a.return)),a!==null&&l&4&&Sm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(bn(i,n),Sn(n),l&512&&(kt||a===null||Li(a,a.return)),n.flags&32){f=n.stateNode;try{En(f,"")}catch(fe){et(n,n.return,fe)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Sm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Im=!0);break;case 6:if(bn(i,n),Sn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(fe){et(n,n.return,fe)}}break;case 3:if(Oh=null,f=mi,mi=Dh(i.containerInfo),bn(i,n),mi=f,Sn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{bo(i.containerInfo)}catch(fe){et(n,n.return,fe)}Im&&(Im=!1,Ev(n));break;case 4:l=mi,mi=Dh(n.stateNode.containerInfo),bn(i,n),Sn(n),mi=l;break;case 12:bn(i,n),Sn(n);break;case 31:bn(i,n),Sn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 13:bn(i,n),Sn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vh=dn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 22:f=n.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,B=or,$=kt;if(or=B||f,kt=$||V,bn(i,n),kt=$,or=B,Sn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||V||or||kt||ia(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){V=a=i;try{if(d=V.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=V.stateNode;var te=V.memoizedProps.style,q=te!=null&&te.hasOwnProperty("display")?te.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(fe){et(V,V.return,fe)}}}else if(i.tag===6){if(a===null){V=i;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(fe){et(V,V.return,fe)}}}else if(i.tag===18){if(a===null){V=i;try{var Y=V.stateNode;f?u0(Y,!0):u0(V.stateNode,!1)}catch(fe){et(V,V.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,yh(n,a))));break;case 19:bn(i,n),Sn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 30:break;case 21:break;default:bn(i,n),Sn(n)}}function Sn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(hv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Am(n);ph(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(En(_,""),a.flags&=-33);var b=Am(n);ph(n,b,_);break;case 3:case 4:var V=a.stateNode.containerInfo,B=Am(n);wm(n,B,V);break;default:throw Error(r(161))}}catch($){et(n,n.return,$)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ev(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Ev(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ur(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)mv(n,i.alternate,i),i=i.sibling}function ia(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Qr(4,i,i.return),ia(i);break;case 1:Li(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&uv(i,i.return,a),ia(i);break;case 27:uu(i.stateNode);case 26:case 5:Li(i,i.return),ia(i);break;case 22:i.memoizedState===null&&ia(i);break;case 30:ia(i);break;default:ia(i)}n=n.sibling}}function cr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:cr(f,d,a),Wl(4,d);break;case 1:if(cr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){et(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)Zy(V[f],b)}catch(B){et(l,l.return,B)}}a&&_&64&&lv(d),eu(d,d.return);break;case 27:fv(d);case 26:case 5:cr(f,d,a),a&&l===null&&_&4&&cv(d),eu(d,d.return);break;case 12:cr(f,d,a);break;case 31:cr(f,d,a),a&&_&4&&yv(f,d);break;case 13:cr(f,d,a),a&&_&4&&_v(f,d);break;case 22:d.memoizedState===null&&cr(f,d,a),eu(d,d.return);break;case 30:break;default:cr(f,d,a)}i=i.sibling}}function xm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&jl(a))}function Rm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n))}function gi(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tv(n,i,a,l),i=i.sibling}function Tv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:gi(n,i,a,l),f&2048&&Wl(9,i);break;case 1:gi(n,i,a,l);break;case 3:gi(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n)));break;case 12:if(f&2048){gi(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){et(i,i.return,V)}}else gi(n,i,a,l);break;case 31:gi(n,i,a,l);break;case 13:gi(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?gi(n,i,a,l):tu(n,i):d._visibility&2?gi(n,i,a,l):(d._visibility|=2,co(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&xm(_,i);break;case 24:gi(n,i,a,l),f&2048&&Rm(i.alternate,i);break;default:gi(n,i,a,l)}}function co(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,V=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:co(d,_,b,V,f),Wl(8,_);break;case 23:break;case 22:var $=_.stateNode;_.memoizedState!==null?$._visibility&2?co(d,_,b,V,f):tu(d,_):($._visibility|=2,co(d,_,b,V,f)),f&&B&2048&&xm(_.alternate,_);break;case 24:co(d,_,b,V,f),f&&B&2048&&Rm(_.alternate,_);break;default:co(d,_,b,V,f)}i=i.sibling}}function tu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:tu(a,l),f&2048&&xm(l.alternate,l);break;case 24:tu(a,l),f&2048&&Rm(l.alternate,l);break;default:tu(a,l)}i=i.sibling}}var nu=8192;function ho(n,i,a){if(n.subtreeFlags&nu)for(n=n.child;n!==null;)bv(n,i,a),n=n.sibling}function bv(n,i,a){switch(n.tag){case 26:ho(n,i,a),n.flags&nu&&n.memoizedState!==null&&Tw(a,mi,n.memoizedState,n.memoizedProps);break;case 5:ho(n,i,a);break;case 3:case 4:var l=mi;mi=Dh(n.stateNode.containerInfo),ho(n,i,a),mi=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=nu,nu=16777216,ho(n,i,a),nu=l):ho(n,i,a));break;default:ho(n,i,a)}}function Sv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function iu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,wv(l,n)}Sv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Av(n),n=n.sibling}function Av(n){switch(n.tag){case 0:case 11:case 15:iu(n),n.flags&2048&&Qr(9,n,n.return);break;case 3:iu(n);break;case 12:iu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,_h(n)):iu(n);break;default:iu(n)}}function _h(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qt=l,wv(l,n)}Sv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Qr(8,i,i.return),_h(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,_h(i));break;default:_h(i)}n=n.sibling}}function wv(n,i){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Qr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=n;Qt!==null;){l=Qt;var f=l.sibling,d=l.return;if(gv(l),l===a){Qt=null;break e}if(f!==null){f.return=d,Qt=f;break e}Qt=d}}}var P1={getCacheForType:function(n){var i=Wt(Vt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Wt(Vt).controller.signal}},z1=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,ke=null,ze=0,We=0,On=null,Yr=!1,fo=!1,Cm=!1,hr=0,Et=0,Xr=0,ra=0,Nm=0,Mn=0,mo=0,ru=null,An=null,Dm=!1,vh=0,Iv=0,Eh=1/0,Th=null,$r=null,Bt=0,Zr=null,go=null,fr=0,Vm=0,Om=null,xv=null,su=0,Mm=null;function kn(){return(Xe&2)!==0&&ze!==0?ze&-ze:X.T!==null?jm():bc()}function Rv(){if(Mn===0)if((ze&536870912)===0||Be){var n=Ds;Ds<<=1,(Ds&3932160)===0&&(Ds=262144),Mn=n}else Mn=536870912;return n=Dn.current,n!==null&&(n.flags|=32),Mn}function wn(n,i,a){(n===lt&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(po(n,0),Jr(n,ze,Mn,!1)),Vs(n,a),((Xe&2)===0||n!==lt)&&(n===lt&&((Xe&2)===0&&(ra|=a),Et===4&&Jr(n,ze,Mn,!1)),Ui(n))}function Cv(n,i,a){if((Xe&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||si(n,i),f=l?j1(n,i):Pm(n,i,!0),d=l;do{if(f===0){fo&&!l&&Jr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!L1(a)){f=Pm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=n;f=ru;var V=b.current.memoizedState.isDehydrated;if(V&&(po(b,_).flags|=256),_=Pm(b,_,!1),_!==2){if(Cm&&!V){b.errorRecoveryDisabledLanes|=d,ra|=d,f=4;break e}d=An,An=f,d!==null&&(An===null?An=d:An.push.apply(An,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){po(n,0),Jr(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Jr(l,i,Mn,!Yr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=vh+300-dn(),10<f)){if(Jr(l,i,Mn,!Yr),Ti(l,0,!0)!==0)break e;fr=i,l.timeoutHandle=a0(Nv.bind(null,l,a,An,Th,Dm,i,Mn,ra,mo,Yr,d,"Throttled",-0,0),f);break e}Nv(l,a,An,Th,Dm,i,Mn,ra,mo,Yr,d,null,-0,0)}}break}while(!0);Ui(n)}function Nv(n,i,a,l,f,d,_,b,V,B,$,te,q,Y){if(n.timeoutHandle=-1,te=i.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},bv(i,d,te);var fe=(d&62914560)===d?vh-dn():(d&4194048)===d?Iv-dn():0;if(fe=bw(te,fe),fe!==null){fr=d,n.cancelPendingCommit=fe(Lv.bind(null,n,i,d,a,l,f,_,b,V,$,te,null,q,Y)),Jr(n,d,_,!B);return}}Lv(n,i,d,a,l,f,_,b,V)}function L1(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Cn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Jr(n,i,a,l){i&=~Nm,i&=~ra,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-St(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Os(n,a,i)}function bh(){return(Xe&6)===0?(au(0),!1):!0}function km(){if(ke!==null){if(We===0)var n=ke.return;else n=ke,tr=Xs=null,Zd(n),so=null,ql=0,n=ke;for(;n!==null;)ov(n.alternate,n),n=n.return;ke=null}}function po(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,rw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),fr=0,km(),lt=n,ke=a=Wi(n.current,null),ze=i,We=0,On=null,Yr=!1,fo=si(n,i),Cm=!1,mo=Mn=Nm=ra=Xr=Et=0,An=ru=null,Dm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-St(l),d=1<<f;i|=n[f],l&=~d}return hr=i,Fc(),a}function Dv(n,i){Ce=null,X.H=$l,i===ro||i===Zc?(i=Qy(),We=3):i===Ud?(i=Qy(),We=4):We=i===dm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,ke===null&&(Et=1,hh(n,Qn(i,n.current)))}function Vv(){var n=Dn.current;return n===null?!0:(ze&4194048)===ze?Zn===null:(ze&62914560)===ze||(ze&536870912)!==0?n===Zn:!1}function Ov(){var n=X.H;return X.H=$l,n===null?$l:n}function Mv(){var n=X.A;return X.A=P1,n}function Sh(){Et=4,Yr||(ze&4194048)!==ze&&Dn.current!==null||(fo=!0),(Xr&134217727)===0&&(ra&134217727)===0||lt===null||Jr(lt,ze,Mn,!1)}function Pm(n,i,a){var l=Xe;Xe|=2;var f=Ov(),d=Mv();(lt!==n||ze!==i)&&(Th=null,po(n,i)),i=!1;var _=Et;e:do try{if(We!==0&&ke!==null){var b=ke,V=On;switch(We){case 8:km(),_=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var B=We;if(We=0,On=null,yo(n,b,V,B),a&&fo){_=0;break e}break;default:B=We,We=0,On=null,yo(n,b,V,B)}}U1(),_=Et;break}catch($){Dv(n,$)}while(!0);return i&&n.shellSuspendCounter++,tr=Xs=null,Xe=l,X.H=f,X.A=d,ke===null&&(lt=null,ze=0,Fc()),_}function U1(){for(;ke!==null;)kv(ke)}function j1(n,i){var a=Xe;Xe|=2;var l=Ov(),f=Mv();lt!==n||ze!==i?(Th=null,Eh=dn()+500,po(n,i)):fo=si(n,i);e:do try{if(We!==0&&ke!==null){i=ke;var d=On;t:switch(We){case 1:We=0,On=null,yo(n,i,d,1);break;case 2:case 9:if(Gy(d)){We=0,On=null,Pv(i);break}i=function(){We!==2&&We!==9||lt!==n||(We=7),Ui(n)},d.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Gy(d)?(We=0,On=null,Pv(i)):(We=0,On=null,yo(n,i,d,7));break;case 5:var _=null;switch(ke.tag){case 26:_=ke.memoizedState;case 5:case 27:var b=ke;if(_?T0(_):b.stateNode.complete){We=0,On=null;var V=b.sibling;if(V!==null)ke=V;else{var B=b.return;B!==null?(ke=B,Ah(B)):ke=null}break t}}We=0,On=null,yo(n,i,d,5);break;case 6:We=0,On=null,yo(n,i,d,6);break;case 8:km(),Et=6;break e;default:throw Error(r(462))}}B1();break}catch($){Dv(n,$)}while(!0);return tr=Xs=null,X.H=l,X.A=f,Xe=a,ke!==null?0:(lt=null,ze=0,Fc(),Et)}function B1(){for(;ke!==null&&!fd();)kv(ke)}function kv(n){var i=sv(n.alternate,n,hr);n.memoizedProps=n.pendingProps,i===null?Ah(n):ke=i}function Pv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=W_(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=W_(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:Zd(i);default:ov(a,i),i=ke=My(i,hr),i=sv(a,i,hr)}n.memoizedProps=n.pendingProps,i===null?Ah(n):ke=i}function yo(n,i,a,l){tr=Xs=null,Zd(i),so=null,ql=0;var f=i.return;try{if(C1(n,f,i,a,ze)){Et=1,hh(n,Qn(a,n.current)),ke=null;return}}catch(d){if(f!==null)throw ke=f,d;Et=1,hh(n,Qn(a,n.current)),ke=null;return}i.flags&32768?(Be||l===1?n=!0:fo||(ze&536870912)!==0?n=!1:(Yr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),zv(i,n)):Ah(i)}function Ah(n){var i=n;do{if((i.flags&32768)!==0){zv(i,Yr);return}n=i.return;var a=V1(i.alternate,i,hr);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=n}while(i!==null);Et===0&&(Et=5)}function zv(n,i){do{var a=O1(n.alternate,n);if(a!==null){a.flags&=32767,ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){ke=n;return}ke=n=a}while(n!==null);Et=6,ke=null}function Lv(n,i,a,l,f,d,_,b,V){n.cancelPendingCommit=null;do wh();while(Bt!==0);if((Xe&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Ad,gd(n,a,d,_,b,V),n===lt&&(ke=lt=null,ze=0),go=i,Zr=n,fr=a,Vm=d,Om=f,xv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,G1(Rr,function(){return Fv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=ae.p,ae.p=2,_=Xe,Xe|=4;try{M1(n,i,a)}finally{Xe=_,ae.p=f,X.T=l}}Bt=1,Uv(),jv(),Bv()}}function Uv(){if(Bt===1){Bt=0;var n=Zr,i=go,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var f=Xe;Xe|=4;try{vv(i,n);var d=Ym,_=wy(n.containerInfo),b=d.focusedElem,V=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Ay(b.ownerDocument.documentElement,b)){if(V!==null&&vd(b)){var B=V.start,$=V.end;if($===void 0&&($=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min($,b.value.length);else{var te=b.ownerDocument||document,q=te&&te.defaultView||window;if(q.getSelection){var Y=q.getSelection(),fe=b.textContent.length,be=Math.min(V.start,fe),ot=V.end===void 0?be:Math.min(V.end,fe);!Y.extend&&be>ot&&(_=ot,ot=be,be=_);var z=Sy(b,be),M=Sy(b,ot);if(z&&M&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var j=te.createRange();j.setStart(z.node,z.offset),Y.removeAllRanges(),be>ot?(Y.addRange(j),Y.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),Y.addRange(j))}}}}for(te=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<te.length;b++){var J=te[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}zh=!!Qm,Ym=Qm=null}finally{Xe=f,ae.p=l,X.T=a}}n.current=i,Bt=2}}function jv(){if(Bt===2){Bt=0;var n=Zr,i=go,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var f=Xe;Xe|=4;try{mv(n,i.alternate,i)}finally{Xe=f,ae.p=l,X.T=a}}Bt=3}}function Bv(){if(Bt===4||Bt===3){Bt=0,gc();var n=Zr,i=go,a=fr,l=xv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,go=Zr=null,qv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&($r=null),Xi(a),i=i.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(ri,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=ae.p,ae.p=2,X.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{X.T=i,ae.p=f}}(fr&3)!==0&&wh(),Ui(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Mm?su++:(su=0,Mm=n):su=0,au(0)}}function qv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jl(i)))}function wh(){return Uv(),jv(),Bv(),Fv()}function Fv(){if(Bt!==5)return!1;var n=Zr,i=Vm;Vm=0;var a=Xi(fr),l=X.T,f=ae.p;try{ae.p=32>a?32:a,X.T=null,a=Om,Om=null;var d=Zr,_=fr;if(Bt=0,go=Zr=null,fr=0,(Xe&6)!==0)throw Error(r(331));var b=Xe;if(Xe|=4,Av(d.current),Tv(d,d.current,_,a),Xe=b,au(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(ri,d)}catch{}return!0}finally{ae.p=f,X.T=l,qv(n,i)}}function Hv(n,i,a){i=Qn(a,i),i=fm(n.stateNode,i,2),n=Hr(n,i,2),n!==null&&(Vs(n,2),Ui(n))}function et(n,i,a){if(n.tag===3)Hv(n,n,a);else for(;i!==null;){if(i.tag===3){Hv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){n=Qn(a,n),a=G_(2),l=Hr(i,a,2),l!==null&&(K_(a,l,i,n),Vs(l,2),Ui(l));break}}i=i.return}}function zm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new z1;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Cm=!0,f.add(a),n=q1.bind(null,n,i,a),i.then(n,n))}function q1(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,lt===n&&(ze&a)===a&&(Et===4||Et===3&&(ze&62914560)===ze&&300>dn()-vh?(Xe&2)===0&&po(n,0):Nm|=a,mo===ze&&(mo=0)),Ui(n)}function Gv(n,i){i===0&&(i=Tc()),n=Ks(n,i),n!==null&&(Vs(n,i),Ui(n))}function F1(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Gv(n,a)}function H1(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Gv(n,a)}function G1(n,i){return jt(n,i)}var Ih=null,_o=null,Lm=!1,xh=!1,Um=!1,Wr=0;function Ui(n){n!==_o&&n.next===null&&(_o===null?Ih=_o=n:_o=_o.next=n),xh=!0,Lm||(Lm=!0,Q1())}function au(n,i){if(!Um&&xh){Um=!0;do for(var a=!1,l=Ih;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-St(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Xv(l,d))}else d=ze,d=Ti(l,l===lt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||si(l,d)||(a=!0,Xv(l,d));l=l.next}while(a);Um=!1}}function K1(){Kv()}function Kv(){xh=Lm=!1;var n=0;Wr!==0&&iw()&&(n=Wr);for(var i=dn(),a=null,l=Ih;l!==null;){var f=l.next,d=Qv(l,i);d===0?(l.next=null,a===null?Ih=f:a.next=f,f===null&&(_o=a)):(a=l,(n!==0||(d&3)!==0)&&(xh=!0)),l=f}Bt!==0&&Bt!==5||au(n),Wr!==0&&(Wr=0)}function Qv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-St(d),b=1<<_,V=f[_];V===-1?((b&a)===0||(b&l)!==0)&&(f[_]=md(b,i)):V<=i&&(n.expiredLanes|=b),d&=~b}if(i=lt,a=ze,a=Ti(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(We===2||We===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&xr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||si(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&xr(l),Xi(a)){case 2:case 8:a=pl;break;case 32:a=Rr;break;case 268435456:a=pc;break;default:a=Rr}return l=Yv.bind(null,n),a=jt(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&xr(l),n.callbackPriority=2,n.callbackNode=null,2}function Yv(n,i){if(Bt!==0&&Bt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(wh()&&n.callbackNode!==a)return null;var l=ze;return l=Ti(n,n===lt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Cv(n,l,i),Qv(n,dn()),n.callbackNode!=null&&n.callbackNode===a?Yv.bind(null,n):null)}function Xv(n,i){if(wh())return null;Cv(n,i,!0)}function Q1(){sw(function(){(Xe&6)!==0?jt(gl,K1):Kv()})}function jm(){if(Wr===0){var n=no;n===0&&(n=vi,vi<<=1,(vi&261888)===0&&(vi=256)),Wr=n}return Wr}function $v(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ba(""+n)}function Zv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Y1(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=$v((f[Gt]||null).action),_=l.submitter;_&&(i=(i=_[Gt]||null)?$v(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Vi("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wr!==0){var V=_?Zv(f,_):new FormData(f);am(a,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(b.preventDefault(),V=_?Zv(f,_):new FormData(f),am(a,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var Bm=0;Bm<Sd.length;Bm++){var qm=Sd[Bm],X1=qm.toLowerCase(),$1=qm[0].toUpperCase()+qm.slice(1);di(X1,"on"+$1)}di(Ry,"onAnimationEnd"),di(Cy,"onAnimationIteration"),di(Ny,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(f1,"onTransitionRun"),di(d1,"onTransitionStart"),di(m1,"onTransitionCancel"),di(Dy,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ou));function Jv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],V=b.instance,B=b.currentTarget;if(b=b.listener,V!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=B;try{d(f)}catch($){qc($)}f.currentTarget=null,d=V}else for(_=0;_<l.length;_++){if(b=l[_],V=b.instance,B=b.currentTarget,b=b.listener,V!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=B;try{d(f)}catch($){qc($)}f.currentTarget=null,d=V}}}}function Pe(n,i){var a=i[Pa];a===void 0&&(a=i[Pa]=new Set);var l=n+"__bubble";a.has(l)||(Wv(i,n,2,!1),a.add(l))}function Fm(n,i,a){var l=0;i&&(l|=4),Wv(a,n,l,i)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Hm(n){if(!n[Rh]){n[Rh]=!0,vl.forEach(function(a){a!=="selectionchange"&&(Z1.has(a)||Fm(a,!1,n),Fm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Rh]||(i[Rh]=!0,Fm("selectionchange",!1,i))}}function Wv(n,i,a,l){switch(R0(i)){case 2:var f=ww;break;case 8:f=Iw;break;default:f=sg}a=f.bind(null,i,a,n),f=void 0,!Ls||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Gm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var V=_.tag;if((V===3||V===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=wi(b),_===null)return;if(V=_.tag,V===5||V===6||V===26||V===27){l=d=_;continue e}b=b.parentNode}}l=l.return}Mr(function(){var B=d,$=Fn(a),te=[];e:{var q=Vy.get(n);if(q!==void 0){var Y=Vi,fe=n;switch(n){case"keypress":if(js(a)===0)break e;case"keydown":case"keyup":Y=Uc;break;case"focusin":fe="focus",Y=qs;break;case"focusout":fe="blur",Y=qs;break;case"beforeblur":case"afterblur":Y=qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Ry:case Cy:case Ny:Y=Vc;break;case Dy:Y=S;break;case"scroll":case"scrollend":Y=Dl;break;case"wheel":Y=G;break;case"copy":case"cut":case"paste":Y=Oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ji;break;case"toggle":case"beforetoggle":Y=Re}var be=(i&4)!==0,ot=!be&&(n==="scroll"||n==="scrollend"),z=be?q!==null?q+"Capture":null:q;be=[];for(var M=B,j;M!==null;){var J=M;if(j=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||j===null||z===null||(J=ui(M,z),J!=null&&be.push(lu(M,J,j))),ot)break;M=M.return}0<be.length&&(q=new Y(q,fe,null,a,$),te.push({event:q,listeners:be}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",q&&a!==Rl&&(fe=a.relatedTarget||a.fromElement)&&(wi(fe)||fe[Si]))break e;if((Y||q)&&(q=$.window===$?$:(q=$.ownerDocument)?q.defaultView||q.parentWindow:window,Y?(fe=a.relatedTarget||a.toElement,Y=B,fe=fe?wi(fe):null,fe!==null&&(ot=u(fe),be=fe.tag,fe!==ot||be!==5&&be!==27&&be!==6)&&(fe=null)):(Y=null,fe=B),Y!==fe)){if(be=Vl,J="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(be=Ji,J="onPointerLeave",z="onPointerEnter",M="pointer"),ot=Y==null?q:xn(Y),j=fe==null?q:xn(fe),q=new be(J,M+"leave",Y,a,$),q.target=ot,q.relatedTarget=j,J=null,wi($)===B&&(be=new be(z,M+"enter",fe,a,$),be.target=j,be.relatedTarget=ot,J=be),ot=J,Y&&fe)t:{for(be=J1,z=Y,M=fe,j=0,J=z;J;J=be(J))j++;J=0;for(var Ee=M;Ee;Ee=be(Ee))J++;for(;0<j-J;)z=be(z),j--;for(;0<J-j;)M=be(M),J--;for(;j--;){if(z===M||M!==null&&z===M.alternate){be=z;break t}z=be(z),M=be(M)}be=null}else be=null;Y!==null&&e0(te,q,Y,be,!1),fe!==null&&ot!==null&&e0(te,ot,fe,be,!0)}}e:{if(q=B?xn(B):window,Y=q.nodeName&&q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&q.type==="file")var Ke=yy;else if(gy(q))if(_y)Ke=u1;else{Ke=o1;var ge=a1}else Y=q.nodeName,!Y||Y.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ja(B.elementType)&&(Ke=yy):Ke=l1;if(Ke&&(Ke=Ke(n,B))){py(te,Ke,a,$);break e}ge&&ge(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&wl(q,"number",q.value)}switch(ge=B?xn(B):window,n){case"focusin":(gy(ge)||ge.contentEditable==="true")&&(Ya=ge,Ed=B,zl=null);break;case"focusout":zl=Ed=Ya=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Iy(te,a,$);break;case"selectionchange":if(h1)break;case"keydown":case"keyup":Iy(te,a,$)}var Oe;if(Ye)e:{switch(n){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Qa?Fs(n,a)&&(Le="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(ki&&a.locale!=="ko"&&(Qa||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Qa&&(Oe=Nl()):(Di=$,Cl="value"in Di?Di.value:Di.textContent,Qa=!0)),ge=Ch(B,Le),0<ge.length&&(Le=new Mi(Le,n,null,a,$),te.push({event:Le,listeners:ge}),Oe?Le.data=Oe:(Oe=Ka(a),Oe!==null&&(Le.data=Oe)))),(Oe=Gn?n1(n,a):i1(n,a))&&(Le=Ch(B,"onBeforeInput"),0<Le.length&&(ge=new Mi("onBeforeInput","beforeinput",null,a,$),te.push({event:ge,listeners:Le}),ge.data=Oe)),Y1(te,n,B,a,$)}Jv(te,i)})}function lu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Ch(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ui(n,a),f!=null&&l.unshift(lu(n,f,d)),f=ui(n,i),f!=null&&l.push(lu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function J1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function e0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,V=b.alternate,B=b.stateNode;if(b=b.tag,V!==null&&V===l)break;b!==5&&b!==26&&b!==27||B===null||(V=B,f?(B=ui(a,d),B!=null&&_.unshift(lu(a,B,V))):f||(B=ui(a,d),B!=null&&_.push(lu(a,B,V)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var W1=/\r\n?/g,ew=/\u0000|\uFFFD/g;function t0(n){return(typeof n=="string"?n:""+n).replace(W1,`
`).replace(ew,"")}function n0(n,i){return i=t0(i),t0(n)===i}function at(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(n,""+l);break;case"className":Rn(n,"class",l);break;case"tabIndex":Rn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(n,a,l);break;case"style":xl(n,l,d);break;case"data":if(i!=="object"){Rn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ba(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&at(n,i,"name",f.name,f,null),at(n,i,"formEncType",f.formEncType,f,null),at(n,i,"formMethod",f.formMethod,f,null),at(n,i,"formTarget",f.formTarget,f,null)):(at(n,i,"encType",f.encType,f,null),at(n,i,"method",f.method,f,null),at(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ba(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=li);break;case"onScroll":l!=null&&Pe("scroll",n);break;case"onScrollEnd":l!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ba(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),La(n,"popover",l);break;case"xlinkActuate":Dt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":La(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cc.get(a)||a,La(n,a,l))}}function Km(n,i,a,l,f,d){switch(a){case"style":xl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?En(n,l):(typeof l=="number"||typeof l=="bigint")&&En(n,""+l);break;case"onScroll":l!=null&&Pe("scroll",n);break;case"onScrollEnd":l!=null&&Pe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!El.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Gt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):La(n,a,l)}}}function tn(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(n,i,d,_,a,null)}}f&&at(n,i,"srcSet",a.srcSet,a,null),l&&at(n,i,"src",a.src,a,null);return;case"input":Pe("invalid",n);var b=d=_=f=null,V=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":f=$;break;case"type":_=$;break;case"checked":V=$;break;case"defaultChecked":B=$;break;case"value":d=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:at(n,i,l,$,a,null)}}Ic(n,d,b,V,B,_,f,!1);return;case"select":Pe("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:at(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Nr(n,!!l,i,!1):a!=null&&Nr(n,!!l,a,!0);return;case"textarea":Pe("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:at(n,i,_,b,a,null)}Dr(n,l,f,d);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(n,i,V,l,a,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(l=0;l<ou.length;l++)Pe(ou[l],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(n,i,B,l,a,null)}return;default:if(ja(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&Km(n,i,$,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&at(n,i,b,l,a,null))}function tw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,V=null,B=null,$=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":V=te;default:l.hasOwnProperty(Y)||at(n,i,Y,null,l,te)}}for(var q in l){var Y=l[q];if(te=a[q],l.hasOwnProperty(q)&&(Y!=null||te!=null))switch(q){case"type":d=Y;break;case"name":f=Y;break;case"checked":B=Y;break;case"defaultChecked":$=Y;break;case"value":_=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==te&&at(n,i,q,Y,l,te)}}Ua(n,_,b,V,B,$,d,f);return;case"select":Y=_=b=q=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":Y=V;default:l.hasOwnProperty(d)||at(n,i,d,null,l,V)}for(f in l)if(d=l[f],V=a[f],l.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==V&&at(n,i,f,d,l,V)}i=b,a=_,l=Y,q!=null?Nr(n,!!a,q,!1):!!l!=!!a&&(i!=null?Nr(n,!!a,i,!0):Nr(n,!!a,a?[]:"",!1));return;case"textarea":Y=q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:at(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&at(n,i,_,f,l,d)}xc(n,q,Y);return;case"option":for(var fe in a)if(q=a[fe],a.hasOwnProperty(fe)&&q!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":n.selected=!1;break;default:at(n,i,fe,null,l,q)}for(V in l)if(q=l[V],Y=a[V],l.hasOwnProperty(V)&&q!==Y&&(q!=null||Y!=null))switch(V){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:at(n,i,V,q,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)q=a[be],a.hasOwnProperty(be)&&q!=null&&!l.hasOwnProperty(be)&&at(n,i,be,null,l,q);for(B in l)if(q=l[B],Y=a[B],l.hasOwnProperty(B)&&q!==Y&&(q!=null||Y!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:at(n,i,B,q,l,Y)}return;default:if(ja(i)){for(var ot in a)q=a[ot],a.hasOwnProperty(ot)&&q!==void 0&&!l.hasOwnProperty(ot)&&Km(n,i,ot,void 0,l,q);for($ in l)q=l[$],Y=a[$],!l.hasOwnProperty($)||q===Y||q===void 0&&Y===void 0||Km(n,i,$,q,l,Y);return}}for(var z in a)q=a[z],a.hasOwnProperty(z)&&q!=null&&!l.hasOwnProperty(z)&&at(n,i,z,null,l,q);for(te in l)q=l[te],Y=a[te],!l.hasOwnProperty(te)||q===Y||q==null&&Y==null||at(n,i,te,q,l,Y)}function i0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&i0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var V=a[l],B=V.startTime;if(B>b)break;var $=V.transferSize,te=V.initiatorType;$&&i0(te)&&(V=V.responseEnd,_+=$*(V<b?1:(b-B)/(V-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qm=null,Ym=null;function Nh(n){return n.nodeType===9?n:n.ownerDocument}function r0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Xm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $m=null;function iw(){var n=window.event;return n&&n.type==="popstate"?n===$m?!1:($m=n,!0):($m=null,!1)}var a0=typeof setTimeout=="function"?setTimeout:void 0,rw=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(n){return o0.resolve(null).then(n).catch(aw)}:a0;function aw(n){setTimeout(function(){throw n})}function es(n){return n==="head"}function l0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),bo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")uu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,uu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[Ai]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&uu(n.ownerDocument.body);a=f}while(a);bo(i)}function u0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Zm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zm(a),za(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function ow(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ai])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Jn(n.nextSibling),n===null)break}return null}function lw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Jn(n.nextSibling),n===null))return null;return n}function c0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Jn(n.nextSibling),n===null))return null;return n}function Jm(n){return n.data==="$?"||n.data==="$~"}function Wm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function uw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Jn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var eg=null;function h0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Jn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function f0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function d0(n,i,a){switch(i=Nh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function uu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);za(n)}var Wn=new Map,m0=new Set;function Dh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var dr=ae.d;ae.d={f:cw,r:hw,D:fw,C:dw,L:mw,m:gw,X:yw,S:pw,M:_w};function cw(){var n=dr.f(),i=bh();return n||i}function hw(n){var i=qn(n);i!==null&&i.tag===5&&i.type==="form"?D_(i):dr.r(n)}var vo=typeof document>"u"?null:document;function g0(n,i,a){var l=vo;if(l&&typeof i=="string"&&i){var f=vn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),m0.has(f)||(m0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),tn(i,"link",n),Nt(i),l.head.appendChild(i)))}}function fw(n){dr.D(n),g0("dns-prefetch",n,null)}function dw(n,i){dr.C(n,i),g0("preconnect",n,i)}function mw(n,i,a){dr.L(n,i,a);var l=vo;if(l&&n&&i){var f='link[rel="preload"][as="'+vn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+vn(a.imageSizes)+'"]')):f+='[href="'+vn(n)+'"]';var d=f;switch(i){case"style":d=Eo(n);break;case"script":d=To(n)}Wn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Wn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(cu(d))||i==="script"&&l.querySelector(hu(d))||(i=l.createElement("link"),tn(i,"link",n),Nt(i),l.head.appendChild(i)))}}function gw(n,i){dr.m(n,i);var a=vo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+vn(l)+'"][href="'+vn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=To(n)}if(!Wn.has(d)&&(n=T({rel:"modulepreload",href:n},i),Wn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hu(d)))return}l=a.createElement("link"),tn(l,"link",n),Nt(l),a.head.appendChild(l)}}}function pw(n,i,a){dr.S(n,i,a);var l=vo;if(l&&n){var f=Ii(l).hoistableStyles,d=Eo(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(cu(d)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Wn.get(d))&&tg(n,a);var V=_=l.createElement("link");Nt(V),tn(V,"link",n),V._p=new Promise(function(B,$){V.onload=B,V.onerror=$}),V.addEventListener("load",function(){b.loading|=1}),V.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Vh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function yw(n,i){dr.X(n,i);var a=vo;if(a&&n){var l=Ii(a).hoistableScripts,f=To(n),d=l.get(f);d||(d=a.querySelector(hu(f)),d||(n=T({src:n,async:!0},i),(i=Wn.get(f))&&ng(n,i),d=a.createElement("script"),Nt(d),tn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function _w(n,i){dr.M(n,i);var a=vo;if(a&&n){var l=Ii(a).hoistableScripts,f=To(n),d=l.get(f);d||(d=a.querySelector(hu(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=Wn.get(f))&&ng(n,i),d=a.createElement("script"),Nt(d),tn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function p0(n,i,a,l){var f=(f=Ve.current)?Dh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Eo(a.href),a=Ii(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var d=Ii(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(cu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Wn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(n,a),d||vw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(a),a=Ii(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Eo(n){return'href="'+vn(n)+'"'}function cu(n){return'link[rel="stylesheet"]['+n+"]"}function y0(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function vw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),Nt(i),n.head.appendChild(i))}function To(n){return'[src="'+vn(n)+'"]'}function hu(n){return"script[async]"+n}function _0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+vn(a.href)+'"]');if(l)return i.instance=l,Nt(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Nt(l),tn(l,"style",f),Vh(l,a.precedence,n),i.instance=l;case"stylesheet":f=Eo(a.href);var d=n.querySelector(cu(f));if(d)return i.state.loading|=4,i.instance=d,Nt(d),d;l=y0(a),(f=Wn.get(f))&&tg(l,f),d=(n.ownerDocument||n).createElement("link"),Nt(d);var _=d;return _._p=new Promise(function(b,V){_.onload=b,_.onerror=V}),tn(d,"link",l),i.state.loading|=4,Vh(d,a.precedence,n),i.instance=d;case"script":return d=To(a.src),(f=n.querySelector(hu(d)))?(i.instance=f,Nt(f),f):(l=a,(f=Wn.get(d))&&(l=T({},a),ng(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Nt(f),tn(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Vh(l,a.precedence,n));return i.instance}function Vh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function tg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ng(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Oh=null;function v0(n,i,a){if(Oh===null){var l=new Map,f=Oh=new Map;f.set(a,l)}else f=Oh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Ai]||d[Ct]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function E0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Ew(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function T0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Tw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Eo(l.href),d=i.querySelector(cu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Mh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Nt(d);return}d=i.ownerDocument||i,l=y0(l),(f=Wn.get(f))&&tg(l,f),d=d.createElement("link"),Nt(d);var _=d;_._p=new Promise(function(b,V){_.onload=b,_.onerror=V}),tn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Mh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var ig=0;function bw(n,i){return n.stylesheets&&n.count===0&&Ph(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Ph(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&ig===0&&(ig=62500*nw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ph(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>ig?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var kh=null;function Ph(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,kh=new Map,i.forEach(Sw,n),kh=null,Mh.call(n))}function Sw(n,i){if(!(i.state.loading&4)){var a=kh.get(n);if(a)var l=a.get(null);else{a=new Map,kh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Mh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var fu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Aw(n,i,a,l,f,d,_,b,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function b0(n,i,a,l,f,d,_,b,V,B,$,te){return n=new Aw(n,i,a,_,V,B,$,te,b),i=1,d===!0&&(i|=24),d=Nn(3,null,null,i),n.current=d,d.stateNode=n,i=Pd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},jd(d),n}function S0(n){return n?(n=Za,n):Za}function A0(n,i,a,l,f,d){f=S0(f),l.context===null?l.context=f:l.pendingContext=f,l=Fr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Hr(n,l,i),a!==null&&(wn(a,n,i),Hl(a,n,i))}function w0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function rg(n,i){w0(n,i),(n=n.alternate)&&w0(n,i)}function I0(n){if(n.tag===13||n.tag===31){var i=Ks(n,67108864);i!==null&&wn(i,n,67108864),rg(n,67108864)}}function x0(n){if(n.tag===13||n.tag===31){var i=kn();i=Ms(i);var a=Ks(n,i);a!==null&&wn(a,n,i),rg(n,i)}}var zh=!0;function ww(n,i,a,l){var f=X.T;X.T=null;var d=ae.p;try{ae.p=2,sg(n,i,a,l)}finally{ae.p=d,X.T=f}}function Iw(n,i,a,l){var f=X.T;X.T=null;var d=ae.p;try{ae.p=8,sg(n,i,a,l)}finally{ae.p=d,X.T=f}}function sg(n,i,a,l){if(zh){var f=ag(l);if(f===null)Gm(n,i,l,Lh,a),C0(n,l);else if(Rw(f,n,i,a,l))l.stopPropagation();else if(C0(n,l),i&4&&-1<xw.indexOf(n)){for(;f!==null;){var d=qn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ei(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var V=1<<31-St(_);b.entanglements[1]|=V,_&=~V}Ui(d),(Xe&6)===0&&(Eh=dn()+500,au(0))}}break;case 31:case 13:b=Ks(d,2),b!==null&&wn(b,d,2),bh(),rg(d,2)}if(d=ag(l),d===null&&Gm(n,i,l,Lh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Gm(n,i,l,null,a)}}function ag(n){return n=Fn(n),og(n)}var Lh=null;function og(n){if(Lh=null,n=wi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Lh=n,null}function R0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case gl:return 2;case pl:return 8;case Rr:case dd:return 32;case pc:return 268435456;default:return 32}default:return 32}}var lg=!1,ts=null,ns=null,is=null,du=new Map,mu=new Map,rs=[],xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C0(n,i){switch(n){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(i.pointerId)}}function gu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=qn(i),i!==null&&I0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Rw(n,i,a,l,f){switch(i){case"focusin":return ts=gu(ts,n,i,a,l,f),!0;case"dragenter":return ns=gu(ns,n,i,a,l,f),!0;case"mouseover":return is=gu(is,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return du.set(d,gu(du.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,mu.set(d,gu(mu.get(d)||null,n,i,a,l,f)),!0}return!1}function N0(n){var i=wi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,ai(n.priority,function(){x0(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,ai(n.priority,function(){x0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Uh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ag(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Rl=l,a.target.dispatchEvent(l),Rl=null}else return i=qn(a),i!==null&&I0(i),n.blockedOn=a,!1;i.shift()}return!0}function D0(n,i,a){Uh(n)&&a.delete(i)}function Cw(){lg=!1,ts!==null&&Uh(ts)&&(ts=null),ns!==null&&Uh(ns)&&(ns=null),is!==null&&Uh(is)&&(is=null),du.forEach(D0),mu.forEach(D0)}function jh(n,i){n.blockedOn===i&&(n.blockedOn=null,lg||(lg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Cw)))}var Bh=null;function V0(n){Bh!==n&&(Bh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bh===n&&(Bh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(og(l||a)===null)continue;break}var d=qn(a);d!==null&&(n.splice(i,3),i-=3,am(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function bo(n){function i(V){return jh(V,n)}ts!==null&&jh(ts,n),ns!==null&&jh(ns,n),is!==null&&jh(is,n),du.forEach(i),mu.forEach(i);for(var a=0;a<rs.length;a++){var l=rs[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<rs.length&&(a=rs[0],a.blockedOn===null);)N0(a),a.blockedOn===null&&rs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Gt]||null;if(typeof d=="function")_||V0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Gt]||null)b=_.formAction;else if(og(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),V0(a)}}}function O0(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function ug(n){this._internalRoot=n}qh.prototype.render=ug.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=kn();A0(a,l,n,i,null,null)},qh.prototype.unmount=ug.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;A0(n.current,2,null,n,null,null),bh(),i[Si]=null}};function qh(n){this._internalRoot=n}qh.prototype.unstable_scheduleHydration=function(n){if(n){var i=bc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<rs.length&&i!==0&&i<rs[a].priority;a++);rs.splice(a,0,n),a===0&&N0(n)}};var M0=e.version;if(M0!=="19.2.3")throw Error(r(527,M0,"19.2.3"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var Nw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{ri=Fh.inject(Nw),$t=Fh}catch{}}return yu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=B_,d=q_,_=F_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=b0(n,1,!1,null,null,a,l,null,f,d,_,O0),n[Si]=i.current,Hm(n),new ug(i)},yu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=B_,_=q_,b=F_,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),i=b0(n,1,!0,i,a??null,l,f,V,d,_,b,O0),i.context=S0(null),a=i.current,l=kn(),l=Ms(l),f=Fr(l),f.callback=null,Hr(a,f,l),a=l,i.current.lanes=a,Vs(i,a),Ui(i),n[Si]=i.current,Hm(n),new qh(i)},yu.version="19.2.3",yu}var H0;function jw(){if(H0)return fg.exports;H0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fg.exports=Uw(),fg.exports}var Bw=jw();const qw=FT(Bw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),G0=s=>{const e=Hw(s);return e.charAt(0).toUpperCase()+e.slice(1)},HT=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Gw=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=ce.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>ce.createElement("svg",{ref:g,...Kw,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:HT("lucide",o),...!u&&!Gw(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>ce.createElement(p,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=(s,e)=>{const t=ce.forwardRef(({className:r,...o},u)=>ce.createElement(Qw,{ref:u,iconNode:e,className:HT(`lucide-${Fw(G0(s))}`,`lucide-${s}`,r),...o}));return t.displayName=G0(s),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xw=_n("arrow-left",Yw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Zw=_n("bookmark",$w);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ww=_n("chevron-left",Jw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tI=_n("chevron-right",eI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],iI=_n("file-text",nI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sI=_n("folder",rI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],oI=_n("grip-vertical",aI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],uI=_n("house",lI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],hI=_n("layout-dashboard",cI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],dI=_n("lock-open",fI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dg=_n("lock",mI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pI=_n("plus",gI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_I=_n("save",yI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],EI=_n("sticky-note",vI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],bI=_n("trash-2",TI),Ze={Plus:pI,Trash:bI,Save:_I,File:iI,Folder:sI,Memo:EI,ChevronRight:tI,ChevronLeft:Ww,Dashboard:hI,DragHandle:oI,Back:Xw,Bookmark:Zw},SI=()=>{};var K0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},AI=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},KT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,O=p&63;g||(O=64,c||(A=64)),r.push(t[E],t[T],t[A],t[O])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(GT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):AI(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const T=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new wI;const A=u<<2|m>>4;if(r.push(A),p!==64){const O=m<<4&240|p>>2;if(r.push(O),T!==64){const F=p<<6&192|T;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class wI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const II=function(s){const e=GT(s);return KT.encodeByteArray(e,!0)},pf=function(s){return II(s).replace(/\./g,"")},QT=function(s){try{return KT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=()=>YT().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof K0>"u")return;const s=K0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},CI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&QT(s[1]);return e&&JSON.parse(e)},Bf=()=>{try{return SI()||xI()||RI()||CI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},XT=s=>{var e,t;return(t=(e=Bf())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},NI=s=>{const e=XT(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$T=()=>{var s;return(s=Bf())==null?void 0:s.config},ZT=s=>{var e;return(e=Bf())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JT(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[pf(JSON.stringify(t)),pf(JSON.stringify(c)),""].join(".")}const xu={};function OI(){const s={prod:[],emulator:[]};for(const e of Object.keys(xu))xu[e]?s.emulator.push(e):s.prod.push(e);return s}function MI(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Q0=!1;function WT(s,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||xu[s]===e||xu[s]||Q0)return;xu[s]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=OI().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,O){A.setAttribute("width","24"),A.setAttribute("id",O),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Q0=!0,c()},A}function E(A,O){A.setAttribute("id",O),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=MI(r),O=t("text"),F=document.getElementById(O)||document.createElement("span"),H=t("learnmore"),K=document.getElementById(H)||document.createElement("a"),ie=t("preprendIcon"),ee=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Q=A.element;m(Q),E(K,H);const le=p();g(ee,ie),Q.append(ee,F,K,le),document.body.appendChild(Q)}u?(F.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function eb(){var e;const s=(e=Bf())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function LI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UI(){const s=Ft();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function tb(){return!eb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nb(){return!eb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ib(){try{return typeof indexedDB=="object"}catch{return!1}}function jI(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="FirebaseError";class Ar extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=BI,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ju.prototype.create)}}class Ju{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?qI(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Ar(o,m,r)}}function qI(s,e){return s.replace(FI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const FI=/\{\$([^}]+)}/g;function HI(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function _a(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(Y0(u)&&Y0(c)){if(!_a(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Y0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GI(s,e){const t=new KI(s,e);return t.subscribe.bind(t)}class KI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");QI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=pg),o.error===void 0&&(o.error=pg),o.complete===void 0&&(o.complete=pg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QI(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(s){return s&&s._delegate?s._delegate:s}class va{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new DI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($I(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XI(s){return s===aa?void 0:s}function $I(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const JI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},WI=Ue.INFO,ex={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},tx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=ex[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=WI,this._logHandler=tx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const nx=(s,e)=>e.some(t=>s instanceof t);let X0,$0;function ix(){return X0||(X0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rx(){return $0||($0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rb=new WeakMap,Vg=new WeakMap,sb=new WeakMap,yg=new WeakMap,gp=new WeakMap;function sx(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(ps(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&rb.set(t,s)}).catch(()=>{}),gp.set(e,s),e}function ax(s){if(Vg.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Vg.set(s,e)}let Og={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Vg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||sb.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function ox(s){Og=s(Og)}function lx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(_g(this),e,...t);return sb.set(r,e.sort?e.sort():[e]),ps(r)}:rx().includes(s)?function(...e){return s.apply(_g(this),e),ps(rb.get(this))}:function(...e){return ps(s.apply(_g(this),e))}}function ux(s){return typeof s=="function"?lx(s):(s instanceof IDBTransaction&&ax(s),nx(s,ix())?new Proxy(s,Og):s)}function ps(s){if(s instanceof IDBRequest)return sx(s);if(yg.has(s))return yg.get(s);const e=ux(s);return e!==s&&(yg.set(s,e),gp.set(e,s)),e}const _g=s=>gp.get(s);function cx(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=ps(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ps(c.result),g.oldVersion,g.newVersion,ps(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const hx=["get","getKey","getAll","getAllKeys","count"],fx=["put","add","delete","clear"],vg=new Map;function Z0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=fx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||hx.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return vg.set(e,u),u}ox(s=>({...s,get:(e,t,r)=>Z0(e,t)||s.get(e,t,r),has:(e,t)=>!!Z0(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function mx(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",J0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new mp("@firebase/app"),gx="@firebase/app-compat",px="@firebase/analytics-compat",yx="@firebase/analytics",_x="@firebase/app-check-compat",vx="@firebase/app-check",Ex="@firebase/auth",Tx="@firebase/auth-compat",bx="@firebase/database",Sx="@firebase/data-connect",Ax="@firebase/database-compat",wx="@firebase/functions",Ix="@firebase/functions-compat",xx="@firebase/installations",Rx="@firebase/installations-compat",Cx="@firebase/messaging",Nx="@firebase/messaging-compat",Dx="@firebase/performance",Vx="@firebase/performance-compat",Ox="@firebase/remote-config",Mx="@firebase/remote-config-compat",kx="@firebase/storage",Px="@firebase/storage-compat",zx="@firebase/firestore",Lx="@firebase/ai",Ux="@firebase/firestore-compat",jx="firebase",Bx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",qx={[Mg]:"fire-core",[gx]:"fire-core-compat",[yx]:"fire-analytics",[px]:"fire-analytics-compat",[vx]:"fire-app-check",[_x]:"fire-app-check-compat",[Ex]:"fire-auth",[Tx]:"fire-auth-compat",[bx]:"fire-rtdb",[Sx]:"fire-data-connect",[Ax]:"fire-rtdb-compat",[wx]:"fire-fn",[Ix]:"fire-fn-compat",[xx]:"fire-iid",[Rx]:"fire-iid-compat",[Cx]:"fire-fcm",[Nx]:"fire-fcm-compat",[Dx]:"fire-perf",[Vx]:"fire-perf-compat",[Ox]:"fire-rc",[Mx]:"fire-rc-compat",[kx]:"fire-gcs",[Px]:"fire-gcs-compat",[zx]:"fire-fst",[Ux]:"fire-fst-compat",[Lx]:"fire-vertex","fire-js":"fire-js",[jx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Map,Fx=new Map,Pg=new Map;function W0(s,e){try{s.container.addComponent(e)}catch(t){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ho(s){const e=s.name;if(Pg.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;Pg.set(e,s);for(const t of yf.values())W0(t,s);for(const t of Fx.values())W0(t,s);return!0}function pp(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Bi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ju("app","Firebase",Hx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=Bx;function ab(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:kg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(t||(t=$T()),!t)throw ys.create("no-options");const u=yf.get(o);if(u){if(_a(t,u.options)&&_a(r,u.config))return u;throw ys.create("duplicate-app",{appName:o})}const c=new ZI(o);for(const g of Pg.values())c.addComponent(g);const m=new Gx(t,r,c);return yf.set(o,m),m}function ob(s=kg){const e=yf.get(s);if(!e&&s===kg&&$T())return ab();if(!e)throw ys.create("no-app",{appName:s});return e}function _s(s,e,t){let r=qx[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(c.join(" "));return}Ho(new va(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="firebase-heartbeat-database",Qx=1,zu="firebase-heartbeat-store";let Eg=null;function lb(){return Eg||(Eg=cx(Kx,Qx,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(zu)}catch(t){console.warn(t)}}}}).catch(s=>{throw ys.create("idb-open",{originalErrorMessage:s.message})})),Eg}async function Yx(s){try{const t=(await lb()).transaction(zu),r=await t.objectStore(zu).get(ub(s));return await t.done,r}catch(e){if(e instanceof Ar)_r.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(t.message)}}}async function eE(s,e){try{const r=(await lb()).transaction(zu,"readwrite");await r.objectStore(zu).put(e,ub(s)),await r.done}catch(t){if(t instanceof Ar)_r.warn(t.message);else{const r=ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_r.warn(r.message)}}}function ub(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=1024,$x=30;class Zx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=tE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>$x){const c=eR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tE(),{heartbeatsToSend:r,unsentEntries:o}=Jx(this._heartbeatsCache.heartbeats),u=pf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return _r.warn(t),""}}}function tE(){return new Date().toISOString().substring(0,10)}function Jx(s,e=Xx){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),nE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),nE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Wx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ib()?jI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Yx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return eE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nE(s){return pf(JSON.stringify({version:2,heartbeats:s})).length}function eR(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(s){Ho(new va("platform-logger",e=>new dx(e),"PRIVATE")),Ho(new va("heartbeat",e=>new Zx(e),"PRIVATE")),_s(Mg,J0,s),_s(Mg,J0,"esm2020"),_s("fire-js","")}tR("");var nR="firebase",iR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(nR,iR,"app");var iE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,cb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function N(){}N.prototype=I.prototype,C.F=I.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(w,x,P){for(var D=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)D[ut-2]=arguments[ut];return I.prototype[x].apply(w,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,I,N){N||(N=0);const w=Array(16);if(typeof I=="string")for(var x=0;x<16;++x)w[x]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(x=0;x<16;++x)w[x]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=C.g[0],N=C.g[1],x=C.g[2];let P=C.g[3],D;D=I+(P^N&(x^P))+w[0]+3614090360&4294967295,I=N+(D<<7&4294967295|D>>>25),D=P+(x^I&(N^x))+w[1]+3905402710&4294967295,P=I+(D<<12&4294967295|D>>>20),D=x+(N^P&(I^N))+w[2]+606105819&4294967295,x=P+(D<<17&4294967295|D>>>15),D=N+(I^x&(P^I))+w[3]+3250441966&4294967295,N=x+(D<<22&4294967295|D>>>10),D=I+(P^N&(x^P))+w[4]+4118548399&4294967295,I=N+(D<<7&4294967295|D>>>25),D=P+(x^I&(N^x))+w[5]+1200080426&4294967295,P=I+(D<<12&4294967295|D>>>20),D=x+(N^P&(I^N))+w[6]+2821735955&4294967295,x=P+(D<<17&4294967295|D>>>15),D=N+(I^x&(P^I))+w[7]+4249261313&4294967295,N=x+(D<<22&4294967295|D>>>10),D=I+(P^N&(x^P))+w[8]+1770035416&4294967295,I=N+(D<<7&4294967295|D>>>25),D=P+(x^I&(N^x))+w[9]+2336552879&4294967295,P=I+(D<<12&4294967295|D>>>20),D=x+(N^P&(I^N))+w[10]+4294925233&4294967295,x=P+(D<<17&4294967295|D>>>15),D=N+(I^x&(P^I))+w[11]+2304563134&4294967295,N=x+(D<<22&4294967295|D>>>10),D=I+(P^N&(x^P))+w[12]+1804603682&4294967295,I=N+(D<<7&4294967295|D>>>25),D=P+(x^I&(N^x))+w[13]+4254626195&4294967295,P=I+(D<<12&4294967295|D>>>20),D=x+(N^P&(I^N))+w[14]+2792965006&4294967295,x=P+(D<<17&4294967295|D>>>15),D=N+(I^x&(P^I))+w[15]+1236535329&4294967295,N=x+(D<<22&4294967295|D>>>10),D=I+(x^P&(N^x))+w[1]+4129170786&4294967295,I=N+(D<<5&4294967295|D>>>27),D=P+(N^x&(I^N))+w[6]+3225465664&4294967295,P=I+(D<<9&4294967295|D>>>23),D=x+(I^N&(P^I))+w[11]+643717713&4294967295,x=P+(D<<14&4294967295|D>>>18),D=N+(P^I&(x^P))+w[0]+3921069994&4294967295,N=x+(D<<20&4294967295|D>>>12),D=I+(x^P&(N^x))+w[5]+3593408605&4294967295,I=N+(D<<5&4294967295|D>>>27),D=P+(N^x&(I^N))+w[10]+38016083&4294967295,P=I+(D<<9&4294967295|D>>>23),D=x+(I^N&(P^I))+w[15]+3634488961&4294967295,x=P+(D<<14&4294967295|D>>>18),D=N+(P^I&(x^P))+w[4]+3889429448&4294967295,N=x+(D<<20&4294967295|D>>>12),D=I+(x^P&(N^x))+w[9]+568446438&4294967295,I=N+(D<<5&4294967295|D>>>27),D=P+(N^x&(I^N))+w[14]+3275163606&4294967295,P=I+(D<<9&4294967295|D>>>23),D=x+(I^N&(P^I))+w[3]+4107603335&4294967295,x=P+(D<<14&4294967295|D>>>18),D=N+(P^I&(x^P))+w[8]+1163531501&4294967295,N=x+(D<<20&4294967295|D>>>12),D=I+(x^P&(N^x))+w[13]+2850285829&4294967295,I=N+(D<<5&4294967295|D>>>27),D=P+(N^x&(I^N))+w[2]+4243563512&4294967295,P=I+(D<<9&4294967295|D>>>23),D=x+(I^N&(P^I))+w[7]+1735328473&4294967295,x=P+(D<<14&4294967295|D>>>18),D=N+(P^I&(x^P))+w[12]+2368359562&4294967295,N=x+(D<<20&4294967295|D>>>12),D=I+(N^x^P)+w[5]+4294588738&4294967295,I=N+(D<<4&4294967295|D>>>28),D=P+(I^N^x)+w[8]+2272392833&4294967295,P=I+(D<<11&4294967295|D>>>21),D=x+(P^I^N)+w[11]+1839030562&4294967295,x=P+(D<<16&4294967295|D>>>16),D=N+(x^P^I)+w[14]+4259657740&4294967295,N=x+(D<<23&4294967295|D>>>9),D=I+(N^x^P)+w[1]+2763975236&4294967295,I=N+(D<<4&4294967295|D>>>28),D=P+(I^N^x)+w[4]+1272893353&4294967295,P=I+(D<<11&4294967295|D>>>21),D=x+(P^I^N)+w[7]+4139469664&4294967295,x=P+(D<<16&4294967295|D>>>16),D=N+(x^P^I)+w[10]+3200236656&4294967295,N=x+(D<<23&4294967295|D>>>9),D=I+(N^x^P)+w[13]+681279174&4294967295,I=N+(D<<4&4294967295|D>>>28),D=P+(I^N^x)+w[0]+3936430074&4294967295,P=I+(D<<11&4294967295|D>>>21),D=x+(P^I^N)+w[3]+3572445317&4294967295,x=P+(D<<16&4294967295|D>>>16),D=N+(x^P^I)+w[6]+76029189&4294967295,N=x+(D<<23&4294967295|D>>>9),D=I+(N^x^P)+w[9]+3654602809&4294967295,I=N+(D<<4&4294967295|D>>>28),D=P+(I^N^x)+w[12]+3873151461&4294967295,P=I+(D<<11&4294967295|D>>>21),D=x+(P^I^N)+w[15]+530742520&4294967295,x=P+(D<<16&4294967295|D>>>16),D=N+(x^P^I)+w[2]+3299628645&4294967295,N=x+(D<<23&4294967295|D>>>9),D=I+(x^(N|~P))+w[0]+4096336452&4294967295,I=N+(D<<6&4294967295|D>>>26),D=P+(N^(I|~x))+w[7]+1126891415&4294967295,P=I+(D<<10&4294967295|D>>>22),D=x+(I^(P|~N))+w[14]+2878612391&4294967295,x=P+(D<<15&4294967295|D>>>17),D=N+(P^(x|~I))+w[5]+4237533241&4294967295,N=x+(D<<21&4294967295|D>>>11),D=I+(x^(N|~P))+w[12]+1700485571&4294967295,I=N+(D<<6&4294967295|D>>>26),D=P+(N^(I|~x))+w[3]+2399980690&4294967295,P=I+(D<<10&4294967295|D>>>22),D=x+(I^(P|~N))+w[10]+4293915773&4294967295,x=P+(D<<15&4294967295|D>>>17),D=N+(P^(x|~I))+w[1]+2240044497&4294967295,N=x+(D<<21&4294967295|D>>>11),D=I+(x^(N|~P))+w[8]+1873313359&4294967295,I=N+(D<<6&4294967295|D>>>26),D=P+(N^(I|~x))+w[15]+4264355552&4294967295,P=I+(D<<10&4294967295|D>>>22),D=x+(I^(P|~N))+w[6]+2734768916&4294967295,x=P+(D<<15&4294967295|D>>>17),D=N+(P^(x|~I))+w[13]+1309151649&4294967295,N=x+(D<<21&4294967295|D>>>11),D=I+(x^(N|~P))+w[4]+4149444226&4294967295,I=N+(D<<6&4294967295|D>>>26),D=P+(N^(I|~x))+w[11]+3174756917&4294967295,P=I+(D<<10&4294967295|D>>>22),D=x+(I^(P|~N))+w[2]+718787259&4294967295,x=P+(D<<15&4294967295|D>>>17),D=N+(P^(x|~I))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+P&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const N=I-this.blockSize,w=this.C;let x=this.h,P=0;for(;P<I;){if(x==0)for(;P<=N;)o(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<I;)if(w[x++]=C.charCodeAt(P++),x==this.blockSize){o(this,w),x=0;break}}else for(;P<I;)if(w[x++]=C[P++],x==this.blockSize){o(this,w),x=0;break}}this.h=x,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,N=0;N<4;++N)for(let w=0;w<32;w+=8)C[I++]=this.g[N]>>>w&255;return C};function u(C,I){var N=m;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=I(C)}function c(C,I){this.h=I;const N=[];let w=!0;for(let x=C.length-1;x>=0;x--){const P=C[x]|0;w&&P==I||(N[x]=P,w=!1)}this.g=N}var m={};function g(C){return-128<=C&&C<128?u(C,function(I){return new c([I|0],I<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return K(p(-C));const I=[];let N=1;for(let w=0;C>=N;w++)I[w]=C/N|0,N*=4294967296;return new c(I,0)}function E(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return K(E(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(I,8));let w=T;for(let P=0;P<C.length;P+=8){var x=Math.min(8,C.length-P);const D=parseInt(C.substring(P,P+x),I);x<8?(x=p(Math.pow(I,x)),w=w.j(x).add(p(D))):(w=w.j(N),w=w.add(p(D)))}return w}var T=g(0),A=g(1),O=g(16777216);s=c.prototype,s.m=function(){if(H(this))return-K(this).m();let C=0,I=1;for(let N=0;N<this.g.length;N++){const w=this.i(N);C+=(w>=0?w:4294967296+w)*I,I*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(F(this))return"0";if(H(this))return"-"+K(this).toString(C);const I=p(Math.pow(C,6));var N=this;let w="";for(;;){const x=le(N,I).g;N=ie(N,x.j(I));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=x,F(N))return P+w;for(;P.length<6;)P="0"+P;w=P+w}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function F(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function H(C){return C.h==-1}s.l=function(C){return C=ie(this,C),H(C)?-1:F(C)?0:1};function K(C){const I=C.g.length,N=[];for(let w=0;w<I;w++)N[w]=~C.g[w];return new c(N,~C.h).add(A)}s.abs=function(){return H(this)?K(this):this},s.add=function(C){const I=Math.max(this.g.length,C.g.length),N=[];let w=0;for(let x=0;x<=I;x++){let P=w+(this.i(x)&65535)+(C.i(x)&65535),D=(P>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);w=D>>>16,P&=65535,D&=65535,N[x]=D<<16|P}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ie(C,I){return C.add(K(I))}s.j=function(C){if(F(this)||F(C))return T;if(H(this))return H(C)?K(this).j(K(C)):K(K(this).j(C));if(H(C))return K(this.j(K(C)));if(this.l(O)<0&&C.l(O)<0)return p(this.m()*C.m());const I=this.g.length+C.g.length,N=[];for(var w=0;w<2*I;w++)N[w]=0;for(w=0;w<this.g.length;w++)for(let x=0;x<C.g.length;x++){const P=this.i(w)>>>16,D=this.i(w)&65535,ut=C.i(x)>>>16,bt=C.i(x)&65535;N[2*w+2*x]+=D*bt,ee(N,2*w+2*x),N[2*w+2*x+1]+=P*bt,ee(N,2*w+2*x+1),N[2*w+2*x+1]+=D*ut,ee(N,2*w+2*x+1),N[2*w+2*x+2]+=P*ut,ee(N,2*w+2*x+2)}for(C=0;C<I;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=I;C<2*I;C++)N[C]=0;return new c(N,0)};function ee(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function Q(C,I){this.g=C,this.h=I}function le(C,I){if(F(I))throw Error("division by zero");if(F(C))return new Q(T,T);if(H(C))return I=le(K(C),I),new Q(K(I.g),K(I.h));if(H(I))return I=le(C,K(I)),new Q(K(I.g),I.h);if(C.g.length>30){if(H(C)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var N=A,w=I;w.l(C)<=0;)N=_e(N),w=_e(w);var x=de(N,1),P=de(w,1);for(w=de(w,2),N=de(N,2);!F(w);){var D=P.add(w);D.l(C)<=0&&(x=x.add(N),P=D),w=de(w,1),N=de(N,1)}return I=ie(C,x.j(I)),new Q(x,I)}for(x=T;C.l(I)>=0;){for(N=Math.max(1,Math.floor(C.m()/I.m())),w=Math.ceil(Math.log(N)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),P=p(N),D=P.j(I);H(D)||D.l(C)>0;)N-=w,P=p(N),D=P.j(I);F(P)&&(P=A),x=x.add(P),C=ie(C,D)}return new Q(x,C)}s.B=function(C){return le(this,C).h},s.and=function(C){const I=Math.max(this.g.length,C.g.length),N=[];for(let w=0;w<I;w++)N[w]=this.i(w)&C.i(w);return new c(N,this.h&C.h)},s.or=function(C){const I=Math.max(this.g.length,C.g.length),N=[];for(let w=0;w<I;w++)N[w]=this.i(w)|C.i(w);return new c(N,this.h|C.h)},s.xor=function(C){const I=Math.max(this.g.length,C.g.length),N=[];for(let w=0;w<I;w++)N[w]=this.i(w)^C.i(w);return new c(N,this.h^C.h)};function _e(C){const I=C.g.length+1,N=[];for(let w=0;w<I;w++)N[w]=C.i(w)<<1|C.i(w-1)>>>31;return new c(N,C.h)}function de(C,I){const N=I>>5;I%=32;const w=C.g.length-N,x=[];for(let P=0;P<w;P++)x[P]=I>0?C.i(P+N)>>>I|C.i(P+N+1)<<32-I:C.i(P+N);return new c(x,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,vs=c}).apply(typeof iE<"u"?iE:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,Su,fb,Wh,zg,db,mb,gb;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var U=h[S];if(!(U in v))break e;v=v[U]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,U,G){for(var re=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)re[Re-2]=arguments[Re];return y.prototype[U].apply(S,re)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function F(h,y){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=h.length||0;const G=U.length||0;h.length=v+G;for(let re=0;re<G;re++)h[v+re]=U[re]}else h.push(U)}}class H{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function K(h){c.setTimeout(()=>{throw h},0)}function ie(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ee{constructor(){this.h=this.g=null}add(y,v){const S=Q.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Q=new H(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,de=!1,C=new ee,I=()=>{const h=Promise.resolve(void 0);_e=()=>{h.then(N)}};function N(){for(var h;h=ie();){try{h.h.call(h.g)}catch(v){K(v)}var y=Q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}de=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ut(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(ut,x),ut.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ut.Z.h.call(this)},ut.prototype.h=function(){ut.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),X=0;function ae(h,y,v,S,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=U,this.key=++X,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ye(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function De(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function k(h){const y={};for(const v in h)y[v]=h[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)h[v]=S[v];for(let G=0;G<W.length;G++)v=W[G],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,y,v,S,U){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const re=Ve(h,y,S,U);return re>-1?(y=h[re],v||(y.fa=!1)):(y=new ae(y,this.src,G,!!S,U),y.fa=v,h.push(y)),y};function Ae(h,y){const v=y.type;if(v in h.g){var S=h.g[v],U=Array.prototype.indexOf.call(S,y,void 0),G;(G=U>=0)&&Array.prototype.splice.call(S,U,1),G&&(pe(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ve(h,y,v,S){for(let U=0;U<h.length;++U){const G=h[U];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==S)return U}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ut={};function ft(h,y,v,S,U){if(Array.isArray(y)){for(let G=0;G<y.length;G++)ft(h,y[G],v,S,U);return null}return v=ml(v),h&&h[bt]?h.J(y,v,m(S)?!!S.capture:!1,U):Rs(h,y,v,!1,S,U)}function Rs(h,y,v,S,U,G){if(!y)throw Error("Invalid event type");const re=m(U)?!!U.capture:!!U;let Re=Cs(h);if(Re||(h[Fe]=Re=new he(h)),v=Re.add(y,v,S,re,G),v.proxy)return v;if(S=Va(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)P||(U=re),U===void 0&&(U=!1),h.addEventListener(y.toString(),S,U);else if(h.attachEvent)h.attachEvent(_i(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Va(){function h(v){return y.call(h.src,h.listener,v)}const y=fl;return h}function Oa(h,y,v,S,U){if(Array.isArray(y))for(var G=0;G<y.length;G++)Oa(h,y[G],v,S,U);else S=m(S)?!!S.capture:!!S,v=ml(v),h&&h[bt]?(h=h.i,G=String(y).toString(),G in h.g&&(y=h.g[G],v=Ve(y,v,S,U),v>-1&&(pe(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[G],h.h--)))):h&&(h=Cs(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ve(y,v,S,U)),(v=h>-1?y[h]:null)&&Ma(v))}function Ma(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[bt])Ae(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(_i(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Cs(y))?(Ae(v,h),v.h==0&&(v.src=null,y[Fe]=null)):pe(h)}}}function _i(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function fl(h,y){if(h.da)h=!0;else{y=new ut(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Ma(h),h=v.call(S,y)}return h}function Cs(h){return h=h[Fe],h instanceof he?h:null}var dl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ml(h){return typeof h=="function"?h:(h[dl]||(h[dl]=function(y){return h.handleEvent(y)}),h[dl])}function xt(){w.call(this),this.i=new he(this),this.M=this,this.G=null}T(xt,w),xt.prototype[bt]=!0,xt.prototype.removeEventListener=function(h,y,v,S){Oa(this,h,y,v,S)};function jt(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var U=y;y=new x(S,h),ue(y,U)}U=!0;let G,re;if(v)for(re=v.length-1;re>=0;re--)G=y.g=v[re],U=xr(G,S,!0,y)&&U;if(G=y.g=h,U=xr(G,S,!0,y)&&U,U=xr(G,S,!1,y)&&U,v)for(re=0;re<v.length;re++)G=y.g=v[re],U=xr(G,S,!1,y)&&U}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)pe(v[S]);delete h.g[y],h.h--}}this.G=null},xt.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},xt.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function xr(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let G=0;G<y.length;++G){const re=y[G];if(re&&!re.da&&re.capture==v){const Re=re.listener,At=re.ha||re.src;re.fa&&Ae(h.i,re),U=Re.call(At,S)!==!1&&U}}return U&&!S.defaultPrevented}function fd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function gc(h){h.g=fd(()=>{h.g=null,h.i&&(h.i=!1,gc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class dn extends w{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:gc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(h){w.call(this),this.h=h,this.g={}}T(Ns,w);var gl=[];function pl(h){ye(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ma(y)},h),h.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),pl(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rr=c.JSON.stringify,dd=c.JSON.parse,pc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function yc(){}function _c(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){x.call(this,"d")}T($t,x);function Bn(){x.call(this,"c")}T(Bn,x);var St={},vc=null;function ka(){return vc=vc||new xt}St.Ia="serverreachability";function Ec(h){x.call(this,St.Ia,h)}T(Ec,x);function vi(h){const y=ka();jt(y,new Ec(y))}St.STAT_EVENT="statevent";function Ds(h,y){x.call(this,St.STAT_EVENT,h),this.stat=y}T(Ds,x);function Rt(h){const y=ka();jt(y,new Ds(y,h))}St.Ja="timingevent";function Ei(h,y){x.call(this,St.Ja,h),this.size=y}T(Ei,x);function Ti(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function md(h,y,v,S,U,G){h.info(function(){if(h.g)if(G){var re="",Re=G.split("&");for(let Ye=0;Ye<Re.length;Ye++){var At=Re[Ye].split("=");if(At.length>1){const dt=At[0];At=At[1];const Gn=dt.split("_");re=Gn.length>=2&&Gn[1]=="type"?re+(dt+"="+At+"&"):re+(dt+"=redacted&")}}}else re=null;else re=G;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+y+`
`+v+`
`+re})}function Tc(h,y,v,S,U,G,re){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+y+`
`+v+`
`+G+" "+re})}function bi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+gd(h,v)+(S?" "+S:"")})}function Vs(h,y){h.info(function(){return"TIMEOUT: "+y})}si.prototype.info=function(){};function gd(h,y){if(!h.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var v=G[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let re=1;re<S.length;re++)S[re]=""}}}}return Rr(G)}catch{return y}}var Os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_l;function Ms(){}T(Ms,yc),Ms.prototype.g=function(){return new XMLHttpRequest},_l=new Ms;function Xi(h){return encodeURIComponent(String(h))}function bc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function ai(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var Ct={},Gt={};function Si(h,y,v){h.M=1,h.A=ks(Dt(y)),h.u=v,h.R=!0,Pa(h,null)}function Pa(h,y){h.F=Date.now(),Ai(h),h.B=Dt(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ja(v.i,"t",S),h.C=0,v=h.j.L,h.h=new oi,h.g=zc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new dn(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(gl[0]=U.toString()),U=gl);for(let G=0;G<U.length;G++){const re=ft(v,U[G],S||y.handleEvent,!1,y.h||y);if(!re)break;y.g[re.key]=re}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),vi(),md(h.i,h.v,h.B,h.l,h.S,h.u)}ai.prototype.ba=function(h){h=h.target;const y=this.O;y&&ci(h)==3?y.j():this.Y(h)},ai.prototype.Y=function(h){try{if(h==this.g)e:{const Re=ci(this.g),At=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Re!=4||At==7||(At==8||Ye<=0?vi(3):vi(2)),wi(this);var y=this.g.ca();this.X=y;var v=pd(this);if(this.o=y==200,Tc(this.i,this.v,this.B,this.l,this.S,Re,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var G=S;break t}}G=null}if(h=G)bi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,h);else{this.o=!1,this.m=3,Rt(12),xn(this),qn(this);break e}}if(this.R){h=!0;let dt;for(;!this.K&&this.C<v.length;)if(dt=Ac(this,v),dt==Gt){Re==4&&(this.m=4,Rt(14),h=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Ct){this.m=4,Rt(15),bi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else bi(this.i,this.l,dt,null),Ii(this,dt);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||v.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)bi(this.i,this.l,v,"[Invalid Chunked Response]"),xn(this),qn(this);else if(v.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ol(re),re.P=!0,Rt(11))}}else bi(this.i,this.l,v,null),Ii(this,v);Re==4&&xn(this),this.o&&!this.K&&(Re==4?Oc(this.j,this):(this.o=!1,Ai(this)))}else Zi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),xn(this),qn(this)}}}catch{}finally{}};function pd(h){if(!Sc(h))return h.g.la();const y=Zt(h.g);if(y==="")return"";let v="";const S=y.length,U=ci(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xn(h),qn(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<S;G++)h.h.h=!0,v+=h.h.i.decode(y[G],{stream:!(U&&G==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Sc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ac(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?Gt:(v=Number(y.substring(v,S)),isNaN(v)?Ct:(S+=1,S+v>y.length?Gt:(y=y.slice(S,S+v),h.C=S+v,y)))}ai.prototype.cancel=function(){this.K=!0,xn(this)};function Ai(h){h.T=Date.now()+h.H,za(h,h.H)}function za(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ti(p(h.aa,h),y)}function wi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ai.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(vi(),Rt(17)),xn(this),this.m=2,qn(this)):za(this,this.T-h)};function qn(h){h.j.I==0||h.K||Oc(h.j,h)}function xn(h){wi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,pl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ii(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ri(v.h,h))){if(!h.L&&Ri(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ga(v),Pr(v);else break e;qs(v),Rt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ti(p(v.Va,v),6e3));xi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Mi(v,11)}else if((h.L||v.g==h)&&Ga(v),!D(y))for(U=v.Ba.g.parse(y),y=0;y<U.length;y++){let Ye=U[y];const dt=Ye[0];if(!(dt<=v.K))if(v.K=dt,Ye=Ye[1],v.I==2)if(Ye[0]=="c"){v.M=Ye[1],v.ba=Ye[2];const Gn=Ye[3];Gn!=null&&(v.ka=Gn,v.j.info("VER="+v.ka));const ki=Ye[4];ki!=null&&(v.za=ki,v.j.info("SVER="+v.za));const hi=Ye[5];hi!=null&&typeof hi=="number"&&hi>0&&(S=1.5*hi,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const fi=h.g;if(fi){const Fs=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var G=S.h;G.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Tl(G,G.h),G.h=null))}if(S.G){const Ka=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ka&&(S.wa=Ka,Je(S.J,S.G,Ka))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var re=h;if(S.na=Pc(S,S.L?S.ba:null,S.W),re.L){bl(S.h,re);var Re=re,At=S.O;At&&(Re.H=At),Re.D&&(wi(Re),Ai(Re)),S.g=re}else Dc(S);v.i.length>0&&Oi(v)}else Ye[0]!="stop"&&Ye[0]!="close"||Mi(v,7);else v.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Mi(v,7):Dl(v):Ye[0]!="noop"&&v.l&&v.l.qa(Ye),v.A=0)}}vi(4)}catch{}}var Nt=class{constructor(h,y){this.g=h,this.map=y}};function vl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function El(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function xi(h){return h.h?1:h.g?h.g.size:0}function Ri(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Tl(h,y){h.g?h.g.add(y):h.h=y}function bl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}vl.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return O(h.i)}var wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let U,G=null;S>=0?(U=h[v].substring(0,S),G=h[v].substring(S+1)):U=h[v],y(U,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Rn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Rn?(this.l=h.l,Kt(this,h.j),this.o=h.o,this.g=h.g,Cr(this,h.u),this.h=h.h,Al(this,Cc(h.i)),this.m=h.m):h&&(y=String(h).match(wc))?(this.l=!1,Kt(this,y[1]||"",!0),this.o=Ci(y[2]||""),this.g=Ci(y[3]||"",!0),Cr(this,y[4]),this.h=Ci(y[5]||"",!0),Al(this,y[6]||"",!0),this.m=Ci(y[7]||"")):(this.l=!1,this.i=new Dr(null,this.l))}Rn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ps(y,Ua,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ps(y,Ua,!0),"@"),h.push(Xi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ps(v,v.charAt(0)=="/"?wl:Ic,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ps(v,xc)),h.join("")},Rn.prototype.resolve=function(h){const y=Dt(this);let v=!!h.j;v?Kt(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Cr(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=y.h.lastIndexOf("/");U!=-1&&(S=y.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const G=[];for(let re=0;re<U.length;){const Re=U[re++];Re=="."?S&&re==U.length&&G.push(""):Re==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&re==U.length&&G.push("")):(G.push(Re),S=!0)}S=G.join("/")}else S=U}return v?y.h=S:v=h.i.toString()!=="",v?Al(y,Cc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Dt(h){return new Rn(h)}function Kt(h,y,v){h.j=v?Ci(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Cr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Al(h,y,v){y instanceof Dr?(h.i=y,Ba(h.i,h.l)):(v||(y=Ps(y,Nr)),h.i=new Dr(y,h.l))}function Je(h,y,v){h.i.set(y,v)}function ks(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ci(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ps(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,vn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ua=/[#\/\?@]/g,Ic=/[#\?:]/g,wl=/[#\?]/g,Nr=/[#\?@]/g,xc=/#/g;function Dr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function En(h){h.g||(h.g=new Map,h.h=0,h.i&&La(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Dr.prototype,s.add=function(h,y){En(this),this.i=null,h=Vr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Rc(h,y){En(h),y=Vr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Il(h,y){return En(h),y=Vr(h,y),h.g.has(y)}s.forEach=function(h,y){En(this),this.g.forEach(function(v,S){v.forEach(function(U){h.call(y,U,S,this)},this)},this)};function xl(h,y){En(h);let v=[];if(typeof y=="string")Il(h,y)&&(v=v.concat(h.g.get(Vr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return En(this),this.i=null,h=Vr(this,h),Il(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=xl(this,h),h.length>0?String(h[0]):y):y};function ja(h,y,v){Rc(h,y),v.length>0&&(h.i=null,h.g.set(Vr(h,y),O(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const U=Xi(v);v=xl(this,v);for(let G=0;G<v.length;G++){let re=U;v[G]!==""&&(re+="="+Xi(v[G])),h.push(re)}}return this.i=h.join("&")};function Cc(h){const y=new Dr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Vr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ba(h,y){y&&!h.j&&(En(h),h.i=null,h.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(Rc(this,S),ja(this,U,v))},h)),h.j=y}function li(h,y){const v=new si;if(c.Image){const S=new Image;S.onload=E(Fn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(Fn,v,"TestLoadImage: error",!1,y,S),S.onabort=E(Fn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(Fn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Rl(h,y){const v=new si,S=new AbortController,U=setTimeout(()=>{S.abort(),Fn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(G=>{clearTimeout(U),G.ok?Fn(v,"TestPingServer: ok",!0,y):Fn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Fn(v,"TestPingServer: error",!1,y)})}function Fn(h,y,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Or(){this.g=new pc}function Ni(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ni,yc),Ni.prototype.g=function(){return new zs(this.i,this.h)};function zs(h,y){xt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(zs,xt),s=zs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ui(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function qa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Mr(this):ui(this),this.readyState==3&&qa(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Mr(this))},s.Na=function(h){this.g&&(this.response=h,Mr(this))},s.ga=function(){this.g&&Mr(this)};function Mr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ui(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ui(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hn(h){let y="";return ye(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ls(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Hn(v),typeof h=="string"?v!=null&&Xi(v):Je(h,y,v))}function rt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,xt);var Di=/^https?$/i,Cl=["POST","PUT"];s=rt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_l.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){Us(this,G);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())v.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,re]of v)this.g.setRequestHeader(G,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){Us(this,G)}};function Us(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nl(h),$i(h)}function Nl(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),$i(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),rt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},s.Xa=function(){js(this)};function js(h){if(h.h&&typeof u<"u"){if(h.v&&ci(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),ci(h)==4){h.h=!1;try{const G=h.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=G===0){let re=String(h.D).match(wc)[1]||null;!re&&c.self&&c.self.location&&(re=c.self.location.protocol.slice(0,-1)),S=!Di.test(re?re.toLowerCase():"")}v=S}if(v)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var U=ci(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",Nl(h)}}finally{$i(h)}}}}function $i(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||jt(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ci(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),dd(y)}};function Zt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(h){const y={};h=(h.g&&ci(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(D(h[S]))continue;var v=bc(h[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[U]||[];y[U]=G,G.push(v)}De(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function kr(h){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,h),this.Za=Vi("retryDelaySeedMs",1e4,h),this.Ta=Vi("forwardChannelMaxRetries",2,h),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new vl(h&&h.concurrentRequestLimit),this.Ba=new Or,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=kr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){Rt(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Pc(this,null,this.W),Oi(this)};function Dl(h){if(Fa(h),h.I==3){var y=h.V++,v=Dt(h.J);if(Je(v,"SID",h.M),Je(v,"RID",y),Je(v,"TYPE","terminate"),Bs(h,v),y=new ai(h,h.j,y),y.M=2,y.A=ks(Dt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=zc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ai(y)}kc(h)}function Pr(h){h.g&&(Ol(h),h.g.cancel(),h.g=null)}function Fa(h){Pr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ga(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Oi(h){if(!El(h.h)&&!h.m){h.m=!0;var y=h.Ea;_e||I(),de||(_e(),de=!0),C.add(y,h),h.D=0}}function Ha(h,y){return xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ti(p(h.Ea,h,y),Mc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new ai(this,this.j,h);let G=this.o;if(this.U&&(G?(G=k(G),ue(G,this.U)):G=this.U),this.u!==null||this.R||(U.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Nc(this,U,y),v=Dt(this.J),Je(v,"RID",h),Je(v,"CVER",22),this.G&&Je(v,"X-HTTP-Session-Id",this.G),Bs(this,v),G&&(this.R?y="headers="+Xi(Hn(G))+"&"+y:this.u&&Ls(v,this.u,G)),Tl(this.h,U),this.Ra&&Je(v,"TYPE","init"),this.S?(Je(v,"$req",y),Je(v,"SID","null"),U.U=!0,Si(U,v,null)):Si(U,v,y),this.I=2}}else this.I==3&&(h?Vl(this,h):this.i.length==0||El(this.h)||Vl(this))};function Vl(h,y){var v;y?v=y.l:v=h.V++;const S=Dt(h.J);Je(S,"SID",h.M),Je(S,"RID",v),Je(S,"AID",h.K),Bs(h,S),h.u&&h.o&&Ls(S,h.u,h.o),v=new ai(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Nc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Tl(h.h,v),Si(v,S,y)}function Bs(h,y){h.H&&ye(h.H,function(v,S){Je(y,S,v)}),h.l&&ye({},function(v,S){Je(y,S,v)})}function Nc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var U=h.i;let Re=-1;for(;;){const At=["count="+v];Re==-1?v>0?(Re=U[0].g,At.push("ofs="+Re)):Re=0:At.push("ofs="+Re);let Ye=!0;for(let dt=0;dt<v;dt++){var G=U[dt].g;const Gn=U[dt].map;if(G-=Re,G<0)Re=Math.max(0,U[dt].g-100),Ye=!1;else try{G="req"+G+"_"||"";try{var re=Gn instanceof Map?Gn:Object.entries(Gn);for(const[ki,hi]of re){let fi=hi;m(hi)&&(fi=Rr(hi)),At.push(G+ki+"="+encodeURIComponent(fi))}}catch(ki){throw At.push(G+"type="+encodeURIComponent("_badmap")),ki}}catch{S&&S(Gn)}}if(Ye){re=At.join("&");break e}}re=void 0}return h=h.i.splice(0,v),y.G=h,re}function Dc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;_e||I(),de||(_e(),de=!0),C.add(y,h),h.A=0}}function qs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ti(p(h.Da,h),Mc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Vc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ti(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Pr(this),Vc(this))};function Ol(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Vc(h){h.g=new ai(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Dt(h.na);Je(y,"RID","rpc"),Je(y,"SID",h.M),Je(y,"AID",h.K),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(y,"TO",h.ia),Je(y,"TYPE","xmlhttp"),Bs(h,y),h.u&&h.o&&Ls(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=ks(Dt(y)),v.u=null,v.R=!0,Pa(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Pr(this),qs(this),Rt(19))};function Ga(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Oc(h,y){var v=null;if(h.g==y){Ga(h),Ol(h),h.g=null;var S=2}else if(Ri(h.h,y))v=y.G,bl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var U=h.D;S=ka(),jt(S,new Ei(S,v)),Oi(h)}else Dc(h);else if(U=y.m,U==3||U==0&&y.X>0||!(S==1&&Ha(h,y)||S==2&&qs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),U){case 1:Mi(h,5);break;case 4:Mi(h,10);break;case 3:Mi(h,6);break;default:Mi(h,2)}}}function Mc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Mi(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const U=!S;S=new Rn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Kt(S,"https"),ks(S),U?li(S.toString(),v):Rl(S.toString(),v)}else Rt(2);h.I=0,h.l&&h.l.pa(y),kc(h),Fa(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function kc(h){if(h.I=0,h.ja=[],h.l){const y=Sl(h.h);(y.length!=0||h.i.length!=0)&&(F(h.ja,y),F(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Pc(h,y,v){var S=v instanceof Rn?Dt(v):new Rn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Cr(S,S.u);else{var U=c.location;S=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const G=new Rn(null);S&&Kt(G,S),y&&(G.g=y),U&&Cr(G,U),v&&(G.h=v),S=G}return v=h.G,y=h.wa,v&&y&&Je(S,v,y),Je(S,"VER",h.ka),Bs(h,S),S}function zc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new rt(new Ni({ab:v})):new rt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lc(){}s=Lc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function zr(){}zr.prototype.g=function(h,y){return new mn(h,y)};function mn(h,y){xt.call(this),this.g=new kr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ji(this)}T(mn,xt),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Dl(this.g)},mn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Rr(h),h=v);y.i.push(new Nt(y.Ya++,h)),y.I==3&&Oi(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,Dl(this.g),delete this.g,mn.Z.N.call(this)};function Uc(h){$t.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Uc,$t);function jc(){Bn.call(this),this.status=1}T(jc,Bn);function Ji(h){this.g=h}T(Ji,Lc),Ji.prototype.ra=function(){jt(this.g,"a")},Ji.prototype.qa=function(h){jt(this.g,new Uc(h))},Ji.prototype.pa=function(h){jt(this.g,new jc)},Ji.prototype.oa=function(){jt(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,gb=function(){return new zr},mb=function(){return ka()},db=St,zg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Wh=Os,yl.COMPLETE="complete",fb=yl,_c.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Su=_c,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,hb=rt}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const rE="@firebase/firestore",sE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new mp("@firebase/firestore");function Vo(){return Ea.logLevel}function ne(s,...e){if(Ea.logLevel<=Ue.DEBUG){const t=e.map(yp);Ea.debug(`Firestore (${ol}): ${s}`,...t)}}function pn(s,...e){if(Ea.logLevel<=Ue.ERROR){const t=e.map(yp);Ea.error(`Firestore (${ol}): ${s}`,...t)}}function Ta(s,...e){if(Ea.logLevel<=Ue.WARN){const t=e.map(yp);Ea.warn(`Firestore (${ol}): ${s}`,...t)}}function yp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pb(s,r,t)}function pb(s,e,t){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pn(r),new Error(r)}function ve(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||pb(e,o,r)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class sR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class aR{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new yb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class oR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new oR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const r=u=>{u.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new aE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=cR(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function we(s,e){return s<e?-1:s>e?1:0}function Lg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Tg(o)===Tg(u)?we(o,u):Tg(o)?1:-1}return we(s.length,e.length)}const hR=55296,fR=57343;function Tg(s){const e=s.charCodeAt(0);return e>=hR&&e<=fR}function Go(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function _b(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="__name__";class ji{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=ji.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return we(e.length,t.length)}static compareSegments(e,t){const r=ji.isNumericId(e),o=ji.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?ji.extractNumericId(e).compare(ji.extractNumericId(t)):Lg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class $e extends ji{construct(e,t,r){return new $e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new $e(t)}static emptyPath(){return new $e([])}}const dR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends ji{construct(e,t,r){return new _t(e,t,r)}static isValidIdentifier(e){return dR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oE}static keyField(){return new _t([oE])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new se(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new se(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new se(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new se(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe($e.fromString(e))}static fromName(e){return new oe($e.fromString(e).popFirst(5))}static empty(){return new oe($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(s,e,t){if(!t)throw new se(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function mR(s,e,t,r){if(e===!0&&r===!0)throw new se(Z.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function lE(s){if(!oe.isDocumentKey(s))throw new se(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function uE(s){if(oe.isDocumentKey(s))throw new se(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Eb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function qf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":me(12329,{type:typeof s})}function vr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qf(s);throw new se(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(s,e){const t={typeString:s};return e&&(t.value=e),t}function ec(s,e){if(!Eb(s))throw new se(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new se(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=-62135596800,hE=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*hE);return new tt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cE)throw new se(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ec(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:zt("string",tt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new tt(0,0))}static max(){return new Te(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=-1;class _f{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Ug(s){return s.fields.find((e=>e.kind===2))}function oa(s){return s.fields.filter((e=>e.kind!==2))}_f.UNKNOWN_ID=-1;class ef{constructor(e,t){this.fieldPath=e,this.kind=t}}class Uu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Uu(0,jn.min())}}function gR(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(r===1e9?new tt(t+1,0):new tt(t,r));return new jn(o,oe.empty(),e)}function Tb(s){return new jn(s.readTime,s.key,Lu)}class jn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new jn(Te.min(),oe.empty(),Lu)}static max(){return new jn(Te.max(),oe.empty(),Lu)}}function vp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(s.documentKey,e.documentKey),t!==0?t:we(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==bb)throw s;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,r)=>{t(e)}))}static reject(e){return new L(((t,r)=>{r(e)}))}static waitFor(e){return new L(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>r(g)))})),c=!0,u===o&&t()}))}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next((o=>o?L.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new L(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new L(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="SimpleDb";class Ff{static open(e,t,r,o){try{return new Ff(t,e.transaction(o,r))}catch(u){throw new Ru(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ru(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Ep(r.target.error);this.S.reject(new Ru(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(Ln,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yR(t)}}class Es{static delete(e){return ne(Ln,"Removing database:",e),ua(YT().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ib())return!1;if(Es.F())return!0;const e=Ft(),t=Es.M(e),r=0<t&&t<10,o=Ab(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Es.M(Ft())===12.2&&pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(Ln,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{r(new Ru(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new se(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new se(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ru(e,c))},o.onupgradeneeded=u=>{ne(Ln,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ne(Ln,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Ff.open(this.db,e,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),L.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ne(Ln,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ab(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pR{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ua(this.U.delete())}}class Ru extends se{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Is(s){return s.name==="IndexedDbTransactionError"}class yR{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(Ln,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(Ln,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ua(r)}add(e){return ne(Ln,"ADD",this.store.name,e,e),ua(this.store.add(e))}get(e){return ua(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(Ln,"GET",this.store.name,e,t),t)))}delete(e){return ne(Ln,"DELETE",this.store.name,e),ua(this.store.delete(e))}count(){return ne(Ln,"COUNT",this.store.name),ua(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new L(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){ne(Ln,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new L(((r,o)=>{t.onerror=u=>{const c=Ep(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(e,t){const r=[];return new L(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new pR(m),p=t(m.primaryKey,m.value,g);if(p instanceof L){const E=p.catch((T=>(g.done(),L.reject(T))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>L.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ua(s){return new L(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=Ep(r.target.error);t(o)}}))}let fE=!1;function Ep(s){const e=Es.M(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fE||(fE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Cu="IndexBackfiller";class _R{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(Cu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ne(Cu,`Documents written: ${t}`)}catch(t){Is(t)?ne(Cu,"Ignoring IndexedDB error during index backfill: ",t):await Ca(t)}await this.re(6e4)}))}}class vR{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return L.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ne(Cu,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ne(Cu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const c=Tb(u);vp(c,r)>0&&(r=c)})),new jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ni.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=-1;function Hf(s){return s==null}function ju(s){return s===0&&1/s==-1/0}function ER(s){return typeof s=="number"&&Number.isInteger(s)&&!ju(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="";function fn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=dE(e)),e=TR(s.get(t),e);return dE(e)}function TR(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case vf:t+="";break;default:t+=u}}return t}function dE(s){return s+vf+""}function qi(s){const e=s.length;if(ve(e>=2,64408,{path:s}),e===2)return ve(s.charAt(0)===vf&&s.charAt(1)==="",56145,{path:s}),$e.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=s.indexOf(vf,u);switch((c<0||c>t)&&me(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:me(61167,{path:s})}u=c+2}return new $e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="remoteDocuments",tc="owner",So="owner",Bu="mutationQueues",bR="userId",pi="mutations",mE="batchId",da="userMutationsIndex",gE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(s,e){return[s,fn(e)]}function wb(s,e,t){return[s,fn(e),t]}const SR={},Ko="documentMutations",Ef="remoteDocumentsV14",AR=["prefixPath","collectionGroup","readTime","documentId"],nf="documentKeyIndex",wR=["prefixPath","collectionGroup","documentId"],Ib="collectionGroupIndex",IR=["collectionGroup","readTime","prefixPath","documentId"],qu="remoteDocumentGlobal",jg="remoteDocumentGlobalKey",Qo="targets",xb="queryTargetsIndex",xR=["canonicalId","targetId"],Yo="targetDocuments",RR=["targetId","path"],Tp="documentTargetsIndex",CR=["path","targetId"],Tf="targetGlobalKey",ga="targetGlobal",Fu="collectionParents",NR=["collectionId","parent"],Xo="clientMetadata",DR="clientId",Gf="bundles",VR="bundleId",Kf="namedQueries",OR="name",bp="indexConfiguration",MR="indexId",Bg="collectionGroupIndex",kR="collectionGroup",Nu="indexState",PR=["indexId","uid"],Rb="sequenceNumberIndex",zR=["uid","sequenceNumber"],Du="indexEntries",LR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cb="documentKeyIndex",UR=["indexId","uid","orderedDocumentKey"],Qf="documentOverlays",jR=["userId","collectionPath","documentId"],qg="collectionPathOverlayIndex",BR=["userId","collectionPath","largestBatchId"],Nb="collectionGroupOverlayIndex",qR=["userId","collectionGroup","largestBatchId"],Sp="globals",FR="name",Db=[Bu,pi,Ko,la,Qo,tc,ga,Yo,Xo,qu,Fu,Gf,Kf],HR=[...Db,Qf],Vb=[Bu,pi,Ko,Ef,Qo,tc,ga,Yo,Xo,qu,Fu,Gf,Kf,Qf],Ob=Vb,Ap=[...Ob,bp,Nu,Du],GR=Ap,Mb=[...Ap,Sp],KR=Mb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Sb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ht(s,e){const t=Ie(s);return Es.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function xs(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function kb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??an.RED,this.left=o??an.EMPTY,this.right=u??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new an(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yE(this.data.getIterator())}getIteratorFrom(e){return new yE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class yE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ao(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new In([])}unionWith(e){let t=new it(_t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Pb("Invalid base64 string: "+u):u}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const QR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(s){if(ve(!!s,39018),typeof s=="string"){let e=0;const t=QR.exec(s);if(ve(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(s.seconds),nanos:pt(s.nanos)}}function pt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Tr(s){return typeof s=="string"?Lt.fromBase64String(s):Lt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="server_timestamp",Lb="__type__",Ub="__previous_value__",jb="__local_write_time__";function wp(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Lb])==null?void 0:r.stringValue)===zb}function Yf(s){const e=s.mapValue.fields[Ub];return wp(e)?Yf(e):e}function Hu(s){const e=Er(s.mapValue.fields[jb].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t,r,o,u,c,m,g,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const bf="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||bf}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===bf}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="__type__",Bb="__max__",gs={mapValue:{fields:{__type__:{stringValue:Bb}}}},xp="__vector__",$o="value",rf={nullValue:"NULL_VALUE"};function bs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wp(s)?4:qb(s)?9007199254740991:Xf(s)?10:11:me(28295,{value:s})}function Yi(s,e){if(s===e)return!0;const t=bs(s);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Hu(s).isEqual(Hu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Er(o.timestampValue),m=Er(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Tr(o.bytesValue).isEqual(Tr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return pt(o.geoPointValue.latitude)===pt(u.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return pt(o.integerValue)===pt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=pt(o.doubleValue),m=pt(u.doubleValue);return c===m?ju(c)===ju(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Go(s.arrayValue.values||[],e.arrayValue.values||[],Yi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(pE(c)!==pE(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Yi(c[g],m[g])))return!1;return!0})(s,e);default:return me(52216,{left:s})}}function Gu(s,e){return(s.values||[]).find((t=>Yi(t,e)))!==void 0}function Ss(s,e){if(s===e)return 0;const t=bs(s),r=bs(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=pt(u.integerValue||u.doubleValue),g=pt(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return _E(s.timestampValue,e.timestampValue);case 4:return _E(Hu(s),Hu(e));case 5:return Lg(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=Tr(u),g=Tr(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=we(m[p],g[p]);if(E!==0)return E}return we(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=we(pt(u.latitude),pt(c.latitude));return m!==0?m:we(pt(u.longitude),pt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return vE(s.arrayValue,e.arrayValue);case 10:return(function(u,c){var A,O,F,H;const m=u.fields||{},g=c.fields||{},p=(A=m[$o])==null?void 0:A.arrayValue,E=(O=g[$o])==null?void 0:O.arrayValue,T=we(((F=p==null?void 0:p.values)==null?void 0:F.length)||0,((H=E==null?void 0:E.values)==null?void 0:H.length)||0);return T!==0?T:vE(p,E)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===gs.mapValue&&c===gs.mapValue)return 0;if(u===gs.mapValue)return 1;if(c===gs.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const A=Lg(g[T],E[T]);if(A!==0)return A;const O=Ss(m[g[T]],p[E[T]]);if(O!==0)return O}return we(g.length,E.length)})(s.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function _E(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return we(s,e);const t=Er(s),r=Er(e),o=we(t.seconds,r.seconds);return o!==0?o:we(t.nanos,r.nanos)}function vE(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=Ss(t[o],r[o]);if(u)return u}return we(t.length,r.length)}function Zo(s){return Hg(s)}function Hg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=Er(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Tr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return oe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Hg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Hg(t.fields[c])}`;return o+"}"})(s.mapValue):me(61005,{value:s})}function sf(s){switch(bs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(s);return e?16+sf(e):16;case 5:return 2*s.stringValue.length;case 6:return Tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+sf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return xs(r.fields,((u,c)=>{o+=u.length+sf(c)})),o})(s.mapValue);default:throw me(13486,{value:s})}}function Ku(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Gg(s){return!!s&&"integerValue"in s}function Qu(s){return!!s&&"arrayValue"in s}function EE(s){return!!s&&"nullValue"in s}function TE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function af(s){return!!s&&"mapValue"in s}function Xf(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Ip])==null?void 0:r.stringValue)===xp}function Vu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return xs(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Vu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(s.arrayValue.values[t]);return e}return{...s}}function qb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Bb}const Fb={mapValue:{fields:{[Ip]:{stringValue:xp},[$o]:{arrayValue:{}}}}};function XR(s){return"nullValue"in s?rf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Ku(ba.empty(),oe.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Xf(s)?Fb:{mapValue:{}}:me(35942,{value:s})}function $R(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Ku(ba.empty(),oe.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Fb:"mapValue"in s?Xf(s)?{mapValue:{}}:gs:me(61959,{value:s})}function bE(s,e){const t=Ss(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function SE(s,e){const t=Ss(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=_t.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Vu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){xs(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new hn(Vu(this.value))}}function Hb(s){const e=[];return xs(s.fields,((t,r)=>{const o=new _t([t]);if(af(r)){const u=Hb(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Tt(e,0,Te.min(),Te.min(),Te.min(),hn.empty(),0)}static newFoundDocument(e,t,r,o){return new Tt(e,1,t,Te.min(),r,o,0)}static newNoDocument(e,t){return new Tt(e,2,t,Te.min(),Te.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new Tt(e,3,t,Te.min(),Te.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.position=e,this.inclusive=t}}function AE(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=oe.comparator(oe.fromName(c.referenceValue),t.key):r=Ss(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function wE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Yi(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{}class je extends Gb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JR(e,t,r):t==="array-contains"?new t2(e,r):t==="in"?new Zb(e,r):t==="not-in"?new n2(e,r):t==="array-contains-any"?new i2(e,r):new je(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new WR(e,r):new e2(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ss(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison(Ss(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends Gb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nt(e,t)}matches(e){return Wo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wo(s){return s.op==="and"}function Kg(s){return s.op==="or"}function Rp(s){return Kb(s)&&Wo(s)}function Kb(s){for(const e of s.filters)if(e instanceof nt)return!1;return!0}function Qg(s){if(s instanceof je)return s.field.canonicalString()+s.op.toString()+Zo(s.value);if(Rp(s))return s.filters.map((e=>Qg(e))).join(",");{const e=s.filters.map((t=>Qg(t))).join(",");return`${s.op}(${e})`}}function Qb(s,e){return s instanceof je?(function(r,o){return o instanceof je&&r.op===o.op&&r.field.isEqual(o.field)&&Yi(r.value,o.value)})(s,e):s instanceof nt?(function(r,o){return o instanceof nt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&Qb(c,o.filters[m])),!0):!1})(s,e):void me(19439)}function Yb(s,e){const t=s.filters.concat(e);return nt.create(t,s.op)}function Xb(s){return s instanceof je?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(s):s instanceof nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xb).join(" ,")+"}"})(s):"Filter"}class JR extends je{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class WR extends je{constructor(e,t){super(e,"in",t),this.keys=$b("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class e2 extends je{constructor(e,t){super(e,"not-in",t),this.keys=$b("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $b(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>oe.fromName(r.referenceValue)))}class t2 extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qu(t)&&Gu(t.arrayValue,this.value)}}class Zb extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gu(this.value.arrayValue,t)}}class n2 extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gu(this.value.arrayValue,t)}}class i2 extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Gu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Yg(s,e=null,t=[],r=[],o=null,u=null,c=null){return new r2(s,e,t,r,o,u,c)}function Sa(s){const e=Ie(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Qg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Zo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Zo(r))).join(",")),e.Te=t}return e.Te}function nc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!ZR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Qb(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!wE(s.startAt,e.startAt)&&wE(s.endAt,e.endAt)}function Af(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function wf(s,e){return s.filters.filter((t=>t instanceof je&&t.field.isEqual(e)))}function IE(s,e,t){let r=rf,o=!0;for(const u of wf(s,e)){let c=rf,m=!0;switch(u.op){case"<":case"<=":c=XR(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=rf}bE({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];bE({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function xE(s,e,t){let r=gs,o=!0;for(const u of wf(s,e)){let c=gs,m=!0;switch(u.op){case">=":case">":c=$R(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=gs}SE({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];SE({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s2(s,e,t,r,o,u,c,m){return new ic(s,e,t,r,o,u,c,m)}function Cp(s){return new ic(s)}function RE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Jb(s){return s.collectionGroup!==null}function Ou(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new it(_t.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Sf(u,r))})),t.has(_t.keyField().canonicalString())||e.Ie.push(new Sf(_t.keyField(),r))}return e.Ie}function ii(s){const e=Ie(s);return e.Ee||(e.Ee=a2(e,Ou(s))),e.Ee}function a2(s,e){if(s.limitType==="F")return Yg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sf(o.field,u)}));const t=s.endAt?new Jo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Jo(s.startAt.position,s.startAt.inclusive):null;return Yg(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Xg(s,e){const t=s.filters.concat([e]);return new ic(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function $g(s,e,t){return new ic(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function $f(s,e){return nc(ii(s),ii(e))&&s.limitType===e.limitType}function Wb(s){return`${Sa(ii(s))}|lt:${s.limitType}`}function Oo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>Xb(o))).join(", ")}]`),Hf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Zo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Zo(o))).join(",")),`Target(${r})`})(ii(s))}; limitType=${s.limitType})`}function rc(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):oe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Ou(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=AE(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Ou(r),o)||r.endAt&&!(function(c,m,g){const p=AE(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Ou(r),o))})(s,e)}function o2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function eS(s){return(e,t)=>{let r=!1;for(const o of Ou(s)){const u=l2(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function l2(s,e,t){const r=s.field.isKeyField()?oe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Ss(g,p):me(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new yt(oe.comparator);function Un(){return u2}const tS=new yt(oe.comparator);function Au(...s){let e=tS;for(const t of s)e=e.insert(t.key,t);return e}function nS(s){let e=tS;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Fi(){return Mu()}function iS(){return Mu()}function Mu(){return new wr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const c2=new yt(oe.comparator),h2=new it(oe.comparator);function Me(...s){let e=h2;for(const t of s)e=e.add(t);return e}const f2=new it(we);function d2(){return f2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function rS(s){return{integerValue:""+s}}function m2(s,e){return ER(e)?rS(e):Np(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function g2(s,e,t){return s instanceof Yu?(function(o,u){const c={fields:{[Lb]:{stringValue:zb},[jb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&wp(u)&&(u=Yf(u)),u&&(c.fields[Ub]=u),{mapValue:c}})(t,e):s instanceof el?aS(s,e):s instanceof tl?oS(s,e):(function(o,u){const c=sS(o,u),m=CE(c)+CE(o.Ae);return Gg(c)&&Gg(o.Ae)?rS(m):Np(o.serializer,m)})(s,e)}function p2(s,e,t){return s instanceof el?aS(s,e):s instanceof tl?oS(s,e):t}function sS(s,e){return s instanceof Xu?(function(r){return Gg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Yu extends Zf{}class el extends Zf{constructor(e){super(),this.elements=e}}function aS(s,e){const t=lS(e);for(const r of s.elements)t.some((o=>Yi(o,r)))||t.push(r);return{arrayValue:{values:t}}}class tl extends Zf{constructor(e){super(),this.elements=e}}function oS(s,e){let t=lS(e);for(const r of s.elements)t=t.filter((o=>!Yi(o,r)));return{arrayValue:{values:t}}}class Xu extends Zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function CE(s){return pt(s.integerValue||s.doubleValue)}function lS(s){return Qu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t){this.field=e,this.transform=t}}function _2(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof el&&o instanceof el||r instanceof tl&&o instanceof tl?Go(r.elements,o.elements,Yi):r instanceof Xu&&o instanceof Xu?Yi(r.Ae,o.Ae):r instanceof Yu&&o instanceof Yu})(s.transform,e.transform)}class v2{constructor(e,t){this.version=e,this.transformResults=t}}class Xt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function of(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Jf{}function uS(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new sc(s.key,Xt.none()):new ll(s.key,s.data,Xt.none());{const t=s.data,r=hn.empty();let o=new it(_t.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Ir(s.key,r,new In(o.toArray()),Xt.none())}}function E2(s,e,t){s instanceof ll?(function(o,u,c){const m=o.value.clone(),g=DE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Ir?(function(o,u,c){if(!of(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=DE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(cS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ku(s,e,t,r){return s instanceof ll?(function(u,c,m,g){if(!of(u.precondition,c))return m;const p=u.value.clone(),E=VE(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof Ir?(function(u,c,m,g){if(!of(u.precondition,c))return m;const p=VE(u.fieldTransforms,g,c),E=c.data;return E.setAll(cS(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,t,r):(function(u,c,m){return of(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function T2(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=sS(r.transform,o||null);u!=null&&(t===null&&(t=hn.empty()),t.set(r.field,u))}return t||null}function NE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Go(r,o,((u,c)=>_2(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ll extends Jf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ir extends Jf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function cS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function DE(s,e,t){const r=new Map;ve(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,p2(c,m,t[o]))}return r}function VE(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,g2(u,c,e))}return r}class sc extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hS extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&E2(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iS();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=uS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,((t,r)=>NE(t,r)))&&Go(this.baseMutations,e.baseMutations,((t,r)=>NE(t,r)))}}class Vp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return c2})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Vp(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,He;function S2(s){switch(s){case Z.OK:return me(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return me(15467,{code:s})}}function fS(s){if(s===void 0)return pn("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Pt.OK:return Z.OK;case Pt.CANCELLED:return Z.CANCELLED;case Pt.UNKNOWN:return Z.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return Z.INTERNAL;case Pt.UNAVAILABLE:return Z.UNAVAILABLE;case Pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Pt.NOT_FOUND:return Z.NOT_FOUND;case Pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Pt.ABORTED:return Z.ABORTED;case Pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Pt.DATA_LOSS:return Z.DATA_LOSS;default:return me(39323,{code:s})}}(He=Pt||(Pt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new vs([4294967295,4294967295],0);function OE(s){const e=A2().encode(s),t=new cb;return t.update(e),new Uint8Array(t.digest())}function ME(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new vs([t,r],0),new vs([o,u],0)]}class Mp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vs.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(vs.fromNumber(r)));return o.compare(w2)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=OE(e),[r,o]=ME(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Mp(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=OE(e),[r,o]=ME(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wf(Te.min(),o,new yt(we),Un(),Me())}}class ac{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ac(r,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class dS{constructor(e,t){this.targetId=e,this.Ce=t}}class mS{constructor(e,t,r=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class kE{constructor(){this.ve=0,this.Fe=PE(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),r=Me();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:me(38017,{changeType:u})}})),new ac(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=PE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class I2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=Kh(),this.He=Kh(),this.Ye=new yt(we)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Af(u))if(r===0){const c=new oe(u.path);this.et(t,c,Tt.newNoDocument(c,Te.min()))}else ve(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=Tr(r).toUint8Array()}catch(g){if(g instanceof Pb)return Ta("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Mp(c,o,u)}catch(g){return Ta(g instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Af(m.target)){const g=new oe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Tt.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let r=Me();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new Wf(e,t,this.Ye,this.je,r);return this.je=Un(),this.Je=Kh(),this.He=Kh(),this.Ye=new yt(we),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new kE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new it(we),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new it(we),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kh(){return new yt(oe.comparator)}function PE(){return new yt(oe.comparator)}const x2={asc:"ASCENDING",desc:"DESCENDING"},R2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C2={and:"AND",or:"OR"};class N2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zg(s,e){return s.useProto3Json||Hf(e)?e:{value:e}}function nl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function D2(s,e){return nl(s,e.toTimestamp())}function yn(s){return ve(!!s,49232),Te.fromTimestamp((function(t){const r=Er(t);return new tt(r.seconds,r.nanos)})(s))}function kp(s,e){return Jg(s,e).canonicalString()}function Jg(s,e){const t=(function(o){return new $e(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function pS(s){const e=$e.fromString(s);return ve(wS(e),10190,{key:e.toString()}),e}function If(s,e){return kp(s.databaseId,e.path)}function pa(s,e){const t=pS(e);if(t.get(1)!==s.databaseId.projectId)throw new se(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new se(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new oe(vS(t))}function yS(s,e){return kp(s.databaseId,e)}function _S(s){const e=pS(s);return e.length===4?$e.emptyPath():vS(e)}function Wg(s){return new $e(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function vS(s){return ve(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function zE(s,e,t){return{name:If(s,e),fields:t.value.mapValue.fields}}function V2(s,e,t){const r=pa(s,e.name),o=yn(e.updateTime),u=e.createTime?yn(e.createTime):Te.min(),c=new hn({mapValue:{fields:e.fields}}),m=Tt.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function O2(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(ve(E===void 0||typeof E=="string",58123),Lt.fromBase64String(E||"")):(ve(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Lt.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?Z.UNKNOWN:fS(p.code);return new se(E,p.message||"")})(c);t=new mS(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=pa(s,r.document.name),u=yn(r.document.updateTime),c=r.document.createTime?yn(r.document.createTime):Te.min(),m=new hn({mapValue:{fields:r.document.fields}}),g=Tt.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];t=new lf(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=pa(s,r.document),u=r.readTime?yn(r.readTime):Te.min(),c=Tt.newNoDocument(o,u),m=r.removedTargetIds||[];t=new lf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=pa(s,r.document),u=r.removedTargetIds||[];t=new lf([],u,o,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new b2(o,u),m=r.targetId;t=new dS(m,c)}}return t}function xf(s,e){let t;if(e instanceof ll)t={update:zE(s,e.key,e.value)};else if(e instanceof sc)t={delete:If(s,e.key)};else if(e instanceof Ir)t={update:zE(s,e.key,e.data),updateMask:U2(e.fieldMask)};else{if(!(e instanceof hS))return me(16599,{Vt:e.type});t={verify:If(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Yu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof el)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof tl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Xu)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw me(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:D2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:me(27497)})(s,e.precondition)),t}function ep(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?Xt.updateTime(yn(u.updateTime)):u.exists!==void 0?Xt.exists(u.exists):Xt.none()})(e.currentDocument):Xt.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)ve(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Yu;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new el(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new tl(E)}else"increment"in m?g=new Xu(c,m.increment):me(16584,{proto:m});const p=_t.fromServerFormat(m.fieldPath);return new y2(p,g)})(s,o))):[];if(e.update){e.update.name;const o=pa(s,e.update.name),u=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new In(p.map((E=>_t.fromServerFormat(E))))})(e.updateMask);return new Ir(o,u,c,t,r)}return new ll(o,u,t,r)}if(e.delete){const o=pa(s,e.delete);return new sc(o,t)}if(e.verify){const o=pa(s,e.verify);return new hS(o,t)}return me(1463,{proto:e})}function M2(s,e){return s&&s.length>0?(ve(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?yn(o.updateTime):yn(u);return c.isEqual(Te.min())&&(c=yn(u)),new v2(c,o.transformResults||[])})(t,e)))):[]}function ES(s,e){return{documents:[yS(s,e.path)]}}function TS(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yS(s,o);const u=(function(p){if(p.length!==0)return AS(nt.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(A){return{field:Mo(A.field),direction:P2(A.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Zg(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function bS(s){let e=_S(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ve(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(T){const A=SS(T);return A instanceof nt&&Rp(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((A=>(function(F){return new Sf(ko(F.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(T){let A;return A=typeof T=="object"?T.value:T,Hf(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(T){const A=!!T.before,O=T.values||[];return new Jo(O,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const A=!T.before,O=T.values||[];return new Jo(O,A)})(t.endAt)),s2(e,o,c,u,m,"F",g,p)}function k2(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ko(t.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ko(t.unaryFilter.field);return je.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ko(t.unaryFilter.field);return je.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ko(t.unaryFilter.field);return je.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(s):s.fieldFilter!==void 0?(function(t){return je.create(ko(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return nt.create(t.compositeFilter.filters.map((r=>SS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(s):me(30097,{filter:s})}function P2(s){return x2[s]}function z2(s){return R2[s]}function L2(s){return C2[s]}function Mo(s){return{fieldPath:s.canonicalString()}}function ko(s){return _t.fromServerFormat(s.fieldPath)}function AS(s){return s instanceof je?(function(t){if(t.op==="=="){if(TE(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(EE(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TE(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(EE(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:z2(t.op),value:t.value}}})(s):s instanceof nt?(function(t){const r=t.getFilters().map((o=>AS(o)));return r.length===1?r[0]:{compositeFilter:{op:L2(t.op),filters:r}}})(s):me(54877,{filter:s})}function U2(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t,r,o,u=Te.min(),c=Te.min(),m=Lt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.yt=e}}function j2(s,e){let t;if(e.document)t=V2(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),o=wa(e.noDocument.readTime);t=Tt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const r=oe.fromSegments(e.unknownDocument.path),o=wa(e.unknownDocument.version);t=Tt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new tt(o[0],o[1]);return Te.fromTimestamp(u)})(e.readTime)),t}function LE(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,c){return{name:If(u,c.key),fields:c.data.value.mapValue.fields,updateTime:nl(u,c.version.toTimestamp()),createTime:nl(u,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Aa(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Aa(e.version)}}return r}function Rf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Aa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wa(s){const e=new tt(s.seconds,s.nanoseconds);return Te.fromTimestamp(e)}function ca(s,e){const t=(e.baseMutations||[]).map((u=>ep(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>ep(s.yt,u))),o=tt.fromMillis(e.localWriteTimeMs);return new Dp(e.batchId,o,t,r)}function Iu(s){const e=wa(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?wa(s.lastLimboFreeSnapshotVersion):Te.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return ve(c===1,1966,{count:c}),ii(Cp(_S(u.documents[0])))})(s.query):(function(u){return ii(bS(u))})(s.query),new mr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Lt.fromBase64String(s.resumeToken))}function xS(s,e){const t=Aa(e.snapshotVersion),r=Aa(e.lastLimboFreeSnapshotVersion);let o;o=Af(e.target)?ES(s.yt,e.target):TS(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function RS(s){const e=bS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?$g(e,e.limit,"L"):e}function bg(s,e){return new Op(e.largestBatchId,ep(s.yt,e.overlayMutation))}function UE(s,e){const t=e.path.lastSegment();return[s,fn(e.path.popLast()),t]}function jE(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Aa(r.readTime),documentKey:fn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{getBundleMetadata(e,t){return BE(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:wa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return BE(e).put((function(o){return{bundleId:o.id,createTime:Aa(yn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return qE(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:RS(u.bundledQuery),readTime:wa(u.readTime)}})(r)}))}saveNamedQuery(e,t){return qE(e).put((function(o){return{name:o.name,readTime:Aa(yn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function BE(s){return Ht(s,Gf)}function qE(s){return Ht(s,Kf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new ed(e,r)}getOverlay(e,t){return _u(e).get(UE(this.userId,t)).next((r=>r?bg(this.serializer,r):null))}getOverlays(e,t){const r=Fi();return L.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,c)=>{const m=new Op(t,c);o.push(this.St(e,m))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(fn(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(_u(e).Z(qg,m))})),L.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Fi(),u=fn(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return _u(e).J(qg,c).next((m=>{for(const g of m){const p=bg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=Fi();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _u(e).ee({index:Nb,range:m},((g,p,E)=>{const T=bg(this.serializer,p);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>u))}St(e,t){return _u(e).put((function(o,u,c){const[m,g,p]=UE(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:xf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function _u(s){return Ht(s,Qf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{bt(e){return Ht(e,Sp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Lt.fromUint8Array(r):Lt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ju(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Er(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Tr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?qb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){var c,m;const r=e.fields||{};this.Ft(t,53);const o=$o,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(t,15),t.Mt(pt(u)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ha.Kt=new ha;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=255;function F2(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function FE(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=F2(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(e/8)}class H2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=FE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=FE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(wo),this.sn(255)}_n(){this.an(wo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===wo?(this.sn(wo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===wo?(this.an(wo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class G2{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class K2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class vu{constructor(){this.cn=new H2,this.ln=new G2(this.cn),this.hn=new K2(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new fa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:uf(this.En),directionalValue:uf(this.dn),orderedDocumentKey:uf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function as(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=HE(s.En,e.En),t!==0?t:(t=HE(s.dn,e.dn),t!==0?t:oe.comparator(s.In,e.In)))}function HE(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function uf(s){return nb()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function GE(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class KE{constructor(e){this.mn=new it(((t,r)=>_t.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Ug(e);if(t!==void 0&&!this.wn(t))return!1;const r=oa(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new it(_t.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ef(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ef(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ef(r.field,r.dir==="asc"?0:1)));return new _f(_f.UNKNOWN_ID,this.collectionId,t,Uu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(s){var t,r;if(ve(s instanceof je||s instanceof nt,20012),s instanceof je){if(s instanceof Zb){const o=((r=(t=s.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((u=>je.create(s.field,"==",u))))||[];return nt.create(o,"or")}return s}const e=s.filters.map((o=>CS(o)));return nt.create(e,s.op)}function Q2(s){if(s.getFilters().length===0)return[];const e=ip(CS(s));return ve(NS(e),7391),tp(e)||np(e)?[e]:e.getFilters()}function tp(s){return s instanceof je}function np(s){return s instanceof nt&&Rp(s)}function NS(s){return tp(s)||np(s)||(function(t){if(t instanceof nt&&Kg(t)){for(const r of t.getFilters())if(!tp(r)&&!np(r))return!1;return!0}return!1})(s)}function ip(s){if(ve(s instanceof je||s instanceof nt,34018),s instanceof je)return s;if(s.filters.length===1)return ip(s.filters[0]);const e=s.filters.map((r=>ip(r)));let t=nt.create(e,s.op);return t=Cf(t),NS(t)?t:(ve(t instanceof nt,64498),ve(Wo(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((r,o)=>Pp(r,o))))}function Pp(s,e){let t;return ve(s instanceof je||s instanceof nt,38388),ve(e instanceof je||e instanceof nt,25473),t=s instanceof je?e instanceof je?(function(o,u){return nt.create([o,u],"and")})(s,e):QE(s,e):e instanceof je?QE(e,s):(function(o,u){if(ve(o.filters.length>0&&u.filters.length>0,48005),Wo(o)&&Wo(u))return Yb(o,u.getFilters());const c=Kg(o)?o:u,m=Kg(o)?u:o,g=c.filters.map((p=>Pp(p,m)));return nt.create(g,"or")})(s,e),Cf(t)}function QE(s,e){if(Wo(e))return Yb(e,s.getFilters());{const t=e.filters.map((r=>Pp(s,r)));return nt.create(t,"or")}}function Cf(s){if(ve(s instanceof je||s instanceof nt,11850),s instanceof je)return s;const e=s.getFilters();if(e.length===1)return Cf(e[0]);if(Kb(s))return s;const t=e.map((o=>Cf(o))),r=[];return t.forEach((o=>{o instanceof je?r.push(o):o instanceof nt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:nt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.Cn=new zp}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(jn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class zp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new it($e.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new it($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="IndexedDbIndexManager",Qh=new Uint8Array(0);class X2{constructor(e,t){this.databaseId=t,this.vn=new zp,this.Fn=new wr((r=>Sa(r)),((r,o)=>nc(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:r,parent:fn(o)};return XE(e).put(u)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[_b(t),""],!1,!0);return XE(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;r.push(qi(c.parent))}return r}))}addFieldIndex(e,t){const r=Eu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const c=xo(e);return u.next((m=>{c.put(jE(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=Eu(e),o=xo(e),u=Io(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Eu(e),r=Io(e),o=xo(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new KE(r).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=Io(e);let o=!0;const u=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Me();const m=[];return L.forEach(u,((g,p)=>{ne(YE,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((le=>`${le.fieldPath}:${le.kind}`)).join(",")}`})(g)} to execute ${Sa(t)}`);const E=(function(Q,le){const _e=Ug(le);if(_e===void 0)return null;for(const de of wf(Q,_e.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(p,g),T=(function(Q,le){const _e=new Map;for(const de of oa(le))for(const C of wf(Q,de.fieldPath))switch(C.op){case"==":case"in":_e.set(de.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return _e.set(de.fieldPath.canonicalString(),C.value),Array.from(_e.values())}return null})(p,g),A=(function(Q,le){const _e=[];let de=!0;for(const C of oa(le)){const I=C.kind===0?IE(Q,C.fieldPath,Q.startAt):xE(Q,C.fieldPath,Q.startAt);_e.push(I.value),de&&(de=I.inclusive)}return new Jo(_e,de)})(p,g),O=(function(Q,le){const _e=[];let de=!0;for(const C of oa(le)){const I=C.kind===0?xE(Q,C.fieldPath,Q.endAt):IE(Q,C.fieldPath,Q.endAt);_e.push(I.value),de&&(de=I.inclusive)}return new Jo(_e,de)})(p,g),F=this.On(g,p,A),H=this.On(g,p,O),K=this.Nn(g,p,T),ie=this.Bn(g.indexId,E,F,A.inclusive,H,O.inclusive,K);return L.forEach(ie,(ee=>r.Y(ee,t.limit).next((Q=>{Q.forEach((le=>{const _e=oe.fromSegments(le.documentKey);c.has(_e)||(c=c.add(_e),m.push(_e))}))}))))})).next((()=>m))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Q2(nt.create(e.filters,"and")).map((r=>Yg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(r.length,u.length),p=g/(t!=null?t.length:1),E=[];for(let T=0;T<g;++T){const A=t?this.Ln(t[T/p]):Qh,O=this.kn(e,A,r[T%p],o),F=this.qn(e,A,u[T%p],c),H=m.map((K=>this.kn(e,A,K,!0)));E.push(...this.createRange(O,F,H))}return E}kn(e,t,r,o){const u=new fa(e,oe.empty(),t,r);return o?u:u.An()}qn(e,t,r,o){const u=new fa(e,oe.empty(),t,r);return o?u.An():u}xn(e,t){const r=new KE(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return L.forEach(o,(u=>this.xn(e,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new it(_t.comparator),E=!1;for(const T of g.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:p=p.add(A.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new vu;for(const o of oa(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);ha.Kt.Dt(u,c)}return r.un()}Ln(e){const t=new vu;return ha.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new vu;return ha.Kt.Dt(Ku(this.databaseId,t),r.Pn((function(u){const c=oa(u);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new vu);let u=0;for(const c of oa(e)){const m=r[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&Qu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);ha.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new vu;g.seed(m.un()),ha.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((r=>r instanceof je&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Eu(e),o=xo(e);return(t?r.J(Bg,IDBKeyRange.bound(t,t)):r.J()).next((u=>{const c=[];return L.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,T){const A=T?new Uu(T.sequenceNumber,new jn(wa(T.readTime),new oe(qi(T.documentKey)),T.largestBatchId)):Uu.empty(),O=E.fields.map((([F,H])=>new ef(_t.fromServerFormat(F),H)));return new _f(E.indexId,E.collectionGroup,O,A)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:we(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=Eu(e),u=xo(e);return this.Gn(e).next((c=>o.J(Bg,IDBKeyRange.bound(t,t)).next((m=>L.forEach(m,(g=>u.put(jE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,((o,u)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),L.forEach(m,(g=>this.zn(e,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?L.resolve():this.Jn(e,u,g,p,E)})))))))}))}Hn(e,t,r,o){return Io(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return Io(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=Io(e);let u=new it(as);return o.ee({index:Cb,range:IDBKeyRange.only([r.indexId,this.uid,uf(this.$n(r,t))])},((c,m)=>{u=u.add(new fa(r.indexId,t,GE(m.arrayValue),GE(m.directionalValue)))})).next((()=>u))}jn(e,t){let r=new it(as);const o=this.Qn(t,e);if(o==null)return r;const u=Ug(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Qu(c))for(const m of c.arrayValue.values||[])r=r.add(new fa(t.indexId,e.key,this.Ln(m),o))}else r=r.add(new fa(t.indexId,e.key,Qh,o));return r}Jn(e,t,r,o,u){ne(YE,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,E,T,A){const O=g.getIterator(),F=p.getIterator();let H=Ao(O),K=Ao(F);for(;H||K;){let ie=!1,ee=!1;if(H&&K){const Q=E(H,K);Q<0?ee=!0:Q>0&&(ie=!0)}else H!=null?ee=!0:ie=!0;ie?(T(K),K=Ao(F)):ee?(A(H),H=Ao(O)):(H=Ao(O),K=Ao(F))}})(o,u,as,(m=>{c.push(this.Hn(e,t,r,m))}),(m=>{c.push(this.Yn(e,t,r,m))})),L.waitFor(c)}Gn(e){let t=1;return xo(e).ee({index:Rb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,m)=>as(c,m))).filter(((c,m,g)=>!m||as(c,g[m-1])!==0));const o=[];o.push(e);for(const c of r){const m=as(c,e),g=as(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Qh,oe.empty()),g=o[c+1].Vn(this.uid,Qh,oe.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return as(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($E)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||me(44426))))).next($E)}}function XE(s){return Ht(s,Fu)}function Io(s){return Ht(s,Du)}function Eu(s){return Ht(s,bp)}function xo(s){return Ht(s,Nu)}function $E(s){ve(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;vp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new jn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DS=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(s,e,t){const r=s.store(pi),o=s.store(Ko),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:c},((E,T,A)=>(m++,A.delete())));u.push(g.next((()=>{ve(m===1,47070,{batchId:t.batchId})})));const p=[];for(const E of t.mutations){const T=wb(e,E.key.path,t.batchId);u.push(o.delete(T)),p.push(E.key)}return L.waitFor(u).next((()=>p))}function Nf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw me(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(DS,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class td{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){ve(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new td(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).ee({index:da,range:r},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=Po(e),c=os(e);return c.add({}).next((m=>{ve(typeof m=="number",49019);const g=new Dp(m,t,r,o),p=(function(O,F,H){const K=H.baseMutations.map((ee=>xf(O.yt,ee))),ie=H.mutations.map((ee=>xf(O.yt,ee)));return{userId:F,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:K,mutations:ie}})(this.serializer,this.userId,g),E=[];let T=new it(((A,O)=>we(A.canonicalString(),O.canonicalString())));for(const A of o){const O=wb(this.userId,A.key.path,m);T=T.add(A.key.path.popLast()),E.push(c.put(p)),E.push(u.put(O,SR))}return T.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),L.waitFor(E).next((()=>g))}))}lookupMutationBatch(e,t){return os(e).get(t).next((r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ca(this.serializer,r)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return os(e).ee({index:da,range:o},((c,m,g)=>{m.userId===this.userId&&(ve(m.batchId>=r,47524,{tr:r}),u=ca(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ma;return os(e).ee({index:da,range:t,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ma],[this.userId,Number.POSITIVE_INFINITY]);return os(e).J(da,t).next((r=>r.map((o=>ca(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Po(e).ee({range:o},((c,m,g)=>{const[p,E,T]=c,A=qi(E);if(p===this.userId&&t.path.isEqual(A))return os(e).get(T).next((O=>{if(!O)throw me(61480,{nr:c,batchId:T});ve(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:T}),u.push(ca(this.serializer,O))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(we);const o=[];return t.forEach((u=>{const c=tf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Po(e).ee({range:m},((p,E,T)=>{const[A,O,F]=p,H=qi(O);A===this.userId&&u.path.isEqual(H)?r=r.add(F):T.done()}));o.push(g)})),L.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=tf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new it(we);return Po(e).ee({range:c},((g,p,E)=>{const[T,A,O]=g,F=qi(A);T===this.userId&&r.isPrefixOf(F)?F.length===o&&(m=m.add(O)):E.done()})).next((()=>this.rr(e,m)))}rr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(os(e).get(u).next((c=>{if(c===null)throw me(35274,{batchId:u});ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(ca(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return VS(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Po(e).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=qi(u[1]);o.push(g)}else m.done()})).next((()=>{ve(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return OS(e,this.userId,t)}_r(e){return MS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ma,lastStreamToken:""}))}}function OS(s,e,t){const r=tf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Po(s).ee({range:u,X:!0},((m,g,p)=>{const[E,T,A]=m;E===e&&T===o&&(c=!0),p.done()})).next((()=>c))}function os(s){return Ht(s,pi)}function Po(s){return Ht(s,Ko)}function MS(s){return Ht(s,Bu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ia(0)}static cr(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ia(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Te.fromTimestamp(new tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ro(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return Ro(e).ee(((c,m)=>{const g=Iu(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>L.waitFor(u))).next((()=>o))}forEachTarget(e,t){return Ro(e).ee(((r,o)=>{const u=Iu(o);t(u)}))}lr(e){return JE(e).get(Tf).next((t=>(ve(t!==null,2888),t)))}hr(e,t){return JE(e).put(Tf,t)}Pr(e,t){return Ro(e).put(xS(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Sa(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ro(e).ee({range:o,index:xb},((c,m,g)=>{const p=Iu(m);nc(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=cs(e);return t.forEach((c=>{const m=fn(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))})),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=cs(e);return L.forEach(t,(u=>{const c=fn(u.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=cs(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=cs(e);let u=Me();return o.ee({range:r,X:!0},((c,m,g)=>{const p=qi(c[1]),E=new oe(p);u=u.add(E)})).next((()=>u))}containsKey(e,t){const r=fn(t.path),o=IDBKeyRange.bound([r],[_b(r)],!1,!0);let u=0;return cs(e).ee({index:Tp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return Ro(e).get(t).next((r=>r?Iu(r):null))}}function Ro(s){return Ht(s,Qo)}function JE(s){return Ht(s,ga)}function cs(s){return Ht(s,Yo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="LruGarbageCollector",Z2=1048576;function eT([s,e],[t,r]){const o=we(s,t);return o===0?we(e,r):o}class J2{constructor(e){this.Ir=e,this.buffer=new it(eT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(WE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Is(t)?ne(WE,"Ignoring IndexedDB error during garbage collection: ",t):await Ca(t)}await this.Vr(3e5)}))}}class W2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(ni.ce);const r=new J2(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(ZE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,m=Date.now(),this.removeTargets(e,r,t)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(p=Date.now(),Vo()<=Ue.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function PS(s,e){return new W2(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t){this.db=e,this.garbageCollector=PS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return Yh(e,r)}removeReference(e,t,r){return Yh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yh(e,t)}br(e,t){return(function(o,u){let c=!1;return MS(o).te((m=>OS(o,m,u).next((g=>(g&&(c=!0),L.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Te.min()),cs(e).delete((function(T){return[0,fn(T.path)]})(c)))))}));o.push(g)}})).next((()=>L.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yh(e,t)}Sr(e,t){const r=cs(e);let o,u=ni.ce;return r.ee({index:Tp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==ni.ce&&t(new oe(qi(o)),u),u=p,o=g):u=ni.ce})).next((()=>{u!==ni.ce&&t(new oe(qi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yh(s,e){return cs(s).put((function(r,o){return{targetId:0,path:fn(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.changes=new wr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sa(e).put(r)}removeEntry(e,t,r){return sa(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Rf(c),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Tt.newInvalidDocument(t);return sa(e).ee({index:nf,range:IDBKeyRange.only(Tu(t))},((o,u)=>{r=this.Cr(t,u)})).next((()=>r))}vr(e,t){let r={size:0,document:Tt.newInvalidDocument(t)};return sa(e).ee({index:nf,range:IDBKeyRange.only(Tu(t))},((o,u)=>{r={document:this.Cr(t,u),size:Nf(u)}})).next((()=>r))}getEntries(e,t){let r=Un();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(e,t){let r=Un(),o=new yt(oe.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Nf(c))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return L.resolve();let o=new it(iT);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Tu(o.first()),Tu(o.last())),c=o.getIterator();let m=c.getNext();return sa(e).ee({index:nf,range:u},((g,p,E)=>{const T=oe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&iT(m,T)<0;)r(m,null),m=c.getNext();m&&m.isEqual(T)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(Tu(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sa(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let E=Un();for(const T of p){const A=this.Cr(oe.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(rc(t,A)||o.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(e,t,r,o){let u=Un();const c=nT(t,r),m=nT(t,jn.max());return sa(e).ee({index:Ib,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const T=this.Cr(oe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new nC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return tT(e).get(jg).next((t=>(ve(!!t,20021),t)))}Dr(e,t){return tT(e).put(jg,t)}Cr(e,t){if(t){const r=j2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return Tt.newInvalidDocument(e)}}function LS(s){return new tC(s)}class nC extends zS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new wr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new it(((u,c)=>we(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=LE(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Nf(g);r+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(r-=m.size,this.trackRemovals){const g=LE(this.Nr.serializer,c.convertToNoDocument(Te.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function tT(s){return Ht(s,qu)}function sa(s){return Ht(s,Ef)}function Tu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nT(s,e){const t=e.documentKey.path.toArray();return[s,Rf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iT(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=we(t[u],r[u]),o)return o;return o=we(t.length,r.length),o||(o=we(t[t.length-2],r[r.length-2]),o||we(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&ku(r.mutation,o,In.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Me()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Me()){const o=Fi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=Au();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Fi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Me())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=Un();const c=Mu(),m=(function(){return Mu()})();return t.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Ir)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),ku(E.mutation,p,E.mutation.getFieldMask(),tt.now())):c.set(p.key,In.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),t.forEach(((p,E)=>m.set(p,new iC(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Mu();let o=new yt(((c,m)=>c-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let E=r.get(g)||In.empty();E=m.applyToLocalView(p,E),r.set(g,E);const T=(o.get(m.batchId)||Me()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=iS();E.forEach((A=>{if(!u.has(A)){const O=uS(t.get(A),r.get(A));O!==null&&T.set(A,O),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):L.resolve(Fi());let m=Lu,g=u;return c.next((p=>L.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?L.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{g=g.insert(E,A)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Me()))).next((E=>({batchId:m,changes:nS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let o=Au();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=Au();return this.indexManager.getCollectionParents(e,u).next((m=>L.forEach(m,(g=>{const p=(function(T,A){return new ic(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((E=>{E.forEach(((T,A)=>{c=c.insert(T,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,Tt.newInvalidDocument(E)))}));let m=Au();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&ku(E.mutation,p,In.empty(),tt.now()),rc(t,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:yn(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:RS(o.bundledQuery),readTime:yn(o.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.overlays=new yt(oe.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fi();return L.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=Fi(),u=t.length+1,c=new oe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new yt(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Fi(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Fi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return L.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Op(t,r));let u=this.qr.get(t);u===void 0&&(u=Me(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.Qr=new it(Yt.$r),this.Ur=new it(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Yt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Yt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new oe(new $e([])),r=new Yt(t,e),o=new Yt(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new $e([])),r=new Yt(t,e),o=new Yt(t,e+1);let u=Me();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Yt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||we(e.Yr,t.Yr)}static Kr(e,t){return we(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new it(Yt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Dp(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return L.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ma:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),L.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(we);return t.forEach((o=>{const u=new Yt(o,0),c=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;oe.isDocumentKey(u)||(u=u.child(""));const c=new Yt(new oe(u),0);let m=new it(we);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),L.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(t.mutations,(o=>{const u=new Yt(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Yt(t,0),o=this.Zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.ri=e,this.docs=(function(){return new yt(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(t))}getEntries(e,t){let r=Un();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Tt.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Un();const c=t.path,m=new oe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||vp(Tb(E),r)<=0||(o.has(E.key)||rc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return L.resolve(u)}getAllFromCollectionGroup(e,t,r,o){me(9500)}ii(e,t){return L.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new uC(this)}getSize(e){return L.resolve(this.size)}}class uC extends zS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.persistence=e,this.si=new wr((t=>Sa(t)),nc),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Lp,this.targetCount=0,this.ai=Ia.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ia(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),L.waitFor(u).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),L.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.ui={},this.overlays={},this.ci=new ni(0),this.li=!1,this.li=!0,this.hi=new aC,this.referenceDelegate=e(this),this.Pi=new cC(this),this.indexManager=new Y2,this.remoteDocumentCache=(function(o){return new lC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new IS(t),this.Ii=new rC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new oC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const o=new hC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return L.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class hC extends Sb{constructor(e){super(),this.currentSequenceNumber=e}}class nd{constructor(e){this.persistence=e,this.Ri=new Lp,this.Vi=null}static mi(e){return new nd(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(r=>{const o=oe.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Df{constructor(e,t){this.persistence=e,this.pi=new wr((r=>fn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=PS(this,t)}static mi(e,t){return new Df(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?L.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,u.removeEntry(c,Te.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sf(e.data.value)),t}br(e,t,r){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.serializer=e}k(e,t,r,o){const u=new Ff("createOrUpgrade",t);r<1&&o>=1&&((function(g){g.createObjectStore(tc)})(e),(function(g){g.createObjectStore(Bu,{keyPath:bR}),g.createObjectStore(pi,{keyPath:mE,autoIncrement:!0}).createIndex(da,gE,{unique:!0}),g.createObjectStore(Ko)})(e),rT(e),(function(g){g.createObjectStore(la)})(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Yo),g.deleteObjectStore(Qo),g.deleteObjectStore(ga)})(e),rT(e)),c=c.next((()=>(function(g){const p=g.store(ga),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return p.put(Tf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(pi).J().next((T=>{g.deleteObjectStore(pi),g.createObjectStore(pi,{keyPath:mE,autoIncrement:!0}).createIndex(da,gE,{unique:!0});const A=p.store(pi),O=T.map((F=>A.put(F)));return L.waitFor(O)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Xo,{keyPath:DR})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(qu)})(e),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Gf,{keyPath:VR})})(e),(function(g){g.createObjectStore(Kf,{keyPath:OR})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Qf,{keyPath:jR});p.createIndex(qg,BR,{unique:!1}),p.createIndex(Nb,qR,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Ef,{keyPath:AR});p.createIndex(nf,wR),p.createIndex(Ib,IR)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(la)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(bp,{keyPath:MR,autoIncrement:!0}).createIndex(Bg,kR,{unique:!1}),g.createObjectStore(Nu,{keyPath:PR}).createIndex(Rb,zR,{unique:!1}),g.createObjectStore(Du,{keyPath:LR}).createIndex(Cb,UR,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(Nu).clear()})).next((()=>{t.objectStore(Du).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Sp,{keyPath:FR})})(e)}))),r<18&&o>=18&&nb()&&(c=c.next((()=>{t.objectStore(Nu).clear()})).next((()=>{t.objectStore(Du).clear()}))),c}wi(e){let t=0;return e.store(la).ee(((r,o)=>{t+=Nf(o)})).next((()=>{const r={byteSize:t};return e.store(qu).put(jg,r)}))}yi(e){const t=e.store(Bu),r=e.store(pi);return t.J().next((o=>L.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ma],[u.userId,u.lastAcknowledgedBatchId]);return r.J(da,c).next((m=>L.forEach(m,(g=>{ve(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ca(this.serializer,g);return VS(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Yo),r=e.store(la);return e.store(ga).get(Tf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new $e(c),p=(function(T){return[0,fn(T)]})(g);u.push(t.get(p).next((E=>E?L.resolve():(T=>t.put({targetId:0,path:fn(T),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>L.waitFor(u)))}))}bi(e,t){e.createObjectStore(Fu,{keyPath:NR});const r=t.store(Fu),o=new zp,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:fn(g)})}};return t.store(la).ee({X:!0},((c,m)=>{const g=new $e(c);return u(g.popLast())})).next((()=>t.store(Ko).ee({X:!0},(([c,m,g],p)=>{const E=qi(m);return u(E.popLast())}))))}Di(e){const t=e.store(Qo);return t.ee(((r,o)=>{const u=Iu(o),c=xS(this.serializer,u);return t.put(c)}))}Ci(e,t){const r=t.store(la),o=[];return r.ee(((u,c)=>{const m=t.store(Ef),g=(function(T){return T.document?new oe($e.fromString(T.document.name).popFirst(5)):T.noDocument?oe.fromSegments(T.noDocument.path):T.unknownDocument?oe.fromSegments(T.unknownDocument.path):me(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>L.waitFor(o)))}Fi(e,t){const r=t.store(pi),o=LS(this.serializer),u=new Up(nd.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Me();ca(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),L.forEach(m,((g,p)=>{const E=new sn(p),T=ed.wt(this.serializer,E),A=u.getIndexManager(E),O=td.wt(E,this.serializer,A,u.referenceDelegate);return new US(o,O,T,A).recalculateAndSaveOverlaysForDocumentKeys(new Fg(t,ni.ce),g).next()}))}))}}function rT(s){s.createObjectStore(Yo,{keyPath:RR}).createIndex(Tp,CR,{unique:!0}),s.createObjectStore(Qo,{keyPath:"targetId"}).createIndex(xb,xR,{unique:!0}),s.createObjectStore(ga)}const ls="IndexedDbPersistence",Sg=18e5,Ag=5e3,wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dC="main";class jp{constructor(e,t,r,o,u,c,m,g,p,E,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!jp.v())throw new se(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eC(this,o),this.$i=t+dC,this.serializer=new IS(g),this.Ui=new Es(this.$i,this.Ni,new fC(this.serializer)),this.hi=new q2,this.Pi=new $2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LS(this.serializer),this.Ii=new B2,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&pn(ls,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(Z.FAILED_PRECONDITION,wg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ni(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Is(e))return ne(ls,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(ls,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return bu(e).get(So).next((t=>L.resolve(this.es(t))))}ts(e){return Xh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Sg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Ht(t,Xo);return r.J().next((o=>{const u=this.ss(o,Sg),c=o.filter((m=>u.indexOf(m)===-1));return L.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):bu(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ag)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new se(Z.FAILED_PRECONDITION,wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xh(e).J().next((r=>this.ss(r,Ag).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(ls,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[tc,Xo],(e=>{const t=new Fg(e,ni.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Xh(e).J().next((t=>this.ss(t,Sg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return td.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new X2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ed.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne(ls,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?KR:g===17?Mb:g===16?GR:g===15?Ap:g===14?Ob:g===13?Vb:g===12?HR:g===11?Db:void me(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new Fg(m,this.ci?this.ci.next():ni.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new se(Z.FAILED_PRECONDITION,bb);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return bu(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ag)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(Z.FAILED_PRECONDITION,wg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bu(e).put(So,t)}static v(){return Es.v()}Zi(e){const t=bu(e);return t.get(So).next((r=>this.es(r)?(ne(ls,"Releasing primary lease."),t.delete(So)):L.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(pn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;tb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ne(ls,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pn(ls,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){pn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bu(s){return Ht(s,tc)}function Xh(s){return Ht(s,Xo)}function mC(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Me(),o=Me();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Bp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tb()?8:Ab(Ft())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new gC;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Vo()<=Ue.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Vo()<=Ue.DEBUG&&ne("QueryEngine","Query:",Oo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Vo()<=Ue.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(t))):L.resolve())}ys(e,t){if(RE(t))return L.resolve(null);let r=ii(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=$g(t,null,"F"),r=ii(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=Me(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,$g(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return RE(t)||o.isEqual(Te.min())?L.resolve(null):this.ps.getDocuments(e,r).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,r,o)?L.resolve(null):(Vo()<=Ue.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Oo(t)),this.vs(e,c,t,gR(o,Lu)).next((m=>m)))}))}Ds(e,t){let r=new it(eS(e));return t.forEach(((o,u)=>{rc(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return Vo()<=Ue.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.ps.getDocumentsMatchingQuery(e,t,jn.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="LocalStore",pC=3e8;class yC{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new yt(we),this.xs=new wr((u=>Sa(u)),nc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new US(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BS(s,e,t,r){return new yC(s,e,t,r)}async function qS(s,e){const t=Ie(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Me();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function _C(s,e){const t=Ie(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,A=T.keys();let O=L.resolve();return A.forEach((F=>{O=O.next((()=>E.getEntry(g,F))).next((H=>{const K=p.docVersions.get(F);ve(K!==null,48541),H.version.compareTo(K)<0&&(T.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),E.addEntry(H)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Me();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function FS(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function vC(s,e){const t=Ie(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const A=o.get(T);if(!A)return;m.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,T))));let O=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Lt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,r)),o=o.insert(T,O),(function(H,K,ie){return H.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=pC?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(A,O,E)&&m.push(t.Pi.updateTargetData(u,O))}));let g=Un(),p=Me();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(EC(u,c,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(Te.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((T=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return L.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function EC(s,e,t){let r=Me(),o=Me();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=Un();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ne(qp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function TC(s,e){const t=Ie(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ma),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function bC(s,e){const t=Ie(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,L.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new mr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function rp(s,e,t){const r=Ie(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Is(c))throw c;ne(qp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function sT(s,e,t){const r=Ie(s);let o=Te.min(),u=Me();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const T=Ie(g),A=T.xs.get(E);return A!==void 0?L.resolve(T.Ms.get(A)):T.Pi.getTargetData(p,E)})(r,c,ii(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:Te.min(),t?u:Me()))).next((m=>(SC(r,o2(e),m),{documents:m,Qs:u})))))}function SC(s,e,t){let r=s.Os.get(e)||Te.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class aT{constructor(){this.activeTargetIds=d2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HS{constructor(){this.Mo=new aT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="ConnectivityMonitor";class lT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(oT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(oT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=null;function sp(){return $h===null?$h=(function(){return 268435456+Math.round(2147483648*Math.random())})():$h++,"0x"+$h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="RestConnection",wC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const c=sp(),m=this.zo(e,t.toUriEncodedString());ne(Ig,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=sl(p);return this.Jo(e,m,g,r,E).then((T=>(ne(Ig,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Ta(Ig,`RPC '${e}' ${c} failed with error: `,T,"url: ",m,"request:",r),T}))}Ho(e,t,r,o,u,c){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=wC[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class RC extends IC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const c=sp();return new Promise(((m,g)=>{const p=new hb;p.setWithCredentials(!0),p.listenOnce(fb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wh.NO_ERROR:const T=p.getResponseJson();ne(un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),m(T);break;case Wh.TIMEOUT:ne(un,`RPC '${e}' ${c} timed out`),g(new se(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const A=p.getStatus();if(ne(un,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const F=O==null?void 0:O.error;if(F&&F.status&&F.message){const H=(function(ie){const ee=ie.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ee)>=0?ee:Z.UNKNOWN})(F.status);g(new se(H,F.message))}else g(new se(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new se(Z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ne(un,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);ne(un,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",E,r,15)}))}T_(e,t,r){const o=sp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=gb(),m=mb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=u.join("");ne(un,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=c.createWebChannel(E,g);this.I_(T);let A=!1,O=!1;const F=new xC({Yo:K=>{O?ne(un,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(A||(ne(un,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),ne(un,`RPC '${e}' stream ${o} sending:`,K),T.send(K))},Zo:()=>T.close()}),H=(K,ie,ee)=>{K.listen(ie,(Q=>{try{ee(Q)}catch(le){setTimeout((()=>{throw le}),0)}}))};return H(T,Su.EventType.OPEN,(()=>{O||(ne(un,`RPC '${e}' stream ${o} transport opened.`),F.o_())})),H(T,Su.EventType.CLOSE,(()=>{O||(O=!0,ne(un,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(T))})),H(T,Su.EventType.ERROR,(K=>{O||(O=!0,Ta(un,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),F.a_(new se(Z.UNAVAILABLE,"The operation could not be completed")))})),H(T,Su.EventType.MESSAGE,(K=>{var ie;if(!O){const ee=K.data[0];ve(!!ee,16349);const Q=ee,le=(Q==null?void 0:Q.error)||((ie=Q[0])==null?void 0:ie.error);if(le){ne(un,`RPC '${e}' stream ${o} received error:`,le);const _e=le.status;let de=(function(N){const w=Pt[N];if(w!==void 0)return fS(w)})(_e),C=le.message;de===void 0&&(de=Z.INTERNAL,C="Unknown error status: "+_e+" with message "+le.message),O=!0,F.a_(new se(de,C)),T.close()}else ne(un,`RPC '${e}' stream ${o} received:`,ee),F.u_(ee)}})),H(m,db.STAT_EVENT,(K=>{K.stat===zg.PROXY?ne(un,`RPC '${e}' stream ${o} detected buffering proxy`):K.stat===zg.NOPROXY&&ne(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof window<"u"?window:null}function cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(s){return new N2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="PersistentStream";class KS{constructor(e,t,r,o,u,c,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(pn(t.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new se(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(uT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(uT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NC extends KS{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=O2(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Te.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?yn(c.readTime):Te.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Af(g)?{documents:ES(u,g)}:{query:TS(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=gS(u,c.resumeToken);const p=Zg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Te.min())>0){m.readTime=nl(u,c.snapshotVersion.toTimestamp());const p=Zg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=k2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.q_(t)}}class DC extends KS{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=M2(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Wg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>xf(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class OC extends VC{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Jg(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new se(Z.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Jg(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class MC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pn(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class kC{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Na(this)&&(ne(xa,"Restarting streams for network reachability change."),await(async function(g){const p=Ie(g);p.Ea.add(4),await oc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await rd(p)})(this))}))})),this.Ra=new MC(r,o)}}async function rd(s){if(Na(s))for(const e of s.da)await e(!0)}async function oc(s){for(const e of s.da)await e(!1)}function QS(s,e){const t=Ie(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kp(t)?Gp(t):ul(t).O_()&&Hp(t,e))}function Fp(s,e){const t=Ie(s),r=ul(t);t.Ia.delete(e),r.O_()&&YS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Na(t)&&t.Ra.set("Unknown"))}function Hp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(s).Y_(e)}function YS(s,e){s.Va.Ue(e),ul(s).Z_(e)}function Gp(s){s.Va=new I2({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ul(s).start(),s.Ra.ua()}function Kp(s){return Na(s)&&!ul(s).x_()&&s.Ia.size>0}function Na(s){return Ie(s).Ea.size===0}function XS(s){s.Va=void 0}async function PC(s){s.Ra.set("Online")}async function zC(s){s.Ia.forEach(((e,t)=>{Hp(s,e)}))}async function LC(s,e){XS(s),Kp(s)?(s.Ra.ha(e),Gp(s)):s.Ra.set("Unknown")}async function UC(s,e,t){if(s.Ra.set("Online"),e instanceof mS&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){ne(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vf(s,r)}else if(e instanceof lf?s.Va.Ze(e):e instanceof dS?s.Va.st(e):s.Va.tt(e),!t.isEqual(Te.min()))try{const r=await FS(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Lt.EMPTY_BYTE_STRING,E.snapshotVersion)),YS(u,g);const T=new mr(E.target,g,p,E.sequenceNumber);Hp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ne(xa,"Failed to raise snapshot:",r),await Vf(s,r)}}async function Vf(s,e,t){if(!Is(e))throw e;s.Ea.add(1),await oc(s),s.Ra.set("Offline"),t||(t=()=>FS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ne(xa,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await rd(s)}))}function $S(s,e){return e().catch((t=>Vf(s,t,e)))}async function lc(s){const e=Ie(s),t=As(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ma;for(;jC(e);)try{const o=await TC(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,BC(e,o)}catch(o){await Vf(e,o)}ZS(e)&&JS(e)}function jC(s){return Na(s)&&s.Ta.length<10}function BC(s,e){s.Ta.push(e);const t=As(s);t.O_()&&t.X_&&t.ea(e.mutations)}function ZS(s){return Na(s)&&!As(s).x_()&&s.Ta.length>0}function JS(s){As(s).start()}async function qC(s){As(s).ra()}async function FC(s){const e=As(s);for(const t of s.Ta)e.ea(t.mutations)}async function HC(s,e,t){const r=s.Ta.shift(),o=Vp.from(r,e,t);await $S(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await lc(s)}async function GC(s,e){e&&As(s).X_&&await(async function(r,o){if((function(c){return S2(c)&&c!==Z.ABORTED})(o.code)){const u=r.Ta.shift();As(r).B_(),await $S(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await lc(r)}})(s,e),ZS(s)&&JS(s)}async function cT(s,e){const t=Ie(s);t.asyncQueue.verifyOperationInProgress(),ne(xa,"RemoteStore received new credentials");const r=Na(t);t.Ea.add(3),await oc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rd(t)}async function KC(s,e){const t=Ie(s);e?(t.Ea.delete(2),await rd(t)):e||(t.Ea.add(2),await oc(t),t.Ra.set("Unknown"))}function ul(s){return s.ma||(s.ma=(function(t,r,o){const u=Ie(t);return u.sa(),new NC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:PC.bind(null,s),t_:zC.bind(null,s),r_:LC.bind(null,s),H_:UC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Kp(s)?Gp(s):s.Ra.set("Unknown")):(await s.ma.stop(),XS(s))}))),s.ma}function As(s){return s.fa||(s.fa=(function(t,r,o){const u=Ie(t);return u.sa(),new DC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:qC.bind(null,s),r_:GC.bind(null,s),ta:FC.bind(null,s),na:HC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await lc(s)):(await s.fa.stop(),s.Ta.length>0&&(ne(xa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new Qp(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(s,e){if(pn("AsyncQueue",`${e}: ${s}`),Is(s))return new se(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=Au(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Lo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.ga=new yt(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class il{constructor(e,t,r,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new il(e,t,Lo.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class YC{constructor(){this.queries=fT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ie(t),u=o.queries;o.queries=fT(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new se(Z.ABORTED,"Firestore shutting down"))}}function fT(){return new wr((s=>Wb(s)),$f)}async function XC(s,e){const t=Ie(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new QC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=Yp(c,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Xp(t)}async function $C(s,e){const t=Ie(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZC(s,e){const t=Ie(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&Xp(t)}function JC(s,e,t){const r=Ie(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function Xp(s){s.Ca.forEach((e=>{e.next()}))}var ap,dT;(dT=ap||(ap={})).Ma="default",dT.Cache="cache";class WC{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.key=e}}class eA{constructor(e){this.key=e}}class eN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=eS(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new hT,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const A=o.get(E),O=rc(this.query,T)?T:null,F=!!A&&this.mutatedKeys.has(A.key),H=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let K=!1;A&&O?A.data.isEqual(O.data)?F!==H&&(r.track({type:3,doc:O}),K=!0):this.su(A,O)||(r.track({type:2,doc:O}),K=!0,(g&&this.eu(O,g)>0||p&&this.eu(O,p)<0)&&(m=!0)):!A&&O?(r.track({type:0,doc:O}),K=!0):A&&!O&&(r.track({type:1,doc:A}),K=!0,(g||p)&&(m=!0)),K&&(O?(c=c.add(O),u=H?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,T)=>(function(O,F){const H=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:K})}};return H(O)-H(F)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new il(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new eA(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new WS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class tN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nN{constructor(e){this.key=e,this.hu=!1}}class iN{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new wr((m=>Wb(m)),$f),this.Iu=new Map,this.Eu=new Set,this.du=new yt(oe.comparator),this.Au=new Map,this.Ru=new Lp,this.Vu={},this.mu=new Map,this.fu=Ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rN(s,e,t=!0){const r=aA(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await tA(r,e,t,!0),o}async function sN(s,e){const t=aA(s);await tA(t,e,!0,!1)}async function tA(s,e,t,r){const o=await bC(s.localStore,ii(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await aN(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&QS(s.remoteStore,o),m}async function aN(s,e,t,r,o){s.pu=(T,A,O)=>(async function(H,K,ie,ee){let Q=K.view.ru(ie);Q.Cs&&(Q=await sT(H.localStore,K.query,!1).then((({documents:C})=>K.view.ru(C,Q))));const le=ee&&ee.targetChanges.get(K.targetId),_e=ee&&ee.targetMismatches.get(K.targetId)!=null,de=K.view.applyChanges(Q,H.isPrimaryClient,le,_e);return gT(H,K.targetId,de.au),de.snapshot})(s,T,A,O);const u=await sT(s.localStore,e,!0),c=new eN(e,u.Qs),m=c.ru(u.documents),g=ac.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);gT(s,t,p.au);const E=new tN(e,t,c);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function oN(s,e,t){const r=Ie(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!$f(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await rp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Fp(r.remoteStore,o.targetId),op(r,o.targetId)})).catch(Ca)):(op(r,o.targetId),await rp(r.localStore,o.targetId,!0))}async function lN(s,e){const t=Ie(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fp(t.remoteStore,r.targetId))}async function uN(s,e,t){const r=oA(s);try{const o=await(function(c,m){const g=Ie(c),p=tt.now(),E=m.reduce(((O,F)=>O.add(F.key)),Me());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let F=Un(),H=Me();return g.Ns.getEntries(O,E).next((K=>{F=K,F.forEach(((ie,ee)=>{ee.isValidDocument()||(H=H.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,F))).next((K=>{T=K;const ie=[];for(const ee of m){const Q=T2(ee,T.get(ee.key).overlayedDocument);Q!=null&&ie.push(new Ir(ee.key,Q,Hb(Q.value.mapValue),Xt.exists(!0)))}return g.mutationQueue.addMutationBatch(O,p,ie,m)})).next((K=>{A=K;const ie=K.applyToLocalDocumentSet(T,H);return g.documentOverlayCache.saveOverlays(O,K.batchId,ie)}))})).then((()=>({batchId:A.batchId,changes:nS(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new yt(we)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,t),await uc(r,o.changes),await lc(r.remoteStore)}catch(o){const u=Yp(o,"Failed to persist write");t.reject(u)}}async function nA(s,e){const t=Ie(s);try{const r=await vC(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(ve(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ve(c.hu,14607):o.removedDocuments.size>0&&(ve(c.hu,42227),c.hu=!1))})),await uc(t,r,e)}catch(r){await Ca(r)}}function mT(s,e,t){const r=Ie(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=Ie(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const A of T.Sa)A.va(m)&&(p=!0)})),p&&Xp(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cN(s,e,t){const r=Ie(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new yt(oe.comparator);c=c.insert(u,Tt.newNoDocument(u,Te.min()));const m=Me().add(u),g=new Wf(Te.min(),new Map,new yt(we),c,m);await nA(r,g),r.du=r.du.remove(u),r.Au.delete(e),Zp(r)}else await rp(r.localStore,e,!1).then((()=>op(r,e,t))).catch(Ca)}async function hN(s,e){const t=Ie(s),r=e.batch.batchId;try{const o=await _C(t.localStore,e);rA(t,r,null),iA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await uc(t,o)}catch(o){await Ca(o)}}async function fN(s,e,t){const r=Ie(s);try{const o=await(function(c,m){const g=Ie(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(ve(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,e);rA(r,e,t),iA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await uc(r,o)}catch(o){await Ca(o)}}function iA(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function rA(s,e,t){const r=Ie(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function op(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||sA(s,r)}))}function sA(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Fp(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Zp(s))}function gT(s,e,t){for(const r of t)r instanceof WS?(s.Ru.addReference(r.key,e),dN(s,r)):r instanceof eA?(ne($p,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||sA(s,r.key)):me(19791,{wu:r})}function dN(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(ne($p,"New document in limbo: "+t),s.Eu.add(r),Zp(s))}function Zp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new oe($e.fromString(e)),r=s.fu.next();s.Au.set(r,new nN(t)),s.du=s.du.insert(t,r),QS(s.remoteStore,new mr(ii(Cp(t.path)),r,"TargetPurposeLimboResolution",ni.ce))}}async function uc(s,e,t){const r=Ie(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{var E;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){o.push(p);const T=Bp.As(g.targetId,p);u.push(T)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=Ie(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(p,(A=>L.forEach(A.Es,(O=>E.persistence.referenceDelegate.addReference(T,A.targetId,O))).next((()=>L.forEach(A.ds,(O=>E.persistence.referenceDelegate.removeReference(T,A.targetId,O)))))))))}catch(T){if(!Is(T))throw T;ne(qp,"Failed to update sequence numbers: "+T)}for(const T of p){const A=T.targetId;if(!T.fromCache){const O=E.Ms.get(A),F=O.snapshotVersion,H=O.withLastLimboFreeSnapshotVersion(F);E.Ms=E.Ms.insert(A,H)}}})(r.localStore,u))}async function mN(s,e){const t=Ie(s);if(!t.currentUser.isEqual(e)){ne($p,"User change. New user:",e.toKey());const r=await qS(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new se(Z.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uc(t,r.Ls)}}function gN(s,e){const t=Ie(s),r=t.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let o=Me();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function aA(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=nA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cN.bind(null,e),e.Pu.H_=ZC.bind(null,e.eventManager),e.Pu.yu=JC.bind(null,e.eventManager),e}function oA(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fN.bind(null,e),e}class $u{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BS(this.persistence,new jS,e.initialUser,this.serializer)}Cu(e){return new Up(nd.mi,this.serializer)}Du(e){return new HS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$u.provider={build:()=>new $u};class pN extends $u{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof Df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Up((r=>Df.mi(r,t)),this.serializer)}}class yN extends $u{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await oA(this.xu.syncEngine),await lc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return BS(this.persistence,new jS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new kS(r,e.asyncQueue,t)}Mu(e,t){const r=new vR(t,this.persistence);return new _R(e.asyncQueue,r)}Cu(e){const t=mC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new jp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CC(),cf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new HS}}class Of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mN.bind(null,this.syncEngine),await KC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YC})()}createDatastore(e){const t=id(e.databaseInfo.databaseId),r=(function(u){return new RC(u)})(e.databaseInfo);return(function(u,c,m,g){return new OC(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new kC(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>mT(this.syncEngine,t,0)),(function(){return lT.v()?new lT:new AC})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,E){const T=new iN(o,u,c,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Ie(o);ne(xa,"RemoteStore shutting down."),u.Ea.add(5),await oc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class vN{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{ne(ws,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ne(ws,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xg(s,e){s.asyncQueue.verifyOperationInProgress(),ne(ws,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await qS(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function pT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await EN(s);ne(ws,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>cT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>cT(e.remoteStore,o))),s._onlineComponents=e}async function EN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ne(ws,"Using user provided OfflineComponentProvider");try{await xg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),await xg(s,new $u)}}else ne(ws,"Using default OfflineComponentProvider"),await xg(s,new pN(void 0));return s._offlineComponents}async function lA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ne(ws,"Using user provided OnlineComponentProvider"),await pT(s,s._uninitializedComponentsProvider._online)):(ne(ws,"Using default OnlineComponentProvider"),await pT(s,new Of))),s._onlineComponents}function TN(s){return lA(s).then((e=>e.syncEngine))}async function bN(s){const e=await lA(s),t=e.eventManager;return t.onListen=rN.bind(null,e.syncEngine),t.onUnlisten=oN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lN.bind(null,e.syncEngine),t}function SN(s,e,t={}){const r=new yr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new _N({next:A=>{E.Nu(),c.enqueueAndForget((()=>$C(u,T))),A.fromCache&&g.source==="server"?p.reject(new se(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),T=new WC(m,E,{includeMetadataChanges:!0,qa:!0});return XC(u,T)})(await bN(s),s.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firestore.googleapis.com",_T=!0;class vT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cA,this.ssl=_T}else this.host=e.host,this.ssl=e.ssl??_T;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z2)throw new se(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rR;switch(r.type){case"firstParty":return new lR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=yT.get(t);r&&(ne("ComponentProvider","Removing Datastore"),yT.delete(t),r.terminate())})(this),Promise.resolve()}}function AN(s,e,t,r={}){var p;s=vr(s,sd);const o=sl(e),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(JT(`https://${m}`),WT("Firestore",!0)),u.host!==cA&&u.host!==m&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!_a(g,c)&&(s._setSettings(g),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=sn.MOCK_USER;else{E=VI(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new se(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(A)}s._authCredentials=new sR(new yb(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cl(this.firestore,e,this._query)}}class qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ec(t,qt._jsonSchema))return new qt(e,r||null,new oe($e.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:zt("string",qt._jsonSchemaVersion),referencePath:zt("string")};class Ts extends cl{constructor(e,t,r){super(e,t,Cp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new oe(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function gt(s,e,...t){if(s=on(s),vb("collection","path",e),s instanceof sd){const r=$e.fromString(e,...t);return uE(r),new Ts(s,null,r)}{if(!(s instanceof qt||s instanceof Ts))throw new se(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child($e.fromString(e,...t));return uE(r),new Ts(s.firestore,null,r)}}function zn(s,e,...t){if(s=on(s),arguments.length===1&&(e=_p.newId()),vb("doc","path",e),s instanceof sd){const r=$e.fromString(e,...t);return lE(r),new qt(s,null,new oe(r))}{if(!(s instanceof qt||s instanceof Ts))throw new se(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child($e.fromString(e,...t));return lE(r),new qt(s.firestore,s instanceof Ts?s.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="AsyncQueue";class TT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GS(this,"async_queue_retry"),this._c=()=>{const r=cf();r&&ne(ET,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=cf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=cf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;ne(ET,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,pn("INTERNAL UNHANDLED ERROR: ",bT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Qp.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&me(47125,{Pc:bT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Da extends sd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new TT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TT(e),this._firestoreClient=void 0,await e}}}function wN(s,e){const t=typeof s=="object"?s:ob(),r=typeof s=="string"?s:bf,o=pp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=NI("firestore");u&&AN(o,...u)}return o}function Jp(s){if(s._terminated)throw new se(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||hA(s),s._firestoreClient}function hA(s){var r,o,u;const e=s._freezeSettings(),t=(function(m,g,p,E){return new YR(m,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,uA(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new vN(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function IN(s,e){Ta("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return xN(s,Of.provider,{build:r=>new yN(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function xN(s,e,t){if((s=vr(s,Da))._firestoreClient||s._terminated)throw new se(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new se(Z.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},hA(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(Lt.fromBase64String(e))}catch(t){throw new se(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ti(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ec(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:zt("string",ti._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(ec(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:zt("string",Hi._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ec(e,Gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gi(e.vectorValues);throw new se(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gi._jsonSchemaVersion="firestore/vectorValue/1.0",Gi._jsonSchema={type:zt("string",Gi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=/^__.*__$/;class CN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ir(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}class fA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ir(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:s})}}class ey{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dA(this.Ac)&&RN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||id(e)}Cc(e,t,r,o=!1){return new ey({Ac:e,methodName:t,Dc:r,path:_t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(s){const e=s._freezeSettings(),t=id(s._databaseId);return new NN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function mA(s,e,t,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);ty("Data must be an object, but it was:",c,r);const m=yA(r,c);let g,p;if(u.merge)g=new In(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const A=lp(e,T,t);if(!c.contains(A))throw new se(Z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);vA(E,A)||E.push(A)}g=new In(E),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new CN(new hn(m),g,p)}class od extends Wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}function gA(s,e,t,r){const o=s.Cc(1,e,t);ty("Data must be an object, but it was:",o,r);const u=[],c=hn.empty();xs(r,((g,p)=>{const E=ny(e,g,t);p=on(p);const T=o.yc(E);if(p instanceof od)u.push(E);else{const A=hc(p,T);A!=null&&(u.push(E),c.set(E,A))}}));const m=new In(u);return new fA(c,m,o.fieldTransforms)}function pA(s,e,t,r,o,u){const c=s.Cc(1,e,t),m=[lp(e,r,t)],g=[o];if(u.length%2!=0)throw new se(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(lp(e,u[A])),g.push(u[A+1]);const p=[],E=hn.empty();for(let A=m.length-1;A>=0;--A)if(!vA(p,m[A])){const O=m[A];let F=g[A];F=on(F);const H=c.yc(O);if(F instanceof od)p.push(O);else{const K=hc(F,H);K!=null&&(p.push(O),E.set(O,K))}}const T=new In(p);return new fA(E,T,c.fieldTransforms)}function DN(s,e,t,r=!1){return hc(t,s.Cc(r?4:3,e))}function hc(s,e){if(_A(s=on(s)))return ty("Unsupported field value:",e,s),yA(s,e);if(s instanceof Wp)return(function(r,o){if(!dA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=hc(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=tt.fromDate(r);return{timestampValue:nl(o.serializer,u)}}if(r instanceof tt){const u=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nl(o.serializer,u)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ti)return{bytesValue:gS(o.serializer,r._byteString)};if(r instanceof qt){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:kp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Gi)return(function(c,m){return{mapValue:{fields:{[Ip]:{stringValue:xp},[$o]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Np(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${qf(r)}`)})(s,e)}function yA(s,e){const t={};return kb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(s,((r,o)=>{const u=hc(o,e.mc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function _A(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof tt||s instanceof Hi||s instanceof ti||s instanceof qt||s instanceof Wp||s instanceof Gi)}function ty(s,e,t){if(!_A(t)||!Eb(t)){const r=qf(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function lp(s,e,t){if((e=on(e))instanceof cc)return e._internalPath;if(typeof e=="string")return ny(s,e);throw Mf("Field path arguments must be of type string or ",s,!1,void 0,t)}const VN=new RegExp("[~\\*/\\[\\]]");function ny(s,e,t){if(e.search(VN)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new cc(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Mf(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new se(Z.INVALID_ARGUMENT,m+s+g)}function vA(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ON(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ON extends EA{data(){return super.data()}}function iy(s,e){return typeof e=="string"?ny(s,e):e instanceof cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ry{}class kN extends ry{}function nn(s,e,...t){let r=[];e instanceof ry&&r.push(e),r=r.concat(t),(function(u){const c=u.filter((g=>g instanceof sy)).length,m=u.filter((g=>g instanceof ld)).length;if(c>1||c>0&&m>0)throw new se(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class ld extends kN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ld(e,t,r)}_apply(e){const t=this._parse(e);return TA(e._query,t),new cl(e.firestore,e.converter,Xg(e._query,t))}_parse(e){const t=ad(e.firestore);return(function(u,c,m,g,p,E,T){let A;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new se(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){AT(T,E);const F=[];for(const H of T)F.push(ST(g,u,H));A={arrayValue:{values:F}}}else A=ST(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||AT(T,E),A=DN(m,c,T,E==="in"||E==="not-in");return je.create(p,E,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ei(s,e,t){const r=e,o=iy("where",s);return ld._create(o,r,t)}class sy extends ry{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)TA(c,g),c=Xg(c,g)})(e._query,t),new cl(e.firestore,e.converter,Xg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ST(s,e,t){if(typeof(t=on(t))=="string"){if(t==="")throw new se(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(e)&&t.indexOf("/")!==-1)throw new se(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($e.fromString(t));if(!oe.isDocumentKey(r))throw new se(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(s,new oe(r))}if(t instanceof qt)return Ku(s,t._key);throw new se(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(t)}.`)}function AT(s,e){if(!Array.isArray(s)||s.length===0)throw new se(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TA(s,e){const t=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PN{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xs(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){var r,o,u;const t=(u=(o=(r=e.fields)==null?void 0:r[$o].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>pt(c.doubleValue)));return new Gi(t)}convertGeoPoint(e){return new Hi(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const t=Er(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$e.fromString(e);ve(wS(r),9688,{name:e});const o=new ba(r.get(1),r.get(3)),u=new oe(r.popFirst(5));return o.isEqual(t)||pn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class Zh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uo extends EA{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uo._jsonSchema={type:zt("string",Uo._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class hf extends Uo{data(e={}){return super.data(e)}}class jo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Zh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new hf(this._firestore,this._userDataWriter,r.key,r,new Zh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:zN(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:s})}}jo._jsonSchemaVersion="firestore/querySnapshot/1.0",jo._jsonSchema={type:zt("string",jo._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class LN extends PN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function rn(s){s=vr(s,cl);const e=vr(s.firestore,Da),t=Jp(e),r=new LN(e);return MN(s._query),SN(t,s._query).then((o=>new jo(e,r,s,o)))}function Co(s,e,t,...r){s=vr(s,qt);const o=vr(s.firestore,Da),u=ad(o);let c;return c=typeof(e=on(e))=="string"||e instanceof cc?pA(u,"updateDoc",s._key,e,t,r):gA(u,"updateDoc",s._key,e),ud(o,[c.toMutation(s._key,Xt.exists(!0))])}function wT(s){return ud(vr(s.firestore,Da),[new sc(s._key,Xt.none())])}function No(s,e){const t=vr(s.firestore,Da),r=zn(s),o=bA(s.converter,e);return ud(t,[mA(ad(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then((()=>r))}function ud(s,e){return(function(r,o){const u=new yr;return r.asyncQueue.enqueueAndForget((async()=>uN(await TN(r),o,u))),u.promise})(Jp(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ad(e)}set(e,t,r){this._verifyNotCommitted();const o=Rg(e,this._firestore),u=bA(o.converter,t,r),c=mA(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,Xt.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Rg(e,this._firestore);let c;return c=typeof(t=on(t))=="string"||t instanceof cc?pA(this._dataReader,"WriteBatch.update",u._key,t,r,o):gA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rg(e,this._firestore);return this._mutations=this._mutations.concat(new sc(t._key,Xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rg(s,e){if((s=on(s)).firestore!==e)throw new se(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(s){return Jp(s=vr(s,Da)),new UN(s,(e=>ud(s,e)))}(function(e,t=!0){(function(o){ol=o})(al),Ho(new va("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Da(new aR(r.getProvider("auth-internal")),new uR(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new se(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),_s(rE,sE,e),_s(rE,sE,"esm2020")})();function SA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jN=SA,AA=new Ju("auth","Firebase",SA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new mp("@firebase/auth");function BN(s,...e){kf.logLevel<=Ue.WARN&&kf.warn(`Auth (${al}): ${s}`,...e)}function ff(s,...e){kf.logLevel<=Ue.ERROR&&kf.error(`Auth (${al}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(s,...e){throw ay(s,...e)}function Ki(s,...e){return ay(s,...e)}function wA(s,e,t){const r={...jN(),[e]:t};return new Ju("auth","Firebase",r).create(e,{appName:s.name})}function ya(s){return wA(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ay(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return AA.create(s,...e)}function Se(s,e,...t){if(!s)throw ay(e,...t)}function gr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ff(e),new Error(e)}function Sr(s,e){s||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function qN(){return IT()==="http:"||IT()==="https:"}function IT(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qN()||zI()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sr(t>e,"Short delay should be less than long delay!"),this.isMobile=kI()||LI()}get(){return FN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(s,e){Sr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QN=new fc(3e4,6e4);function ly(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function hl(s,e,t,r,o={}){return xA(s,o,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=Wu({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return PI()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&sl(s.emulatorConfig.host)&&(p.credentials="include"),IA.fetch()(await RA(s,s.config.apiHost,t,m),p)})}async function xA(s,e,t){s._canInitEmulator=!1;const r={...GN,...e};try{const o=new XN(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Jh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Jh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw Jh(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw wA(s,E,p);br(s,E)}}catch(o){if(o instanceof Ar)throw o;br(s,"network-request-failed",{message:String(o)})}}async function YN(s,e,t,r,o={}){const u=await hl(s,e,t,r,o);return"mfaPendingCredential"in u&&br(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function RA(s,e,t,r){const o=`${e}${t}?${r}`,u=s,c=u.config.emulator?oy(s.config,o):`${s.config.apiScheme}://${o}`;return KN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class XN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ki(this.auth,"network-request-failed")),QN.get())})}}function Jh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ki(s,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(s,e){return hl(s,"POST","/v1/accounts:delete",e)}async function Pf(s,e){return hl(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZN(s,e=!1){const t=on(s),r=await t.getIdToken(e),o=uy(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Pu(Cg(o.auth_time)),issuedAtTime:Pu(Cg(o.iat)),expirationTime:Pu(Cg(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Cg(s){return Number(s)*1e3}function uy(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const o=QT(t);return o?JSON.parse(o):(ff("Failed to decode base64 JWT payload"),null)}catch(o){return ff("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function xT(s){const e=uy(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ar&&JN(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function JN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pu(this.lastLoginAt),this.creationTime=Pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(s){var T;const e=s.auth,t=await s.getIdToken(),r=await Zu(s,Pf(e,{idToken:t}));Se(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(T=o.providerUserInfo)!=null&&T.length?CA(o.providerUserInfo):[],c=tD(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,E)}async function eD(s){const e=on(s);await zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tD(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function CA(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(s,e){const t=await xA(s,{},async()=>{const r=Wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await RA(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&sl(s.emulatorConfig.host)&&(g.credentials="include"),IA.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iD(s,e){return hl(s,"POST","/v2/accounts:revokeToken",ly(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=xT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await nD(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,c=new Bo;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new WN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Zu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZN(this,e)}reload(){return eD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bi(this.auth.app))return Promise.reject(ya(this.auth));const e=await this.getIdToken();return await Zu(this,$N(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:O,providerData:F,stsTokenManager:H}=t;Se(T&&H,e,"internal-error");const K=Bo.fromJSON(this.name,H);Se(typeof T=="string",e,"internal-error"),us(r,e.name),us(o,e.name),Se(typeof A=="boolean",e,"internal-error"),Se(typeof O=="boolean",e,"internal-error"),us(u,e.name),us(c,e.name),us(m,e.name),us(g,e.name),us(p,e.name),us(E,e.name);const ie=new yi({uid:T,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:O,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:K,createdAt:p,lastLoginAt:E});return F&&Array.isArray(F)&&(ie.providerData=F.map(ee=>({...ee}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,t,r=!1){const o=new Bo;o.updateFromServerResponse(t);const u=new yi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await zf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?CA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Bo;m.updateFromIdToken(r);const g=new yi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;function pr(s){Sr(s instanceof Function,"Expected a class definition");let e=RT.get(s);return e?(Sr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,RT.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}NA.type="NONE";const CT=NA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(s,e,t){return`firebase:${s}:${e}:${t}`}class qo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=df(this.userKey,o.apiKey,u),this.fullPersistenceKey=df("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Pf(this.auth,{idToken:e}).catch(()=>{});return t?yi._fromGetAccountInfoResponse(this.auth,t,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qo(pr(CT),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||pr(CT);const c=df(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const E=await p._get(c);if(E){let T;if(typeof E=="string"){const A=await Pf(e,{idToken:E}).catch(()=>{});if(!A)break;T=await yi._fromGetAccountInfoResponse(e,A,E)}else T=yi._fromJSON(e,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new qo(u,e,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new qo(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PA(e))return"Blackberry";if(zA(e))return"Webos";if(VA(e))return"Safari";if((e.includes("chrome/")||OA(e))&&!e.includes("edge/"))return"Chrome";if(kA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DA(s=Ft()){return/firefox\//i.test(s)}function VA(s=Ft()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OA(s=Ft()){return/crios\//i.test(s)}function MA(s=Ft()){return/iemobile/i.test(s)}function kA(s=Ft()){return/android/i.test(s)}function PA(s=Ft()){return/blackberry/i.test(s)}function zA(s=Ft()){return/webos/i.test(s)}function cy(s=Ft()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function rD(s=Ft()){var e;return cy(s)&&!!((e=window.navigator)!=null&&e.standalone)}function sD(){return UI()&&document.documentMode===10}function LA(s=Ft()){return cy(s)||kA(s)||zA(s)||PA(s)||/windows phone/i.test(s)||MA(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(s,e=[]){let t;switch(s){case"Browser":t=NT(Ft());break;case"Worker":t=`${NT(Ft())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(s,e={}){return hl(s,"GET","/v2/passwordPolicy",ly(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=6;class uD{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??lD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DT(this),this.idTokenSubscription=new DT(this),this.beforeStateQueue=new aD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pr(t)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pf(this,{idToken:e}),r=await yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Bi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bi(this.app))return Promise.reject(ya(this));const t=e?on(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bi(this.app)?Promise.reject(ya(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bi(this.app)?Promise.reject(ya(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oD(this),t=new uD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ju("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await iD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&BN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hy(s){return on(s)}class DT{constructor(e){this.auth=e,this.observer=null,this.addObserver=GI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hD(s){fy=s}function fD(s){return fy.loadJS(s)}function dD(){return fy.gapiScript}function mD(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(s,e){const t=pp(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(_a(u,e??{}))return o;br(o,"already-initialized")}return t.initialize({options:e})}function pD(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(pr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yD(s,e,t){const r=hy(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=jA(e),{host:c,port:m}=_D(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(_a(p,r.config.emulator)&&_a(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,sl(c)?(JT(`${u}//${c}${g}`),WT("Auth",!0)):vD()}function jA(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function _D(s){const e=jA(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:VT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:VT(c)}}}function VT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function vD(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,t){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(s,e){return YN(s,"POST","/v1/accounts:signInWithIdp",ly(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="http://localhost";class Ra extends BA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const c=new Ra(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Fo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Fo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fo(e,t)}buildRequest(){const e={requestUri:ED,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends qA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends dc{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fs.credential(t,r)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends dc{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends dc{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await yi._fromIdTokenResponse(e,r,o),c=OT(r);return new rl({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=OT(r);return new rl({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function OT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Ar{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Lf(e,t,r,o)}}function FA(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(s,u,e,r):u})}async function TD(s,e,t=!1){const r=await Zu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return rl._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(s,e,t=!1){const{auth:r}=s;if(Bi(r.app))return Promise.reject(ya(r));const o="reauthenticate";try{const u=await Zu(s,FA(r,o,e,s),t);Se(u.idToken,r,"internal-error");const c=uy(u.idToken);Se(c,r,"internal-error");const{sub:m}=c;return Se(s.uid===m,r,"user-mismatch"),rl._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&br(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(s,e,t=!1){if(Bi(s.app))return Promise.reject(ya(s));const r="signIn",o=await FA(s,r,e),u=await rl._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}function AD(s,e,t,r){return on(s).onIdTokenChanged(e,t,r)}function wD(s,e,t){return on(s).beforeAuthStateChanged(e,t)}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=1e3,xD=10;class GA extends HA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);sD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GA.type="LOCAL";const RD=GA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends HA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KA.type="SESSION";const QA=KA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await CD(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=dy("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function DD(s){Qi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function VD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OD(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function MD(){return YA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firebaseLocalStorageDb",kD=1,jf="firebaseLocalStorage",$A="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hd(s,e){return s.transaction([jf],e?"readwrite":"readonly").objectStore(jf)}function PD(){const s=indexedDB.deleteDatabase(XA);return new mc(s).toPromise()}function hp(){const s=indexedDB.open(XA,kD);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(jf,{keyPath:$A})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(jf)?e(r):(r.close(),await PD(),e(await hp()))})})}async function MT(s,e,t){const r=hd(s,!0).put({[$A]:e,value:t});return new mc(r).toPromise()}async function zD(s,e){const t=hd(s,!1).get(e),r=await new mc(t).toPromise();return r===void 0?null:r.value}function kT(s,e){const t=hd(s,!0).delete(e);return new mc(t).toPromise()}const LD=800,UD=3;class ZA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(MD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await VD(),!this.activeServiceWorker)return;this.sender=new ND(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hp();return await MT(e,Uf,"1"),await kT(e,Uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>MT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=hd(o,!1).getAll();return new mc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZA.type="LOCAL";const jD=ZA;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(s,e){return e?pr(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends BA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qD(s){return SD(s.auth,new my(s),s.bypassAuthState)}function FD(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),bD(t,new my(s),s.bypassAuthState)}async function HD(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),TD(t,new my(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qD;case"linkViaPopup":case"linkViaRedirect":return HD;case"reauthViaPopup":case"reauthViaRedirect":return FD;default:br(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new fc(2e3,1e4);class zo extends JA{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GD.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="pendingRedirect",mf=new Map;class QD extends JA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=mf.get(this.auth._key());if(!e){try{const r=await YD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mf.set(this.auth._key(),e)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(s,e){const t=ZD(e),r=$D(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function XD(s,e){mf.set(s._key(),e)}function $D(s){return pr(s._redirectPersistence)}function ZD(s){return df(KD,s.config.apiKey,s.name)}async function JD(s,e,t=!1){if(Bi(s.app))return Promise.reject(ya(s));const r=hy(s),o=BD(r,e),c=await new QD(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=600*1e3;class eV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!WA(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ki(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WD&&this.cachedEventUids.clear(),this.cachedEventUids.has(PT(e))}saveEventToCache(e){this.cachedEventUids.add(PT(e)),this.lastProcessedEventTime=Date.now()}}function PT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function WA({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tV(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WA(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(s,e={}){return hl(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rV=/^https?/;async function sV(s){if(s.config.emulator)return;const{authorizedDomains:e}=await nV(s);for(const t of e)try{if(aV(t))return}catch{}br(s,"unauthorized-domain")}function aV(s){const e=up(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!rV.test(t))return!1;if(iV.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new fc(3e4,6e4);function zT(){const s=Qi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function lV(s){return new Promise((e,t)=>{var o,u,c;function r(){zT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zT(),t(Ki(s,"network-request-failed"))},timeout:oV.get()})}if((u=(o=Qi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((c=Qi().gapi)!=null&&c.load)r();else{const m=mD("iframefcb");return Qi()[m]=()=>{gapi.load?r():t(Ki(s,"network-request-failed"))},fD(`${dD()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw gf=null,e})}let gf=null;function uV(s){return gf=gf||lV(s),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new fc(5e3,15e3),hV="__/auth/iframe",fV="emulator/auth/iframe",dV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gV(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?oy(e,fV):`https://${s.config.authDomain}/${hV}`,r={apiKey:e.apiKey,appName:s.name,v:al},o=mV.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${Wu(r).slice(1)}`}async function pV(s){const e=await uV(s),t=Qi().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:gV(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dV,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=Ki(s,"network-request-failed"),m=Qi().setTimeout(()=>{u(c)},cV.get());function g(){Qi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_V=500,vV=600,EV="_blank",TV="http://localhost";class LT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bV(s,e,t,r=_V,o=vV){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...yV,width:r.toString(),height:o.toString(),top:u,left:c},p=Ft().toLowerCase();t&&(m=OA(p)?EV:t),DA(p)&&(e=e||TV,g.scrollbars="yes");const E=Object.entries(g).reduce((A,[O,F])=>`${A}${O}=${F},`,"");if(rD(p)&&m!=="_self")return SV(e||"",m),new LT(null);const T=window.open(e||"",m,E);Se(T,s,"popup-blocked");try{T.focus()}catch{}return new LT(T)}function SV(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="__/auth/handler",wV="emulator/auth/handler",IV=encodeURIComponent("fac");async function UT(s,e,t,r,o,u){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:al,eventId:o};if(e instanceof qA){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",HI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(e instanceof dc){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),p=g?`#${IV}=${encodeURIComponent(g)}`:"";return`${xV(s)}?${Wu(m).slice(1)}${p}`}function xV({config:s}){return s.emulator?oy(s,wV):`https://${s.authDomain}/${AV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class RV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QA,this._completeRedirectFn=JD,this._overrideRedirectResult=XD}async _openPopup(e,t,r,o){var c;Sr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await UT(e,t,r,up(),o);return bV(e,u,dy())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await UT(e,t,r,up(),o);return DD(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Sr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await pV(e),r=new eV(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ng,{type:Ng},o=>{var c;const u=(c=o==null?void 0:o[0])==null?void 0:c[Ng];u!==void 0&&t(!!u),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LA()||VA()||cy()}}const CV=RV;var jT="@firebase/auth",BT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VV(s){Ho(new va("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UA(s)},p=new cD(r,o,u,g);return pD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new va("auth-internal",e=>{const t=hy(e.getProvider("auth").getImmediate());return(r=>new NV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(jT,BT,DV(s)),_s(jT,BT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=300,MV=ZT("authIdTokenMaxAge")||OV;let qT=null;const kV=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MV)return;const o=t==null?void 0:t.token;qT!==o&&(qT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PV(s=ob()){const e=pp(s,"auth");if(e.isInitialized())return e.getImmediate();const t=gD(s,{popupRedirectResolver:CV,persistence:[jD,RD,QA]}),r=ZT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=kV(u.toString());wD(t,c,()=>c(t.currentUser)),AD(t,m=>c(m))}}const o=XT("auth");return o&&yD(t,`http://${o}`),t}function zV(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}hD({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Ki("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",zV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VV("Browser");const LV={apiKey:"AIzaSyCpZ1iVrU_JwK10gEvi9FGderKYaffgMGg",authDomain:"data-library-5cf6c.firebaseapp.com",projectId:"data-library-5cf6c",storageBucket:"data-library-5cf6c.firebasestorage.app",messagingSenderId:"976961164680",appId:"1:976961164680:web:4aa7027e61f13425bc163d"},e1=ab(LV),Ne=wN(e1);PV(e1);IN(Ne).catch(s=>{s.code==="failed-precondition"?console.warn("IndexedDB  :      ."):s.code==="unimplemented"&&console.warn("IndexedDB  ")});const Pn=()=>new Date().toISOString(),qe={WORKSPACES:"workspaces",CATEGORIES:"categories",ITEMS:"items",CHECKLISTS:"checklists",BOOKMARK_ZONES:"bookmark_zones",BOOKMARKS:"bookmarks"},UV=[{name:"1",default_color:"#c97e7e",order:0},{name:"2",default_color:"#d4a574",order:1},{name:"3",default_color:"#d9c86b",order:2},{name:"4",default_color:"#8cb89b",order:3},{name:"5",default_color:"#8ab4d9",order:4},{name:"6",default_color:"#c5a3d9",order:5}],Ge={workspaces:{list:async()=>{try{const s=nn(gt(Ne,qe.WORKSPACES));return(await rn(s)).docs.map(t=>({id:t.id,...t.data()})).sort((t,r)=>(t.order??0)-(r.order??0))}catch(s){return console.error("Workspaces  :",s),[]}},create:async s=>{try{const e=nn(gt(Ne,qe.WORKSPACES)),o=(await rn(e)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await No(gt(Ne,qe.WORKSPACES),{name:s,is_locked:!1,order:o+1,created_at:Pn()})).id,name:s,is_locked:!1,order:o+1,created_at:Pn()}}catch(e){throw console.error("Workspace  :",e),e}},update:async(s,e)=>{try{const t=zn(Ne,qe.WORKSPACES,s);await Co(t,e)}catch(t){throw console.error("Workspace  :",t),t}},delete:async s=>{try{const e=Do(Ne),t=nn(gt(Ne,qe.CATEGORIES),ei("workspace_id","==",s)),r=await rn(t),o=r.docs.map(E=>E.id),u=nn(gt(Ne,qe.ITEMS),ei("category_id","in",o.length>0?o:["__placeholder__"])),c=await rn(u),m=c.docs.map(E=>E.id),g=nn(gt(Ne,qe.CHECKLISTS),ei("item_id","in",m.length>0?m:["__placeholder__"]));(await rn(g)).docs.forEach(E=>e.delete(E.ref)),c.docs.forEach(E=>e.delete(E.ref)),r.docs.forEach(E=>e.delete(E.ref)),e.delete(zn(Ne,qe.WORKSPACES,s)),await e.commit()}catch(e){throw console.error("Workspace  :",e),e}},reorder:async s=>{try{const e=Do(Ne),t=nn(gt(Ne,qe.WORKSPACES));(await rn(t)).docs.forEach(o=>{const u=s.indexOf(o.id);u!==-1&&e.update(o.ref,{order:u})}),await e.commit()}catch(e){throw console.error("Workspace   :",e),e}}},categories:{listByWorkspace:async s=>{try{const e=nn(gt(Ne,qe.CATEGORIES),ei("workspace_id","==",s));return(await rn(e)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>r.name.localeCompare(o.name,"ko"))}catch(e){return console.error("Categories  :",e),[]}},create:async(s,e)=>{try{return{id:(await No(gt(Ne,qe.CATEGORIES),{workspace_id:s,name:e,created_at:Pn()})).id,workspace_id:s,name:e,created_at:Pn()}}catch(t){throw console.error("Category  :",t),t}},update:async(s,e)=>{try{const t=zn(Ne,qe.CATEGORIES,s);await Co(t,{name:e})}catch(t){throw console.error("Category  :",t),t}},delete:async s=>{try{const e=Do(Ne),t=nn(gt(Ne,qe.ITEMS),ei("category_id","==",s)),r=await rn(t),o=r.docs.map(u=>u.id);if(o.length>0){const u=nn(gt(Ne,qe.CHECKLISTS),ei("item_id","in",o));(await rn(u)).docs.forEach(m=>e.delete(m.ref))}r.docs.forEach(u=>e.delete(u.ref)),e.delete(zn(Ne,qe.CATEGORIES,s)),await e.commit()}catch(e){throw console.error("Category  :",e),e}}},items:{listByCategory:async s=>{try{const e=nn(gt(Ne,qe.ITEMS),ei("category_id","==",s));return(await rn(e)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(e){return console.error("Items  :",e),[]}},create:async s=>{try{const e=nn(gt(Ne,qe.ITEMS),ei("category_id","==",s)),o=(await rn(e)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await No(gt(Ne,qe.ITEMS),{category_id:s,title:" ",description:"",order:o+1,created_at:Pn()})).id,category_id:s,title:" ",description:"",order:o+1,created_at:Pn()}}catch(e){throw console.error("Item  :",e),e}},update:async s=>{try{const e=zn(Ne,qe.ITEMS,s.id),t={...s};delete t.id,await Co(e,t)}catch(e){throw console.error("Item  :",e),e}},reorder:async(s,e)=>{try{const t=Do(Ne),r=nn(gt(Ne,qe.ITEMS),ei("category_id","==",s));(await rn(r)).docs.forEach(u=>{const c=e.indexOf(u.id);c!==-1&&t.update(u.ref,{order:c})}),await t.commit()}catch(t){throw console.error("Item  :",t),t}},delete:async s=>{try{const e=Do(Ne),t=nn(gt(Ne,qe.CHECKLISTS),ei("item_id","==",s));(await rn(t)).docs.forEach(o=>e.delete(o.ref)),e.delete(zn(Ne,qe.ITEMS,s)),await e.commit()}catch(e){throw console.error("Item  :",e),e}}},checklist:{listByItem:async s=>{try{const e=nn(gt(Ne,qe.CHECKLISTS),ei("item_id","==",s));return(await rn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Checklists  :",e),[]}},create:async s=>{try{return{id:(await No(gt(Ne,qe.CHECKLISTS),{item_id:s,text:"",is_checked:!1,memo:"",created_at:Pn()})).id,item_id:s,text:"",is_checked:!1,memo:"",created_at:Pn()}}catch(e){throw console.error("Checklist  :",e),e}},update:async s=>{try{const e=zn(Ne,qe.CHECKLISTS,s.id),t={...s};delete t.id,await Co(e,t)}catch(e){throw console.error("Checklist  :",e),e}},delete:async s=>{try{await wT(zn(Ne,qe.CHECKLISTS,s))}catch(e){throw console.error("Checklist  :",e),e}}},bookmarkZones:{list:async()=>{try{const s=nn(gt(Ne,qe.BOOKMARK_ZONES));return(await rn(s)).docs.map(t=>({id:t.id,...t.data()})).sort((t,r)=>(t.order??0)-(r.order??0))}catch(s){return console.error("BookmarkZones  :",s),[]}},create:async(s,e,t)=>{try{return{id:(await No(gt(Ne,qe.BOOKMARK_ZONES),{name:s,default_color:e,order:t,created_at:Pn()})).id,name:s,default_color:e,order:t,created_at:Pn()}}catch(r){throw console.error("BookmarkZone  :",r),r}},update:async(s,e)=>{try{const t=zn(Ne,qe.BOOKMARK_ZONES,s);await Co(t,e)}catch(t){throw console.error("BookmarkZone  :",t),t}},initializeDefaults:async()=>{try{if((await Ge.bookmarkZones.list()).length===0){const e=Do(Ne);UV.forEach(t=>{const r=zn(gt(Ne,qe.BOOKMARK_ZONES));e.set(r,{...t,created_at:Pn()})}),await e.commit()}}catch(s){console.error("Default zones  :",s)}}},bookmarks:{list:async()=>{try{const s=nn(gt(Ne,qe.BOOKMARKS));return(await rn(s)).docs.map(t=>({id:t.id,...t.data()})).sort((t,r)=>(t.order??0)-(r.order??0))}catch(s){return console.error("Bookmarks  :",s),[]}},listByZone:async s=>{try{const e=nn(gt(Ne,qe.BOOKMARKS),ei("zone_id","==",s));return(await rn(e)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(e){return console.error("Zone bookmarks  :",e),[]}},create:async(s,e,t,r)=>{try{const u=(await Ge.bookmarks.listByZone(s)).reduce((m,g)=>Math.max(m,g.order??0),-1);return{id:(await No(gt(Ne,qe.BOOKMARKS),{zone_id:s,name:e,url:t,color:r,order:u+1,created_at:Pn()})).id,zone_id:s,name:e,url:t,color:r,order:u+1,created_at:Pn()}}catch(o){throw console.error("Bookmark  :",o),o}},update:async(s,e)=>{try{const t=zn(Ne,qe.BOOKMARKS,s),r={...e};await Co(t,r)}catch(t){throw console.error("Bookmark  :",t),t}},delete:async s=>{try{await wT(zn(Ne,qe.BOOKMARKS,s))}catch(e){throw console.error("Bookmark  :",e),e}}}},jV=({categories:s,selectedCategoryId:e,onSelectCategory:t,onRefresh:r,workspaceName:o,isLocked:u,onAddCategory:c,onDeleteWorkspace:m,onToggleLock:g,onShowBookmarks:p})=>{const[E,T]=ce.useState(!1),[A,O]=ce.useState(""),[F,H]=ce.useState(null),[K,ie]=ce.useState(""),[ee,Q]=ce.useState("light");ce.useEffect(()=>{document.documentElement.classList.contains("light-mode")?Q("light"):Q("dark")},[]);const le=w=>{Q(w),w==="light"?document.documentElement.classList.add("light-mode"):document.documentElement.classList.remove("light-mode")},_e=()=>{if(!A.trim()){T(!1);return}c(A),O(""),T(!1)},de=(w,x,P)=>{w.stopPropagation(),H(x),ie(P)},C=async w=>{if(!K.trim()){H(null);return}await Ge.categories.update(w,K),r(),H(null)},I=async(w,x)=>{w.stopPropagation(),window.confirm("    . ?")&&(await Ge.categories.delete(x),r(),e===x&&t(""))},N=w=>{if(w.preventDefault(),w.stopPropagation(),u){alert("     .");return}window.confirm(`'${o}'  ?
    ,      .`)&&m()};return R.jsxs("div",{className:"flex flex-col h-full w-full",children:[R.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-border bg-zinc-950/50 flex-shrink-0",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("span",{className:"font-bold text-lg tracking-tight text-white leading-none",children:["",R.jsx("span",{className:"text-accent",children:""})]}),u&&R.jsx(Dg,{className:"w-3.5 h-3.5 text-amber-500/80"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{type:"button",onClick:()=>p==null?void 0:p(),className:"p-1.5 text-green-500 border border-green-500/50 hover:text-white hover:bg-green-500/20 hover:border-green-500 rounded transition-colors",title:" ",children:R.jsx(uI,{className:"w-5 h-5"})}),R.jsxs("div",{className:"flex bg-zinc-900 p-0.5 rounded-md border border-zinc-800/50",children:[R.jsx("button",{onClick:()=>le("dark"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${ee==="dark"?"bg-zinc-700 text-white shadow ring-1 ring-black/20":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Dark Mode",children:"D"}),R.jsx("button",{onClick:()=>le("light"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${ee==="light"?"bg-white text-zinc-900 shadow ring-1 ring-black/5":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Light Mode",children:"L"})]})]})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar",children:[R.jsx("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider px-2 mb-2",children:" "}),s.map(w=>R.jsxs("div",{onClick:()=>t(w.id),onDoubleClick:x=>de(x,w.id,w.name),className:`group flex items-center justify-between px-4 py-3 md:py-2.5 rounded-lg cursor-pointer transition-all ${e===w.id?"bg-accent/10 text-accent border border-accent/20":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/50 border border-transparent"}`,children:[R.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[R.jsx(Ze.Folder,{className:`w-5 h-5 md:w-4 md:h-4 flex-shrink-0 ${e===w.id?"fill-accent/20":""}`}),F===w.id?R.jsx("input",{autoFocus:!0,type:"text",value:K,onChange:x=>ie(x.target.value),onBlur:()=>C(w.id),onKeyDown:x=>{x.stopPropagation(),x.key==="Enter"&&C(w.id),x.key==="Escape"&&H(null)},onClick:x=>x.stopPropagation(),className:"flex-1 bg-zinc-950 border border-accent rounded px-1 py-0 text-sm text-white focus:outline-none"}):R.jsx("span",{className:"text-base md:text-sm font-medium truncate",children:w.name})]}),F!==w.id&&R.jsxs("div",{className:"flex items-center",children:[R.jsx(Ze.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden"}),R.jsx("button",{type:"button",onClick:x=>I(x,w.id),className:"hidden md:block opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",children:R.jsx(Ze.Trash,{className:"w-3.5 h-3.5"})})]})]},w.id)),E?R.jsx("div",{className:"px-3 py-2",children:R.jsx("input",{autoFocus:!0,type:"text",value:A,onChange:w=>O(w.target.value),onBlur:_e,onKeyDown:w=>w.key==="Enter"&&_e(),placeholder:"...",className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none"})}):R.jsxs("button",{type:"button",onClick:()=>T(!0),className:"w-full flex items-center gap-2 px-3 py-3 md:py-2.5 text-sm text-zinc-500 hover:text-accent hover:bg-zinc-800/50 rounded-lg transition-colors border border-dashed border-zinc-800 hover:border-zinc-700 mt-2",children:[R.jsx(Ze.Plus,{className:"w-4 h-4"}),"  "]})]}),R.jsx("div",{className:"p-4 border-t border-border bg-zinc-950/50 mt-auto",children:R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("button",{type:"button",onClick:g,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-amber-500/10 border-amber-500/30 text-amber-500 hover:bg-amber-500/20":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:text-zinc-200 hover:bg-zinc-700"}`,title:u?" ":" ",children:[u?R.jsx(Dg,{className:"w-3.5 h-3.5"}):R.jsx(dI,{className:"w-3.5 h-3.5"}),u?" ":" "]}),R.jsxs("button",{type:"button",onClick:N,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-zinc-900 border-zinc-800 text-zinc-600 cursor-not-allowed opacity-50":"bg-red-500/10 border-red-500/20 text-red-500 hover:bg-red-500/20 hover:border-red-500/40"}`,children:[R.jsx(Ze.Trash,{className:"w-3.5 h-3.5"})," "]})]})})]})},BV=({categoryName:s,items:e,selectedItemId:t,onSelectItem:r,onAddItem:o,onDeleteItem:u,onReorder:c,loading:m,onBack:g})=>{const p=ce.useRef(null),E=ce.useRef(null),[T,A]=ce.useState(e);ce.useEffect(()=>{A(e)},[e]);const O=(ie,ee)=>{p.current=ee,ie.dataTransfer.effectAllowed="move",ie.dataTransfer.setData("text/html",ie.currentTarget.innerHTML)},F=(ie,ee)=>{E.current=ee,ie.preventDefault()},H=ie=>{ie.preventDefault(),ie.dataTransfer.dropEffect="move"},K=ie=>{ie.preventDefault();const ee=p.current,Q=E.current;if(ee!==null&&Q!==null&&ee!==Q){const le=[...T],_e=le[ee];le.splice(ee,1),le.splice(Q,0,_e),A(le),c(le)}p.current=null,E.current=null};return R.jsxs("div",{className:"flex flex-col h-full w-full",children:[R.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-border bg-background/50 flex-shrink-0",children:[R.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[R.jsx("button",{onClick:g,className:"md:hidden p-1 -ml-1 text-zinc-400 hover:text-white",children:R.jsx(Ze.Back,{className:"w-5 h-5"})}),R.jsx("h2",{className:"font-semibold text-zinc-200 truncate pr-2 text-base md:text-sm",title:s,children:s||""})]}),R.jsx("button",{onClick:o,className:"p-1.5 text-zinc-400 hover:text-accent hover:bg-zinc-800 rounded-md transition-colors",title:"  ",children:R.jsx(Ze.Plus,{className:"w-5 h-5"})})]}),R.jsx("div",{className:"flex-1 overflow-y-auto",children:m?R.jsx("div",{className:"p-4 space-y-3 opacity-50",children:[1,2,3].map(ie=>R.jsx("div",{className:"h-12 bg-zinc-800/50 rounded animate-pulse"},ie))}):T.length>0?R.jsx("div",{className:"divide-y divide-border/50",children:T.map((ie,ee)=>R.jsxs("div",{draggable:!0,onDragStart:Q=>O(Q,ee),onDragEnter:Q=>F(Q,ee),onDragOver:H,onDrop:K,onClick:()=>r(ie.id),className:`group px-3 py-4 md:py-3 cursor-pointer hover:bg-zinc-900 transition-colors relative flex items-center gap-2 ${t===ie.id?"bg-zinc-900 border-l-2 border-accent":"border-l-2 border-transparent"}`,children:[R.jsx("div",{className:"cursor-grab active:cursor-grabbing p-1 text-zinc-600 hover:text-zinc-400 hidden md:block",children:R.jsx(Ze.DragHandle,{className:"w-4 h-4"})}),R.jsx("div",{className:"flex-1 min-w-0 pr-6",children:R.jsx("h3",{className:`text-base md:text-sm font-medium leading-tight truncate ${t===ie.id?"text-white":"text-zinc-300"}`,children:ie.title||" "})}),R.jsx(Ze.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden absolute right-3 top-1/2 -translate-y-1/2"}),R.jsx("button",{onClick:Q=>{Q.stopPropagation(),window.confirm("?")&&u(ie.id)},className:"hidden md:block opacity-0 group-hover:opacity-100 p-1.5 text-zinc-600 hover:text-danger hover:bg-zinc-800 rounded transition-all absolute right-2 top-1/2 -translate-y-1/2",children:R.jsx(Ze.Trash,{className:"w-4 h-4"})})]},ie.id))}):R.jsxs("div",{className:"p-8 text-center text-zinc-500",children:[R.jsx("p",{className:"text-sm",children:" ."}),R.jsx("button",{onClick:o,className:"text-xs text-accent mt-2 hover:underline",children:"+   "})]})})]})},qV=({itemId:s,onOpenMemo:e})=>{const[t,r]=ce.useState([]),[o,u]=ce.useState(!0),[c,m]=ce.useState(""),[g,p]=ce.useState(null),[E,T]=ce.useState(null),[A,O]=ce.useState(""),F=dp.useRef(null),H=async()=>{const w=await Ge.checklist.listByItem(s);r(w),u(!1)};ce.useEffect(()=>{H()},[s]);const K=async()=>{if(!c.trim())return;const w=await Ge.checklist.create(s),x={...w,text:c};r(P=>[...P,x]),m(""),await Ge.checklist.update({id:w.id,text:x.text})},ie=w=>{w.key==="Enter"&&!w.nativeEvent.isComposing&&(w.preventDefault(),K())},ee=async(w,x)=>{r(P=>P.map(D=>D.id===w?{...D,...x}:D)),await Ge.checklist.update({id:w,...x})},Q=(w,x)=>{p(null),ee(w,{memo:x})},le=async w=>{window.confirm("  ?")&&(r(x=>x.filter(P=>P.id!==w)),await Ge.checklist.delete(w))},_e=(w,x)=>{T(w),O(x)},de=async w=>{var x;A!==((x=t.find(P=>P.id===w))==null?void 0:x.text)&&await ee(w,{text:A}),T(null)},C=(w,x)=>{_e(w,x)},I=(w,x)=>{F.current=setTimeout(()=>{_e(w,x)},300)},N=()=>{F.current&&(clearTimeout(F.current),F.current=null)};return o?R.jsx("div",{className:"text-secondary text-sm",children:" ..."}):R.jsxs("div",{className:"h-full flex flex-col pt-2",children:[R.jsxs("div",{className:"mb-4 flex-shrink-0 flex items-center gap-2",children:[R.jsx("input",{type:"text",value:c,onChange:w=>m(w.target.value),onKeyDown:ie,placeholder:"   ",className:"flex-1 bg-zinc-900/50 border border-zinc-700 text-sm text-zinc-200 rounded-lg py-2.5 px-3 focus:ring-1 focus:ring-accent focus:border-accent focus:outline-none transition-all placeholder-zinc-600 shadow-sm"}),R.jsx("button",{onClick:K,disabled:!c.trim(),className:"flex-shrink-0 p-2.5 bg-accent/10 border border-accent/30 text-accent rounded-lg hover:bg-accent/20 hover:border-accent/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",title:"  ( Enter )",children:R.jsx(Ze.Plus,{className:"w-5 h-5"})})]}),R.jsxs("div",{className:"space-y-2 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:[t.map(w=>R.jsxs("div",{className:"group flex items-start gap-3 p-2.5 rounded-lg hover:bg-green-500/20 transition-colors border border-transparent hover:border-green-500/30",children:[R.jsx("div",{className:"pt-1",children:R.jsx("input",{type:"checkbox",checked:w.is_checked,onChange:x=>ee(w.id,{is_checked:x.target.checked}),className:"w-4 h-4 rounded border-zinc-600 bg-zinc-900 text-emerald-500 focus:ring-emerald-500/20 focus:ring-offset-0 cursor-pointer accent-emerald-500"})}),R.jsxs("div",{className:"flex-1 min-w-0",children:[E===w.id?R.jsx("input",{autoFocus:!0,type:"text",value:A,onChange:x=>O(x.target.value),onBlur:()=>de(w.id),onKeyDown:x=>{x.key==="Enter"&&de(w.id),x.key==="Escape"&&T(null)},className:"w-full bg-zinc-950 border border-accent rounded px-1 py-3 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent min-h-10"}):R.jsx("div",{onDoubleClick:()=>C(w.id,w.text),onTouchStart:()=>I(w.id,w.text),onTouchEnd:N,className:`w-full p-0 text-sm cursor-text ${w.is_checked?"text-black line-through decoration-black":"text-zinc-200"}`,children:w.text||"  ..."}),w.memo&&(g===w.id?R.jsx("div",{className:"mt-1.5 w-full",children:R.jsx("input",{autoFocus:!0,type:"text",defaultValue:w.memo,onBlur:x=>Q(w.id,x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),x.currentTarget.blur()),x.key==="Escape"&&p(null)},className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-xs text-zinc-200 focus:outline-none placeholder-zinc-500 shadow-sm"})}):R.jsxs("div",{className:"mt-1.5 text-xs text-zinc-500/80 flex items-center gap-1.5 cursor-pointer w-fit py-0.5 rounded transition-colors hover:text-zinc-300 select-none group/memo",onDoubleClick:()=>p(w.id),title:"  ",children:[R.jsx(Ze.Memo,{className:"w-3 h-3 flex-shrink-0"}),R.jsx("span",{className:"truncate max-w-[200px]",children:w.memo})]}))]}),R.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[R.jsx("button",{onClick:()=>e(w),className:`p-1.5 rounded transition-colors ${w.memo?"text-accent bg-accent/10":"text-zinc-500 hover:text-accent hover:bg-zinc-700"}`,title:"  ",children:R.jsx(Ze.Memo,{className:"w-4 h-4"})}),R.jsx("button",{onClick:()=>le(w.id),className:"p-1.5 text-zinc-500 hover:text-danger hover:bg-zinc-700 rounded transition-colors",title:"",children:R.jsx(Ze.Trash,{className:"w-4 h-4"})})]})]},w.id)),t.length===0&&R.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-zinc-800/50 rounded-xl text-zinc-600 text-sm bg-zinc-900/20",children:["  .",R.jsx("br",{}),R.jsx("span",{className:"text-xs text-zinc-700 mt-1 block",children:"    ."})]})]})]})},FV=({item:s,onUpdateItem:e,onOpenMemo:t,onBack:r})=>{const[o,u]=ce.useState(s.title),[c,m]=ce.useState(s.description),[g,p]=ce.useState(!1),[E,T]=ce.useState(!1),[A,O]=ce.useState(!1),[F,H]=ce.useState(!1),K=dp.useRef(null);ce.useEffect(()=>{u(s.title),m(s.description),T(!1)},[s.id,s.title,s.description]);const ie=async()=>{o!==s.title&&(p(!0),await Ge.items.update({id:s.id,title:o}),e(s.id,{title:o}),p(!1))},ee=async()=>{T(!1),c!==s.description&&(p(!0),await Ge.items.update({id:s.id,description:c}),e(s.id,{description:c}),p(!1))},Q=()=>{T(!0)},le=()=>{K.current=setTimeout(()=>{T(!0)},300)},_e=()=>{K.current&&(clearTimeout(K.current),K.current=null)},de=C=>{if(!C)return null;const I=/(https?:\/\/[^\s]+)/g;return C.split(I).map((N,w)=>N.match(I)?R.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline break-all relative z-20",onClick:x=>x.stopPropagation(),children:N},w):N)};return R.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[R.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[R.jsx("button",{onClick:r,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white",children:R.jsx(Ze.Back,{className:"w-5 h-5"})}),R.jsx("input",{type:"text",value:o,onChange:C=>u(C.target.value),onBlur:ie,className:"flex-1 bg-transparent text-lg md:text-xl font-bold text-white placeholder-zinc-600 border-none p-0 focus:ring-0 focus:outline-none truncate",placeholder:"  "}),g&&R.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 text-xs text-accent bg-accent/10 px-2 py-1 rounded-full animate-pulse",children:[R.jsx(Ze.Save,{className:"w-3.5 h-3.5"}),R.jsx("span",{className:"hidden sm:inline",children:" ..."})]})]}),R.jsx("div",{className:"flex-1 flex flex-col p-4 md:p-6 gap-4 md:gap-5 min-h-0",children:R.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[R.jsxs("div",{className:"h-[40%] min-h-[200px] flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden group focus-within:border-zinc-600 transition-colors",children:[R.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2.5 border-b border-border/50 bg-zinc-900/30",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Ze.File,{className:"w-4 h-4 text-zinc-400"}),R.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:" "})]}),R.jsx("button",{onClick:()=>O(!0),className:"text-xs px-2 py-1 rounded bg-accent/20 text-accent hover:bg-accent/30 transition-colors",title:"  ",children:""})]}),E?R.jsx("textarea",{autoFocus:!0,value:c,onChange:C=>m(C.target.value),onBlur:ee,className:"flex-1 w-full bg-transparent border-none p-4 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):R.jsx("div",{onDoubleClick:Q,onTouchStart:le,onTouchEnd:_e,className:"flex-1 w-full p-4 text-sm text-zinc-300 overflow-y-auto whitespace-pre-wrap leading-relaxed custom-scrollbar cursor-text hover:bg-white/5 transition-colors",title:"  ",children:c?de(c):R.jsx("span",{className:"text-zinc-700",children:"      ..."})})]}),R.jsx("div",{className:"flex-1 flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden min-h-0 group focus-within:border-zinc-600 transition-colors",children:R.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:R.jsx(qV,{itemId:s.id,onOpenMemo:t})})})]})}),A&&R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>O(!1),children:R.jsxs("div",{className:"bg-surface rounded-lg shadow-lg flex flex-col h-[90vh] max-w-2xl w-full",onClick:C=>C.stopPropagation(),children:[R.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border bg-zinc-900/30",children:[R.jsx("span",{className:"text-lg font-semibold text-white",children:" "}),R.jsx("button",{onClick:()=>{O(!1),H(!1)},className:"text-zinc-400 hover:text-white text-2xl",children:""})]}),F?R.jsx("textarea",{autoFocus:!0,value:c,onChange:C=>m(C.target.value),className:"flex-1 w-full bg-transparent border-none p-6 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):R.jsx("div",{className:"flex-1 overflow-y-auto p-6 text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed custom-scrollbar",children:c?de(c):R.jsx("span",{className:"text-zinc-700",children:" ."})}),R.jsx("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-border bg-zinc-900/30",children:F?R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>{m(s.description),H(!1)},className:"px-4 py-2 rounded bg-zinc-700 text-white hover:bg-zinc-600 transition-colors text-sm",children:""}),R.jsx("button",{onClick:async()=>{c!==s.description&&(p(!0),await Ge.items.update({id:s.id,description:c}),e(s.id,{description:c}),p(!1)),H(!1)},className:"px-4 py-2 rounded bg-accent text-white hover:bg-accent/90 transition-colors text-sm",children:""})]}):R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600 transition-colors text-sm",children:""}),R.jsx("button",{onClick:()=>H(!0),className:"px-4 py-2 rounded bg-yellow-500 text-white hover:bg-yellow-600 transition-colors text-sm",children:""})]})})]})})]})},HV=({bookmark:s,onEdit:e,onDelete:t})=>{const r=o=>{o.preventDefault(),e(s)};return R.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center justify-center gap-0 p-0 rounded-none border border-black transition-all hover:opacity-90 aspect-[4/2.4] cursor-pointer relative",style:{backgroundColor:s.color},onContextMenu:r,title:`${s.name}
${s.url}`,children:R.jsx("div",{className:"flex-1 flex flex-col items-center justify-center gap-0 min-w-0 px-1 py-1",children:R.jsx("span",{className:"text-[14px] font-bold text-white text-center line-clamp-2 w-full",children:s.name})})})},GV=["#c97e7e","#d4a574","#d9c86b","#8cb89b","#8ab4d9","#c5a3d9","#e8a8a8","#d9b8a3","#d4d999","#9dbfa8","#a8c5e0","#d9aee0","#b88e8e","#c4a589","#c9c589","#88a8a8"],KV=({zone:s,bookmarks:e,onEditZone:t,onAddBookmark:r,onEditBookmark:o,onDeleteBookmark:u})=>{const[c,m]=ce.useState(!1),[g,p]=ce.useState(s.name),[E,T]=ce.useState(!1),A=async()=>{g.trim()&&g!==s.name?await t(s.id,{name:g}):p(s.name),m(!1)},O=K=>{K.key==="Enter"?A():K.key==="Escape"&&(p(s.name),m(!1))},F=async K=>{await t(s.id,{default_color:K}),T(!1)},H=K=>{K.preventDefault(),T(!E)};return R.jsxs("div",{className:"flex flex-col bg-surface rounded-xl border border-border overflow-hidden shadow-sm",children:[R.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-zinc-900/30 flex-shrink-0",children:[c?R.jsx("input",{autoFocus:!0,type:"text",value:g,onChange:K=>p(K.target.value),onBlur:A,onKeyDown:O,className:"flex-1 bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none focus:ring-1 focus:ring-accent"}):R.jsx("h3",{onDoubleClick:()=>m(!0),className:"flex-1 font-semibold text-sm text-white cursor-text hover:bg-white/5 px-2 py-1 rounded transition-colors",children:s.name}),R.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 relative",children:[R.jsx("button",{onClick:r,className:"p-1 hover:bg-white/10 rounded transition-colors",title:" ",children:R.jsx(Ze.Plus,{className:"w-4 h-4 text-zinc-400 hover:text-zinc-200 transition-colors"})}),R.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 border border-zinc-600 cursor-pointer hover:border-zinc-400 transition-colors",style:{backgroundColor:s.default_color},title:`${s.default_color}
  `,onContextMenu:H}),E&&R.jsx("div",{className:"absolute right-0 top-full mt-2 bg-zinc-950 border border-zinc-700 rounded-lg p-2 z-50 shadow-lg",children:R.jsx("div",{className:"grid grid-cols-4 gap-2",children:GV.map(K=>R.jsx("button",{onClick:()=>F(K),className:`w-6 h-6 rounded-full border-2 hover:scale-110 transition-transform ${K===s.default_color?"border-white":"border-zinc-600"}`,style:{backgroundColor:K},title:K},K))})})]})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-0 custom-scrollbar",children:e.length>0?R.jsx("div",{className:"grid grid-cols-4 gap-0",children:e.map(K=>R.jsx(HV,{bookmark:K,onEdit:o,onDelete:u},K.id))}):R.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[R.jsx(Ze.Bookmark,{className:"w-8 h-8 text-zinc-700 mb-2"}),R.jsx("p",{className:"text-xs text-zinc-600 mb-3",children:" ."}),R.jsx("button",{onClick:r,className:"text-xs px-3 py-1.5 rounded-md bg-accent/20 text-accent hover:bg-accent/30 transition-colors",children:"  "})]})})]})},QV=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#a855f7","#ec4899","#14b8a6","#f59e0b","#06b6d4","#8b5cf6","#6366f1"],YV=({selectedColor:s,onChange:e,label:t=""})=>R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:t}),R.jsx("div",{className:"grid grid-cols-6 gap-2",children:QV.map(r=>R.jsx("button",{onClick:()=>e(r),className:`w-10 h-10 rounded-lg border-2 transition-all transform hover:scale-110 ${s===r?"border-white scale-110 shadow-lg":"border-transparent hover:border-zinc-600"}`,style:{backgroundColor:r},title:r},r))}),R.jsxs("div",{className:"mt-3",children:[R.jsx("label",{className:"text-xs text-zinc-400 mb-1.5 block",children:" "}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("input",{type:"color",value:s,onChange:r=>e(r.target.value),className:"w-12 h-10 rounded border border-border cursor-pointer"}),R.jsx("input",{type:"text",value:s,onChange:r=>e(r.target.value),placeholder:"#000000",className:"flex-1 bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent"})]})]})]}),XV=({zones:s,bookmark:e,onSave:t,onDelete:r,onClose:o})=>{const[u,c]=ce.useState(""),[m,g]=ce.useState(""),[p,E]=ce.useState(""),[T,A]=ce.useState("#ef4444"),[O,F]=ce.useState("");ce.useEffect(()=>{var Q;if(s.length>0){const le=(e==null?void 0:e.zone_id)||s[0].id,_e=((Q=s.find(de=>de.id===le))==null?void 0:Q.default_color)||"#ef4444";E(le),A((e==null?void 0:e.color)||_e)}e?(c(e.name),g(e.url)):(c(""),g("")),F("")},[e,s]);const H=Q=>{const le=Q.target.value;E(le);const _e=s.find(de=>de.id===le);_e&&A(_e.default_color)},K=Q=>{try{const le=new URL(Q.startsWith("http")?Q:`https://${Q}`);return!0}catch{return!1}},ie=Q=>!Q.startsWith("http://")&&!Q.startsWith("https://")?`https://${Q}`:Q,ee=()=>{if(F(""),!u.trim()){F("  .");return}if(!m.trim()){F("URL .");return}if(!K(m)){F(" URL .");return}if(!p){F(" .");return}const Q=ie(m);t({id:e==null?void 0:e.id,name:u.trim(),url:Q,zone_id:p,color:T})};return R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:o,children:R.jsxs("div",{className:"bg-surface rounded-lg shadow-lg w-full max-w-2xl",onClick:Q=>Q.stopPropagation(),children:[R.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[R.jsx("h2",{className:"text-base font-semibold text-white",children:e?" ":" "}),R.jsxs("div",{className:"flex gap-2",children:[e&&R.jsx("button",{onClick:()=>{window.confirm(`'${e.name}'  ?`)&&(r==null||r(e.id),o())},className:"px-3 py-1.5 rounded bg-red-500/90 text-white hover:bg-red-600 transition-colors text-xs font-medium",children:""}),R.jsx("button",{onClick:ee,className:"px-3 py-1.5 rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors text-xs font-bold",children:e?"":""}),R.jsx("button",{onClick:o,className:"px-3 py-1.5 rounded bg-zinc-700 text-white hover:bg-zinc-600 transition-colors text-xs font-medium",children:""})]})]}),R.jsxs("div",{className:"p-6 flex gap-6",children:[R.jsxs("div",{className:"flex-1 space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:""}),R.jsx("input",{type:"text",value:u,onChange:Q=>c(Q.target.value),placeholder:" ",className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:"URL"}),R.jsx("input",{type:"text",value:m,onChange:Q=>g(Q.target.value),placeholder:"https://example.com",className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:""}),R.jsx("select",{value:p,onChange:H,className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all",children:s.map(Q=>R.jsx("option",{value:Q.id,children:Q.name},Q.id))})]}),O&&R.jsx("div",{className:"px-3 py-2 rounded-lg bg-red-500/10 border border-red-500/30 text-xs text-red-400",children:O})]}),R.jsx("div",{className:"flex flex-col items-center gap-4",children:R.jsxs("div",{children:[R.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-3 block text-center",children:""}),R.jsx(YV,{selectedColor:T,onChange:A})]})})]})]})})},$V=({onBack:s})=>{const[e,t]=ce.useState([]),[r,o]=ce.useState([]),[u,c]=ce.useState(!0),[m,g]=ce.useState(!1),[p,E]=ce.useState(null),[T,A]=ce.useState(null);ce.useEffect(()=>{(async()=>{c(!0);try{await Ge.bookmarkZones.initializeDefaults();const Q=await Ge.bookmarkZones.list();t(Q);const le=await Ge.bookmarks.list();o(le)}catch(Q){console.error("Failed to load bookmark data:",Q)}finally{c(!1)}})()},[]);const O=ee=>{A(ee),E(null),g(!0)},F=async(ee,Q)=>{try{await Ge.bookmarkZones.update(ee,Q),t(e.map(le=>le.id===ee?{...le,...Q}:le))}catch(le){console.error("Failed to update zone:",le)}},H=ee=>{E(ee),A(ee.zone_id),g(!0)},K=async ee=>{try{await Ge.bookmarks.delete(ee),o(r.filter(Q=>Q.id!==ee))}catch(Q){console.error("Failed to delete bookmark:",Q)}},ie=async ee=>{try{if(p)await Ge.bookmarks.update(p.id,{name:ee.name,url:ee.url,color:ee.color,zone_id:ee.zone_id}),o(r.map(Q=>Q.id===p.id?{...Q,name:ee.name||Q.name,url:ee.url||Q.url,color:ee.color||Q.color,zone_id:ee.zone_id||Q.zone_id}:Q));else{const Q=await Ge.bookmarks.create(ee.zone_id,ee.name||"",ee.url||"",ee.color||"#ef4444");o([...r,Q])}g(!1),E(null),A(null)}catch(Q){console.error("Failed to save bookmark:",Q)}};return u?R.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"animate-spin mb-4",children:R.jsx(Ze.Bookmark,{className:"w-8 h-8 text-accent"})}),R.jsx("p",{className:"text-sm text-secondary",children:"  ..."})]})}):R.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[R.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[R.jsx("button",{onClick:s,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white transition-colors",title:"",children:R.jsx(Ze.Back,{className:"w-5 h-5"})}),R.jsxs("h1",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[R.jsx(Ze.Bookmark,{className:"w-5 h-5 text-accent"})," "]}),R.jsxs("button",{onClick:()=>{var ee;return O(((ee=e[0])==null?void 0:ee.id)||"")},className:"flex items-center gap-2 px-3 py-1.5 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium ml-auto",disabled:e.length===0,children:[R.jsx(Ze.Plus,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden sm:inline",children:" "})]})]}),R.jsx("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto custom-scrollbar",children:e.length===0?R.jsx("div",{className:"flex items-center justify-center h-full",children:R.jsxs("div",{className:"text-center",children:[R.jsx(Ze.Bookmark,{className:"w-12 h-12 text-zinc-700 mx-auto mb-4"}),R.jsx("p",{className:"text-secondary text-sm",children:"   ."})]})}):R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 auto-rows-max",children:e.map(ee=>R.jsx(KV,{zone:ee,bookmarks:r.filter(Q=>Q.zone_id===ee.id),onEditZone:F,onAddBookmark:()=>O(ee.id),onEditBookmark:H,onDeleteBookmark:K},ee.id))})}),m&&R.jsx(XV,{zones:e,bookmark:p,onSave:ie,onDelete:K,onClose:()=>{g(!1),E(null),A(null)}})]})},ZV=({isOpen:s,onClose:e,checklistItem:t,onSave:r})=>{const[o,u]=ce.useState(""),[c,m]=ce.useState(!1);if(ce.useEffect(()=>{t&&(u(t.memo||""),m(!1))},[t]),!s||!t)return null;const g=()=>{r(t.id,o),m(!1)},p=()=>{g()};return R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:R.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col shadow-black/50",children:[R.jsx("div",{className:"p-6 flex-1 flex flex-col min-h-[450px]",children:c?R.jsx("textarea",{className:"flex-1 w-full bg-zinc-950 border border-border rounded-lg p-5 text-base text-zinc-200 resize-none focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent custom-scrollbar leading-relaxed",placeholder:"   ...",value:o,onChange:E=>u(E.target.value),onBlur:p,autoFocus:!0}):R.jsx("div",{className:"flex-1 w-full bg-zinc-900/30 rounded-lg p-5 text-base text-zinc-300 overflow-y-auto custom-scrollbar whitespace-pre-wrap cursor-pointer hover:bg-zinc-900/50 transition-colors border border-transparent hover:border-zinc-800",onDoubleClick:()=>m(!0),title:" ",children:o||R.jsx("span",{className:"text-zinc-500 italic",children:"  .   ."})})}),R.jsxs("div",{className:"p-4 border-t border-border bg-zinc-950/30 flex justify-end gap-3",children:[c?R.jsxs("button",{onClick:g,className:"px-6 py-2.5 text-sm font-medium text-white bg-accent hover:bg-blue-600 rounded-md shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[R.jsx(Ze.Save,{className:"w-4 h-4"}),""]}):R.jsx("button",{onClick:()=>m(!0),className:"px-6 py-2.5 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-800 rounded-md transition-colors",children:""}),R.jsx("button",{onClick:e,className:"px-6 py-2.5 text-sm font-medium text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-md transition-colors border border-zinc-800 hover:border-zinc-700",children:""})]})]})})},JV=({workspace:s,onDelete:e,onUpdate:t,onShowBookmarks:r,showBookmarks:o=!1,onCloseBookmarks:u})=>{const[c,m]=ce.useState([]),[g,p]=ce.useState(null),[E,T]=ce.useState([]),[A,O]=ce.useState(null),[F,H]=ce.useState(!1),[K,ie]=ce.useState(!1),[ee,Q]=ce.useState(null);ce.useEffect(()=>{le(),p(null),T([]),O(null)},[s.id]),ce.useEffect(()=>{g?(_e(g),O(null)):(T([]),O(null))},[g]),ce.useEffect(()=>{g&&o&&u&&u()},[g]);const le=async()=>{const ye=await Ge.categories.listByWorkspace(s.id);m(ye)},_e=async ye=>{H(!0);const De=await Ge.items.listByCategory(ye);T(De),H(!1)},de=async ye=>{const De=await Ge.categories.create(s.id,ye);await le(),p(De.id)},C=async()=>{if(!g)return;const ye=await Ge.items.create(g);T([...E,ye]),O(ye.id)},I=async ye=>{await Ge.items.delete(ye),T(De=>De.filter(k=>k.id!==ye)),A===ye&&O(null)},N=async ye=>{T(ye),g&&await Ge.items.reorder(g,ye.map(De=>De.id))},w=(ye,De)=>{T(k=>k.map(W=>W.id===ye?{...W,...De}:W))},x=ye=>{Q(ye),ie(!0)},P=async(ye,De)=>{await Ge.checklist.update({id:ye,memo:De}),pe&&O(pe.id)},D=()=>{e(s.id)},ut=()=>{t(s.id,{is_locked:!s.is_locked})},bt=()=>{p(null)},X=()=>{O(null)},ae=c.find(ye=>ye.id===g),pe=E.find(ye=>ye.id===A);return R.jsxs("div",{className:"flex h-full w-full bg-background text-zinc-100 font-sans selection:bg-accent/30 overflow-hidden relative",children:[R.jsx("div",{className:`${g?"hidden md:flex":"flex"} w-full md:w-64 flex-col border-r border-border bg-surface`,children:R.jsx(jV,{categories:c,selectedCategoryId:g,onSelectCategory:p,onRefresh:le,workspaceName:s.name,isLocked:s.is_locked,onAddCategory:de,onDeleteWorkspace:D,onToggleLock:ut,onShowBookmarks:r})}),R.jsx("div",{className:`${g&&!A?"flex":"hidden md:flex"} ${g?"w-full md:w-80":"hidden md:flex md:w-80"} flex-col border-r border-border bg-background`,children:g?R.jsx(BV,{categoryName:ae==null?void 0:ae.name,items:E,selectedItemId:A,onSelectItem:O,onAddItem:C,onDeleteItem:I,onReorder:N,loading:F,onBack:bt}):R.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[R.jsx(Ze.Folder,{className:"w-12 h-12 mb-2 opacity-20"}),R.jsx("p",{className:"text-sm",children:" "})]})}),R.jsx("div",{className:`${A||o?"flex":"hidden md:flex"} flex-1 flex-col h-full bg-background relative min-w-0`,children:o?R.jsx($V,{onBack:u||(()=>{})}):pe?R.jsx(FV,{item:pe,onUpdateItem:w,onOpenMemo:x,onBack:X},pe.id):R.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[R.jsx("div",{className:"w-16 h-16 bg-zinc-900/50 rounded-2xl flex items-center justify-center mb-4 border border-zinc-800",children:R.jsx(Ze.File,{className:"w-8 h-8 text-zinc-700"})}),R.jsx("p",{className:"text-zinc-500",children:"   ."})]})}),R.jsx(ZV,{isOpen:K,onClose:()=>ie(!1),checklistItem:ee,onSave:P})]})},WV=({workspaces:s,activeWorkspaceId:e,onSwitch:t,onUpdate:r})=>{const[o,u]=ce.useState(null),[c,m]=ce.useState(""),g=async()=>{const O=await Ge.workspaces.create(`  ${s.length+1}`);r(),t(O.id)},p=O=>{O.is_locked||(u(O.id),m(O.name))},E=async()=>{o&&c.trim()&&(await Ge.workspaces.update(o,{name:c}),r()),u(null)},T=async O=>{const F=s.findIndex(H=>H.id===O);if(F>0){const H=[...s];[H[F-1],H[F]]=[H[F],H[F-1]],await Ge.workspaces.reorder(H.map(K=>K.id)),r()}},A=async O=>{const F=s.findIndex(H=>H.id===O);if(F<s.length-1){const H=[...s];[H[F],H[F+1]]=[H[F+1],H[F]],await Ge.workspaces.reorder(H.map(K=>K.id)),r()}};return R.jsxs("div",{className:"h-12 bg-zinc-950 border-t border-border flex items-center flex-shrink-0 z-50 relative",children:[R.jsxs("div",{className:"flex-1 flex items-center gap-2 px-4 overflow-x-auto h-full [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:[s.map((O,F)=>R.jsxs("div",{className:`group flex-shrink-0 relative flex items-center rounded-md transition-all min-w-max border select-none ${e===O.id?"bg-zinc-800 text-white border-zinc-700 shadow-sm":"bg-transparent text-zinc-500 border-transparent hover:bg-zinc-900 hover:text-zinc-300"}`,children:[R.jsx("button",{onClick:H=>{H.stopPropagation(),T(O.id)},className:`p-1 transition-opacity ${F===0?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:F===0,title:" ",children:R.jsx(Ze.ChevronLeft,{className:"w-3.5 h-3.5"})}),R.jsx("div",{onClick:()=>t(O.id),className:"flex items-center gap-2 px-3 py-1.5 cursor-pointer flex-1",onDoubleClick:()=>p(O),children:o===O.id?R.jsx("input",{autoFocus:!0,className:"bg-zinc-950 text-white text-xs px-1 py-0.5 rounded border border-accent w-full focus:outline-none",value:c,onChange:H=>m(H.target.value),onBlur:E,onKeyDown:H=>H.key==="Enter"&&E(),onClick:H=>H.stopPropagation()}):R.jsxs(R.Fragment,{children:[O.is_locked?R.jsx(Dg,{className:"w-3 h-3 text-amber-500/70"}):R.jsx(Ze.Dashboard,{className:`w-3.5 h-3.5 ${e===O.id?"text-accent":"opacity-70"}`}),R.jsx("span",{className:"text-xs font-medium truncate",children:O.name})]})}),R.jsx("button",{onClick:H=>{H.stopPropagation(),A(O.id)},className:`p-1 transition-opacity ${F===s.length-1?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:F===s.length-1,title:" ",children:R.jsx(Ze.ChevronRight,{className:"w-3.5 h-3.5"})})]},O.id)),R.jsx("div",{className:"w-2 flex-shrink-0"})]}),R.jsx("div",{className:"flex-shrink-0 flex items-center pl-2 pr-2 h-full bg-zinc-950 border-l border-border relative z-10 shadow-[-10px_0_20px_-5px_rgba(0,0,0,0.8)]",children:R.jsx("button",{onClick:g,className:"p-1.5 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",title:"  ",children:R.jsx(Ze.Plus,{className:"w-5 h-5"})})})]})},eO=()=>{const[s,e]=ce.useState([]),[t,r]=ce.useState(null),[o,u]=ce.useState(!1),c=ce.useCallback(async()=>{const E=await Ge.workspaces.list();e(E)},[]);ce.useEffect(()=>{c()},[c]),ce.useEffect(()=>{s.length>0?t&&s.find(E=>E.id===t)||r(s[0].id):r(null)},[s,t]);const m=ce.useCallback(async E=>{await Ge.workspaces.delete(E),await c()},[c]),g=ce.useCallback(async(E,T)=>{await Ge.workspaces.update(E,T),e(A=>A.map(O=>O.id===E?{...O,...T}:O))},[]),p=s.find(E=>E.id===t);return R.jsxs("div",{className:"flex flex-col h-screen bg-black text-zinc-100 font-sans overflow-hidden",children:[R.jsx("div",{className:"flex-1 overflow-hidden relative",children:p?R.jsx(JV,{workspace:p,onDelete:m,onUpdate:g,onShowBookmarks:()=>u(!0),showBookmarks:o,onCloseBookmarks:()=>u(!1)}):R.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:" ."})}),R.jsx(WV,{workspaces:s,activeWorkspaceId:t,onSwitch:r,onUpdate:c})]})};if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("/Data-Library/sw.js").then(e=>{console.log("ServiceWorker registration successful"),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.log("ServiceWorker registration failed:",e)})});let s=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{s||(s=!0,window.location.reload())})}const t1=document.getElementById("root");if(!t1)throw new Error("Could not find root element to mount to");const tO=qw.createRoot(t1);tO.render(R.jsx(dp.StrictMode,{children:R.jsx(eO,{})}));
