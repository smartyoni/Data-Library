(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function qT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cg={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function Nw(){if(k0)return du;k0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return du.Fragment=t,du.jsx=e,du.jsxs=e,du}var P0;function Vw(){return P0||(P0=1,cg.exports=Nw()),cg.exports}var L=Vw(),hg={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function Ow(){if(L0)return It;L0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function M(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,J={};function it(O,W,lt){this.props=O,this.context=W,this.refs=J,this.updater=lt||K}it.prototype.isReactComponent={},it.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},it.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function rt(){}rt.prototype=it.prototype;function et(O,W,lt){this.props=O,this.context=W,this.refs=J,this.updater=lt||K}var mt=et.prototype=new rt;mt.constructor=et,Q(mt,it.prototype),mt.isPureReactComponent=!0;var vt=Array.isArray;function ft(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function A(O,W,lt){var ut=lt.ref;return{$$typeof:s,type:O,key:W,ref:ut!==void 0?ut:null,props:lt}}function w(O,W){return A(O.type,W,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function k(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(lt){return W[lt]})}var D=/\/+/g;function ee(O,W){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):W.toString(36)}function le(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ft,ft):(O.status="pending",O.then(function(W){O.status==="pending"&&(O.status="fulfilled",O.value=W)},function(W){O.status==="pending"&&(O.status="rejected",O.reason=W)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function F(O,W,lt,ut,St){var xt=typeof O;(xt==="undefined"||xt==="boolean")&&(O=null);var Bt=!1;if(O===null)Bt=!0;else switch(xt){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(O.$$typeof){case s:case t:Bt=!0;break;case E:return Bt=O._init,F(Bt(O._payload),W,lt,ut,St)}}if(Bt)return St=St(O),Bt=ut===""?"."+ee(O,0):ut,vt(St)?(lt="",Bt!=null&&(lt=Bt.replace(D,"$&/")+"/"),F(St,W,lt,"",function(Cs){return Cs})):St!=null&&(x(St)&&(St=w(St,lt+(St.key==null||O&&O.key===St.key?"":(""+St.key).replace(D,"$&/")+"/")+Bt)),W.push(St)),1;Bt=0;var ze=ut===""?".":ut+":";if(vt(O))for(var he=0;he<O.length;he++)ut=O[he],xt=ze+ee(ut,he),Bt+=F(ut,W,lt,xt,St);else if(he=M(O),typeof he=="function")for(O=he.call(O),he=0;!(ut=O.next()).done;)ut=ut.value,xt=ze+ee(ut,he++),Bt+=F(ut,W,lt,xt,St);else if(xt==="object"){if(typeof O.then=="function")return F(le(O),W,lt,ut,St);throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function nt(O,W,lt){if(O==null)return O;var ut=[],St=0;return F(O,ut,"","",function(xt){return W.call(lt,xt,St++)}),ut}function pt(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(lt){(O._status===0||O._status===-1)&&(O._status=1,O._result=lt)},function(lt){(O._status===0||O._status===-1)&&(O._status=2,O._result=lt)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var Vt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Yt={map:nt,forEach:function(O,W,lt){nt(O,function(){W.apply(this,arguments)},lt)},count:function(O){var W=0;return nt(O,function(){W++}),W},toArray:function(O){return nt(O,function(W){return W})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return It.Activity=T,It.Children=Yt,It.Component=it,It.Fragment=e,It.Profiler=o,It.PureComponent=et,It.StrictMode=r,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,It.__COMPILER_RUNTIME={__proto__:null,c:function(O){return C.H.useMemoCache(O)}},It.cache=function(O){return function(){return O.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(O,W,lt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ut=Q({},O.props),St=O.key;if(W!=null)for(xt in W.key!==void 0&&(St=""+W.key),W)!R.call(W,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&W.ref===void 0||(ut[xt]=W[xt]);var xt=arguments.length-2;if(xt===1)ut.children=lt;else if(1<xt){for(var Bt=Array(xt),ze=0;ze<xt;ze++)Bt[ze]=arguments[ze+2];ut.children=Bt}return A(O.type,St,ut)},It.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},It.createElement=function(O,W,lt){var ut,St={},xt=null;if(W!=null)for(ut in W.key!==void 0&&(xt=""+W.key),W)R.call(W,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(St[ut]=W[ut]);var Bt=arguments.length-2;if(Bt===1)St.children=lt;else if(1<Bt){for(var ze=Array(Bt),he=0;he<Bt;he++)ze[he]=arguments[he+2];St.children=ze}if(O&&O.defaultProps)for(ut in Bt=O.defaultProps,Bt)St[ut]===void 0&&(St[ut]=Bt[ut]);return A(O,xt,St)},It.createRef=function(){return{current:null}},It.forwardRef=function(O){return{$$typeof:m,render:O}},It.isValidElement=x,It.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:pt}},It.memo=function(O,W){return{$$typeof:p,type:O,compare:W===void 0?null:W}},It.startTransition=function(O){var W=C.T,lt={};C.T=lt;try{var ut=O(),St=C.S;St!==null&&St(lt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(ft,Vt)}catch(xt){Vt(xt)}finally{W!==null&&lt.types!==null&&(W.types=lt.types),C.T=W}},It.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},It.use=function(O){return C.H.use(O)},It.useActionState=function(O,W,lt){return C.H.useActionState(O,W,lt)},It.useCallback=function(O,W){return C.H.useCallback(O,W)},It.useContext=function(O){return C.H.useContext(O)},It.useDebugValue=function(){},It.useDeferredValue=function(O,W){return C.H.useDeferredValue(O,W)},It.useEffect=function(O,W){return C.H.useEffect(O,W)},It.useEffectEvent=function(O){return C.H.useEffectEvent(O)},It.useId=function(){return C.H.useId()},It.useImperativeHandle=function(O,W,lt){return C.H.useImperativeHandle(O,W,lt)},It.useInsertionEffect=function(O,W){return C.H.useInsertionEffect(O,W)},It.useLayoutEffect=function(O,W){return C.H.useLayoutEffect(O,W)},It.useMemo=function(O,W){return C.H.useMemo(O,W)},It.useOptimistic=function(O,W){return C.H.useOptimistic(O,W)},It.useReducer=function(O,W,lt){return C.H.useReducer(O,W,lt)},It.useRef=function(O){return C.H.useRef(O)},It.useState=function(O){return C.H.useState(O)},It.useSyncExternalStore=function(O,W,lt){return C.H.useSyncExternalStore(O,W,lt)},It.useTransition=function(){return C.H.useTransition()},It.version="19.2.3",It}var z0;function fp(){return z0||(z0=1,hg.exports=Ow()),hg.exports}var Tt=fp();const dp=qT(Tt);var fg={exports:{}},mu={},dg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function Mw(){return U0||(U0=1,(function(s){function t(F,nt){var pt=F.length;F.push(nt);t:for(;0<pt;){var Vt=pt-1>>>1,Yt=F[Vt];if(0<o(Yt,nt))F[Vt]=nt,F[pt]=Yt,pt=Vt;else break t}}function e(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var nt=F[0],pt=F.pop();if(pt!==nt){F[0]=pt;t:for(var Vt=0,Yt=F.length,O=Yt>>>1;Vt<O;){var W=2*(Vt+1)-1,lt=F[W],ut=W+1,St=F[ut];if(0>o(lt,pt))ut<Yt&&0>o(St,lt)?(F[Vt]=St,F[ut]=pt,Vt=ut):(F[Vt]=lt,F[W]=pt,Vt=W);else if(ut<Yt&&0>o(St,pt))F[Vt]=St,F[ut]=pt,Vt=ut;else break t}}return nt}function o(F,nt){var pt=F.sortIndex-nt.sortIndex;return pt!==0?pt:F.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,T=null,I=3,M=!1,K=!1,Q=!1,J=!1,it=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;function mt(F){for(var nt=e(p);nt!==null;){if(nt.callback===null)r(p);else if(nt.startTime<=F)r(p),nt.sortIndex=nt.expirationTime,t(g,nt);else break;nt=e(p)}}function vt(F){if(Q=!1,mt(F),!K)if(e(g)!==null)K=!0,ft||(ft=!0,k());else{var nt=e(p);nt!==null&&le(vt,nt.startTime-F)}}var ft=!1,C=-1,R=5,A=-1;function w(){return J?!0:!(s.unstable_now()-A<R)}function x(){if(J=!1,ft){var F=s.unstable_now();A=F;var nt=!0;try{t:{K=!1,Q&&(Q=!1,rt(C),C=-1),M=!0;var pt=I;try{e:{for(mt(F),T=e(g);T!==null&&!(T.expirationTime>F&&w());){var Vt=T.callback;if(typeof Vt=="function"){T.callback=null,I=T.priorityLevel;var Yt=Vt(T.expirationTime<=F);if(F=s.unstable_now(),typeof Yt=="function"){T.callback=Yt,mt(F),nt=!0;break e}T===e(g)&&r(g),mt(F)}else r(g);T=e(g)}if(T!==null)nt=!0;else{var O=e(p);O!==null&&le(vt,O.startTime-F),nt=!1}}break t}finally{T=null,I=pt,M=!1}nt=void 0}}finally{nt?k():ft=!1}}}var k;if(typeof et=="function")k=function(){et(x)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ee=D.port2;D.port1.onmessage=x,k=function(){ee.postMessage(null)}}else k=function(){it(x,0)};function le(F,nt){C=it(function(){F(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(F){switch(I){case 1:case 2:case 3:var nt=3;break;default:nt=I}var pt=I;I=nt;try{return F()}finally{I=pt}},s.unstable_requestPaint=function(){J=!0},s.unstable_runWithPriority=function(F,nt){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var pt=I;I=F;try{return nt()}finally{I=pt}},s.unstable_scheduleCallback=function(F,nt,pt){var Vt=s.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?Vt+pt:Vt):pt=Vt,F){case 1:var Yt=-1;break;case 2:Yt=250;break;case 5:Yt=1073741823;break;case 4:Yt=1e4;break;default:Yt=5e3}return Yt=pt+Yt,F={id:E++,callback:nt,priorityLevel:F,startTime:pt,expirationTime:Yt,sortIndex:-1},pt>Vt?(F.sortIndex=pt,t(p,F),e(g)===null&&F===e(p)&&(Q?(rt(C),C=-1):Q=!0,le(vt,pt-Vt))):(F.sortIndex=Yt,t(g,F),K||M||(K=!0,ft||(ft=!0,k()))),F},s.unstable_shouldYield=w,s.unstable_wrapCallback=function(F){var nt=I;return function(){var pt=I;I=nt;try{return F.apply(this,arguments)}finally{I=pt}}}})(mg)),mg}var B0;function kw(){return B0||(B0=1,dg.exports=Mw()),dg.exports}var gg={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Pw(){if(j0)return an;j0=1;var s=fp();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},an.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},an.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},an.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},an.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,M=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:M}):E==="script"&&r.d.X(g,{crossOrigin:T,integrity:I,fetchPriority:M,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},an.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},an.requestFormReset=function(g){r.d.r(g)},an.unstable_batchedUpdates=function(g,p){return g(p)},an.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.3",an}var q0;function Lw(){if(q0)return gg.exports;q0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),gg.exports=Pw(),gg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function zw(){if(F0)return mu;F0=1;var s=kw(),t=fp(),e=Lw();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),it=Symbol.for("react.profiler"),rt=Symbol.for("react.consumer"),et=Symbol.for("react.context"),mt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),w=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case it:return"Profiler";case J:return"StrictMode";case vt:return"Suspense";case ft:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case K:return"Portal";case et:return n.displayName||"Context";case rt:return(n._context.displayName||"Context")+".Consumer";case mt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:ee(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return ee(n(i))}catch{}}return null}var le=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt={pending:!1,data:null,method:null,action:null},Vt=[],Yt=-1;function O(n){return{current:n}}function W(n){0>Yt||(n.current=Vt[Yt],Vt[Yt]=null,Yt--)}function lt(n,i){Yt++,Vt[Yt]=n.current,n.current=i}var ut=O(null),St=O(null),xt=O(null),Bt=O(null);function ze(n,i){switch(lt(xt,i),lt(St,n),lt(ut,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?r0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=r0(i),n=s0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(ut),lt(ut,n)}function he(){W(ut),W(St),W(xt)}function Cs(n){n.memoizedState!==null&&lt(Bt,n);var i=ut.current,a=s0(i,n.type);i!==a&&(lt(St,n),lt(ut,a))}function Va(n){St.current===n&&(W(ut),W(St)),Bt.current===n&&(W(Bt),uu._currentValue=pt)}var Oa,Ma;function pi(n){if(Oa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Oa=i&&i[1]||"",Ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oa+n+Ma}var ul=!1;function xs(n,i){if(!n||ul)return"";ul=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var q=G}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(G){q=G}n.call(Z.prototype)}}else{try{throw Error()}catch(G){q=G}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),j=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===j.length)for(l=N.length-1,f=j.length-1;1<=l&&0<=f&&N[l]!==j[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==j[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==j[f]){var Y=`
`+N[l].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=l&&0<=f);break}}}finally{ul=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?pi(a):""}function cl(n,i){switch(n.tag){case 26:case 27:case 5:return pi(n.type);case 16:return pi("Lazy");case 13:return n.child!==i&&i!==null?pi("Suspense Fallback"):pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return xs(n.type,!1);case 11:return xs(n.type.render,!1);case 1:return xs(n.type,!0);case 31:return pi("Activity");default:return""}}function hl(n){try{var i="",a=null;do i+=cl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ie=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,Ir=s.unstable_cancelCallback,fd=s.unstable_shouldYield,dc=s.unstable_requestPaint,hn=s.unstable_now,Ds=s.unstable_getCurrentPriorityLevel,fl=s.unstable_ImmediatePriority,dl=s.unstable_UserBlockingPriority,Rr=s.unstable_NormalPriority,dd=s.unstable_LowPriority,mc=s.unstable_IdlePriority,gc=s.log,pc=s.unstable_setDisableYieldValue,ei=null,$e=null;function Un(n){if(typeof gc=="function"&&pc(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ei,n)}catch{}}var be=Math.clz32?Math.clz32:_c,yc=Math.log,ka=Math.LN2;function _c(n){return n>>>=0,n===0?32:31-(yc(n)/ka|0)|0}var yi=256,Ns=262144,Re=4194304;function _i(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function vi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=_i(l):(_&=b,_!==0?f=_i(_):a||(a=b&~n,a!==0&&(f=_i(a))))):(b=l&~d,b!==0?f=_i(b):_!==0?f=_i(_):a||(a=l&~n,a!==0&&(f=_i(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function ni(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function md(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vc(){var n=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),n}function Ei(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Vs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,j=n.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-be(a),Z=1<<Y;b[Y]=0,N[Y]=-1;var q=j[Y];if(q!==null)for(j[Y]=null,Y=0;Y<q.length;Y++){var G=q[Y];G!==null&&(G.lane&=-536870913)}a&=~Z}l!==0&&Os(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Os(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-be(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ml(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-be(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function gl(n,i){var a=i&-i;return a=(a&42)!==0?1:Ms(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ms(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Qi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ec(){var n=nt.p;return n!==0?n:(n=window.event,n===void 0?32:C0(n.type))}function ii(n,i){var a=nt.p;try{return nt.p=n,i()}finally{nt.p=a}}var ri=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ri,He="__reactProps$"+ri,Ti="__reactContainer$"+ri,Pa="__reactEvents$"+ri,pd="__reactListeners$"+ri,Tc="__reactHandles$"+ri,bc="__reactResources$"+ri,bi="__reactMarker$"+ri;function La(n){delete n[Ce],delete n[He],delete n[Pa],delete n[pd],delete n[Tc]}function Si(n){var i=n[Ce];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ti]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=f0(n);n!==null;){if(a=n[Ce])return a;n=f0(n)}return i}n=a,a=n.parentNode}return null}function Bn(n){if(n=n[Ce]||n[Ti]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function In(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Ai(n){var i=n[bc];return i||(i=n[bc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xe(n){n[bi]=!0}var pl=new Set,yl={};function wi(n,i){Ii(n,i),Ii(n+"Capture",i)}function Ii(n,i){for(yl[n]=i,n=0;n<i.length;n++)pl.add(i[n])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},El={};function Sc(n){return Ie.call(El,n)?!0:Ie.call(vl,n)?!1:_l.test(n)?El[n]=!0:(vl[n]=!0,!1)}function za(n,i,a){if(Sc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Rn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function De(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Ge(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Xt(n){if(!n._valueTracker){var i=Cr(n)?"checked":"value";n._valueTracker=Tl(n,i,""+n[i])}}function ks(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Cr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ri(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ps=/[\n"\\]/g;function pn(n){return n.replace(Ps,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ua(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ge(i)):n.value!==""+Ge(i)&&(n.value=""+Ge(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?bl(n,_,Ge(i)):a!=null?bl(n,_,Ge(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Ge(b):n.removeAttribute("name")}function Ac(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xt(n);return}a=a!=null?""+Ge(a):"",i=i!=null?""+Ge(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Xt(n)}function bl(n,i,a){i==="number"&&Ri(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function xr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Ge(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function wc(n,i,a){if(i!=null&&(i=""+Ge(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Ge(a):""}function Dr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(le(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ge(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Xt(n)}function yn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ic=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ic.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Al(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Sl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Sl(n,d,i[d])}function Ba(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ja(n){return Nr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function si(){}var wl=null;function jn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vr=null,Ci=null;function Ls(n){var i=Bn(n);if(i&&(n=i.stateNode)){var a=n[He]||null;t:switch(n=i.stateNode,i.type){case"input":if(Ua(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[He]||null;if(!f)throw Error(r(90));Ua(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&ks(l)}break t;case"textarea":wc(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&xr(n,!!a.multiple,i,!1)}}}var qa=!1;function Or(n,i,a){if(qa)return n(i,a);qa=!0;try{var l=n(i);return l}finally{if(qa=!1,(Vr!==null||Ci!==null)&&(Eh(),Vr&&(i=Vr,n=Ci,Ci=Vr=null,Ls(i),n)))for(i=0;i<n.length;i++)Ls(n[i])}}function ai(n,i){var a=n.stateNode;if(a===null)return null;var l=a[He]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(qn)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){zs=!0}}),window.addEventListener("test",ne,ne),window.removeEventListener("test",ne,ne)}catch{zs=!1}var xi=null,Il=null,Us=null;function Rl(){if(Us)return Us;var n,i=Il,a=i.length,l,f="value"in xi?xi.value:xi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Us=f.slice(n,1<l?1-l:void 0)}function Bs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yi(){return!0}function oi(){return!1}function Je(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Yi:oi,this.isPropagationStopped=oi,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),i}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Je(Xi),Mr=T({},Xi,{view:0,detail:0}),Cl=Je(Mr),kr,Fa,Ni,Ha=T({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ni&&(Ni&&n.type==="mousemove"?(kr=n.screenX-Ni.screenX,Fa=n.screenY-Ni.screenY):Fa=kr=0,Ni=n),kr)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),xl=Je(Ha),js=T({},Ha,{dataTransfer:0}),Cc=Je(js),xc=T({},Mr,{relatedTarget:0}),qs=Je(xc),Dl=T({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Dc=Je(Dl),Ga=T({},Xi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Nc=Je(Ga),Vc=T({},Xi,{data:0}),Vi=Je(Vc),Oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=kc[n])?!!i[n]:!1}function Pr(){return Pc}var fn=T({},Mr,{key:function(n){if(n.key){var i=Oc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Bs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Mc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(n){return n.type==="keypress"?Bs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Lc=Je(fn),zc=T({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$i=Je(zc),h=T({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),y=Je(h),v=T({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Je(v),U=T({},Ha,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Je(U),st=T({},Xi,{newState:0,oldState:0}),Rt=Je(st),Se=[9,13,27,32],Gt=qn&&"CompositionEvent"in window,fe=null;qn&&"documentMode"in document&&(fe=document.documentMode);var Fn=qn&&"TextEvent"in window&&!fe,Oi=qn&&(!Gt||fe&&8<fe&&11>=fe),li=" ",ui=!1;function Fs(n,i){switch(n){case"keyup":return Se.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ka(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qa=!1;function e1(n,i){switch(n){case"compositionend":return Ka(i);case"keypress":return i.which!==32?null:(ui=!0,li);case"textInput":return n=i.data,n===li&&ui?null:n;default:return null}}function n1(n,i){if(Qa)return n==="compositionend"||!Gt&&Fs(n,i)?(n=Rl(),Us=Il=xi=null,Qa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Oi&&i.locale!=="ko"?null:i.data;default:return null}}var i1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!i1[n.type]:i==="textarea"}function py(n,i,a,l){Vr?Ci?Ci.push(l):Ci=[l]:Vr=l,i=Rh(i,"onChange"),0<i.length&&(a=new Di("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Nl=null,Vl=null;function r1(n){Zv(n,0)}function Uc(n){var i=In(n);if(ks(i))return n}function yy(n,i){if(n==="change")return i}var _y=!1;if(qn){var yd;if(qn){var _d="oninput"in document;if(!_d){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),_d=typeof vy.oninput=="function"}yd=_d}else yd=!1;_y=yd&&(!document.documentMode||9<document.documentMode)}function Ey(){Nl&&(Nl.detachEvent("onpropertychange",Ty),Vl=Nl=null)}function Ty(n){if(n.propertyName==="value"&&Uc(Vl)){var i=[];py(i,Vl,n,jn(n)),Or(r1,i)}}function s1(n,i,a){n==="focusin"?(Ey(),Nl=i,Vl=a,Nl.attachEvent("onpropertychange",Ty)):n==="focusout"&&Ey()}function a1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uc(Vl)}function o1(n,i){if(n==="click")return Uc(i)}function l1(n,i){if(n==="input"||n==="change")return Uc(i)}function u1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Cn=typeof Object.is=="function"?Object.is:u1;function Ol(n,i){if(Cn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ie.call(i,f)||!Cn(n[f],i[f]))return!1}return!0}function by(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sy(n,i){var a=by(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=by(a)}}function Ay(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ay(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function wy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ri(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ri(n.document)}return i}function vd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var c1=qn&&"documentMode"in document&&11>=document.documentMode,Ya=null,Ed=null,Ml=null,Td=!1;function Iy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Td||Ya==null||Ya!==Ri(l)||(l=Ya,"selectionStart"in l&&vd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ml&&Ol(Ml,l)||(Ml=l,l=Rh(Ed,"onSelect"),0<l.length&&(i=new Di("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ya)))}function Hs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Xa={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},bd={},Ry={};qn&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Gs(n){if(bd[n])return bd[n];if(!Xa[n])return n;var i=Xa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ry)return bd[n]=i[a];return n}var Cy=Gs("animationend"),xy=Gs("animationiteration"),Dy=Gs("animationstart"),h1=Gs("transitionrun"),f1=Gs("transitionstart"),d1=Gs("transitioncancel"),Ny=Gs("transitionend"),Vy=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function ci(n,i){Vy.set(n,i),wi(i,[n])}var Bc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Hn=[],$a=0,Ad=0;function jc(){for(var n=$a,i=Ad=$a=0;i<n;){var a=Hn[i];Hn[i++]=null;var l=Hn[i];Hn[i++]=null;var f=Hn[i];Hn[i++]=null;var d=Hn[i];if(Hn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Oy(a,f,d)}}function qc(n,i,a,l){Hn[$a++]=n,Hn[$a++]=i,Hn[$a++]=a,Hn[$a++]=l,Ad|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function wd(n,i,a,l){return qc(n,i,a,l),Fc(n)}function Ks(n,i){return qc(n,null,null,i),Fc(n)}function Oy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-be(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Fc(n){if(50<nu)throw nu=0,Mm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ja={};function m1(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,i,a,l){return new m1(n,i,a,l)}function Id(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ji(n,i){var a=n.alternate;return a===null?(a=xn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function My(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Hc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Id(n)&&(_=1);else if(typeof n=="string")_=vw(n,a,ut.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case A:return n=xn(31,a,i,f),n.elementType=A,n.lanes=d,n;case Q:return Qs(a.children,f,d,i);case J:_=8,f|=24;break;case it:return n=xn(12,a,i,f|2),n.elementType=it,n.lanes=d,n;case vt:return n=xn(13,a,i,f),n.elementType=vt,n.lanes=d,n;case ft:return n=xn(19,a,i,f),n.elementType=ft,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case et:_=10;break t;case rt:_=9;break t;case mt:_=11;break t;case C:_=14;break t;case R:_=16,l=null;break t}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=xn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Qs(n,i,a,l){return n=xn(7,n,l,i),n.lanes=a,n}function Rd(n,i,a){return n=xn(6,n,null,i),n.lanes=a,n}function ky(n){var i=xn(18,null,null,0);return i.stateNode=n,i}function Cd(n,i,a){return i=xn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Py=new WeakMap;function Gn(n,i){if(typeof n=="object"&&n!==null){var a=Py.get(n);return a!==void 0?a:(i={value:n,source:i,stack:hl(i)},Py.set(n,i),i)}return{value:n,source:i,stack:hl(i)}}var Za=[],Wa=0,Gc=null,kl=0,Kn=[],Qn=0,Lr=null,Mi=1,ki="";function Zi(n,i){Za[Wa++]=kl,Za[Wa++]=Gc,Gc=n,kl=i}function Ly(n,i,a){Kn[Qn++]=Mi,Kn[Qn++]=ki,Kn[Qn++]=Lr,Lr=n;var l=Mi;n=ki;var f=32-be(l)-1;l&=~(1<<f),a+=1;var d=32-be(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Mi=1<<32-be(i)+f|a<<f|l,ki=d+n}else Mi=1<<d|a<<f|l,ki=n}function xd(n){n.return!==null&&(Zi(n,1),Ly(n,1,0))}function Dd(n){for(;n===Gc;)Gc=Za[--Wa],Za[Wa]=null,kl=Za[--Wa],Za[Wa]=null;for(;n===Lr;)Lr=Kn[--Qn],Kn[Qn]=null,ki=Kn[--Qn],Kn[Qn]=null,Mi=Kn[--Qn],Kn[Qn]=null}function zy(n,i){Kn[Qn++]=Mi,Kn[Qn++]=ki,Kn[Qn++]=Lr,Mi=i.id,ki=i.overflow,Lr=n}var Ze=null,ue=null,Ut=!1,zr=null,Yn=!1,Nd=Error(r(519));function Ur(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(Gn(i,n)),Nd}function Uy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ce]=n,i[He]=l,a){case"dialog":Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":case"embed":Mt("load",i);break;case"video":case"audio":for(a=0;a<ru.length;a++)Mt(ru[a],i);break;case"source":Mt("error",i);break;case"img":case"image":case"link":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"input":Mt("invalid",i),Ac(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Mt("invalid",i);break;case"textarea":Mt("invalid",i),Dr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||n0(i.textContent,a)?(l.popover!=null&&(Mt("beforetoggle",i),Mt("toggle",i)),l.onScroll!=null&&Mt("scroll",i),l.onScrollEnd!=null&&Mt("scrollend",i),l.onClick!=null&&(i.onclick=si),i=!0):i=!1,i||Ur(n,!0)}function By(n){for(Ze=n.return;Ze;)switch(Ze.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Ze=Ze.return}}function to(n){if(n!==Ze)return!1;if(!Ut)return By(n),Ut=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Xm(n.type,n.memoizedProps)),a=!a),a&&ue&&Ur(n),By(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ue=h0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ue=h0(n)}else i===27?(i=ue,Wr(n.type)?(n=tg,tg=null,ue=n):ue=i):ue=Ze?$n(n.stateNode.nextSibling):null;return!0}function Ys(){ue=Ze=null,Ut=!1}function Vd(){var n=zr;return n!==null&&(Tn===null?Tn=n:Tn.push.apply(Tn,n),zr=null),n}function Pl(n){zr===null?zr=[n]:zr.push(n)}var Od=O(null),Xs=null,Wi=null;function Br(n,i,a){lt(Od,i._currentValue),i._currentValue=a}function tr(n){n._currentValue=Od.current,W(Od)}function Md(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function kd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Md(d.return,a,n),l||(_=null);break t}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Md(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function eo(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=f.type;Cn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===Bt.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(uu):n=[uu])}f=f.return}n!==null&&kd(i,n,a,l),i.flags|=262144}function Kc(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $s(n){Xs=n,Wi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function We(n){return jy(Xs,n)}function Qc(n,i){return Xs===null&&$s(n),jy(n,i)}function jy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Wi===null){if(n===null)throw Error(r(308));Wi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Wi=Wi.next=i;return a}var g1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},p1=s.unstable_scheduleCallback,y1=s.unstable_NormalPriority,Ne={$$typeof:et,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new g1,data:new Map,refCount:0}}function Ll(n){n.refCount--,n.refCount===0&&p1(y1,function(){n.controller.abort()})}var zl=null,Ld=0,no=0,io=null;function _1(n,i){if(zl===null){var a=zl=[];Ld=0,no=Bm(),io={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ld++,i.then(qy,qy),i}function qy(){if(--Ld===0&&zl!==null){io!==null&&(io.status="fulfilled");var n=zl;zl=null,no=0,io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function v1(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Fy=F.S;F.S=function(n,i){Iv=hn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&_1(n,i),Fy!==null&&Fy(n,i)};var Js=O(null);function zd(){var n=Js.current;return n!==null?n:ae.pooledCache}function Yc(n,i){i===null?lt(Js,Js.current):lt(Js,i.pool)}function Hy(){var n=zd();return n===null?null:{parent:Ne._currentValue,pool:n}}var ro=Error(r(460)),Ud=Error(r(474)),Xc=Error(r(542)),$c={then:function(){}};function Gy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ky(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(si,si),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Yy(n),n;default:if(typeof i.status=="string")i.then(si,si);else{if(n=ae,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Yy(n),n}throw Ws=i,ro}}function Zs(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ws=a,ro):a}}var Ws=null;function Qy(){if(Ws===null)throw Error(r(459));var n=Ws;return Ws=null,n}function Yy(n){if(n===ro||n===Xc)throw Error(r(483))}var so=null,Ul=0;function Jc(n){var i=Ul;return Ul+=1,so===null&&(so=[]),Ky(so,n,i)}function Bl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Zc(n,i){throw i.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Xy(n){function i(P,V){if(n){var B=P.deletions;B===null?(P.deletions=[V],P.flags|=16):B.push(V)}}function a(P,V){if(!n)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function f(P,V){return P=Ji(P,V),P.index=0,P.sibling=null,P}function d(P,V,B){return P.index=B,n?(B=P.alternate,B!==null?(B=B.index,B<V?(P.flags|=67108866,V):B):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,V,B,$){return V===null||V.tag!==6?(V=Rd(B,P.mode,$),V.return=P,V):(V=f(V,B),V.return=P,V)}function N(P,V,B,$){var yt=B.type;return yt===Q?Y(P,V,B.props.children,$,B.key):V!==null&&(V.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===R&&Zs(yt)===V.type)?(V=f(V,B.props),Bl(V,B),V.return=P,V):(V=Hc(B.type,B.key,B.props,null,P.mode,$),Bl(V,B),V.return=P,V)}function j(P,V,B,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Cd(B,P.mode,$),V.return=P,V):(V=f(V,B.children||[]),V.return=P,V)}function Y(P,V,B,$,yt){return V===null||V.tag!==7?(V=Qs(B,P.mode,$,yt),V.return=P,V):(V=f(V,B),V.return=P,V)}function Z(P,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Rd(""+V,P.mode,B),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case M:return B=Hc(V.type,V.key,V.props,null,P.mode,B),Bl(B,V),B.return=P,B;case K:return V=Cd(V,P.mode,B),V.return=P,V;case R:return V=Zs(V),Z(P,V,B)}if(le(V)||k(V))return V=Qs(V,P.mode,B,null),V.return=P,V;if(typeof V.then=="function")return Z(P,Jc(V),B);if(V.$$typeof===et)return Z(P,Qc(P,V),B);Zc(P,V)}return null}function q(P,V,B,$){var yt=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return yt!==null?null:b(P,V,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case M:return B.key===yt?N(P,V,B,$):null;case K:return B.key===yt?j(P,V,B,$):null;case R:return B=Zs(B),q(P,V,B,$)}if(le(B)||k(B))return yt!==null?null:Y(P,V,B,$,null);if(typeof B.then=="function")return q(P,V,Jc(B),$);if(B.$$typeof===et)return q(P,V,Qc(P,B),$);Zc(P,B)}return null}function G(P,V,B,$,yt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return P=P.get(B)||null,b(V,P,""+$,yt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return P=P.get($.key===null?B:$.key)||null,N(V,P,$,yt);case K:return P=P.get($.key===null?B:$.key)||null,j(V,P,$,yt);case R:return $=Zs($),G(P,V,B,$,yt)}if(le($)||k($))return P=P.get(B)||null,Y(V,P,$,yt,null);if(typeof $.then=="function")return G(P,V,B,Jc($),yt);if($.$$typeof===et)return G(P,V,B,Qc(V,$),yt);Zc(V,$)}return null}function ct(P,V,B,$){for(var yt=null,qt=null,dt=V,Dt=V=0,Pt=null;dt!==null&&Dt<B.length;Dt++){dt.index>Dt?(Pt=dt,dt=null):Pt=dt.sibling;var Ft=q(P,dt,B[Dt],$);if(Ft===null){dt===null&&(dt=Pt);break}n&&dt&&Ft.alternate===null&&i(P,dt),V=d(Ft,V,Dt),qt===null?yt=Ft:qt.sibling=Ft,qt=Ft,dt=Pt}if(Dt===B.length)return a(P,dt),Ut&&Zi(P,Dt),yt;if(dt===null){for(;Dt<B.length;Dt++)dt=Z(P,B[Dt],$),dt!==null&&(V=d(dt,V,Dt),qt===null?yt=dt:qt.sibling=dt,qt=dt);return Ut&&Zi(P,Dt),yt}for(dt=l(dt);Dt<B.length;Dt++)Pt=G(dt,P,Dt,B[Dt],$),Pt!==null&&(n&&Pt.alternate!==null&&dt.delete(Pt.key===null?Dt:Pt.key),V=d(Pt,V,Dt),qt===null?yt=Pt:qt.sibling=Pt,qt=Pt);return n&&dt.forEach(function(rs){return i(P,rs)}),Ut&&Zi(P,Dt),yt}function Et(P,V,B,$){if(B==null)throw Error(r(151));for(var yt=null,qt=null,dt=V,Dt=V=0,Pt=null,Ft=B.next();dt!==null&&!Ft.done;Dt++,Ft=B.next()){dt.index>Dt?(Pt=dt,dt=null):Pt=dt.sibling;var rs=q(P,dt,Ft.value,$);if(rs===null){dt===null&&(dt=Pt);break}n&&dt&&rs.alternate===null&&i(P,dt),V=d(rs,V,Dt),qt===null?yt=rs:qt.sibling=rs,qt=rs,dt=Pt}if(Ft.done)return a(P,dt),Ut&&Zi(P,Dt),yt;if(dt===null){for(;!Ft.done;Dt++,Ft=B.next())Ft=Z(P,Ft.value,$),Ft!==null&&(V=d(Ft,V,Dt),qt===null?yt=Ft:qt.sibling=Ft,qt=Ft);return Ut&&Zi(P,Dt),yt}for(dt=l(dt);!Ft.done;Dt++,Ft=B.next())Ft=G(dt,P,Dt,Ft.value,$),Ft!==null&&(n&&Ft.alternate!==null&&dt.delete(Ft.key===null?Dt:Ft.key),V=d(Ft,V,Dt),qt===null?yt=Ft:qt.sibling=Ft,qt=Ft);return n&&dt.forEach(function(Dw){return i(P,Dw)}),Ut&&Zi(P,Dt),yt}function se(P,V,B,$){if(typeof B=="object"&&B!==null&&B.type===Q&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case M:t:{for(var yt=B.key;V!==null;){if(V.key===yt){if(yt=B.type,yt===Q){if(V.tag===7){a(P,V.sibling),$=f(V,B.props.children),$.return=P,P=$;break t}}else if(V.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===R&&Zs(yt)===V.type){a(P,V.sibling),$=f(V,B.props),Bl($,B),$.return=P,P=$;break t}a(P,V);break}else i(P,V);V=V.sibling}B.type===Q?($=Qs(B.props.children,P.mode,$,B.key),$.return=P,P=$):($=Hc(B.type,B.key,B.props,null,P.mode,$),Bl($,B),$.return=P,P=$)}return _(P);case K:t:{for(yt=B.key;V!==null;){if(V.key===yt)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(P,V.sibling),$=f(V,B.children||[]),$.return=P,P=$;break t}else{a(P,V);break}else i(P,V);V=V.sibling}$=Cd(B,P.mode,$),$.return=P,P=$}return _(P);case R:return B=Zs(B),se(P,V,B,$)}if(le(B))return ct(P,V,B,$);if(k(B)){if(yt=k(B),typeof yt!="function")throw Error(r(150));return B=yt.call(B),Et(P,V,B,$)}if(typeof B.then=="function")return se(P,V,Jc(B),$);if(B.$$typeof===et)return se(P,V,Qc(P,B),$);Zc(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(a(P,V.sibling),$=f(V,B),$.return=P,P=$):(a(P,V),$=Rd(B,P.mode,$),$.return=P,P=$),_(P)):a(P,V)}return function(P,V,B,$){try{Ul=0;var yt=se(P,V,B,$);return so=null,yt}catch(dt){if(dt===ro||dt===Xc)throw dt;var qt=xn(29,dt,null,P.mode);return qt.lanes=$,qt.return=P,qt}finally{}}}var ta=Xy(!0),$y=Xy(!1),jr=!1;function Bd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function qr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Fr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Fc(n),Oy(n,null,a),i}return qc(n,l,i,a),Fc(n)}function jl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}function qd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Fd=!1;function ql(){if(Fd){var n=io;if(n!==null)throw n}}function Fl(n,i,a,l){Fd=!1;var f=n.updateQueue;jr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,j=N.next;N.next=null,_===null?d=j:_.next=j,_=N;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==_&&(b===null?Y.firstBaseUpdate=j:b.next=j,Y.lastBaseUpdate=N))}if(d!==null){var Z=f.baseState;_=0,Y=j=N=null,b=d;do{var q=b.lane&-536870913,G=q!==b.lane;if(G?(kt&q)===q:(l&q)===q){q!==0&&q===no&&(Fd=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var ct=n,Et=b;q=i;var se=a;switch(Et.tag){case 1:if(ct=Et.payload,typeof ct=="function"){Z=ct.call(se,Z,q);break t}Z=ct;break t;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Et.payload,q=typeof ct=="function"?ct.call(se,Z,q):ct,q==null)break t;Z=T({},Z,q);break t;case 2:jr=!0}}q=b.callback,q!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[q]:G.push(q))}else G={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(j=Y=G,N=Z):Y=Y.next=G,_|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;G=b,b=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Y===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=j,f.lastBaseUpdate=Y,d===null&&(f.shared.lanes=0),Yr|=_,n.lanes=_,n.memoizedState=Z}}function Jy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Zy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Jy(a[n],i)}var ao=O(null),Wc=O(0);function Wy(n,i){n=ur,lt(Wc,n),lt(ao,i),ur=n|i.baseLanes}function Hd(){lt(Wc,ur),lt(ao,ao.current)}function Gd(){ur=Wc.current,W(ao),W(Wc)}var Dn=O(null),Xn=null;function Hr(n){var i=n.alternate;lt(Ae,Ae.current&1),lt(Dn,n),Xn===null&&(i===null||ao.current!==null||i.memoizedState!==null)&&(Xn=n)}function Kd(n){lt(Ae,Ae.current),lt(Dn,n),Xn===null&&(Xn=n)}function t_(n){n.tag===22?(lt(Ae,Ae.current),lt(Dn,n),Xn===null&&(Xn=n)):Gr()}function Gr(){lt(Ae,Ae.current),lt(Dn,Dn.current)}function Nn(n){W(Dn),Xn===n&&(Xn=null),W(Ae)}var Ae=O(0);function th(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zm(a)||Wm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var er=0,Ct=null,ie=null,Ve=null,eh=!1,oo=!1,ea=!1,nh=0,Hl=0,lo=null,E1=0;function ve(){throw Error(r(321))}function Qd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Cn(n[a],i[a]))return!1;return!0}function Yd(n,i,a,l,f,d){return er=d,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=n===null||n.memoizedState===null?L_:um,ea=!1,d=a(l,f),ea=!1,oo&&(d=n_(i,a,l,f)),e_(n),d}function e_(n){F.H=Ql;var i=ie!==null&&ie.next!==null;if(er=0,Ve=ie=Ct=null,eh=!1,Hl=0,lo=null,i)throw Error(r(300));n===null||Oe||(n=n.dependencies,n!==null&&Kc(n)&&(Oe=!0))}function n_(n,i,a,l){Ct=n;var f=0;do{if(oo&&(lo=null),Hl=0,oo=!1,25<=f)throw Error(r(301));if(f+=1,Ve=ie=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=z_,d=i(a,l)}while(oo);return d}function T1(){var n=F.H,i=n.useState()[0];return i=typeof i.then=="function"?Gl(i):i,n=n.useState()[0],(ie!==null?ie.memoizedState:null)!==n&&(Ct.flags|=1024),i}function Xd(){var n=nh!==0;return nh=0,n}function $d(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Jd(n){if(eh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}eh=!1}er=0,Ve=ie=Ct=null,oo=!1,Hl=nh=0,lo=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ct.memoizedState=Ve=n:Ve=Ve.next=n,Ve}function we(){if(ie===null){var n=Ct.alternate;n=n!==null?n.memoizedState:null}else n=ie.next;var i=Ve===null?Ct.memoizedState:Ve.next;if(i!==null)Ve=i,ie=n;else{if(n===null)throw Ct.alternate===null?Error(r(467)):Error(r(310));ie=n,n={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Ve===null?Ct.memoizedState=Ve=n:Ve=Ve.next=n}return Ve}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(n){var i=Hl;return Hl+=1,lo===null&&(lo=[]),n=Ky(lo,n,i),i=Ct,(Ve===null?i.memoizedState:Ve.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?L_:um),n}function rh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===et)return We(n)}throw Error(r(438,String(n)))}function Zd(n){var i=null,a=Ct.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ih(),Ct.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=w;return i.index++,a}function nr(n,i){return typeof i=="function"?i(n):i}function sh(n){var i=we();return Wd(i,ie,n)}function Wd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,N=null,j=i,Y=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(kt&Z)===Z:(er&Z)===Z){var q=j.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===no&&(Y=!0);else if((er&q)===q){j=j.next,q===no&&(Y=!0);continue}else Z={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(b=N=Z,_=d):N=N.next=Z,Ct.lanes|=q,Yr|=q;Z=j.action,ea&&a(d,Z),d=j.hasEagerState?j.eagerState:a(d,Z)}else q={lane:Z,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(b=N=q,_=d):N=N.next=q,Ct.lanes|=Z,Yr|=Z;j=j.next}while(j!==null&&j!==i);if(N===null?_=d:N.next=b,!Cn(d,n.memoizedState)&&(Oe=!0,Y&&(a=io,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function tm(n){var i=we(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Cn(d,i.memoizedState)||(Oe=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function i_(n,i,a){var l=Ct,f=we(),d=Ut;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Cn((ie||f).memoizedState,a);if(_&&(f.memoizedState=a,Oe=!0),f=f.queue,im(a_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Ve!==null&&Ve.memoizedState.tag&1){if(l.flags|=2048,uo(9,{destroy:void 0},s_.bind(null,l,f,a,i),null),ae===null)throw Error(r(349));d||(er&127)!==0||r_(l,i,a)}return a}function r_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ct.updateQueue,i===null?(i=ih(),Ct.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function s_(n,i,a,l){i.value=a,i.getSnapshot=l,o_(i)&&l_(n)}function a_(n,i,a){return a(function(){o_(i)&&l_(n)})}function o_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Cn(n,a)}catch{return!0}}function l_(n){var i=Ks(n,2);i!==null&&bn(i,n,2)}function em(n){var i=dn();if(typeof n=="function"){var a=n;if(n=a(),ea){Un(!0);try{a()}finally{Un(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:n},i}function u_(n,i,a,l){return n.baseState=a,Wd(n,ie,typeof l=="function"?l:nr)}function b1(n,i,a,l,f){if(lh(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};F.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,c_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function c_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=F.T,_={};F.T=_;try{var b=a(f,l),N=F.S;N!==null&&N(_,b),h_(n,i,b)}catch(j){nm(n,i,j)}finally{d!==null&&_.types!==null&&(d.types=_.types),F.T=d}}else try{d=a(f,l),h_(n,i,d)}catch(j){nm(n,i,j)}}function h_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){f_(n,i,l)},function(l){return nm(n,i,l)}):f_(n,i,a)}function f_(n,i,a){i.status="fulfilled",i.value=a,d_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,c_(n,a)))}function nm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,d_(i),i=i.next;while(i!==l)}n.action=null}function d_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function m_(n,i){return i}function g_(n,i){if(Ut){var a=ae.formState;if(a!==null){t:{var l=Ct;if(Ut){if(ue){e:{for(var f=ue,d=Yn;f.nodeType!==8;){if(!d){f=null;break e}if(f=$n(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ue=$n(f.nextSibling),l=f.data==="F!";break t}}Ur(l)}l=!1}l&&(i=a[0])}}return a=dn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m_,lastRenderedState:i},a.queue=l,a=M_.bind(null,Ct,l),l.dispatch=a,l=em(!1),d=lm.bind(null,Ct,!1,l.queue),l=dn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=b1.bind(null,Ct,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function p_(n){var i=we();return y_(i,ie,n)}function y_(n,i,a){if(i=Wd(n,i,m_)[0],n=sh(nr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Gl(i)}catch(_){throw _===ro?Xc:_}else l=i;i=we();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ct.flags|=2048,uo(9,{destroy:void 0},S1.bind(null,f,a),null)),[l,d,n]}function S1(n,i){n.action=i}function __(n){var i=we(),a=ie;if(a!==null)return y_(i,a,n);we(),i=i.memoizedState,a=we();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function uo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=ih(),Ct.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function v_(){return we().memoizedState}function ah(n,i,a,l){var f=dn();Ct.flags|=n,f.memoizedState=uo(1|i,{destroy:void 0},a,l===void 0?null:l)}function oh(n,i,a,l){var f=we();l=l===void 0?null:l;var d=f.memoizedState.inst;ie!==null&&l!==null&&Qd(l,ie.memoizedState.deps)?f.memoizedState=uo(i,d,a,l):(Ct.flags|=n,f.memoizedState=uo(1|i,d,a,l))}function E_(n,i){ah(8390656,8,n,i)}function im(n,i){oh(2048,8,n,i)}function A1(n){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=ih(),Ct.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function T_(n){var i=we().memoizedState;return A1({ref:i,nextImpl:n}),function(){if((Kt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function b_(n,i){return oh(4,2,n,i)}function S_(n,i){return oh(4,4,n,i)}function A_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function w_(n,i,a){a=a!=null?a.concat([n]):null,oh(4,4,A_.bind(null,i,n),a)}function rm(){}function I_(n,i){var a=we();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Qd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function R_(n,i){var a=we();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Qd(i,l[1]))return l[0];if(l=n(),ea){Un(!0);try{n()}finally{Un(!1)}}return a.memoizedState=[l,i],l}function sm(n,i,a){return a===void 0||(er&1073741824)!==0&&(kt&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Cv(),Ct.lanes|=n,Yr|=n,a)}function C_(n,i,a,l){return Cn(a,i)?a:ao.current!==null?(n=sm(n,a,l),Cn(n,i)||(Oe=!0),n):(er&42)===0||(er&1073741824)!==0&&(kt&261930)===0?(Oe=!0,n.memoizedState=a):(n=Cv(),Ct.lanes|=n,Yr|=n,i)}function x_(n,i,a,l,f){var d=nt.p;nt.p=d!==0&&8>d?d:8;var _=F.T,b={};F.T=b,lm(n,!1,i,a);try{var N=f(),j=F.S;if(j!==null&&j(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Y=v1(N,l);Kl(n,i,Y,Mn(n))}else Kl(n,i,l,Mn(n))}catch(Z){Kl(n,i,{then:function(){},status:"rejected",reason:Z},Mn())}finally{nt.p=d,_!==null&&b.types!==null&&(_.types=b.types),F.T=_}}function w1(){}function am(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=D_(n).queue;x_(n,f,i,pt,a===null?w1:function(){return N_(n),a(l)})}function D_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:pt,baseState:pt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:pt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function N_(n){var i=D_(n);i.next===null&&(i=n.alternate.memoizedState),Kl(n,i.next.queue,{},Mn())}function om(){return We(uu)}function V_(){return we().memoizedState}function O_(){return we().memoizedState}function I1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Mn();n=qr(a);var l=Fr(i,n,a);l!==null&&(bn(l,i,a),jl(l,i,a)),i={cache:Pd()},n.payload=i;return}i=i.return}}function R1(n,i,a){var l=Mn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},lh(n)?k_(i,a):(a=wd(n,i,a,l),a!==null&&(bn(a,n,l),P_(a,i,l)))}function M_(n,i,a){var l=Mn();Kl(n,i,a,l)}function Kl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(lh(n))k_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,Cn(b,_))return qc(n,i,f,0),ae===null&&jc(),!1}catch{}finally{}if(a=wd(n,i,f,l),a!==null)return bn(a,n,l),P_(a,i,l),!0}return!1}function lm(n,i,a,l){if(l={lane:2,revertLane:Bm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},lh(n)){if(i)throw Error(r(479))}else i=wd(n,a,l,2),i!==null&&bn(i,n,2)}function lh(n){var i=n.alternate;return n===Ct||i!==null&&i===Ct}function k_(n,i){oo=eh=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function P_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}var Ql={readContext:We,use:rh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};Ql.useEffectEvent=ve;var L_={readContext:We,use:rh,useCallback:function(n,i){return dn().memoizedState=[n,i===void 0?null:i],n},useContext:We,useEffect:E_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,ah(4194308,4,A_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return ah(4194308,4,n,i)},useInsertionEffect:function(n,i){ah(4,2,n,i)},useMemo:function(n,i){var a=dn();i=i===void 0?null:i;var l=n();if(ea){Un(!0);try{n()}finally{Un(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=dn();if(a!==void 0){var f=a(i);if(ea){Un(!0);try{a(i)}finally{Un(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=R1.bind(null,Ct,n),[l.memoizedState,n]},useRef:function(n){var i=dn();return n={current:n},i.memoizedState=n},useState:function(n){n=em(n);var i=n.queue,a=M_.bind(null,Ct,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:rm,useDeferredValue:function(n,i){var a=dn();return sm(a,n,i)},useTransition:function(){var n=em(!1);return n=x_.bind(null,Ct,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Ct,f=dn();if(Ut){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ae===null)throw Error(r(349));(kt&127)!==0||r_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,E_(a_.bind(null,l,d,n),[n]),l.flags|=2048,uo(9,{destroy:void 0},s_.bind(null,l,d,a,i),null),a},useId:function(){var n=dn(),i=ae.identifierPrefix;if(Ut){var a=ki,l=Mi;a=(l&~(1<<32-be(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=nh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=E1++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:om,useFormState:g_,useActionState:g_,useOptimistic:function(n){var i=dn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=lm.bind(null,Ct,!0,a),a.dispatch=i,[n,i]},useMemoCache:Zd,useCacheRefresh:function(){return dn().memoizedState=I1.bind(null,Ct)},useEffectEvent:function(n){var i=dn(),a={impl:n};return i.memoizedState=a,function(){if((Kt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},um={readContext:We,use:rh,useCallback:I_,useContext:We,useEffect:im,useImperativeHandle:w_,useInsertionEffect:b_,useLayoutEffect:S_,useMemo:R_,useReducer:sh,useRef:v_,useState:function(){return sh(nr)},useDebugValue:rm,useDeferredValue:function(n,i){var a=we();return C_(a,ie.memoizedState,n,i)},useTransition:function(){var n=sh(nr)[0],i=we().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:i_,useId:V_,useHostTransitionStatus:om,useFormState:p_,useActionState:p_,useOptimistic:function(n,i){var a=we();return u_(a,ie,n,i)},useMemoCache:Zd,useCacheRefresh:O_};um.useEffectEvent=T_;var z_={readContext:We,use:rh,useCallback:I_,useContext:We,useEffect:im,useImperativeHandle:w_,useInsertionEffect:b_,useLayoutEffect:S_,useMemo:R_,useReducer:tm,useRef:v_,useState:function(){return tm(nr)},useDebugValue:rm,useDeferredValue:function(n,i){var a=we();return ie===null?sm(a,n,i):C_(a,ie.memoizedState,n,i)},useTransition:function(){var n=tm(nr)[0],i=we().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:i_,useId:V_,useHostTransitionStatus:om,useFormState:__,useActionState:__,useOptimistic:function(n,i){var a=we();return ie!==null?u_(a,ie,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:O_};z_.useEffectEvent=T_;function cm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var hm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Mn(),f=qr(l);f.payload=i,a!=null&&(f.callback=a),i=Fr(n,f,l),i!==null&&(bn(i,n,l),jl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Mn(),f=qr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Fr(n,f,l),i!==null&&(bn(i,n,l),jl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Mn(),l=qr(a);l.tag=2,i!=null&&(l.callback=i),i=Fr(n,l,a),i!==null&&(bn(i,n,a),jl(i,n,a))}};function U_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ol(a,l)||!Ol(f,d):!0}function B_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&hm.enqueueReplaceState(i,i.state,null)}function na(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function j_(n){Bc(n)}function q_(n){console.error(n)}function F_(n){Bc(n)}function uh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function H_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function fm(n,i,a){return a=qr(a),a.tag=3,a.payload={element:null},a.callback=function(){uh(n,i)},a}function G_(n){return n=qr(n),n.tag=3,n}function K_(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){H_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){H_(i,a,l),typeof f!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function C1(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&eo(i,a,f,!0),a=Dn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?Th():a.alternate===null&&Ee===0&&(Ee=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===$c?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Lm(n,l,f)),!1;case 22:return a.flags|=65536,l===$c?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Lm(n,l,f)),!1}throw Error(r(435,a.tag))}return Lm(n,l,f),Th(),!1}if(Ut)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Nd&&(n=Error(r(422),{cause:l}),Pl(Gn(n,a)))):(l!==Nd&&(i=Error(r(423),{cause:l}),Pl(Gn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Gn(l,a),f=fm(n.stateNode,l,f),qd(n,f),Ee!==4&&(Ee=2)),!1;var d=Error(r(520),{cause:l});if(d=Gn(d,a),eu===null?eu=[d]:eu.push(d),Ee!==4&&(Ee=2),i===null)return!0;l=Gn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=fm(a.stateNode,l,n),qd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Xr===null||!Xr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=G_(f),K_(f,n,a,l),qd(a,f),!1}a=a.return}while(a!==null);return!1}var dm=Error(r(461)),Oe=!1;function tn(n,i,a,l){i.child=n===null?$y(i,null,a,l):ta(i,n.child,a,l)}function Q_(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return $s(i),l=Yd(n,i,a,_,d,f),b=Xd(),n!==null&&!Oe?($d(n,i,f),ir(n,i,f)):(Ut&&b&&xd(i),i.flags|=1,tn(n,i,l,f),i.child)}function Y_(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Id(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,X_(n,i,d,l,f)):(n=Hc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Tm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ol,a(_,l)&&n.ref===i.ref)return ir(n,i,f)}return i.flags|=1,n=Ji(d,l),n.ref=i.ref,n.return=i,i.child=n}function X_(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Ol(d,l)&&n.ref===i.ref)if(Oe=!1,i.pendingProps=l=d,Tm(n,f))(n.flags&131072)!==0&&(Oe=!0);else return i.lanes=n.lanes,ir(n,i,f)}return mm(n,i,a,l,f)}function $_(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return J_(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Yc(i,d!==null?d.cachePool:null),d!==null?Wy(i,d):Hd(),t_(i);else return l=i.lanes=536870912,J_(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Yc(i,d.cachePool),Wy(i,d),Gr(),i.memoizedState=null):(n!==null&&Yc(i,null),Hd(),Gr());return tn(n,i,f,a),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function J_(n,i,a,l,f){var d=zd();return d=d===null?null:{parent:Ne._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Yc(i,null),Hd(),t_(i),n!==null&&eo(n,i,l,!0),i.childLanes=f,null}function ch(n,i){return i=fh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Z_(n,i,a){return ta(i,n.child,null,a),n=ch(i,i.pendingProps),n.flags|=2,Nn(i),i.memoizedState=null,n}function x1(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ut){if(l.mode==="hidden")return n=ch(i,l),i.lanes=536870912,Yl(null,n);if(Kd(i),(n=ue)?(n=c0(n,Yn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Lr!==null?{id:Mi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=ky(n),a.return=i,i.child=a,Ze=i,ue=null)):n=null,n===null)throw Ur(i);return i.lanes=536870912,null}return ch(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Kd(i),f)if(i.flags&256)i.flags&=-257,i=Z_(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Oe||eo(n,i,a,!1),f=(a&n.childLanes)!==0,Oe||f){if(l=ae,l!==null&&(_=gl(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ks(n,_),bn(l,n,_),dm;Th(),i=Z_(n,i,a)}else n=d.treeContext,ue=$n(_.nextSibling),Ze=i,Ut=!0,zr=null,Yn=!1,n!==null&&zy(i,n),i=ch(i,l),i.flags|=4096;return i}return n=Ji(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function hh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function mm(n,i,a,l,f){return $s(i),a=Yd(n,i,a,l,void 0,f),l=Xd(),n!==null&&!Oe?($d(n,i,f),ir(n,i,f)):(Ut&&l&&xd(i),i.flags|=1,tn(n,i,a,f),i.child)}function W_(n,i,a,l,f,d){return $s(i),i.updateQueue=null,a=n_(i,l,a,f),e_(n),l=Xd(),n!==null&&!Oe?($d(n,i,d),ir(n,i,d)):(Ut&&l&&xd(i),i.flags|=1,tn(n,i,a,d),i.child)}function tv(n,i,a,l,f){if($s(i),i.stateNode===null){var d=Ja,_=a.contextType;typeof _=="object"&&_!==null&&(d=We(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Bd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?We(_):Ja,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(cm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&hm.enqueueReplaceState(d,d.state,null),Fl(i,l,d,f),ql(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,N=na(a,b);d.props=N;var j=d.context,Y=a.contextType;_=Ja,typeof Y=="object"&&Y!==null&&(_=We(Y));var Z=a.getDerivedStateFromProps;Y=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||j!==_)&&B_(i,d,l,_),jr=!1;var q=i.memoizedState;d.state=q,Fl(i,l,d,f),ql(),j=i.memoizedState,b||q!==j||jr?(typeof Z=="function"&&(cm(i,a,Z,l),j=i.memoizedState),(N=jr||U_(i,a,N,l,q,j,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,jd(n,i),_=i.memoizedProps,Y=na(a,_),d.props=Y,Z=i.pendingProps,q=d.context,j=a.contextType,N=Ja,typeof j=="object"&&j!==null&&(N=We(j)),b=a.getDerivedStateFromProps,(j=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||q!==N)&&B_(i,d,l,N),jr=!1,q=i.memoizedState,d.state=q,Fl(i,l,d,f),ql();var G=i.memoizedState;_!==Z||q!==G||jr||n!==null&&n.dependencies!==null&&Kc(n.dependencies)?(typeof b=="function"&&(cm(i,a,b,l),G=i.memoizedState),(Y=jr||U_(i,a,Y,l,q,G,N)||n!==null&&n.dependencies!==null&&Kc(n.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=N,l=Y):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,hh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=ta(i,n.child,null,f),i.child=ta(i,null,a,f)):tn(n,i,a,f),i.memoizedState=d.state,n=i.child):n=ir(n,i,f),n}function ev(n,i,a,l){return Ys(),i.flags|=256,tn(n,i,a,l),i.child}var gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pm(n){return{baseLanes:n,cachePool:Hy()}}function ym(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=On),n}function nv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Ae.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ut){if(f?Hr(i):Gr(),(n=ue)?(n=c0(n,Yn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Lr!==null?{id:Mi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=ky(n),a.return=i,i.child=a,Ze=i,ue=null)):n=null,n===null)throw Ur(i);return Wm(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Gr(),f=i.mode,b=fh({mode:"hidden",children:b},f),l=Qs(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=pm(a),l.childLanes=ym(n,_,a),i.memoizedState=gm,Yl(null,l)):(Hr(i),_m(i,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Hr(i),i.flags&=-257,i=vm(n,i,a)):i.memoizedState!==null?(Gr(),i.child=n.child,i.flags|=128,i=null):(Gr(),b=l.fallback,f=i.mode,l=fh({mode:"visible",children:l.children},f),b=Qs(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,ta(i,n.child,null,a),l=i.child,l.memoizedState=pm(a),l.childLanes=ym(n,_,a),i.memoizedState=gm,i=Yl(null,l));else if(Hr(i),Wm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var j=_.dgst;_=j,l=Error(r(419)),l.stack="",l.digest=_,Pl({value:l,source:null,stack:null}),i=vm(n,i,a)}else if(Oe||eo(n,i,a,!1),_=(a&n.childLanes)!==0,Oe||_){if(_=ae,_!==null&&(l=gl(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Ks(n,l),bn(_,n,l),dm;Zm(b)||Th(),i=vm(n,i,a)}else Zm(b)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,ue=$n(b.nextSibling),Ze=i,Ut=!0,zr=null,Yn=!1,n!==null&&zy(i,n),i=_m(i,l.children),i.flags|=4096);return i}return f?(Gr(),b=l.fallback,f=i.mode,N=n.child,j=N.sibling,l=Ji(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,j!==null?b=Ji(j,b):(b=Qs(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Yl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=pm(a):(f=b.cachePool,f!==null?(N=Ne._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=Hy(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=ym(n,_,a),i.memoizedState=gm,Yl(n.child,l)):(Hr(i),a=n.child,n=a.sibling,a=Ji(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function _m(n,i){return i=fh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function fh(n,i){return n=xn(22,n,null,i),n.lanes=0,n}function vm(n,i,a){return ta(i,n.child,null,a),n=_m(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function iv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Md(n.return,i,a)}function Em(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function rv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Ae.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,lt(Ae,_),tn(n,i,l,a),l=Ut?kl:0,!b&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&iv(n,a,i);else if(n.tag===19)iv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&th(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Em(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&th(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Em(i,!0,a,null,d,l);break;case"together":Em(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ir(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Yr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(eo(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Ji(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ji(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Tm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Kc(n)))}function D1(n,i,a){switch(i.tag){case 3:ze(i,i.stateNode.containerInfo),Br(i,Ne,n.memoizedState.cache),Ys();break;case 27:case 5:Cs(i);break;case 4:ze(i,i.stateNode.containerInfo);break;case 10:Br(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Hr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?nv(n,i,a):(Hr(i),n=ir(n,i,a),n!==null?n.sibling:null);Hr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(eo(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return rv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),lt(Ae,Ae.current),l)break;return null;case 22:return i.lanes=0,$_(n,i,a,i.pendingProps);case 24:Br(i,Ne,n.memoizedState.cache)}return ir(n,i,a)}function sv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Oe=!0;else{if(!Tm(n,a)&&(i.flags&128)===0)return Oe=!1,D1(n,i,a);Oe=(n.flags&131072)!==0}else Oe=!1,Ut&&(i.flags&1048576)!==0&&Ly(i,kl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(n=Zs(i.elementType),i.type=n,typeof n=="function")Id(n)?(l=na(n,l),i.tag=1,i=tv(null,i,n,l,a)):(i.tag=0,i=mm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===mt){i.tag=11,i=Q_(null,i,n,l,a);break t}else if(f===C){i.tag=14,i=Y_(null,i,n,l,a);break t}}throw i=ee(n)||n,Error(r(306,i,""))}}return i;case 0:return mm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=na(l,i.pendingProps),tv(n,i,l,f,a);case 3:t:{if(ze(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,jd(n,i),Fl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Br(i,Ne,l),l!==d.cache&&kd(i,[Ne],a,!0),ql(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=ev(n,i,l,a);break t}else if(l!==f){f=Gn(Error(r(424)),i),Pl(f),i=ev(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ue=$n(n.firstChild),Ze=i,Ut=!0,zr=null,Yn=!0,a=$y(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ys(),l===f){i=ir(n,i,a);break t}tn(n,i,l,a)}i=i.child}return i;case 26:return hh(n,i),n===null?(a=p0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ut||(a=i.type,n=i.pendingProps,l=Ch(xt.current).createElement(a),l[Ce]=i,l[He]=n,en(l,a,n),xe(l),i.stateNode=l):i.memoizedState=p0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Cs(i),n===null&&Ut&&(l=i.stateNode=d0(i.type,i.pendingProps,xt.current),Ze=i,Yn=!0,f=ue,Wr(i.type)?(tg=f,ue=$n(l.firstChild)):ue=f),tn(n,i,i.pendingProps.children,a),hh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ut&&((f=l=ue)&&(l=aw(l,i.type,i.pendingProps,Yn),l!==null?(i.stateNode=l,Ze=i,ue=$n(l.firstChild),Yn=!1,f=!0):f=!1),f||Ur(i)),Cs(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Xm(f,d)?l=null:_!==null&&Xm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Yd(n,i,T1,null,null,a),uu._currentValue=f),hh(n,i),tn(n,i,l,a),i.child;case 6:return n===null&&Ut&&((n=a=ue)&&(a=ow(a,i.pendingProps,Yn),a!==null?(i.stateNode=a,Ze=i,ue=null,n=!0):n=!1),n||Ur(i)),null;case 13:return nv(n,i,a);case 4:return ze(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=ta(i,null,l,a):tn(n,i,l,a),i.child;case 11:return Q_(n,i,i.type,i.pendingProps,a);case 7:return tn(n,i,i.pendingProps,a),i.child;case 8:return tn(n,i,i.pendingProps.children,a),i.child;case 12:return tn(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Br(i,i.type,l.value),tn(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,$s(i),f=We(f),l=l(f),i.flags|=1,tn(n,i,l,a),i.child;case 14:return Y_(n,i,i.type,i.pendingProps,a);case 15:return X_(n,i,i.type,i.pendingProps,a);case 19:return rv(n,i,a);case 31:return x1(n,i,a);case 22:return $_(n,i,a,i.pendingProps);case 24:return $s(i),l=We(Ne),n===null?(f=zd(),f===null&&(f=ae,d=Pd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Bd(i),Br(i,Ne,f)):((n.lanes&a)!==0&&(jd(n,i),Fl(i,null,null,a),ql()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Br(i,Ne,l)):(l=d.cache,Br(i,Ne,l),l!==f.cache&&kd(i,[Ne],a,!0))),tn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function rr(n){n.flags|=4}function bm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Vv())n.flags|=8192;else throw Ws=$c,Ud}else n.flags&=-16777217}function av(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!T0(i))if(Vv())n.flags|=8192;else throw Ws=$c,Ud}function dh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?vc():536870912,n.lanes|=i,mo|=i)}function Xl(n,i){if(!Ut)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ce(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function N1(n,i,a){var l=i.pendingProps;switch(Dd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(i),null;case 1:return ce(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),tr(Ne),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(to(i)?rr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vd())),ce(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(rr(i),d!==null?(ce(i),av(i,d)):(ce(i),bm(i,f,null,l,a))):d?d!==n.memoizedState?(rr(i),ce(i),av(i,d)):(ce(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&rr(i),ce(i),bm(i,f,n,l,a)),null;case 27:if(Va(i),a=xt.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&rr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}n=ut.current,to(i)?Uy(i):(n=d0(f,l,a),i.stateNode=n,rr(i))}return ce(i),null;case 5:if(Va(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&rr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}if(d=ut.current,to(i))Uy(i);else{var _=Ch(xt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ce]=i,d[He]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(en(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&rr(i)}}return ce(i),bm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&rr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=xt.current,to(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Ze,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ce]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||n0(n.nodeValue,a)),n||Ur(i,!0)}else n=Ch(n).createTextNode(l),n[Ce]=i,i.stateNode=n}return ce(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=to(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ce]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ce(i),n=!1}else a=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(Nn(i),i):(Nn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ce(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=to(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ce]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ce(i),f=!1}else f=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Nn(i),i):(Nn(i),null)}return Nn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),dh(i,i.updateQueue),ce(i),null);case 4:return he(),n===null&&Hm(i.stateNode.containerInfo),ce(i),null;case 10:return tr(i.type),ce(i),null;case 19:if(W(Ae),l=i.memoizedState,l===null)return ce(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Xl(l,!1);else{if(Ee!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=th(n),d!==null){for(i.flags|=128,Xl(l,!1),n=d.updateQueue,i.updateQueue=n,dh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)My(a,n),a=a.sibling;return lt(Ae,Ae.current&1|2),Ut&&Zi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&hn()>_h&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304)}else{if(!f)if(n=th(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,dh(i,n),Xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ut)return ce(i),null}else 2*hn()-l.renderingStartTime>_h&&a!==536870912&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=hn(),n.sibling=null,a=Ae.current,lt(Ae,f?a&1|2:a&1),Ut&&Zi(i,l.treeForkCount),n):(ce(i),null);case 22:case 23:return Nn(i),Gd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ce(i),i.subtreeFlags&6&&(i.flags|=8192)):ce(i),a=i.updateQueue,a!==null&&dh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&W(Js),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),tr(Ne),ce(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function V1(n,i){switch(Dd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return tr(Ne),he(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Va(i),null;case 31:if(i.memoizedState!==null){if(Nn(i),i.alternate===null)throw Error(r(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Nn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Ae),null;case 4:return he(),null;case 10:return tr(i.type),null;case 22:case 23:return Nn(i),Gd(),n!==null&&W(Js),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return tr(Ne),null;case 25:return null;default:return null}}function ov(n,i){switch(Dd(i),i.tag){case 3:tr(Ne),he();break;case 26:case 27:case 5:Va(i);break;case 4:he();break;case 31:i.memoizedState!==null&&Nn(i);break;case 13:Nn(i);break;case 19:W(Ae);break;case 10:tr(i.type);break;case 22:case 23:Nn(i),Gd(),n!==null&&W(Js);break;case 24:tr(Ne)}}function $l(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){Jt(i,i.return,b)}}function Kr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,j=b;try{j()}catch(Y){Jt(f,N,Y)}}}l=l.next}while(l!==d)}}catch(Y){Jt(i,i.return,Y)}}function lv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Zy(i,a)}catch(l){Jt(n,n.return,l)}}}function uv(n,i,a){a.props=na(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Jt(n,i,l)}}function Jl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Jt(n,i,f)}}function Pi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Jt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Jt(n,i,f)}else a.current=null}function cv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Jt(n,n.return,f)}}function Sm(n,i,a){try{var l=n.stateNode;tw(l,n.type,a,i),l[He]=i}catch(f){Jt(n,n.return,f)}}function hv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wr(n.type)||n.tag===4}function Am(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||hv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=si));else if(l!==4&&(l===27&&Wr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(wm(n,i,a),n=n.sibling;n!==null;)wm(n,i,a),n=n.sibling}function mh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Wr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(mh(n,i,a),n=n.sibling;n!==null;)mh(n,i,a),n=n.sibling}function fv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);en(i,l,a),i[Ce]=n,i[He]=a}catch(d){Jt(n,n.return,d)}}var sr=!1,Me=!1,Im=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function O1(n,i){if(n=n.containerInfo,Qm=kh,n=wy(n),vd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,b=-1,N=-1,j=0,Y=0,Z=n,q=null;e:for(;;){for(var G;Z!==a||f!==0&&Z.nodeType!==3||(b=_+f),Z!==d||l!==0&&Z.nodeType!==3||(N=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(G=Z.firstChild)!==null;)q=Z,Z=G;for(;;){if(Z===n)break e;if(q===a&&++j===f&&(b=_),q===d&&++Y===l&&(N=_),(G=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=G}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ym={focusedElem:n,selectionRange:a},kh=!1,Ke=i;Ke!==null;)if(i=Ke,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ke=n;else for(;Ke!==null;){switch(i=Ke,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ct=na(a.type,f);n=l.getSnapshotBeforeUpdate(ct,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Et){Jt(a,a.return,Et)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Jm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Jm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ke=n;break}Ke=i.return}}function mv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:or(n,a),l&4&&$l(5,a);break;case 1:if(or(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Jt(a,a.return,_)}else{var f=na(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Jt(a,a.return,_)}}l&64&&lv(a),l&512&&Jl(a,a.return);break;case 3:if(or(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Zy(n,i)}catch(_){Jt(a,a.return,_)}}break;case 27:i===null&&l&4&&fv(a);case 26:case 5:or(n,a),i===null&&l&4&&cv(a),l&512&&Jl(a,a.return);break;case 12:or(n,a);break;case 31:or(n,a),l&4&&yv(n,a);break;case 13:or(n,a),l&4&&_v(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=q1.bind(null,a),lw(n,a))));break;case 22:if(l=a.memoizedState!==null||sr,!l){i=i!==null&&i.memoizedState!==null||Me,f=sr;var d=Me;sr=l,(Me=i)&&!d?lr(n,a,(a.subtreeFlags&8772)!==0):or(n,a),sr=f,Me=d}break;case 30:break;default:or(n,a)}}function gv(n){var i=n.alternate;i!==null&&(n.alternate=null,gv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&La(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var de=null,_n=!1;function ar(n,i,a){for(a=a.child;a!==null;)pv(n,i,a),a=a.sibling}function pv(n,i,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ei,a)}catch{}switch(a.tag){case 26:Me||Pi(a,i),ar(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Me||Pi(a,i);var l=de,f=_n;Wr(a.type)&&(de=a.stateNode,_n=!1),ar(n,i,a),au(a.stateNode),de=l,_n=f;break;case 5:Me||Pi(a,i);case 6:if(l=de,f=_n,de=null,ar(n,i,a),de=l,_n=f,de!==null)if(_n)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(a.stateNode)}catch(d){Jt(a,i,d)}else try{de.removeChild(a.stateNode)}catch(d){Jt(a,i,d)}break;case 18:de!==null&&(_n?(n=de,l0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),bo(n)):l0(de,a.stateNode));break;case 4:l=de,f=_n,de=a.stateNode.containerInfo,_n=!0,ar(n,i,a),de=l,_n=f;break;case 0:case 11:case 14:case 15:Kr(2,a,i),Me||Kr(4,a,i),ar(n,i,a);break;case 1:Me||(Pi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&uv(a,i,l)),ar(n,i,a);break;case 21:ar(n,i,a);break;case 22:Me=(l=Me)||a.memoizedState!==null,ar(n,i,a),Me=l;break;default:ar(n,i,a)}}function yv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{bo(n)}catch(a){Jt(i,i.return,a)}}}function _v(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bo(n)}catch(a){Jt(i,i.return,a)}}function M1(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new dv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new dv),i;default:throw Error(r(435,n.tag))}}function gh(n,i){var a=M1(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=F1.bind(null,n,l);l.then(f,f)}})}function vn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Wr(b.type)){de=b.stateNode,_n=!1;break t}break;case 5:de=b.stateNode,_n=!1;break t;case 3:case 4:de=b.stateNode.containerInfo,_n=!0;break t}b=b.return}if(de===null)throw Error(r(160));pv(d,_,f),de=null,_n=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)vv(i,n),i=i.sibling}var hi=null;function vv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:vn(i,n),En(n),l&4&&(Kr(3,n,n.return),$l(3,n),Kr(5,n,n.return));break;case 1:vn(i,n),En(n),l&512&&(Me||a===null||Pi(a,a.return)),l&64&&sr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=hi;if(vn(i,n),En(n),l&512&&(Me||a===null||Pi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[bi]||d[Ce]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),en(d,l,a),d[Ce]=n,xe(d),l=d;break t;case"link":var _=v0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break e}}d=f.createElement(l),en(d,l,a),f.head.appendChild(d);break;case"meta":if(_=v0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break e}}d=f.createElement(l),en(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ce]=n,xe(d),l=d}n.stateNode=l}else E0(f,n.type,n.stateNode);else n.stateNode=_0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?E0(f,n.type,n.stateNode):_0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Sm(n,n.memoizedProps,a.memoizedProps)}break;case 27:vn(i,n),En(n),l&512&&(Me||a===null||Pi(a,a.return)),a!==null&&l&4&&Sm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(vn(i,n),En(n),l&512&&(Me||a===null||Pi(a,a.return)),n.flags&32){f=n.stateNode;try{yn(f,"")}catch(ct){Jt(n,n.return,ct)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Sm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Im=!0);break;case 6:if(vn(i,n),En(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ct){Jt(n,n.return,ct)}}break;case 3:if(Nh=null,f=hi,hi=xh(i.containerInfo),vn(i,n),hi=f,En(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{bo(i.containerInfo)}catch(ct){Jt(n,n.return,ct)}Im&&(Im=!1,Ev(n));break;case 4:l=hi,hi=xh(n.stateNode.containerInfo),vn(i,n),En(n),hi=l;break;case 12:vn(i,n),En(n);break;case 31:vn(i,n),En(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,gh(n,l)));break;case 13:vn(i,n),En(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yh=hn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,gh(n,l)));break;case 22:f=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,j=sr,Y=Me;if(sr=j||f,Me=Y||N,vn(i,n),Me=Y,sr=j,En(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||sr||Me||ia(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var Z=N.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ct){Jt(N,N.return,ct)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(ct){Jt(N,N.return,ct)}}}else if(i.tag===18){if(a===null){N=i;try{var G=N.stateNode;f?u0(G,!0):u0(N.stateNode,!1)}catch(ct){Jt(N,N.return,ct)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,gh(n,a))));break;case 19:vn(i,n),En(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,gh(n,l)));break;case 30:break;case 21:break;default:vn(i,n),En(n)}}function En(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(hv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Am(n);mh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(yn(_,""),a.flags&=-33);var b=Am(n);mh(n,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,j=Am(n);wm(n,j,N);break;default:throw Error(r(161))}}catch(Y){Jt(n,n.return,Y)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ev(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Ev(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function or(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)mv(n,i.alternate,i),i=i.sibling}function ia(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Kr(4,i,i.return),ia(i);break;case 1:Pi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&uv(i,i.return,a),ia(i);break;case 27:au(i.stateNode);case 26:case 5:Pi(i,i.return),ia(i);break;case 22:i.memoizedState===null&&ia(i);break;case 30:ia(i);break;default:ia(i)}n=n.sibling}}function lr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:lr(f,d,a),$l(4,d);break;case 1:if(lr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){Jt(l,l.return,j)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)Jy(N[f],b)}catch(j){Jt(l,l.return,j)}}a&&_&64&&lv(d),Jl(d,d.return);break;case 27:fv(d);case 26:case 5:lr(f,d,a),a&&l===null&&_&4&&cv(d),Jl(d,d.return);break;case 12:lr(f,d,a);break;case 31:lr(f,d,a),a&&_&4&&yv(f,d);break;case 13:lr(f,d,a),a&&_&4&&_v(f,d);break;case 22:d.memoizedState===null&&lr(f,d,a),Jl(d,d.return);break;case 30:break;default:lr(f,d,a)}i=i.sibling}}function Rm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ll(a))}function Cm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n))}function fi(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tv(n,i,a,l),i=i.sibling}function Tv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:fi(n,i,a,l),f&2048&&$l(9,i);break;case 1:fi(n,i,a,l);break;case 3:fi(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n)));break;case 12:if(f&2048){fi(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Jt(i,i.return,N)}}else fi(n,i,a,l);break;case 31:fi(n,i,a,l);break;case 13:fi(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?fi(n,i,a,l):Zl(n,i):d._visibility&2?fi(n,i,a,l):(d._visibility|=2,co(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Rm(_,i);break;case 24:fi(n,i,a,l),f&2048&&Cm(i.alternate,i);break;default:fi(n,i,a,l)}}function co(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,N=l,j=_.flags;switch(_.tag){case 0:case 11:case 15:co(d,_,b,N,f),$l(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?co(d,_,b,N,f):Zl(d,_):(Y._visibility|=2,co(d,_,b,N,f)),f&&j&2048&&Rm(_.alternate,_);break;case 24:co(d,_,b,N,f),f&&j&2048&&Cm(_.alternate,_);break;default:co(d,_,b,N,f)}i=i.sibling}}function Zl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Zl(a,l),f&2048&&Rm(l.alternate,l);break;case 24:Zl(a,l),f&2048&&Cm(l.alternate,l);break;default:Zl(a,l)}i=i.sibling}}var Wl=8192;function ho(n,i,a){if(n.subtreeFlags&Wl)for(n=n.child;n!==null;)bv(n,i,a),n=n.sibling}function bv(n,i,a){switch(n.tag){case 26:ho(n,i,a),n.flags&Wl&&n.memoizedState!==null&&Ew(a,hi,n.memoizedState,n.memoizedProps);break;case 5:ho(n,i,a);break;case 3:case 4:var l=hi;hi=xh(n.stateNode.containerInfo),ho(n,i,a),hi=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,ho(n,i,a),Wl=l):ho(n,i,a));break;default:ho(n,i,a)}}function Sv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function tu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ke=l,wv(l,n)}Sv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Av(n),n=n.sibling}function Av(n){switch(n.tag){case 0:case 11:case 15:tu(n),n.flags&2048&&Kr(9,n,n.return);break;case 3:tu(n);break;case 12:tu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,ph(n)):tu(n);break;default:tu(n)}}function ph(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ke=l,wv(l,n)}Sv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Kr(8,i,i.return),ph(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ph(i));break;default:ph(i)}n=n.sibling}}function wv(n,i){for(;Ke!==null;){var a=Ke;switch(a.tag){case 0:case 11:case 15:Kr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ke=l;else t:for(a=n;Ke!==null;){l=Ke;var f=l.sibling,d=l.return;if(gv(l),l===a){Ke=null;break t}if(f!==null){f.return=d,Ke=f;break t}Ke=d}}}var k1={getCacheForType:function(n){var i=We(Ne),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return We(Ne).controller.signal}},P1=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ae=null,Ot=null,kt=0,$t=0,Vn=null,Qr=!1,fo=!1,xm=!1,ur=0,Ee=0,Yr=0,ra=0,Dm=0,On=0,mo=0,eu=null,Tn=null,Nm=!1,yh=0,Iv=0,_h=1/0,vh=null,Xr=null,Be=0,$r=null,go=null,cr=0,Vm=0,Om=null,Rv=null,nu=0,Mm=null;function Mn(){return(Kt&2)!==0&&kt!==0?kt&-kt:F.T!==null?Bm():Ec()}function Cv(){if(On===0)if((kt&536870912)===0||Ut){var n=Ns;Ns<<=1,(Ns&3932160)===0&&(Ns=262144),On=n}else On=536870912;return n=Dn.current,n!==null&&(n.flags|=32),On}function bn(n,i,a){(n===ae&&($t===2||$t===9)||n.cancelPendingCommit!==null)&&(po(n,0),Jr(n,kt,On,!1)),Vs(n,a),((Kt&2)===0||n!==ae)&&(n===ae&&((Kt&2)===0&&(ra|=a),Ee===4&&Jr(n,kt,On,!1)),Li(n))}function xv(n,i,a){if((Kt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||ni(n,i),f=l?U1(n,i):Pm(n,i,!0),d=l;do{if(f===0){fo&&!l&&Jr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!L1(a)){f=Pm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var b=n;f=eu;var N=b.current.memoizedState.isDehydrated;if(N&&(po(b,_).flags|=256),_=Pm(b,_,!1),_!==2){if(xm&&!N){b.errorRecoveryDisabledLanes|=d,ra|=d,f=4;break t}d=Tn,Tn=f,d!==null&&(Tn===null?Tn=d:Tn.push.apply(Tn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){po(n,0),Jr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Jr(l,i,On,!Qr);break t;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=yh+300-hn(),10<f)){if(Jr(l,i,On,!Qr),vi(l,0,!0)!==0)break t;cr=i,l.timeoutHandle=a0(Dv.bind(null,l,a,Tn,vh,Nm,i,On,ra,mo,Qr,d,"Throttled",-0,0),f);break t}Dv(l,a,Tn,vh,Nm,i,On,ra,mo,Qr,d,null,-0,0)}}break}while(!0);Li(n)}function Dv(n,i,a,l,f,d,_,b,N,j,Y,Z,q,G){if(n.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},bv(i,d,Z);var ct=(d&62914560)===d?yh-hn():(d&4194048)===d?Iv-hn():0;if(ct=Tw(Z,ct),ct!==null){cr=d,n.cancelPendingCommit=ct(zv.bind(null,n,i,d,a,l,f,_,b,N,Y,Z,null,q,G)),Jr(n,d,_,!j);return}}zv(n,i,d,a,l,f,_,b,N)}function L1(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Cn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Jr(n,i,a,l){i&=~Dm,i&=~ra,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-be(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Os(n,a,i)}function Eh(){return(Kt&6)===0?(iu(0),!1):!0}function km(){if(Ot!==null){if($t===0)var n=Ot.return;else n=Ot,Wi=Xs=null,Jd(n),so=null,Ul=0,n=Ot;for(;n!==null;)ov(n.alternate,n),n=n.return;Ot=null}}function po(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,iw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),cr=0,km(),ae=n,Ot=a=Ji(n.current,null),kt=i,$t=0,Vn=null,Qr=!1,fo=ni(n,i),xm=!1,mo=On=Dm=ra=Yr=Ee=0,Tn=eu=null,Nm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-be(l),d=1<<f;i|=n[f],l&=~d}return ur=i,jc(),a}function Nv(n,i){Ct=null,F.H=Ql,i===ro||i===Xc?(i=Qy(),$t=3):i===Ud?(i=Qy(),$t=4):$t=i===dm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Ot===null&&(Ee=1,uh(n,Gn(i,n.current)))}function Vv(){var n=Dn.current;return n===null?!0:(kt&4194048)===kt?Xn===null:(kt&62914560)===kt||(kt&536870912)!==0?n===Xn:!1}function Ov(){var n=F.H;return F.H=Ql,n===null?Ql:n}function Mv(){var n=F.A;return F.A=k1,n}function Th(){Ee=4,Qr||(kt&4194048)!==kt&&Dn.current!==null||(fo=!0),(Yr&134217727)===0&&(ra&134217727)===0||ae===null||Jr(ae,kt,On,!1)}function Pm(n,i,a){var l=Kt;Kt|=2;var f=Ov(),d=Mv();(ae!==n||kt!==i)&&(vh=null,po(n,i)),i=!1;var _=Ee;t:do try{if($t!==0&&Ot!==null){var b=Ot,N=Vn;switch($t){case 8:km(),_=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var j=$t;if($t=0,Vn=null,yo(n,b,N,j),a&&fo){_=0;break t}break;default:j=$t,$t=0,Vn=null,yo(n,b,N,j)}}z1(),_=Ee;break}catch(Y){Nv(n,Y)}while(!0);return i&&n.shellSuspendCounter++,Wi=Xs=null,Kt=l,F.H=f,F.A=d,Ot===null&&(ae=null,kt=0,jc()),_}function z1(){for(;Ot!==null;)kv(Ot)}function U1(n,i){var a=Kt;Kt|=2;var l=Ov(),f=Mv();ae!==n||kt!==i?(vh=null,_h=hn()+500,po(n,i)):fo=ni(n,i);t:do try{if($t!==0&&Ot!==null){i=Ot;var d=Vn;e:switch($t){case 1:$t=0,Vn=null,yo(n,i,d,1);break;case 2:case 9:if(Gy(d)){$t=0,Vn=null,Pv(i);break}i=function(){$t!==2&&$t!==9||ae!==n||($t=7),Li(n)},d.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:Gy(d)?($t=0,Vn=null,Pv(i)):($t=0,Vn=null,yo(n,i,d,7));break;case 5:var _=null;switch(Ot.tag){case 26:_=Ot.memoizedState;case 5:case 27:var b=Ot;if(_?T0(_):b.stateNode.complete){$t=0,Vn=null;var N=b.sibling;if(N!==null)Ot=N;else{var j=b.return;j!==null?(Ot=j,bh(j)):Ot=null}break e}}$t=0,Vn=null,yo(n,i,d,5);break;case 6:$t=0,Vn=null,yo(n,i,d,6);break;case 8:km(),Ee=6;break t;default:throw Error(r(462))}}B1();break}catch(Y){Nv(n,Y)}while(!0);return Wi=Xs=null,F.H=l,F.A=f,Kt=a,Ot!==null?0:(ae=null,kt=0,jc(),Ee)}function B1(){for(;Ot!==null&&!fd();)kv(Ot)}function kv(n){var i=sv(n.alternate,n,ur);n.memoizedProps=n.pendingProps,i===null?bh(n):Ot=i}function Pv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=W_(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=W_(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:Jd(i);default:ov(a,i),i=Ot=My(i,ur),i=sv(a,i,ur)}n.memoizedProps=n.pendingProps,i===null?bh(n):Ot=i}function yo(n,i,a,l){Wi=Xs=null,Jd(i),so=null,Ul=0;var f=i.return;try{if(C1(n,f,i,a,kt)){Ee=1,uh(n,Gn(a,n.current)),Ot=null;return}}catch(d){if(f!==null)throw Ot=f,d;Ee=1,uh(n,Gn(a,n.current)),Ot=null;return}i.flags&32768?(Ut||l===1?n=!0:fo||(kt&536870912)!==0?n=!1:(Qr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Lv(i,n)):bh(i)}function bh(n){var i=n;do{if((i.flags&32768)!==0){Lv(i,Qr);return}n=i.return;var a=N1(i.alternate,i,ur);if(a!==null){Ot=a;return}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=n}while(i!==null);Ee===0&&(Ee=5)}function Lv(n,i){do{var a=V1(n.alternate,n);if(a!==null){a.flags&=32767,Ot=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ot=n;return}Ot=n=a}while(n!==null);Ee=6,Ot=null}function zv(n,i,a,l,f,d,_,b,N){n.cancelPendingCommit=null;do Sh();while(Be!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Ad,gd(n,a,d,_,b,N),n===ae&&(Ot=ae=null,kt=0),go=i,$r=n,cr=a,Vm=d,Om=f,Rv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,H1(Rr,function(){return Fv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,f=nt.p,nt.p=2,_=Kt,Kt|=4;try{O1(n,i,a)}finally{Kt=_,nt.p=f,F.T=l}}Be=1,Uv(),Bv(),jv()}}function Uv(){if(Be===1){Be=0;var n=$r,i=go,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=nt.p;nt.p=2;var f=Kt;Kt|=4;try{vv(i,n);var d=Ym,_=wy(n.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Ay(b.ownerDocument.documentElement,b)){if(N!==null&&vd(b)){var j=N.start,Y=N.end;if(Y===void 0&&(Y=j),"selectionStart"in b)b.selectionStart=j,b.selectionEnd=Math.min(Y,b.value.length);else{var Z=b.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var G=q.getSelection(),ct=b.textContent.length,Et=Math.min(N.start,ct),se=N.end===void 0?Et:Math.min(N.end,ct);!G.extend&&Et>se&&(_=se,se=Et,Et=_);var P=Sy(b,Et),V=Sy(b,se);if(P&&V&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==V.node||G.focusOffset!==V.offset)){var B=Z.createRange();B.setStart(P.node,P.offset),G.removeAllRanges(),Et>se?(G.addRange(B),G.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),G.addRange(B))}}}}for(Z=[],G=b;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var $=Z[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}kh=!!Qm,Ym=Qm=null}finally{Kt=f,nt.p=l,F.T=a}}n.current=i,Be=2}}function Bv(){if(Be===2){Be=0;var n=$r,i=go,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=nt.p;nt.p=2;var f=Kt;Kt|=4;try{mv(n,i.alternate,i)}finally{Kt=f,nt.p=l,F.T=a}}Be=3}}function jv(){if(Be===4||Be===3){Be=0,dc();var n=$r,i=go,a=cr,l=Rv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Be=5:(Be=0,go=$r=null,qv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Xr=null),Qi(a),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ei,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=F.T,f=nt.p,nt.p=2,F.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{F.T=i,nt.p=f}}(cr&3)!==0&&Sh(),Li(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Mm?nu++:(nu=0,Mm=n):nu=0,iu(0)}}function qv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ll(i)))}function Sh(){return Uv(),Bv(),jv(),Fv()}function Fv(){if(Be!==5)return!1;var n=$r,i=Vm;Vm=0;var a=Qi(cr),l=F.T,f=nt.p;try{nt.p=32>a?32:a,F.T=null,a=Om,Om=null;var d=$r,_=cr;if(Be=0,go=$r=null,cr=0,(Kt&6)!==0)throw Error(r(331));var b=Kt;if(Kt|=4,Av(d.current),Tv(d,d.current,_,a),Kt=b,iu(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ei,d)}catch{}return!0}finally{nt.p=f,F.T=l,qv(n,i)}}function Hv(n,i,a){i=Gn(a,i),i=fm(n.stateNode,i,2),n=Fr(n,i,2),n!==null&&(Vs(n,2),Li(n))}function Jt(n,i,a){if(n.tag===3)Hv(n,n,a);else for(;i!==null;){if(i.tag===3){Hv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xr===null||!Xr.has(l))){n=Gn(a,n),a=G_(2),l=Fr(i,a,2),l!==null&&(K_(a,l,i,n),Vs(l,2),Li(l));break}}i=i.return}}function Lm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new P1;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(xm=!0,f.add(a),n=j1.bind(null,n,i,a),i.then(n,n))}function j1(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ae===n&&(kt&a)===a&&(Ee===4||Ee===3&&(kt&62914560)===kt&&300>hn()-yh?(Kt&2)===0&&po(n,0):Dm|=a,mo===kt&&(mo=0)),Li(n)}function Gv(n,i){i===0&&(i=vc()),n=Ks(n,i),n!==null&&(Vs(n,i),Li(n))}function q1(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Gv(n,a)}function F1(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Gv(n,a)}function H1(n,i){return Ue(n,i)}var Ah=null,_o=null,zm=!1,wh=!1,Um=!1,Zr=0;function Li(n){n!==_o&&n.next===null&&(_o===null?Ah=_o=n:_o=_o.next=n),wh=!0,zm||(zm=!0,K1())}function iu(n,i){if(!Um&&wh){Um=!0;do for(var a=!1,l=Ah;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-be(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Xv(l,d))}else d=kt,d=vi(l,l===ae?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ni(l,d)||(a=!0,Xv(l,d));l=l.next}while(a);Um=!1}}function G1(){Kv()}function Kv(){wh=zm=!1;var n=0;Zr!==0&&nw()&&(n=Zr);for(var i=hn(),a=null,l=Ah;l!==null;){var f=l.next,d=Qv(l,i);d===0?(l.next=null,a===null?Ah=f:a.next=f,f===null&&(_o=a)):(a=l,(n!==0||(d&3)!==0)&&(wh=!0)),l=f}Be!==0&&Be!==5||iu(n),Zr!==0&&(Zr=0)}function Qv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-be(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=md(b,i)):N<=i&&(n.expiredLanes|=b),d&=~b}if(i=ae,a=kt,a=vi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&($t===2||$t===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ir(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ni(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Ir(l),Qi(a)){case 2:case 8:a=dl;break;case 32:a=Rr;break;case 268435456:a=mc;break;default:a=Rr}return l=Yv.bind(null,n),a=Ue(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Ir(l),n.callbackPriority=2,n.callbackNode=null,2}function Yv(n,i){if(Be!==0&&Be!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Sh()&&n.callbackNode!==a)return null;var l=kt;return l=vi(n,n===ae?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(xv(n,l,i),Qv(n,hn()),n.callbackNode!=null&&n.callbackNode===a?Yv.bind(null,n):null)}function Xv(n,i){if(Sh())return null;xv(n,i,!0)}function K1(){rw(function(){(Kt&6)!==0?Ue(fl,G1):Kv()})}function Bm(){if(Zr===0){var n=no;n===0&&(n=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Zr=n}return Zr}function $v(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ja(""+n)}function Jv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Q1(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=$v((f[He]||null).action),_=l.submitter;_&&(i=(i=_[He]||null)?$v(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Di("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Zr!==0){var N=_?Jv(f,_):new FormData(f);am(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?Jv(f,_):new FormData(f),am(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var jm=0;jm<Sd.length;jm++){var qm=Sd[jm],Y1=qm.toLowerCase(),X1=qm[0].toUpperCase()+qm.slice(1);ci(Y1,"on"+X1)}ci(Cy,"onAnimationEnd"),ci(xy,"onAnimationIteration"),ci(Dy,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(h1,"onTransitionRun"),ci(f1,"onTransitionStart"),ci(d1,"onTransitionCancel"),ci(Ny,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function Zv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,j=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=j;try{d(f)}catch(Y){Bc(Y)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,j=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break t;d=b,f.currentTarget=j;try{d(f)}catch(Y){Bc(Y)}f.currentTarget=null,d=N}}}}function Mt(n,i){var a=i[Pa];a===void 0&&(a=i[Pa]=new Set);var l=n+"__bubble";a.has(l)||(Wv(i,n,2,!1),a.add(l))}function Fm(n,i,a){var l=0;i&&(l|=4),Wv(a,n,l,i)}var Ih="_reactListening"+Math.random().toString(36).slice(2);function Hm(n){if(!n[Ih]){n[Ih]=!0,pl.forEach(function(a){a!=="selectionchange"&&($1.has(a)||Fm(a,!1,n),Fm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ih]||(i[Ih]=!0,Fm("selectionchange",!1,i))}}function Wv(n,i,a,l){switch(C0(i)){case 2:var f=Aw;break;case 8:f=ww;break;default:f=sg}a=f.bind(null,i,a,n),f=void 0,!zs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Gm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Si(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue t}b=b.parentNode}}l=l.return}Or(function(){var j=d,Y=jn(a),Z=[];t:{var q=Vy.get(n);if(q!==void 0){var G=Di,ct=n;switch(n){case"keypress":if(Bs(a)===0)break t;case"keydown":case"keyup":G=Lc;break;case"focusin":ct="focus",G=qs;break;case"focusout":ct="blur",G=qs;break;case"beforeblur":case"afterblur":G=qs;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=y;break;case Cy:case xy:case Dy:G=Dc;break;case Ny:G=S;break;case"scroll":case"scrollend":G=Cl;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=$i;break;case"toggle":case"beforetoggle":G=Rt}var Et=(i&4)!==0,se=!Et&&(n==="scroll"||n==="scrollend"),P=Et?q!==null?q+"Capture":null:q;Et=[];for(var V=j,B;V!==null;){var $=V;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||P===null||($=ai(V,P),$!=null&&Et.push(su(V,$,B))),se)break;V=V.return}0<Et.length&&(q=new G(q,ct,null,a,Y),Z.push({event:q,listeners:Et}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",q&&a!==wl&&(ct=a.relatedTarget||a.fromElement)&&(Si(ct)||ct[Ti]))break t;if((G||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,G?(ct=a.relatedTarget||a.toElement,G=j,ct=ct?Si(ct):null,ct!==null&&(se=u(ct),Et=ct.tag,ct!==se||Et!==5&&Et!==27&&Et!==6)&&(ct=null)):(G=null,ct=j),G!==ct)){if(Et=xl,$="onMouseLeave",P="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Et=$i,$="onPointerLeave",P="onPointerEnter",V="pointer"),se=G==null?q:In(G),B=ct==null?q:In(ct),q=new Et($,V+"leave",G,a,Y),q.target=se,q.relatedTarget=B,$=null,Si(Y)===j&&(Et=new Et(P,V+"enter",ct,a,Y),Et.target=B,Et.relatedTarget=se,$=Et),se=$,G&&ct)e:{for(Et=J1,P=G,V=ct,B=0,$=P;$;$=Et($))B++;$=0;for(var yt=V;yt;yt=Et(yt))$++;for(;0<B-$;)P=Et(P),B--;for(;0<$-B;)V=Et(V),$--;for(;B--;){if(P===V||V!==null&&P===V.alternate){Et=P;break e}P=Et(P),V=Et(V)}Et=null}else Et=null;G!==null&&t0(Z,q,G,Et,!1),ct!==null&&se!==null&&t0(Z,se,ct,Et,!0)}}t:{if(q=j?In(j):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var qt=yy;else if(gy(q))if(_y)qt=l1;else{qt=a1;var dt=s1}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&Ba(j.elementType)&&(qt=yy):qt=o1;if(qt&&(qt=qt(n,j))){py(Z,qt,a,Y);break t}dt&&dt(n,q,j),n==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&bl(q,"number",q.value)}switch(dt=j?In(j):window,n){case"focusin":(gy(dt)||dt.contentEditable==="true")&&(Ya=dt,Ed=j,Ml=null);break;case"focusout":Ml=Ed=Ya=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Iy(Z,a,Y);break;case"selectionchange":if(c1)break;case"keydown":case"keyup":Iy(Z,a,Y)}var Dt;if(Gt)t:{switch(n){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Qa?Fs(n,a)&&(Pt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pt="onCompositionStart");Pt&&(Oi&&a.locale!=="ko"&&(Qa||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Qa&&(Dt=Rl()):(xi=Y,Il="value"in xi?xi.value:xi.textContent,Qa=!0)),dt=Rh(j,Pt),0<dt.length&&(Pt=new Vi(Pt,n,null,a,Y),Z.push({event:Pt,listeners:dt}),Dt?Pt.data=Dt:(Dt=Ka(a),Dt!==null&&(Pt.data=Dt)))),(Dt=Fn?e1(n,a):n1(n,a))&&(Pt=Rh(j,"onBeforeInput"),0<Pt.length&&(dt=new Vi("onBeforeInput","beforeinput",null,a,Y),Z.push({event:dt,listeners:Pt}),dt.data=Dt)),Q1(Z,n,j,a,Y)}Zv(Z,i)})}function su(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Rh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ai(n,a),f!=null&&l.unshift(su(n,f,d)),f=ai(n,i),f!=null&&l.push(su(n,f,d))),n.tag===3)return l;n=n.return}return[]}function J1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function t0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,j=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||j===null||(N=j,f?(j=ai(a,d),j!=null&&_.unshift(su(a,j,N))):f||(j=ai(a,d),j!=null&&_.push(su(a,j,N)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Z1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function e0(n){return(typeof n=="string"?n:""+n).replace(Z1,`
`).replace(W1,"")}function n0(n,i){return i=e0(i),e0(n)===i}function re(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||yn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&yn(n,""+l);break;case"className":Rn(n,"class",l);break;case"tabIndex":Rn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(n,a,l);break;case"style":Al(n,l,d);break;case"data":if(i!=="object"){Rn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ja(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&re(n,i,"name",f.name,f,null),re(n,i,"formEncType",f.formEncType,f,null),re(n,i,"formMethod",f.formMethod,f,null),re(n,i,"formTarget",f.formTarget,f,null)):(re(n,i,"encType",f.encType,f,null),re(n,i,"method",f.method,f,null),re(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ja(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=si);break;case"onScroll":l!=null&&Mt("scroll",n);break;case"onScrollEnd":l!=null&&Mt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=ja(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Mt("beforetoggle",n),Mt("toggle",n),za(n,"popover",l);break;case"xlinkActuate":De(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":De(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":De(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":De(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":De(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":De(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":De(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":De(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":De(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":za(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rc.get(a)||a,za(n,a,l))}}function Km(n,i,a,l,f,d){switch(a){case"style":Al(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?yn(n,l):(typeof l=="number"||typeof l=="bigint")&&yn(n,""+l);break;case"onScroll":l!=null&&Mt("scroll",n);break;case"onScrollEnd":l!=null&&Mt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[He]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):za(n,a,l)}}}function en(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",n),Mt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:re(n,i,d,_,a,null)}}f&&re(n,i,"srcSet",a.srcSet,a,null),l&&re(n,i,"src",a.src,a,null);return;case"input":Mt("invalid",n);var b=d=_=f=null,N=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":f=Y;break;case"type":_=Y;break;case"checked":N=Y;break;case"defaultChecked":j=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:re(n,i,l,Y,a,null)}}Ac(n,d,b,N,j,_,f,!1);return;case"select":Mt("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:re(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?xr(n,!!l,i,!1):a!=null&&xr(n,!!l,a,!0);return;case"textarea":Mt("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:re(n,i,_,b,a,null)}Dr(n,l,f,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:re(n,i,N,l,a,null)}return;case"dialog":Mt("beforetoggle",n),Mt("toggle",n),Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":Mt("load",n);break;case"video":case"audio":for(l=0;l<ru.length;l++)Mt(ru[l],n);break;case"image":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"embed":case"source":case"link":Mt("error",n),Mt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:re(n,i,j,l,a,null)}return;default:if(Ba(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Km(n,i,Y,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&re(n,i,b,l,a,null))}function tw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,j=null,Y=null;for(G in a){var Z=a[G];if(a.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=Z;default:l.hasOwnProperty(G)||re(n,i,G,null,l,Z)}}for(var q in l){var G=l[q];if(Z=a[q],l.hasOwnProperty(q)&&(G!=null||Z!=null))switch(q){case"type":d=G;break;case"name":f=G;break;case"checked":j=G;break;case"defaultChecked":Y=G;break;case"value":_=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==Z&&re(n,i,q,G,l,Z)}}Ua(n,_,b,N,j,Y,d,f);return;case"select":G=_=b=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(d)||re(n,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&re(n,i,f,d,l,N)}i=b,a=_,l=G,q!=null?xr(n,!!a,q,!1):!!l!=!!a&&(i!=null?xr(n,!!a,i,!0):xr(n,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:re(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&re(n,i,_,f,l,d)}wc(n,q,G);return;case"option":for(var ct in a)if(q=a[ct],a.hasOwnProperty(ct)&&q!=null&&!l.hasOwnProperty(ct))switch(ct){case"selected":n.selected=!1;break;default:re(n,i,ct,null,l,q)}for(N in l)if(q=l[N],G=a[N],l.hasOwnProperty(N)&&q!==G&&(q!=null||G!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:re(n,i,N,q,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in a)q=a[Et],a.hasOwnProperty(Et)&&q!=null&&!l.hasOwnProperty(Et)&&re(n,i,Et,null,l,q);for(j in l)if(q=l[j],G=a[j],l.hasOwnProperty(j)&&q!==G&&(q!=null||G!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:re(n,i,j,q,l,G)}return;default:if(Ba(i)){for(var se in a)q=a[se],a.hasOwnProperty(se)&&q!==void 0&&!l.hasOwnProperty(se)&&Km(n,i,se,void 0,l,q);for(Y in l)q=l[Y],G=a[Y],!l.hasOwnProperty(Y)||q===G||q===void 0&&G===void 0||Km(n,i,Y,q,l,G);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&re(n,i,P,null,l,q);for(Z in l)q=l[Z],G=a[Z],!l.hasOwnProperty(Z)||q===G||q==null&&G==null||re(n,i,Z,q,l,G)}function i0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ew(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&i0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],j=N.startTime;if(j>b)break;var Y=N.transferSize,Z=N.initiatorType;Y&&i0(Z)&&(N=N.responseEnd,_+=Y*(N<b?1:(b-j)/(N-j)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qm=null,Ym=null;function Ch(n){return n.nodeType===9?n:n.ownerDocument}function r0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Xm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $m=null;function nw(){var n=window.event;return n&&n.type==="popstate"?n===$m?!1:($m=n,!0):($m=null,!1)}var a0=typeof setTimeout=="function"?setTimeout:void 0,iw=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,rw=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(n){return o0.resolve(null).then(n).catch(sw)}:a0;function sw(n){setTimeout(function(){throw n})}function Wr(n){return n==="head"}function l0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),bo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")au(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,au(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[bi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&au(n.ownerDocument.body);a=f}while(a);bo(i)}function u0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Jm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jm(a),La(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function aw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[bi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=$n(n.nextSibling),n===null)break}return null}function ow(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=$n(n.nextSibling),n===null))return null;return n}function c0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=$n(n.nextSibling),n===null))return null;return n}function Zm(n){return n.data==="$?"||n.data==="$~"}function Wm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function lw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function $n(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var tg=null;function h0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return $n(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function f0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function d0(n,i,a){switch(i=Ch(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function au(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);La(n)}var Jn=new Map,m0=new Set;function xh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var hr=nt.d;nt.d={f:uw,r:cw,D:hw,C:fw,L:dw,m:mw,X:pw,S:gw,M:yw};function uw(){var n=hr.f(),i=Eh();return n||i}function cw(n){var i=Bn(n);i!==null&&i.tag===5&&i.type==="form"?N_(i):hr.r(n)}var vo=typeof document>"u"?null:document;function g0(n,i,a){var l=vo;if(l&&typeof i=="string"&&i){var f=pn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),m0.has(f)||(m0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),en(i,"link",n),xe(i),l.head.appendChild(i)))}}function hw(n){hr.D(n),g0("dns-prefetch",n,null)}function fw(n,i){hr.C(n,i),g0("preconnect",n,i)}function dw(n,i,a){hr.L(n,i,a);var l=vo;if(l&&n&&i){var f='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+pn(a.imageSizes)+'"]')):f+='[href="'+pn(n)+'"]';var d=f;switch(i){case"style":d=Eo(n);break;case"script":d=To(n)}Jn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Jn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(ou(d))||i==="script"&&l.querySelector(lu(d))||(i=l.createElement("link"),en(i,"link",n),xe(i),l.head.appendChild(i)))}}function mw(n,i){hr.m(n,i);var a=vo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+pn(l)+'"][href="'+pn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=To(n)}if(!Jn.has(d)&&(n=T({rel:"modulepreload",href:n},i),Jn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(lu(d)))return}l=a.createElement("link"),en(l,"link",n),xe(l),a.head.appendChild(l)}}}function gw(n,i,a){hr.S(n,i,a);var l=vo;if(l&&n){var f=Ai(l).hoistableStyles,d=Eo(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(ou(d)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Jn.get(d))&&eg(n,a);var N=_=l.createElement("link");xe(N),en(N,"link",n),N._p=new Promise(function(j,Y){N.onload=j,N.onerror=Y}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Dh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function pw(n,i){hr.X(n,i);var a=vo;if(a&&n){var l=Ai(a).hoistableScripts,f=To(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=T({src:n,async:!0},i),(i=Jn.get(f))&&ng(n,i),d=a.createElement("script"),xe(d),en(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function yw(n,i){hr.M(n,i);var a=vo;if(a&&n){var l=Ai(a).hoistableScripts,f=To(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=Jn.get(f))&&ng(n,i),d=a.createElement("script"),xe(d),en(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function p0(n,i,a,l){var f=(f=xt.current)?xh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Eo(a.href),a=Ai(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var d=Ai(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(ou(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Jn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(n,a),d||_w(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(a),a=Ai(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Eo(n){return'href="'+pn(n)+'"'}function ou(n){return'link[rel="stylesheet"]['+n+"]"}function y0(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function _w(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),en(i,"link",a),xe(i),n.head.appendChild(i))}function To(n){return'[src="'+pn(n)+'"]'}function lu(n){return"script[async]"+n}function _0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+pn(a.href)+'"]');if(l)return i.instance=l,xe(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),xe(l),en(l,"style",f),Dh(l,a.precedence,n),i.instance=l;case"stylesheet":f=Eo(a.href);var d=n.querySelector(ou(f));if(d)return i.state.loading|=4,i.instance=d,xe(d),d;l=y0(a),(f=Jn.get(f))&&eg(l,f),d=(n.ownerDocument||n).createElement("link"),xe(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),en(d,"link",l),i.state.loading|=4,Dh(d,a.precedence,n),i.instance=d;case"script":return d=To(a.src),(f=n.querySelector(lu(d)))?(i.instance=f,xe(f),f):(l=a,(f=Jn.get(d))&&(l=T({},a),ng(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),xe(f),en(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Dh(l,a.precedence,n));return i.instance}function Dh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function eg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ng(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Nh=null;function v0(n,i,a){if(Nh===null){var l=new Map,f=Nh=new Map;f.set(a,l)}else f=Nh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[bi]||d[Ce]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function E0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function vw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function T0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Ew(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Eo(l.href),d=i.querySelector(ou(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Vh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,xe(d);return}d=i.ownerDocument||i,l=y0(l),(f=Jn.get(f))&&eg(l,f),d=d.createElement("link"),xe(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),en(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Vh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var ig=0;function Tw(n,i){return n.stylesheets&&n.count===0&&Mh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Mh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&ig===0&&(ig=62500*ew());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Mh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>ig?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Oh=null;function Mh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Oh=new Map,i.forEach(bw,n),Oh=null,Vh.call(n))}function bw(n,i){if(!(i.state.loading&4)){var a=Oh.get(n);if(a)var l=a.get(null);else{a=new Map,Oh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Vh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var uu={$$typeof:et,Provider:null,Consumer:null,_currentValue:pt,_currentValue2:pt,_threadCount:0};function Sw(n,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function b0(n,i,a,l,f,d,_,b,N,j,Y,Z){return n=new Sw(n,i,a,_,N,j,Y,Z,b),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),n.current=d,d.stateNode=n,i=Pd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Bd(d),n}function S0(n){return n?(n=Ja,n):Ja}function A0(n,i,a,l,f,d){f=S0(f),l.context===null?l.context=f:l.pendingContext=f,l=qr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Fr(n,l,i),a!==null&&(bn(a,n,i),jl(a,n,i))}function w0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function rg(n,i){w0(n,i),(n=n.alternate)&&w0(n,i)}function I0(n){if(n.tag===13||n.tag===31){var i=Ks(n,67108864);i!==null&&bn(i,n,67108864),rg(n,67108864)}}function R0(n){if(n.tag===13||n.tag===31){var i=Mn();i=Ms(i);var a=Ks(n,i);a!==null&&bn(a,n,i),rg(n,i)}}var kh=!0;function Aw(n,i,a,l){var f=F.T;F.T=null;var d=nt.p;try{nt.p=2,sg(n,i,a,l)}finally{nt.p=d,F.T=f}}function ww(n,i,a,l){var f=F.T;F.T=null;var d=nt.p;try{nt.p=8,sg(n,i,a,l)}finally{nt.p=d,F.T=f}}function sg(n,i,a,l){if(kh){var f=ag(l);if(f===null)Gm(n,i,l,Ph,a),x0(n,l);else if(Rw(f,n,i,a,l))l.stopPropagation();else if(x0(n,l),i&4&&-1<Iw.indexOf(n)){for(;f!==null;){var d=Bn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=_i(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-be(_);b.entanglements[1]|=N,_&=~N}Li(d),(Kt&6)===0&&(_h=hn()+500,iu(0))}}break;case 31:case 13:b=Ks(d,2),b!==null&&bn(b,d,2),Eh(),rg(d,2)}if(d=ag(l),d===null&&Gm(n,i,l,Ph,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Gm(n,i,l,null,a)}}function ag(n){return n=jn(n),og(n)}var Ph=null;function og(n){if(Ph=null,n=Si(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ph=n,null}function C0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ds()){case fl:return 2;case dl:return 8;case Rr:case dd:return 32;case mc:return 268435456;default:return 32}default:return 32}}var lg=!1,ts=null,es=null,ns=null,cu=new Map,hu=new Map,is=[],Iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x0(n,i){switch(n){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(i.pointerId)}}function fu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Bn(i),i!==null&&I0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Rw(n,i,a,l,f){switch(i){case"focusin":return ts=fu(ts,n,i,a,l,f),!0;case"dragenter":return es=fu(es,n,i,a,l,f),!0;case"mouseover":return ns=fu(ns,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return cu.set(d,fu(cu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,hu.set(d,fu(hu.get(d)||null,n,i,a,l,f)),!0}return!1}function D0(n){var i=Si(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,ii(n.priority,function(){R0(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,ii(n.priority,function(){R0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ag(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);wl=l,a.target.dispatchEvent(l),wl=null}else return i=Bn(a),i!==null&&I0(i),n.blockedOn=a,!1;i.shift()}return!0}function N0(n,i,a){Lh(n)&&a.delete(i)}function Cw(){lg=!1,ts!==null&&Lh(ts)&&(ts=null),es!==null&&Lh(es)&&(es=null),ns!==null&&Lh(ns)&&(ns=null),cu.forEach(N0),hu.forEach(N0)}function zh(n,i){n.blockedOn===i&&(n.blockedOn=null,lg||(lg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Cw)))}var Uh=null;function V0(n){Uh!==n&&(Uh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uh===n&&(Uh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(og(l||a)===null)continue;break}var d=Bn(a);d!==null&&(n.splice(i,3),i-=3,am(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function bo(n){function i(N){return zh(N,n)}ts!==null&&zh(ts,n),es!==null&&zh(es,n),ns!==null&&zh(ns,n),cu.forEach(i),hu.forEach(i);for(var a=0;a<is.length;a++){var l=is[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<is.length&&(a=is[0],a.blockedOn===null);)D0(a),a.blockedOn===null&&is.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[He]||null;if(typeof d=="function")_||V0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[He]||null)b=_.formAction;else if(og(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),V0(a)}}}function O0(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function ug(n){this._internalRoot=n}Bh.prototype.render=ug.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Mn();A0(a,l,n,i,null,null)},Bh.prototype.unmount=ug.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;A0(n.current,2,null,n,null,null),Eh(),i[Ti]=null}};function Bh(n){this._internalRoot=n}Bh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ec();n={blockedOn:null,target:n,priority:i};for(var a=0;a<is.length&&i!==0&&i<is[a].priority;a++);is.splice(a,0,n),a===0&&D0(n)}};var M0=t.version;if(M0!=="19.2.3")throw Error(r(527,M0,"19.2.3"));nt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var xw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{ei=jh.inject(xw),$e=jh}catch{}}return mu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=j_,d=q_,_=F_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=b0(n,1,!1,null,null,a,l,null,f,d,_,O0),n[Ti]=i.current,Hm(n),new ug(i)},mu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=j_,_=q_,b=F_,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=b0(n,1,!0,i,a??null,l,f,N,d,_,b,O0),i.context=S0(null),a=i.current,l=Mn(),l=Ms(l),f=qr(l),f.callback=null,Fr(a,f,l),a=l,i.current.lanes=a,Vs(i,a),Li(i),n[Ti]=i.current,Hm(n),new Bh(i)},mu.version="19.2.3",mu}var H0;function Uw(){if(H0)return fg.exports;H0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),fg.exports=zw(),fg.exports}var Bw=Uw();const jw=qT(Bw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),G0=s=>{const t=Fw(s);return t.charAt(0).toUpperCase()+t.slice(1)},FT=(...s)=>s.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),Hw=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Tt.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>Tt.createElement("svg",{ref:g,...Gw,width:t,height:t,stroke:s,strokeWidth:r?Number(e)*24/Number(t):e,className:FT("lucide",o),...!u&&!Hw(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>Tt.createElement(p,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=(s,t)=>{const e=Tt.forwardRef(({className:r,...o},u)=>Tt.createElement(Kw,{ref:u,iconNode:t,className:FT(`lucide-${qw(G0(s))}`,`lucide-${s}`,r),...o}));return e.displayName=G0(s),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Yw=zn("arrow-left",Qw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$w=zn("chevron-left",Xw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zw=zn("chevron-right",Jw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tI=zn("file-text",Ww);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],nI=zn("folder",eI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rI=zn("grip-vertical",iI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],aI=zn("layout-dashboard",sI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],lI=zn("lock-open",oI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ng=zn("lock",uI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hI=zn("plus",cI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dI=zn("save",fI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],gI=zn("sticky-note",mI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yI=zn("trash-2",pI),pe={Plus:hI,Trash:yI,Save:dI,File:tI,Folder:nI,Memo:gI,ChevronRight:Zw,ChevronLeft:$w,Dashboard:aI,DragHandle:rI,Back:Yw},_I=()=>{};var K0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},vI=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],c=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],c=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let I=(m&15)<<2|p>>6,M=p&63;g||(M=64,c||(I=64)),r.push(e[E],e[T],e[I],e[M])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(HT(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):vI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const p=o<s.length?e[s.charAt(o)]:64;++o;const T=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new EI;const I=u<<2|m>>4;if(r.push(I),p!==64){const M=m<<4&240|p>>2;if(r.push(M),T!==64){const K=p<<6&192|T;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class EI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TI=function(s){const t=HT(s);return GT.encodeByteArray(t,!0)},pf=function(s){return TI(s).replace(/\./g,"")},KT=function(s){try{return GT.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=()=>QT().__FIREBASE_DEFAULTS__,SI=()=>{if(typeof process>"u"||typeof K0>"u")return;const s=K0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},AI=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&KT(s[1]);return t&&JSON.parse(t)},jf=()=>{try{return _I()||bI()||SI()||AI()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},YT=s=>{var t,e;return(e=(t=jf())==null?void 0:t.emulatorHosts)==null?void 0:e[s]},wI=s=>{const t=YT(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},XT=()=>{var s;return(s=jf())==null?void 0:s.config},$T=s=>{var t;return(t=jf())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JT(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[pf(JSON.stringify(e)),pf(JSON.stringify(c)),""].join(".")}const wu={};function CI(){const s={prod:[],emulator:[]};for(const t of Object.keys(wu))wu[t]?s.emulator.push(t):s.prod.push(t);return s}function xI(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let Q0=!1;function ZT(s,t){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||wu[s]===t||wu[s]||Q0)return;wu[s]=t;function e(I){return`__firebase__banner__${I}`}const r="__firebase__banner",u=CI().prod.length>0;function c(){const I=document.getElementById(r);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,M){I.setAttribute("width","24"),I.setAttribute("id",M),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Q0=!0,c()},I}function E(I,M){I.setAttribute("id",M),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=xI(r),M=e("text"),K=document.getElementById(M)||document.createElement("span"),Q=e("learnmore"),J=document.getElementById(Q)||document.createElement("a"),it=e("preprendIcon"),rt=document.getElementById(it)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const et=I.element;m(et),E(J,Q);const mt=p();g(rt,it),et.append(rt,K,J,mt),document.body.appendChild(et)}u?(K.innerText="Preview backend disconnected.",rt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(rt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function WT(){var t;const s=(t=jf())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function OI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MI(){const s=qe();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function tb(){return!WT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eb(){return!WT()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function kI(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="FirebaseError";class Sr extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=PI,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$u.prototype.create)}}class $u{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?LI(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Sr(o,m,r)}}function LI(s,t){return s.replace(zI,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const zI=/\{\$([^}]+)}/g;function UI(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function _a(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(Y0(u)&&Y0(c)){if(!_a(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function Y0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function BI(s,t){const e=new jI(s,t);return e.subscribe.bind(e)}class jI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");qI(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=pg),o.error===void 0&&(o.error=pg),o.complete===void 0&&(o.complete=pg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qI(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(s){return s&&s._delegate?s._delegate:s}class va{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new II;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(GI(t))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=aa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=aa){return this.instances.has(t)}getOptions(t=aa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HI(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=aa){return this.component?this.component.multipleInstances?t:aa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HI(s){return s===aa?void 0:s}function GI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new FI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Lt||(Lt={}));const QI={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},YI=Lt.INFO,XI={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},$I=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=XI[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class mp{constructor(t){this.name=t,this._logLevel=YI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?QI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}const JI=(s,t)=>t.some(e=>s instanceof e);let X0,$0;function ZI(){return X0||(X0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WI(){return $0||($0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,Vg=new WeakMap,rb=new WeakMap,yg=new WeakMap,gp=new WeakMap;function tR(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{e(ps(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&ib.set(e,s)}).catch(()=>{}),gp.set(t,s),t}function eR(s){if(Vg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Vg.set(s,t)}let Og={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Vg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||rb.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ps(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function nR(s){Og=s(Og)}function iR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(_g(this),t,...e);return rb.set(r,t.sort?t.sort():[t]),ps(r)}:WI().includes(s)?function(...t){return s.apply(_g(this),t),ps(ib.get(this))}:function(...t){return ps(s.apply(_g(this),t))}}function rR(s){return typeof s=="function"?iR(s):(s instanceof IDBTransaction&&eR(s),JI(s,ZI())?new Proxy(s,Og):s)}function ps(s){if(s instanceof IDBRequest)return tR(s);if(yg.has(s))return yg.get(s);const t=rR(s);return t!==s&&(yg.set(s,t),gp.set(t,s)),t}const _g=s=>gp.get(s);function sR(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=ps(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ps(c.result),g.oldVersion,g.newVersion,ps(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const aR=["get","getKey","getAll","getAllKeys","count"],oR=["put","add","delete","clear"],vg=new Map;function J0(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(vg.get(t))return vg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=oR.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||aR.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[e](...m),o&&g.done]))[0]};return vg.set(t,u),u}nR(s=>({...s,get:(t,e,r)=>J0(t,e)||s.get(t,e,r),has:(t,e)=>!!J0(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(uR(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function uR(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Mg="@firebase/app",Z0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new mp("@firebase/app"),cR="@firebase/app-compat",hR="@firebase/analytics-compat",fR="@firebase/analytics",dR="@firebase/app-check-compat",mR="@firebase/app-check",gR="@firebase/auth",pR="@firebase/auth-compat",yR="@firebase/database",_R="@firebase/data-connect",vR="@firebase/database-compat",ER="@firebase/functions",TR="@firebase/functions-compat",bR="@firebase/installations",SR="@firebase/installations-compat",AR="@firebase/messaging",wR="@firebase/messaging-compat",IR="@firebase/performance",RR="@firebase/performance-compat",CR="@firebase/remote-config",xR="@firebase/remote-config-compat",DR="@firebase/storage",NR="@firebase/storage-compat",VR="@firebase/firestore",OR="@firebase/ai",MR="@firebase/firestore-compat",kR="firebase",PR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",LR={[Mg]:"fire-core",[cR]:"fire-core-compat",[fR]:"fire-analytics",[hR]:"fire-analytics-compat",[mR]:"fire-app-check",[dR]:"fire-app-check-compat",[gR]:"fire-auth",[pR]:"fire-auth-compat",[yR]:"fire-rtdb",[_R]:"fire-data-connect",[vR]:"fire-rtdb-compat",[ER]:"fire-fn",[TR]:"fire-fn-compat",[bR]:"fire-iid",[SR]:"fire-iid-compat",[AR]:"fire-fcm",[wR]:"fire-fcm-compat",[IR]:"fire-perf",[RR]:"fire-perf-compat",[CR]:"fire-rc",[xR]:"fire-rc-compat",[DR]:"fire-gcs",[NR]:"fire-gcs-compat",[VR]:"fire-fst",[MR]:"fire-fst-compat",[OR]:"fire-vertex","fire-js":"fire-js",[kR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Map,zR=new Map,Pg=new Map;function W0(s,t){try{s.container.addComponent(t)}catch(e){yr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function jo(s){const t=s.name;if(Pg.has(t))return yr.debug(`There were multiple attempts to register component ${t}.`),!1;Pg.set(t,s);for(const e of yf.values())W0(e,s);for(const e of zR.values())W0(e,s);return!0}function pp(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Ui(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new $u("app","Firebase",UR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=PR;function sb(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:kg,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(e||(e=XT()),!e)throw ys.create("no-options");const u=yf.get(o);if(u){if(_a(e,u.options)&&_a(r,u.config))return u;throw ys.create("duplicate-app",{appName:o})}const c=new KI(o);for(const g of Pg.values())c.addComponent(g);const m=new BR(e,r,c);return yf.set(o,m),m}function ab(s=kg){const t=yf.get(s);if(!t&&s===kg&&XT())return sb();if(!t)throw ys.create("no-app",{appName:s});return t}function _s(s,t,e){let r=LR[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yr.warn(c.join(" "));return}jo(new va(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebase-heartbeat-database",qR=1,ku="firebase-heartbeat-store";let Eg=null;function ob(){return Eg||(Eg=sR(jR,qR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(ku)}catch(e){console.warn(e)}}}}).catch(s=>{throw ys.create("idb-open",{originalErrorMessage:s.message})})),Eg}async function FR(s){try{const e=(await ob()).transaction(ku),r=await e.objectStore(ku).get(lb(s));return await e.done,r}catch(t){if(t instanceof Sr)yr.warn(t.message);else{const e=ys.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});yr.warn(e.message)}}}async function tE(s,t){try{const r=(await ob()).transaction(ku,"readwrite");await r.objectStore(ku).put(t,lb(s)),await r.done}catch(e){if(e instanceof Sr)yr.warn(e.message);else{const r=ys.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});yr.warn(r.message)}}}function lb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1024,GR=30;class KR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new YR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=eE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>GR){const c=XR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eE(),{heartbeatsToSend:r,unsentEntries:o}=QR(this._heartbeatsCache.heartbeats),u=pf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return yr.warn(e),""}}}function eE(){return new Date().toISOString().substring(0,10)}function QR(s,t=HR){const e=[];let r=s.slice();for(const o of s){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),nE(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),nE(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class YR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?kI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await FR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return tE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return tE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function nE(s){return pf(JSON.stringify({version:2,heartbeats:s})).length}function XR(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(s){jo(new va("platform-logger",t=>new lR(t),"PRIVATE")),jo(new va("heartbeat",t=>new KR(t),"PRIVATE")),_s(Mg,Z0,s),_s(Mg,Z0,"esm2020"),_s("fire-js","")}$R("");var JR="firebase",ZR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(JR,ZR,"app");var iE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,ub;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,R){function A(){}A.prototype=R.prototype,C.F=R.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(w,x,k){for(var D=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)D[ee-2]=arguments[ee];return R.prototype[x].apply(w,D)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,R,A){A||(A=0);const w=Array(16);if(typeof R=="string")for(var x=0;x<16;++x)w[x]=R.charCodeAt(A++)|R.charCodeAt(A++)<<8|R.charCodeAt(A++)<<16|R.charCodeAt(A++)<<24;else for(x=0;x<16;++x)w[x]=R[A++]|R[A++]<<8|R[A++]<<16|R[A++]<<24;R=C.g[0],A=C.g[1],x=C.g[2];let k=C.g[3],D;D=R+(k^A&(x^k))+w[0]+3614090360&4294967295,R=A+(D<<7&4294967295|D>>>25),D=k+(x^R&(A^x))+w[1]+3905402710&4294967295,k=R+(D<<12&4294967295|D>>>20),D=x+(A^k&(R^A))+w[2]+606105819&4294967295,x=k+(D<<17&4294967295|D>>>15),D=A+(R^x&(k^R))+w[3]+3250441966&4294967295,A=x+(D<<22&4294967295|D>>>10),D=R+(k^A&(x^k))+w[4]+4118548399&4294967295,R=A+(D<<7&4294967295|D>>>25),D=k+(x^R&(A^x))+w[5]+1200080426&4294967295,k=R+(D<<12&4294967295|D>>>20),D=x+(A^k&(R^A))+w[6]+2821735955&4294967295,x=k+(D<<17&4294967295|D>>>15),D=A+(R^x&(k^R))+w[7]+4249261313&4294967295,A=x+(D<<22&4294967295|D>>>10),D=R+(k^A&(x^k))+w[8]+1770035416&4294967295,R=A+(D<<7&4294967295|D>>>25),D=k+(x^R&(A^x))+w[9]+2336552879&4294967295,k=R+(D<<12&4294967295|D>>>20),D=x+(A^k&(R^A))+w[10]+4294925233&4294967295,x=k+(D<<17&4294967295|D>>>15),D=A+(R^x&(k^R))+w[11]+2304563134&4294967295,A=x+(D<<22&4294967295|D>>>10),D=R+(k^A&(x^k))+w[12]+1804603682&4294967295,R=A+(D<<7&4294967295|D>>>25),D=k+(x^R&(A^x))+w[13]+4254626195&4294967295,k=R+(D<<12&4294967295|D>>>20),D=x+(A^k&(R^A))+w[14]+2792965006&4294967295,x=k+(D<<17&4294967295|D>>>15),D=A+(R^x&(k^R))+w[15]+1236535329&4294967295,A=x+(D<<22&4294967295|D>>>10),D=R+(x^k&(A^x))+w[1]+4129170786&4294967295,R=A+(D<<5&4294967295|D>>>27),D=k+(A^x&(R^A))+w[6]+3225465664&4294967295,k=R+(D<<9&4294967295|D>>>23),D=x+(R^A&(k^R))+w[11]+643717713&4294967295,x=k+(D<<14&4294967295|D>>>18),D=A+(k^R&(x^k))+w[0]+3921069994&4294967295,A=x+(D<<20&4294967295|D>>>12),D=R+(x^k&(A^x))+w[5]+3593408605&4294967295,R=A+(D<<5&4294967295|D>>>27),D=k+(A^x&(R^A))+w[10]+38016083&4294967295,k=R+(D<<9&4294967295|D>>>23),D=x+(R^A&(k^R))+w[15]+3634488961&4294967295,x=k+(D<<14&4294967295|D>>>18),D=A+(k^R&(x^k))+w[4]+3889429448&4294967295,A=x+(D<<20&4294967295|D>>>12),D=R+(x^k&(A^x))+w[9]+568446438&4294967295,R=A+(D<<5&4294967295|D>>>27),D=k+(A^x&(R^A))+w[14]+3275163606&4294967295,k=R+(D<<9&4294967295|D>>>23),D=x+(R^A&(k^R))+w[3]+4107603335&4294967295,x=k+(D<<14&4294967295|D>>>18),D=A+(k^R&(x^k))+w[8]+1163531501&4294967295,A=x+(D<<20&4294967295|D>>>12),D=R+(x^k&(A^x))+w[13]+2850285829&4294967295,R=A+(D<<5&4294967295|D>>>27),D=k+(A^x&(R^A))+w[2]+4243563512&4294967295,k=R+(D<<9&4294967295|D>>>23),D=x+(R^A&(k^R))+w[7]+1735328473&4294967295,x=k+(D<<14&4294967295|D>>>18),D=A+(k^R&(x^k))+w[12]+2368359562&4294967295,A=x+(D<<20&4294967295|D>>>12),D=R+(A^x^k)+w[5]+4294588738&4294967295,R=A+(D<<4&4294967295|D>>>28),D=k+(R^A^x)+w[8]+2272392833&4294967295,k=R+(D<<11&4294967295|D>>>21),D=x+(k^R^A)+w[11]+1839030562&4294967295,x=k+(D<<16&4294967295|D>>>16),D=A+(x^k^R)+w[14]+4259657740&4294967295,A=x+(D<<23&4294967295|D>>>9),D=R+(A^x^k)+w[1]+2763975236&4294967295,R=A+(D<<4&4294967295|D>>>28),D=k+(R^A^x)+w[4]+1272893353&4294967295,k=R+(D<<11&4294967295|D>>>21),D=x+(k^R^A)+w[7]+4139469664&4294967295,x=k+(D<<16&4294967295|D>>>16),D=A+(x^k^R)+w[10]+3200236656&4294967295,A=x+(D<<23&4294967295|D>>>9),D=R+(A^x^k)+w[13]+681279174&4294967295,R=A+(D<<4&4294967295|D>>>28),D=k+(R^A^x)+w[0]+3936430074&4294967295,k=R+(D<<11&4294967295|D>>>21),D=x+(k^R^A)+w[3]+3572445317&4294967295,x=k+(D<<16&4294967295|D>>>16),D=A+(x^k^R)+w[6]+76029189&4294967295,A=x+(D<<23&4294967295|D>>>9),D=R+(A^x^k)+w[9]+3654602809&4294967295,R=A+(D<<4&4294967295|D>>>28),D=k+(R^A^x)+w[12]+3873151461&4294967295,k=R+(D<<11&4294967295|D>>>21),D=x+(k^R^A)+w[15]+530742520&4294967295,x=k+(D<<16&4294967295|D>>>16),D=A+(x^k^R)+w[2]+3299628645&4294967295,A=x+(D<<23&4294967295|D>>>9),D=R+(x^(A|~k))+w[0]+4096336452&4294967295,R=A+(D<<6&4294967295|D>>>26),D=k+(A^(R|~x))+w[7]+1126891415&4294967295,k=R+(D<<10&4294967295|D>>>22),D=x+(R^(k|~A))+w[14]+2878612391&4294967295,x=k+(D<<15&4294967295|D>>>17),D=A+(k^(x|~R))+w[5]+4237533241&4294967295,A=x+(D<<21&4294967295|D>>>11),D=R+(x^(A|~k))+w[12]+1700485571&4294967295,R=A+(D<<6&4294967295|D>>>26),D=k+(A^(R|~x))+w[3]+2399980690&4294967295,k=R+(D<<10&4294967295|D>>>22),D=x+(R^(k|~A))+w[10]+4293915773&4294967295,x=k+(D<<15&4294967295|D>>>17),D=A+(k^(x|~R))+w[1]+2240044497&4294967295,A=x+(D<<21&4294967295|D>>>11),D=R+(x^(A|~k))+w[8]+1873313359&4294967295,R=A+(D<<6&4294967295|D>>>26),D=k+(A^(R|~x))+w[15]+4264355552&4294967295,k=R+(D<<10&4294967295|D>>>22),D=x+(R^(k|~A))+w[6]+2734768916&4294967295,x=k+(D<<15&4294967295|D>>>17),D=A+(k^(x|~R))+w[13]+1309151649&4294967295,A=x+(D<<21&4294967295|D>>>11),D=R+(x^(A|~k))+w[4]+4149444226&4294967295,R=A+(D<<6&4294967295|D>>>26),D=k+(A^(R|~x))+w[11]+3174756917&4294967295,k=R+(D<<10&4294967295|D>>>22),D=x+(R^(k|~A))+w[2]+718787259&4294967295,x=k+(D<<15&4294967295|D>>>17),D=A+(k^(x|~R))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+k&4294967295}r.prototype.v=function(C,R){R===void 0&&(R=C.length);const A=R-this.blockSize,w=this.C;let x=this.h,k=0;for(;k<R;){if(x==0)for(;k<=A;)o(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<R;)if(w[x++]=C.charCodeAt(k++),x==this.blockSize){o(this,w),x=0;break}}else for(;k<R;)if(w[x++]=C[k++],x==this.blockSize){o(this,w),x=0;break}}this.h=x,this.o+=R},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,A=0;A<4;++A)for(let w=0;w<32;w+=8)C[R++]=this.g[A]>>>w&255;return C};function u(C,R){var A=m;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=R(C)}function c(C,R){this.h=R;const A=[];let w=!0;for(let x=C.length-1;x>=0;x--){const k=C[x]|0;w&&k==R||(A[x]=k,w=!1)}this.g=A}var m={};function g(C){return-128<=C&&C<128?u(C,function(R){return new c([R|0],R<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return T;if(C<0)return J(p(-C));const R=[];let A=1;for(let w=0;C>=A;w++)R[w]=C/A|0,A*=4294967296;return new c(R,0)}function E(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return J(E(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(R,8));let w=T;for(let k=0;k<C.length;k+=8){var x=Math.min(8,C.length-k);const D=parseInt(C.substring(k,k+x),R);x<8?(x=p(Math.pow(R,x)),w=w.j(x).add(p(D))):(w=w.j(A),w=w.add(p(D)))}return w}var T=g(0),I=g(1),M=g(16777216);s=c.prototype,s.m=function(){if(Q(this))return-J(this).m();let C=0,R=1;for(let A=0;A<this.g.length;A++){const w=this.i(A);C+=(w>=0?w:4294967296+w)*R,R*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(K(this))return"0";if(Q(this))return"-"+J(this).toString(C);const R=p(Math.pow(C,6));var A=this;let w="";for(;;){const x=mt(A,R).g;A=it(A,x.j(R));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=x,K(A))return k+w;for(;k.length<6;)k="0"+k;w=k+w}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function K(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function Q(C){return C.h==-1}s.l=function(C){return C=it(this,C),Q(C)?-1:K(C)?0:1};function J(C){const R=C.g.length,A=[];for(let w=0;w<R;w++)A[w]=~C.g[w];return new c(A,~C.h).add(I)}s.abs=function(){return Q(this)?J(this):this},s.add=function(C){const R=Math.max(this.g.length,C.g.length),A=[];let w=0;for(let x=0;x<=R;x++){let k=w+(this.i(x)&65535)+(C.i(x)&65535),D=(k>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);w=D>>>16,k&=65535,D&=65535,A[x]=D<<16|k}return new c(A,A[A.length-1]&-2147483648?-1:0)};function it(C,R){return C.add(J(R))}s.j=function(C){if(K(this)||K(C))return T;if(Q(this))return Q(C)?J(this).j(J(C)):J(J(this).j(C));if(Q(C))return J(this.j(J(C)));if(this.l(M)<0&&C.l(M)<0)return p(this.m()*C.m());const R=this.g.length+C.g.length,A=[];for(var w=0;w<2*R;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(let x=0;x<C.g.length;x++){const k=this.i(w)>>>16,D=this.i(w)&65535,ee=C.i(x)>>>16,le=C.i(x)&65535;A[2*w+2*x]+=D*le,rt(A,2*w+2*x),A[2*w+2*x+1]+=k*le,rt(A,2*w+2*x+1),A[2*w+2*x+1]+=D*ee,rt(A,2*w+2*x+1),A[2*w+2*x+2]+=k*ee,rt(A,2*w+2*x+2)}for(C=0;C<R;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=R;C<2*R;C++)A[C]=0;return new c(A,0)};function rt(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function et(C,R){this.g=C,this.h=R}function mt(C,R){if(K(R))throw Error("division by zero");if(K(C))return new et(T,T);if(Q(C))return R=mt(J(C),R),new et(J(R.g),J(R.h));if(Q(R))return R=mt(C,J(R)),new et(J(R.g),R.h);if(C.g.length>30){if(Q(C)||Q(R))throw Error("slowDivide_ only works with positive integers.");for(var A=I,w=R;w.l(C)<=0;)A=vt(A),w=vt(w);var x=ft(A,1),k=ft(w,1);for(w=ft(w,2),A=ft(A,2);!K(w);){var D=k.add(w);D.l(C)<=0&&(x=x.add(A),k=D),w=ft(w,1),A=ft(A,1)}return R=it(C,x.j(R)),new et(x,R)}for(x=T;C.l(R)>=0;){for(A=Math.max(1,Math.floor(C.m()/R.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),k=p(A),D=k.j(R);Q(D)||D.l(C)>0;)A-=w,k=p(A),D=k.j(R);K(k)&&(k=I),x=x.add(k),C=it(C,D)}return new et(x,C)}s.B=function(C){return mt(this,C).h},s.and=function(C){const R=Math.max(this.g.length,C.g.length),A=[];for(let w=0;w<R;w++)A[w]=this.i(w)&C.i(w);return new c(A,this.h&C.h)},s.or=function(C){const R=Math.max(this.g.length,C.g.length),A=[];for(let w=0;w<R;w++)A[w]=this.i(w)|C.i(w);return new c(A,this.h|C.h)},s.xor=function(C){const R=Math.max(this.g.length,C.g.length),A=[];for(let w=0;w<R;w++)A[w]=this.i(w)^C.i(w);return new c(A,this.h^C.h)};function vt(C){const R=C.g.length+1,A=[];for(let w=0;w<R;w++)A[w]=C.i(w)<<1|C.i(w-1)>>>31;return new c(A,C.h)}function ft(C,R){const A=R>>5;R%=32;const w=C.g.length-A,x=[];for(let k=0;k<w;k++)x[k]=R>0?C.i(k+A)>>>R|C.i(k+A+1)<<32-R:C.i(k+A);return new c(x,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ub=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,vs=c}).apply(typeof iE<"u"?iE:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cb,Tu,hb,Wh,Lg,fb,db,mb;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,y){if(y)t:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var U=h[S];if(!(U in v))break t;v=v[U]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,U,H){for(var st=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)st[Rt-2]=arguments[Rt];return y.prototype[U].apply(S,st)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function M(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function K(h,y){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=h.length||0;const H=U.length||0;h.length=v+H;for(let st=0;st<H;st++)h[v+st]=U[st]}else h.push(U)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function J(h){c.setTimeout(()=>{throw h},0)}function it(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class rt{constructor(){this.h=this.g=null}add(y,v){const S=et.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var et=new Q(()=>new mt,h=>h.reset());class mt{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,ft=!1,C=new rt,R=()=>{const h=Promise.resolve(void 0);vt=()=>{h.then(A)}};function A(){for(var h;h=it();){try{h.h.call(h.g)}catch(v){J(v)}var y=et;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ft=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ee(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(ee,x),ee.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),F=0;function nt(h,y,v,S,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=U,this.key=++F,this.da=this.fa=!1}function pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vt(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Yt(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function O(h){const y={};for(const v in h)y[v]=h[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(h,y){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)h[v]=S[v];for(let H=0;H<W.length;H++)v=W[H],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function ut(h){this.src=h,this.g={},this.h=0}ut.prototype.add=function(h,y,v,S,U){const H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);const st=xt(h,y,S,U);return st>-1?(y=h[st],v||(y.fa=!1)):(y=new nt(y,this.src,H,!!S,U),y.fa=v,h.push(y)),y};function St(h,y){const v=y.type;if(v in h.g){var S=h.g[v],U=Array.prototype.indexOf.call(S,y,void 0),H;(H=U>=0)&&Array.prototype.splice.call(S,U,1),H&&(pt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function xt(h,y,v,S){for(let U=0;U<h.length;++U){const H=h[U];if(!H.da&&H.listener==y&&H.capture==!!v&&H.ha==S)return U}return-1}var Bt="closure_lm_"+(Math.random()*1e6|0),ze={};function he(h,y,v,S,U){if(Array.isArray(y)){for(let H=0;H<y.length;H++)he(h,y[H],v,S,U);return null}return v=hl(v),h&&h[le]?h.J(y,v,m(S)?!!S.capture:!1,U):Cs(h,y,v,!1,S,U)}function Cs(h,y,v,S,U,H){if(!y)throw Error("Invalid event type");const st=m(U)?!!U.capture:!!U;let Rt=xs(h);if(Rt||(h[Bt]=Rt=new ut(h)),v=Rt.add(y,v,S,st,H),v.proxy)return v;if(S=Va(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)k||(U=st),U===void 0&&(U=!1),h.addEventListener(y.toString(),S,U);else if(h.attachEvent)h.attachEvent(pi(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Va(){function h(v){return y.call(h.src,h.listener,v)}const y=ul;return h}function Oa(h,y,v,S,U){if(Array.isArray(y))for(var H=0;H<y.length;H++)Oa(h,y[H],v,S,U);else S=m(S)?!!S.capture:!!S,v=hl(v),h&&h[le]?(h=h.i,H=String(y).toString(),H in h.g&&(y=h.g[H],v=xt(y,v,S,U),v>-1&&(pt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[H],h.h--)))):h&&(h=xs(h))&&(y=h.g[y.toString()],h=-1,y&&(h=xt(y,v,S,U)),(v=h>-1?y[h]:null)&&Ma(v))}function Ma(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[le])St(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(pi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=xs(y))?(St(v,h),v.h==0&&(v.src=null,y[Bt]=null)):pt(h)}}}function pi(h){return h in ze?ze[h]:ze[h]="on"+h}function ul(h,y){if(h.da)h=!0;else{y=new ee(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Ma(h),h=v.call(S,y)}return h}function xs(h){return h=h[Bt],h instanceof ut?h:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(h){return typeof h=="function"?h:(h[cl]||(h[cl]=function(y){return h.handleEvent(y)}),h[cl])}function Ie(){w.call(this),this.i=new ut(this),this.M=this,this.G=null}T(Ie,w),Ie.prototype[le]=!0,Ie.prototype.removeEventListener=function(h,y,v,S){Oa(this,h,y,v,S)};function Ue(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var U=y;y=new x(S,h),lt(y,U)}U=!0;let H,st;if(v)for(st=v.length-1;st>=0;st--)H=y.g=v[st],U=Ir(H,S,!0,y)&&U;if(H=y.g=h,U=Ir(H,S,!0,y)&&U,U=Ir(H,S,!1,y)&&U,v)for(st=0;st<v.length;st++)H=y.g=v[st],U=Ir(H,S,!1,y)&&U}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)pt(v[S]);delete h.g[y],h.h--}}this.G=null},Ie.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Ie.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Ir(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let H=0;H<y.length;++H){const st=y[H];if(st&&!st.da&&st.capture==v){const Rt=st.listener,Se=st.ha||st.src;st.fa&&St(h.i,st),U=Rt.call(Se,S)!==!1&&U}}return U&&!S.defaultPrevented}function fd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function dc(h){h.g=fd(()=>{h.g=null,h.i&&(h.i=!1,dc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class hn extends w{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:dc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(h){w.call(this),this.h=h,this.g={}}T(Ds,w);var fl=[];function dl(h){Vt(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ma(y)},h),h.g={}}Ds.prototype.N=function(){Ds.Z.N.call(this),dl(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rr=c.JSON.stringify,dd=c.JSON.parse,mc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function gc(){}function pc(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $e(){x.call(this,"d")}T($e,x);function Un(){x.call(this,"c")}T(Un,x);var be={},yc=null;function ka(){return yc=yc||new Ie}be.Ia="serverreachability";function _c(h){x.call(this,be.Ia,h)}T(_c,x);function yi(h){const y=ka();Ue(y,new _c(y))}be.STAT_EVENT="statevent";function Ns(h,y){x.call(this,be.STAT_EVENT,h),this.stat=y}T(Ns,x);function Re(h){const y=ka();Ue(y,new Ns(y,h))}be.Ja="timingevent";function _i(h,y){x.call(this,be.Ja,h),this.size=y}T(_i,x);function vi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function md(h,y,v,S,U,H){h.info(function(){if(h.g)if(H){var st="",Rt=H.split("&");for(let Gt=0;Gt<Rt.length;Gt++){var Se=Rt[Gt].split("=");if(Se.length>1){const fe=Se[0];Se=Se[1];const Fn=fe.split("_");st=Fn.length>=2&&Fn[1]=="type"?st+(fe+"="+Se+"&"):st+(fe+"=redacted&")}}}else st=null;else st=H;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+y+`
`+v+`
`+st})}function vc(h,y,v,S,U,H,st){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+y+`
`+v+`
`+H+" "+st})}function Ei(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+gd(h,v)+(S?" "+S:"")})}function Vs(h,y){h.info(function(){return"TIMEOUT: "+y})}ni.prototype.info=function(){};function gd(h,y){if(!h.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(h=0;h<H.length;h++)if(Array.isArray(H[h])){var v=H[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let st=1;st<S.length;st++)S[st]=""}}}}return Rr(H)}catch{return y}}var Os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function Ms(){}T(Ms,gc),Ms.prototype.g=function(){return new XMLHttpRequest},gl=new Ms;function Qi(h){return encodeURIComponent(String(h))}function Ec(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function ii(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Ce={},He={};function Ti(h,y,v){h.M=1,h.A=ks(De(y)),h.u=v,h.R=!0,Pa(h,null)}function Pa(h,y){h.F=Date.now(),bi(h),h.B=De(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Ba(v.i,"t",S),h.C=0,v=h.j.L,h.h=new ri,h.g=kc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new hn(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(fl[0]=U.toString()),U=fl);for(let H=0;H<U.length;H++){const st=he(v,U[H],S||y.handleEvent,!1,y.h||y);if(!st)break;y.g[st.key]=st}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),yi(),md(h.i,h.v,h.B,h.l,h.S,h.u)}ii.prototype.ba=function(h){h=h.target;const y=this.O;y&&oi(h)==3?y.j():this.Y(h)},ii.prototype.Y=function(h){try{if(h==this.g)t:{const Rt=oi(this.g),Se=this.g.ya(),Gt=this.g.ca();if(!(Rt<3)&&(Rt!=3||this.g&&(this.h.h||this.g.la()||Je(this.g)))){this.K||Rt!=4||Se==7||(Se==8||Gt<=0?yi(3):yi(2)),Si(this);var y=this.g.ca();this.X=y;var v=pd(this);if(this.o=y==200,vc(this.i,this.v,this.B,this.l,this.S,Rt,y),this.o){if(this.U&&!this.L){e:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var H=S;break e}}H=null}if(h=H)Ei(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ai(this,h);else{this.o=!1,this.m=3,Re(12),In(this),Bn(this);break t}}if(this.R){h=!0;let fe;for(;!this.K&&this.C<v.length;)if(fe=bc(this,v),fe==He){Rt==4&&(this.m=4,Re(14),h=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(fe==Ce){this.m=4,Re(15),Ei(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ei(this.i,this.l,fe,null),Ai(this,fe);if(Tc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||v.length!=0||this.h.h||(this.m=1,Re(16),h=!1),this.o=this.o&&h,!h)Ei(this.i,this.l,v,"[Invalid Chunked Response]"),In(this),Bn(this);else if(v.length>0&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.aa&&!st.P&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Dl(st),st.P=!0,Re(11))}}else Ei(this.i,this.l,v,null),Ai(this,v);Rt==4&&In(this),this.o&&!this.K&&(Rt==4?Nc(this.j,this):(this.o=!1,bi(this)))}else Xi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Re(12)):(this.m=0,Re(13)),In(this),Bn(this)}}}catch{}finally{}};function pd(h){if(!Tc(h))return h.g.la();const y=Je(h.g);if(y==="")return"";let v="";const S=y.length,U=oi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return In(h),Bn(h),"";h.h.i=new c.TextDecoder}for(let H=0;H<S;H++)h.h.h=!0,v+=h.h.i.decode(y[H],{stream:!(U&&H==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Tc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function bc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?He:(v=Number(y.substring(v,S)),isNaN(v)?Ce:(S+=1,S+v>y.length?He:(y=y.slice(S,S+v),h.C=S+v,y)))}ii.prototype.cancel=function(){this.K=!0,In(this)};function bi(h){h.T=Date.now()+h.H,La(h,h.H)}function La(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=vi(p(h.aa,h),y)}function Si(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ii.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(yi(),Re(17)),In(this),this.m=2,Bn(this)):La(this,this.T-h)};function Bn(h){h.j.I==0||h.K||Nc(h.j,h)}function In(h){Si(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,dl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ai(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ii(v.h,h))){if(!h.L&&Ii(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ga(v),kr(v);else break t;qs(v),Re(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=vi(p(v.Va,v),6e3));wi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Vi(v,11)}else if((h.L||v.g==h)&&Ga(v),!D(y))for(U=v.Ba.g.parse(y),y=0;y<U.length;y++){let Gt=U[y];const fe=Gt[0];if(!(fe<=v.K))if(v.K=fe,Gt=Gt[1],v.I==2)if(Gt[0]=="c"){v.M=Gt[1],v.ba=Gt[2];const Fn=Gt[3];Fn!=null&&(v.ka=Fn,v.j.info("VER="+v.ka));const Oi=Gt[4];Oi!=null&&(v.za=Oi,v.j.info("SVER="+v.za));const li=Gt[5];li!=null&&typeof li=="number"&&li>0&&(S=1.5*li,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ui=h.g;if(ui){const Fs=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var H=S.h;H.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(_l(H,H.h),H.h=null))}if(S.G){const Ka=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Ka&&(S.wa=Ka,Xt(S.J,S.G,Ka))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var st=h;if(S.na=Mc(S,S.L?S.ba:null,S.W),st.L){vl(S.h,st);var Rt=st,Se=S.O;Se&&(Rt.H=Se),Rt.D&&(Si(Rt),bi(Rt)),S.g=st}else xc(S);v.i.length>0&&Ni(v)}else Gt[0]!="stop"&&Gt[0]!="close"||Vi(v,7);else v.I==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?Vi(v,7):Cl(v):Gt[0]!="noop"&&v.l&&v.l.qa(Gt),v.A=0)}}yi(4)}catch{}}var xe=class{constructor(h,y){this.g=h,this.map=y}};function pl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function wi(h){return h.h?1:h.g?h.g.size:0}function Ii(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function _l(h,y){h.g?h.g.add(y):h.h=y}function vl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}pl.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function El(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return M(h.i)}var Sc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function za(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let U,H=null;S>=0?(U=h[v].substring(0,S),H=h[v].substring(S+1)):U=h[v],y(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Rn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Rn?(this.l=h.l,Ge(this,h.j),this.o=h.o,this.g=h.g,Cr(this,h.u),this.h=h.h,Tl(this,Rc(h.i)),this.m=h.m):h&&(y=String(h).match(Sc))?(this.l=!1,Ge(this,y[1]||"",!0),this.o=Ri(y[2]||""),this.g=Ri(y[3]||"",!0),Cr(this,y[4]),this.h=Ri(y[5]||"",!0),Tl(this,y[6]||"",!0),this.m=Ri(y[7]||"")):(this.l=!1,this.i=new Dr(null,this.l))}Rn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ps(y,Ua,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ps(y,Ua,!0),"@"),h.push(Qi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ps(v,v.charAt(0)=="/"?bl:Ac,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ps(v,wc)),h.join("")},Rn.prototype.resolve=function(h){const y=De(this);let v=!!h.j;v?Ge(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Cr(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=y.h.lastIndexOf("/");U!=-1&&(S=y.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let st=0;st<U.length;){const Rt=U[st++];Rt=="."?S&&st==U.length&&H.push(""):Rt==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&st==U.length&&H.push("")):(H.push(Rt),S=!0)}S=H.join("/")}else S=U}return v?y.h=S:v=h.i.toString()!=="",v?Tl(y,Rc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function De(h){return new Rn(h)}function Ge(h,y,v){h.j=v?Ri(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Cr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Tl(h,y,v){y instanceof Dr?(h.i=y,ja(h.i,h.l)):(v||(y=Ps(y,xr)),h.i=new Dr(y,h.l))}function Xt(h,y,v){h.i.set(y,v)}function ks(h){return Xt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ri(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ps(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,pn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ua=/[#\/\?@]/g,Ac=/[#\?:]/g,bl=/[#\?]/g,xr=/[#\?@]/g,wc=/#/g;function Dr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function yn(h){h.g||(h.g=new Map,h.h=0,h.i&&za(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Dr.prototype,s.add=function(h,y){yn(this),this.i=null,h=Nr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ic(h,y){yn(h),y=Nr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return yn(h),y=Nr(h,y),h.g.has(y)}s.forEach=function(h,y){yn(this),this.g.forEach(function(v,S){v.forEach(function(U){h.call(y,U,S,this)},this)},this)};function Al(h,y){yn(h);let v=[];if(typeof y=="string")Sl(h,y)&&(v=v.concat(h.g.get(Nr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return yn(this),this.i=null,h=Nr(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function Ba(h,y,v){Ic(h,y),v.length>0&&(h.i=null,h.g.set(Nr(h,y),M(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const U=Qi(v);v=Al(this,v);for(let H=0;H<v.length;H++){let st=U;v[H]!==""&&(st+="="+Qi(v[H])),h.push(st)}}return this.i=h.join("&")};function Rc(h){const y=new Dr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Nr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ja(h,y){y&&!h.j&&(yn(h),h.i=null,h.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(Ic(this,S),Ba(this,U,v))},h)),h.j=y}function si(h,y){const v=new ni;if(c.Image){const S=new Image;S.onload=E(jn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(jn,v,"TestLoadImage: error",!1,y,S),S.onabort=E(jn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(jn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function wl(h,y){const v=new ni,S=new AbortController,U=setTimeout(()=>{S.abort(),jn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(H=>{clearTimeout(U),H.ok?jn(v,"TestPingServer: ok",!0,y):jn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),jn(v,"TestPingServer: error",!1,y)})}function jn(h,y,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Vr(){this.g=new mc}function Ci(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ci,gc),Ci.prototype.g=function(){return new Ls(this.i,this.h)};function Ls(h,y){Ie.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ls,Ie),s=Ls.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ai(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function qa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Or(this):ai(this),this.readyState==3&&qa(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Or(this))},s.Na=function(h){this.g&&(this.response=h,Or(this))},s.ga=function(){this.g&&Or(this)};function Or(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ai(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ai(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qn(h){let y="";return Vt(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function zs(h,y,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=qn(v),typeof h=="string"?v!=null&&Qi(v):Xt(h,y,v))}function ne(h){Ie.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ne,Ie);var xi=/^https?$/i,Il=["POST","PUT"];s=ne.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(H){Us(this,H);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())v.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Il,y,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,st]of v)this.g.setRequestHeader(H,st);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(H){Us(this,H)}};function Us(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Rl(h),Yi(h)}function Rl(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),Yi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),ne.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Bs(this):this.Xa())},s.Xa=function(){Bs(this)};function Bs(h){if(h.h&&typeof u<"u"){if(h.v&&oi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),oi(h)==4){h.h=!1;try{const H=h.ca();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var S;if(S=H===0){let st=String(h.D).match(Sc)[1]||null;!st&&c.self&&c.self.location&&(st=c.self.location.protocol.slice(0,-1)),S=!xi.test(st?st.toLowerCase():"")}v=S}if(v)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var U=oi(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",Rl(h)}}finally{Yi(h)}}}}function Yi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ue(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function oi(h){return h.g?h.g.readyState:0}s.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),dd(y)}};function Je(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xi(h){const y={};h=(h.g&&oi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(D(h[S]))continue;var v=Ec(h[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=y[U]||[];y[U]=H,H.push(v)}Yt(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Mr(h){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,h),this.Za=Di("retryDelaySeedMs",1e4,h),this.Ta=Di("forwardChannelMaxRetries",2,h),this.va=Di("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(h&&h.concurrentRequestLimit),this.Ba=new Vr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Mr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){Re(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Mc(this,null,this.W),Ni(this)};function Cl(h){if(Fa(h),h.I==3){var y=h.V++,v=De(h.J);if(Xt(v,"SID",h.M),Xt(v,"RID",y),Xt(v,"TYPE","terminate"),js(h,v),y=new ii(h,h.j,y),y.M=2,y.A=ks(De(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=kc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),bi(y)}Oc(h)}function kr(h){h.g&&(Dl(h),h.g.cancel(),h.g=null)}function Fa(h){kr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ga(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ni(h){if(!yl(h.h)&&!h.m){h.m=!0;var y=h.Ea;vt||R(),ft||(vt(),ft=!0),C.add(y,h),h.D=0}}function Ha(h,y){return wi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=vi(p(h.Ea,h,y),Vc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new ii(this,this.j,h);let H=this.o;if(this.U&&(H?(H=O(H),lt(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Cc(this,U,y),v=De(this.J),Xt(v,"RID",h),Xt(v,"CVER",22),this.G&&Xt(v,"X-HTTP-Session-Id",this.G),js(this,v),H&&(this.R?y="headers="+Qi(qn(H))+"&"+y:this.u&&zs(v,this.u,H)),_l(this.h,U),this.Ra&&Xt(v,"TYPE","init"),this.S?(Xt(v,"$req",y),Xt(v,"SID","null"),U.U=!0,Ti(U,v,null)):Ti(U,v,y),this.I=2}}else this.I==3&&(h?xl(this,h):this.i.length==0||yl(this.h)||xl(this))};function xl(h,y){var v;y?v=y.l:v=h.V++;const S=De(h.J);Xt(S,"SID",h.M),Xt(S,"RID",v),Xt(S,"AID",h.K),js(h,S),h.u&&h.o&&zs(S,h.u,h.o),v=new ii(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Cc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_l(h.h,v),Ti(v,S,y)}function js(h,y){h.H&&Vt(h.H,function(v,S){Xt(y,S,v)}),h.l&&Vt({},function(v,S){Xt(y,S,v)})}function Cc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;t:{var U=h.i;let Rt=-1;for(;;){const Se=["count="+v];Rt==-1?v>0?(Rt=U[0].g,Se.push("ofs="+Rt)):Rt=0:Se.push("ofs="+Rt);let Gt=!0;for(let fe=0;fe<v;fe++){var H=U[fe].g;const Fn=U[fe].map;if(H-=Rt,H<0)Rt=Math.max(0,U[fe].g-100),Gt=!1;else try{H="req"+H+"_"||"";try{var st=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Oi,li]of st){let ui=li;m(li)&&(ui=Rr(li)),Se.push(H+Oi+"="+encodeURIComponent(ui))}}catch(Oi){throw Se.push(H+"type="+encodeURIComponent("_badmap")),Oi}}catch{S&&S(Fn)}}if(Gt){st=Se.join("&");break t}}st=void 0}return h=h.i.splice(0,v),y.G=h,st}function xc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;vt||R(),ft||(vt(),ft=!0),C.add(y,h),h.A=0}}function qs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=vi(p(h.Da,h),Vc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Dc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=vi(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Re(10),kr(this),Dc(this))};function Dl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Dc(h){h.g=new ii(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=De(h.na);Xt(y,"RID","rpc"),Xt(y,"SID",h.M),Xt(y,"AID",h.K),Xt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xt(y,"TO",h.ia),Xt(y,"TYPE","xmlhttp"),js(h,y),h.u&&h.o&&zs(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=ks(De(y)),v.u=null,v.R=!0,Pa(v,h)}s.Va=function(){this.C!=null&&(this.C=null,kr(this),qs(this),Re(19))};function Ga(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Nc(h,y){var v=null;if(h.g==y){Ga(h),Dl(h),h.g=null;var S=2}else if(Ii(h.h,y))v=y.G,vl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var U=h.D;S=ka(),Ue(S,new _i(S,v)),Ni(h)}else xc(h);else if(U=y.m,U==3||U==0&&y.X>0||!(S==1&&Ha(h,y)||S==2&&qs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),U){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function Vc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Vi(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const U=!S;S=new Rn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ge(S,"https"),ks(S),U?si(S.toString(),v):wl(S.toString(),v)}else Re(2);h.I=0,h.l&&h.l.pa(y),Oc(h),Fa(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function Oc(h){if(h.I=0,h.ja=[],h.l){const y=El(h.h);(y.length!=0||h.i.length!=0)&&(K(h.ja,y),K(h.ja,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.oa()}}function Mc(h,y,v){var S=v instanceof Rn?De(v):new Rn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Cr(S,S.u);else{var U=c.location;S=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const H=new Rn(null);S&&Ge(H,S),y&&(H.g=y),U&&Cr(H,U),v&&(H.h=v),S=H}return v=h.G,y=h.wa,v&&y&&Xt(S,v,y),Xt(S,"VER",h.ka),js(h,S),S}function kc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ne(new Ci({ab:v})):new ne(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}s=Pc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Pr(){}Pr.prototype.g=function(h,y){return new fn(h,y)};function fn(h,y){Ie.call(this),this.g=new Mr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new $i(this)}T(fn,Ie),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Cl(this.g)},fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Rr(h),h=v);y.i.push(new xe(y.Ya++,h)),y.I==3&&Ni(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,Cl(this.g),delete this.g,fn.Z.N.call(this)};function Lc(h){$e.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Lc,$e);function zc(){Un.call(this),this.status=1}T(zc,Un);function $i(h){this.g=h}T($i,Pc),$i.prototype.ra=function(){Ue(this.g,"a")},$i.prototype.qa=function(h){Ue(this.g,new Lc(h))},$i.prototype.pa=function(h){Ue(this.g,new zc)},$i.prototype.oa=function(){Ue(this.g,"b")},Pr.prototype.createWebChannel=Pr.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,mb=function(){return new Pr},db=function(){return ka()},fb=be,Lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Wh=Os,ml.COMPLETE="complete",hb=ml,pc.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,Tu=pc,ne.prototype.listenOnce=ne.prototype.K,ne.prototype.getLastError=ne.prototype.Ha,ne.prototype.getLastErrorCode=ne.prototype.ya,ne.prototype.getStatus=ne.prototype.ca,ne.prototype.getResponseJson=ne.prototype.La,ne.prototype.getResponseText=ne.prototype.la,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Fa,cb=ne}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});const rE="@firebase/firestore",sE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new mp("@firebase/firestore");function xo(){return Ea.logLevel}function tt(s,...t){if(Ea.logLevel<=Lt.DEBUG){const e=t.map(yp);Ea.debug(`Firestore (${rl}): ${s}`,...e)}}function mn(s,...t){if(Ea.logLevel<=Lt.ERROR){const e=t.map(yp);Ea.error(`Firestore (${rl}): ${s}`,...e)}}function Ta(s,...t){if(Ea.logLevel<=Lt.WARN){const e=t.map(yp);Ea.warn(`Firestore (${rl}): ${s}`,...e)}}function yp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,gb(s,r,e)}function gb(s,t,e){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw mn(r),new Error(r)}function gt(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||gb(t,o,r)}function wt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Sr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class WR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(nn.UNAUTHENTICATED)))}shutdown(){}}class tC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class eC{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){gt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string",31837,{l:r}),new pb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class nC{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iC{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rC{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ui(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){gt(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(gt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new aE(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=sC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function At(s,t){return s<t?-1:s>t?1:0}function zg(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Tg(o)===Tg(u)?At(o,u):Tg(o)?1:-1}return At(s.length,t.length)}const aC=55296,oC=57343;function Tg(s){const t=s.charCodeAt(0);return t>=aC&&t<=oC}function qo(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function yb(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="__name__";class zi{constructor(t,e,r){e===void 0?e=0:e>t.length&&ht(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&ht(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return zi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof zi?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=zi.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return At(t.length,e.length)}static compareSegments(t,e){const r=zi.isNumericId(t),o=zi.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?zi.extractNumericId(t).compare(zi.extractNumericId(e)):zg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vs.fromString(t.substring(4,t.length-2))}}class Qt extends zi{construct(t,e,r){return new Qt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new at(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Qt(e)}static emptyPath(){return new Qt([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _e extends zi{construct(t,e,r){return new _e(t,e,r)}static isValidIdentifier(t){return lC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oE}static keyField(){return new _e([oE])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new at(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new at(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new at(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new at(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new _e(e)}static emptyPath(){return new _e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.path=t}static fromPath(t){return new ot(Qt.fromString(t))}static fromName(t){return new ot(Qt.fromString(t).popFirst(5))}static empty(){return new ot(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Qt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(s,t,e){if(!e)throw new at(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function uC(s,t,e,r){if(t===!0&&r===!0)throw new at(X.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function lE(s){if(!ot.isDocumentKey(s))throw new at(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function uE(s){if(ot.isDocumentKey(s))throw new at(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function qf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ht(12329,{type:typeof s})}function _r(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new at(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qf(s);throw new at(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(s,t){const e={typeString:s};return t&&(e.value=t),e}function Zu(s,t){if(!vb(s))throw new at(X.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new at(X.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=-62135596800,hE=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(t){return Zt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*hE);return new Zt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new at(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new at(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<cE)throw new at(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Zu(t,Zt._jsonSchema))return new Zt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-cE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:Pe("string",Zt._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new Zt(0,0))}static max(){return new _t(new Zt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;class _f{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Ug(s){return s.fields.find((t=>t.kind===2))}function oa(s){return s.fields.filter((t=>t.kind!==2))}_f.UNKNOWN_ID=-1;class tf{constructor(t,e){this.fieldPath=t,this.kind=e}}class Lu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Lu(0,Ln.min())}}function cC(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(r===1e9?new Zt(e+1,0):new Zt(e,r));return new Ln(o,ot.empty(),t)}function Eb(s){return new Ln(s.readTime,s.key,Pu)}class Ln{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ln(_t.min(),ot.empty(),Pu)}static max(){return new Ln(_t.max(),ot.empty(),Pu)}}function vp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=ot.comparator(s.documentKey,t.documentKey),e!==0?e:At(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==Tb)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new z(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof z?e:z.resolve(e)}catch(e){return z.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):z.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):z.reject(e)}static resolve(t){return new z(((e,r)=>{e(t)}))}static reject(t){return new z(((e,r)=>{r(t)}))}static waitFor(t){return new z(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(g=>r(g)))})),c=!0,u===o&&e()}))}static or(t){let e=z.resolve(!1);for(const r of t)e=e.next((o=>o?z.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new z(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;e(t[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(t,e){return new z(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="SimpleDb";class Ff{static open(t,e,r,o){try{return new Ff(e,t.transaction(o,r))}catch(u){throw new Iu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new pr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Iu(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Ep(r.target.error);this.S.reject(new Iu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(kn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new fC(e)}}class Es{static delete(t){return tt(kn,"Removing database:",t),ua(QT().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!nb())return!1;if(Es.F())return!0;const t=qe(),e=Es.M(t),r=0<e&&e<10,o=Sb(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Es.M(qe())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(kn,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;e(c)},o.onblocked=()=>{r(new Iu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new at(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new at(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Iu(t,c))},o.onupgradeneeded=u=>{tt(kn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{tt(kn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=Ff.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),z.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(tt(kn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Sb(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class hC{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ua(this.U.delete())}}class Iu extends at{constructor(t,e){super(X.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Is(s){return s.name==="IndexedDbTransactionError"}class fC{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(kn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(kn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ua(r)}add(t){return tt(kn,"ADD",this.store.name,t,t),ua(this.store.add(t))}get(t){return ua(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(kn,"GET",this.store.name,t,e),e)))}delete(t){return tt(kn,"DELETE",this.store.name,t),ua(this.store.delete(t))}count(){return tt(kn,"COUNT",this.store.name),ua(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new z(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new z(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,e){tt(kn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new z(((r,o)=>{e.onerror=u=>{const c=Ep(u.target.error);o(c)},e.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,e){const r=[];return new z(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new hC(m),p=e(m.primaryKey,m.value,g);if(p instanceof z){const E=p.catch((T=>(g.done(),z.reject(T))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>z.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ua(s){return new z(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Ep(r.target.error);e(o)}}))}let fE=!1;function Ep(s){const t=Es.M(qe());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new at("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fE||(fE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Ru="IndexBackfiller";class dC{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(Ru,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(Ru,`Documents written: ${e}`)}catch(e){Is(e)?tt(Ru,"Ignoring IndexedDB error during index backfill: ",e):await xa(e)}await this.re(6e4)}))}}class mC{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return z.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return tt(Ru,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(tt(Ru,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const c=Eb(u);vp(c,r)>0&&(r=c)})),new Ln(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Wn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=-1;function Hf(s){return s==null}function zu(s){return s===0&&1/s==-1/0}function gC(s){return typeof s=="number"&&Number.isInteger(s)&&!zu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="";function cn(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=dE(t)),t=pC(s.get(e),t);return dE(t)}function pC(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case vf:e+="";break;default:e+=u}}return e}function dE(s){return s+vf+""}function Bi(s){const t=s.length;if(gt(t>=2,64408,{path:s}),t===2)return gt(s.charAt(0)===vf&&s.charAt(1)==="",56145,{path:s}),Qt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(vf,u);switch((c<0||c>e)&&ht(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ht(61167,{path:s})}u=c+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="remoteDocuments",Wu="owner",So="owner",Uu="mutationQueues",yC="userId",mi="mutations",mE="batchId",da="userMutationsIndex",gE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(s,t){return[s,cn(t)]}function Ab(s,t,e){return[s,cn(t),e]}const _C={},Fo="documentMutations",Ef="remoteDocumentsV14",vC=["prefixPath","collectionGroup","readTime","documentId"],nf="documentKeyIndex",EC=["prefixPath","collectionGroup","documentId"],wb="collectionGroupIndex",TC=["collectionGroup","readTime","prefixPath","documentId"],Bu="remoteDocumentGlobal",Bg="remoteDocumentGlobalKey",Ho="targets",Ib="queryTargetsIndex",bC=["canonicalId","targetId"],Go="targetDocuments",SC=["targetId","path"],Tp="documentTargetsIndex",AC=["path","targetId"],Tf="targetGlobalKey",ga="targetGlobal",ju="collectionParents",wC=["collectionId","parent"],Ko="clientMetadata",IC="clientId",Gf="bundles",RC="bundleId",Kf="namedQueries",CC="name",bp="indexConfiguration",xC="indexId",jg="collectionGroupIndex",DC="collectionGroup",Cu="indexState",NC=["indexId","uid"],Rb="sequenceNumberIndex",VC=["uid","sequenceNumber"],xu="indexEntries",OC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cb="documentKeyIndex",MC=["indexId","uid","orderedDocumentKey"],Qf="documentOverlays",kC=["userId","collectionPath","documentId"],qg="collectionPathOverlayIndex",PC=["userId","collectionPath","largestBatchId"],xb="collectionGroupOverlayIndex",LC=["userId","collectionGroup","largestBatchId"],Sp="globals",zC="name",Db=[Uu,mi,Fo,la,Ho,Wu,ga,Go,Ko,Bu,ju,Gf,Kf],UC=[...Db,Qf],Nb=[Uu,mi,Fo,Ef,Ho,Wu,ga,Go,Ko,Bu,ju,Gf,Kf,Qf],Vb=Nb,Ap=[...Vb,bp,Cu,xu],BC=Ap,Ob=[...Ap,Sp],jC=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends bb{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Fe(s,t){const e=wt(s);return Es.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function Rs(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function Mb(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,e){this.comparator=t,this.root=e||rn.EMPTY}insert(t,e){return new ye(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(t){return new ye(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fh(this.root,t,this.comparator,!0)}}class Fh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rn{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??rn.RED,this.left=o??rn.EMPTY,this.right=u??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new rn(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ht(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ht(27949);return t+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ht(57766)}get value(){throw ht(16141)}get color(){throw ht(16727)}get left(){throw ht(29726)}get right(){throw ht(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new rn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.comparator=t,this.data=new ye(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new yE(this.data.getIterator())}getIteratorFrom(t){return new yE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof te)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new te(this.comparator);return e.data=t,e}}class yE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ao(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.fields=t,t.sort(_e.comparator)}static empty(){return new wn([])}unionWith(t){let e=new te(_e.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new wn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return qo(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new kb("Invalid base64 string: "+u):u}})(t);return new Le(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Le(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Le.EMPTY_BYTE_STRING=new Le("");const qC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(s){if(gt(!!s,39018),typeof s=="string"){let t=0;const e=qC.exec(s);if(gt(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:me(s.seconds),nanos:me(s.nanos)}}function me(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Er(s){return typeof s=="string"?Le.fromBase64String(s):Le.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="server_timestamp",Lb="__type__",zb="__previous_value__",Ub="__local_write_time__";function wp(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[Lb])==null?void 0:r.stringValue)===Pb}function Yf(s){const t=s.mapValue.fields[zb];return wp(t)?Yf(t):t}function qu(s){const t=vr(s.mapValue.fields[Ub].timestampValue);return new Zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,e,r,o,u,c,m,g,p,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const bf="(default)";class ba{constructor(t,e){this.projectId=t,this.database=e||bf}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===bf}isEqual(t){return t instanceof ba&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="__type__",Bb="__max__",gs={mapValue:{fields:{__type__:{stringValue:Bb}}}},Rp="__vector__",Qo="value",rf={nullValue:"NULL_VALUE"};function bs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wp(s)?4:jb(s)?9007199254740991:Xf(s)?10:11:ht(28295,{value:s})}function Ki(s,t){if(s===t)return!0;const e=bs(s);if(e!==bs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return qu(s).isEqual(qu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=vr(o.timestampValue),m=vr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return Er(o.bytesValue).isEqual(Er(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return me(o.geoPointValue.latitude)===me(u.geoPointValue.latitude)&&me(o.geoPointValue.longitude)===me(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return me(o.integerValue)===me(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=me(o.doubleValue),m=me(u.doubleValue);return c===m?zu(c)===zu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return qo(s.arrayValue.values||[],t.arrayValue.values||[],Ki);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(pE(c)!==pE(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Ki(c[g],m[g])))return!1;return!0})(s,t);default:return ht(52216,{left:s})}}function Fu(s,t){return(s.values||[]).find((e=>Ki(e,t)))!==void 0}function Ss(s,t){if(s===t)return 0;const e=bs(s),r=bs(t);if(e!==r)return At(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return At(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=me(u.integerValue||u.doubleValue),g=me(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return _E(s.timestampValue,t.timestampValue);case 4:return _E(qu(s),qu(t));case 5:return zg(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=Er(u),g=Er(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=At(m[p],g[p]);if(E!==0)return E}return At(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=At(me(u.latitude),me(c.latitude));return m!==0?m:At(me(u.longitude),me(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return vE(s.arrayValue,t.arrayValue);case 10:return(function(u,c){var I,M,K,Q;const m=u.fields||{},g=c.fields||{},p=(I=m[Qo])==null?void 0:I.arrayValue,E=(M=g[Qo])==null?void 0:M.arrayValue,T=At(((K=p==null?void 0:p.values)==null?void 0:K.length)||0,((Q=E==null?void 0:E.values)==null?void 0:Q.length)||0);return T!==0?T:vE(p,E)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===gs.mapValue&&c===gs.mapValue)return 0;if(u===gs.mapValue)return 1;if(c===gs.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const I=zg(g[T],E[T]);if(I!==0)return I;const M=Ss(m[g[T]],p[E[T]]);if(M!==0)return M}return At(g.length,E.length)})(s.mapValue,t.mapValue);default:throw ht(23264,{he:e})}}function _E(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return At(s,t);const e=vr(s),r=vr(t),o=At(e.seconds,r.seconds);return o!==0?o:At(e.nanos,r.nanos)}function vE(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=Ss(e[o],r[o]);if(u)return u}return At(e.length,r.length)}function Yo(s){return Hg(s)}function Hg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=vr(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return Er(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return ot.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Hg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Hg(e.fields[c])}`;return o+"}"})(s.mapValue):ht(61005,{value:s})}function sf(s){switch(bs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Yf(s);return t?16+sf(t):16;case 5:return 2*s.stringValue.length;case 6:return Er(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+sf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Rs(r.fields,((u,c)=>{o+=u.length+sf(c)})),o})(s.mapValue);default:throw ht(13486,{value:s})}}function Hu(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Gg(s){return!!s&&"integerValue"in s}function Gu(s){return!!s&&"arrayValue"in s}function EE(s){return!!s&&"nullValue"in s}function TE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function af(s){return!!s&&"mapValue"in s}function Xf(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[Ip])==null?void 0:r.stringValue)===Rp}function Du(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Rs(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Du(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Du(s.arrayValue.values[e]);return t}return{...s}}function jb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Bb}const qb={mapValue:{fields:{[Ip]:{stringValue:Rp},[Qo]:{arrayValue:{}}}}};function HC(s){return"nullValue"in s?rf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Hu(ba.empty(),ot.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Xf(s)?qb:{mapValue:{}}:ht(35942,{value:s})}function GC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Hu(ba.empty(),ot.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?qb:"mapValue"in s?Xf(s)?{mapValue:{}}:gs:ht(61959,{value:s})}function bE(s,t){const e=Ss(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function SE(s,t){const e=Ss(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.value=t}static empty(){return new un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!af(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Du(e)}setAll(t){let e=_e.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=Du(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());af(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ki(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Rs(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new un(Du(this.value))}}function Fb(s){const t=[];return Rs(s.fields,((e,r)=>{const o=new _e([e]);if(af(r)){const u=Fb(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new Te(t,0,_t.min(),_t.min(),_t.min(),un.empty(),0)}static newFoundDocument(t,e,r,o){return new Te(t,1,e,_t.min(),r,o,0)}static newNoDocument(t,e){return new Te(t,2,e,_t.min(),_t.min(),un.empty(),0)}static newUnknownDocument(t,e){return new Te(t,3,e,_t.min(),_t.min(),un.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Te&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Te(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,e){this.position=t,this.inclusive=e}}function AE(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=ot.comparator(ot.fromName(c.referenceValue),e.key):r=Ss(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function wE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Ki(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,e="asc"){this.field=t,this.dir=e}}function KC(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{}class zt extends Hb{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new QC(t,e,r):e==="array-contains"?new $C(t,r):e==="in"?new $b(t,r):e==="not-in"?new JC(t,r):e==="array-contains-any"?new ZC(t,r):new zt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new YC(t,r):new XC(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Ss(e,this.value)):e!==null&&bs(this.value)===bs(e)&&this.matchesComparison(Ss(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends Hb{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Wt(t,e)}matches(t){return $o(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $o(s){return s.op==="and"}function Kg(s){return s.op==="or"}function Cp(s){return Gb(s)&&$o(s)}function Gb(s){for(const t of s.filters)if(t instanceof Wt)return!1;return!0}function Qg(s){if(s instanceof zt)return s.field.canonicalString()+s.op.toString()+Yo(s.value);if(Cp(s))return s.filters.map((t=>Qg(t))).join(",");{const t=s.filters.map((e=>Qg(e))).join(",");return`${s.op}(${t})`}}function Kb(s,t){return s instanceof zt?(function(r,o){return o instanceof zt&&r.op===o.op&&r.field.isEqual(o.field)&&Ki(r.value,o.value)})(s,t):s instanceof Wt?(function(r,o){return o instanceof Wt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&Kb(c,o.filters[m])),!0):!1})(s,t):void ht(19439)}function Qb(s,t){const e=s.filters.concat(t);return Wt.create(e,s.op)}function Yb(s){return s instanceof zt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Yo(e.value)}`})(s):s instanceof Wt?(function(e){return e.op.toString()+" {"+e.getFilters().map(Yb).join(" ,")+"}"})(s):"Filter"}class QC extends zt{constructor(t,e,r){super(t,e,r),this.key=ot.fromName(r.referenceValue)}matches(t){const e=ot.comparator(t.key,this.key);return this.matchesComparison(e)}}class YC extends zt{constructor(t,e){super(t,"in",e),this.keys=Xb("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class XC extends zt{constructor(t,e){super(t,"not-in",e),this.keys=Xb("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Xb(s,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((r=>ot.fromName(r.referenceValue)))}class $C extends zt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Gu(e)&&Fu(e.arrayValue,this.value)}}class $b extends zt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Fu(this.value.arrayValue,e)}}class JC extends zt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Fu(this.value.arrayValue,e)}}class ZC extends zt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Gu(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Fu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Yg(s,t=null,e=[],r=[],o=null,u=null,c=null){return new WC(s,t,e,r,o,u,c)}function Sa(s){const t=wt(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Qg(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Hf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Yo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Yo(r))).join(",")),t.Te=e}return t.Te}function tc(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!KC(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!Kb(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!wE(s.startAt,t.startAt)&&wE(s.endAt,t.endAt)}function Af(s){return ot.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function wf(s,t){return s.filters.filter((e=>e instanceof zt&&e.field.isEqual(t)))}function IE(s,t,e){let r=rf,o=!0;for(const u of wf(s,t)){let c=rf,m=!0;switch(u.op){case"<":case"<=":c=HC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=rf}bE({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];bE({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}function RE(s,t,e){let r=gs,o=!0;for(const u of wf(s,t)){let c=gs,m=!0;switch(u.op){case">=":case">":c=GC(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=gs}SE({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];SE({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t2(s,t,e,r,o,u,c,m){return new ec(s,t,e,r,o,u,c,m)}function xp(s){return new ec(s)}function CE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Jb(s){return s.collectionGroup!==null}function Nu(s){const t=wt(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new te(_e.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Sf(u,r))})),e.has(_e.keyField().canonicalString())||t.Ie.push(new Sf(_e.keyField(),r))}return t.Ie}function ti(s){const t=wt(s);return t.Ee||(t.Ee=e2(t,Nu(s))),t.Ee}function e2(s,t){if(s.limitType==="F")return Yg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sf(o.field,u)}));const e=s.endAt?new Xo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Xo(s.startAt.position,s.startAt.inclusive):null;return Yg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function Xg(s,t){const e=s.filters.concat([t]);return new ec(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function $g(s,t,e){return new ec(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function $f(s,t){return tc(ti(s),ti(t))&&s.limitType===t.limitType}function Zb(s){return`${Sa(ti(s))}|lt:${s.limitType}`}function Do(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>Yb(o))).join(", ")}]`),Hf(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Yo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Yo(o))).join(",")),`Target(${r})`})(ti(s))}; limitType=${s.limitType})`}function nc(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ot.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of Nu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=AE(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Nu(r),o)||r.endAt&&!(function(c,m,g){const p=AE(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Nu(r),o))})(s,t)}function n2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Wb(s){return(t,e)=>{let r=!1;for(const o of Nu(s)){const u=i2(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function i2(s,t,e){const r=s.field.isKeyField()?ot.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Ss(g,p):ht(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ht(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Rs(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return Mb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new ye(ot.comparator);function Pn(){return r2}const tS=new ye(ot.comparator);function bu(...s){let t=tS;for(const e of s)t=t.insert(e.key,e);return t}function eS(s){let t=tS;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function ji(){return Vu()}function nS(){return Vu()}function Vu(){return new Ar((s=>s.toString()),((s,t)=>s.isEqual(t)))}const s2=new ye(ot.comparator),a2=new te(ot.comparator);function Nt(...s){let t=a2;for(const e of s)t=t.add(e);return t}const o2=new te(At);function l2(){return o2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zu(t)?"-0":t}}function iS(s){return{integerValue:""+s}}function u2(s,t){return gC(t)?iS(t):Dp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function c2(s,t,e){return s instanceof Ku?(function(o,u){const c={fields:{[Lb]:{stringValue:Pb},[Ub]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&wp(u)&&(u=Yf(u)),u&&(c.fields[zb]=u),{mapValue:c}})(e,t):s instanceof Jo?sS(s,t):s instanceof Zo?aS(s,t):(function(o,u){const c=rS(o,u),m=xE(c)+xE(o.Ae);return Gg(c)&&Gg(o.Ae)?iS(m):Dp(o.serializer,m)})(s,t)}function h2(s,t,e){return s instanceof Jo?sS(s,t):s instanceof Zo?aS(s,t):e}function rS(s,t){return s instanceof Qu?(function(r){return Gg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Ku extends Jf{}class Jo extends Jf{constructor(t){super(),this.elements=t}}function sS(s,t){const e=oS(t);for(const r of s.elements)e.some((o=>Ki(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Zo extends Jf{constructor(t){super(),this.elements=t}}function aS(s,t){let e=oS(t);for(const r of s.elements)e=e.filter((o=>!Ki(o,r)));return{arrayValue:{values:e}}}class Qu extends Jf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function xE(s){return me(s.integerValue||s.doubleValue)}function oS(s){return Gu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t,e){this.field=t,this.transform=e}}function d2(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Jo&&o instanceof Jo||r instanceof Zo&&o instanceof Zo?qo(r.elements,o.elements,Ki):r instanceof Qu&&o instanceof Qu?Ki(r.Ae,o.Ae):r instanceof Ku&&o instanceof Ku})(s.transform,t.transform)}class m2{constructor(t,e){this.version=t,this.transformResults=e}}class Xe{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Xe}static exists(t){return new Xe(void 0,t)}static updateTime(t){return new Xe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function of(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Zf{}function lS(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new ic(s.key,Xe.none()):new sl(s.key,s.data,Xe.none());{const e=s.data,r=un.empty();let o=new te(_e.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new wr(s.key,r,new wn(o.toArray()),Xe.none())}}function g2(s,t,e){s instanceof sl?(function(o,u,c){const m=o.value.clone(),g=NE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):s instanceof wr?(function(o,u,c){if(!of(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=NE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(uS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Ou(s,t,e,r){return s instanceof sl?(function(u,c,m,g){if(!of(u.precondition,c))return m;const p=u.value.clone(),E=VE(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,t,e,r):s instanceof wr?(function(u,c,m,g){if(!of(u.precondition,c))return m;const p=VE(u.fieldTransforms,g,c),E=c.data;return E.setAll(uS(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,t,e,r):(function(u,c,m){return of(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,e)}function p2(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=rS(r.transform,o||null);u!=null&&(e===null&&(e=un.empty()),e.set(r.field,u))}return e||null}function DE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&qo(r,o,((u,c)=>d2(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class sl extends Zf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wr extends Zf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function uS(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function NE(s,t,e){const r=new Map;gt(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,h2(c,m,e[o]))}return r}function VE(s,t,e){const r=new Map;for(const o of s){const u=o.transform,c=e.data.field(o.field);r.set(o.field,c2(u,c,t))}return r}class ic extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cS extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&g2(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Ou(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Ou(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=nS();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const g=lS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(_t.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Nt())}isEqual(t){return this.batchId===t.batchId&&qo(this.mutations,t.mutations,((e,r)=>DE(e,r)))&&qo(this.baseMutations,t.baseMutations,((e,r)=>DE(e,r)))}}class Vp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){gt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return s2})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Vp(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,jt;function _2(s){switch(s){case X.OK:return ht(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ht(15467,{code:s})}}function hS(s){if(s===void 0)return mn("GRPC error has no .code"),X.UNKNOWN;switch(s){case ke.OK:return X.OK;case ke.CANCELLED:return X.CANCELLED;case ke.UNKNOWN:return X.UNKNOWN;case ke.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ke.INTERNAL:return X.INTERNAL;case ke.UNAVAILABLE:return X.UNAVAILABLE;case ke.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ke.NOT_FOUND:return X.NOT_FOUND;case ke.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ke.ABORTED:return X.ABORTED;case ke.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ke.DATA_LOSS:return X.DATA_LOSS;default:return ht(39323,{code:s})}}(jt=ke||(ke={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new vs([4294967295,4294967295],0);function OE(s){const t=v2().encode(s),e=new ub;return e.update(t),new Uint8Array(e.digest())}function ME(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new vs([e,r],0),new vs([o,u],0)]}class Mp{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Su(`Invalid padding: ${e}`);if(r<0)throw new Su(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Su(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=vs.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(vs.fromNumber(r)));return o.compare(E2)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=OE(t),[r,o]=ME(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Mp(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=OE(t),[r,o]=ME(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,rc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Wf(_t.min(),o,new ye(At),Pn(),Nt())}}class rc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new rc(r,e,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class fS{constructor(t,e){this.targetId=t,this.Ce=e}}class dS{constructor(t,e,r=Le.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class kE{constructor(){this.ve=0,this.Fe=PE(),this.Me=Le.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Nt(),e=Nt(),r=Nt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ht(38017,{changeType:u})}})),new rc(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=PE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Pn(),this.Je=Hh(),this.He=Hh(),this.Ye=new ye(At)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:ht(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(Af(u))if(r===0){const c=new ot(u.path);this.et(e,c,Te.newNoDocument(c,_t.min()))}else gt(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=Er(r).toUint8Array()}catch(g){if(g instanceof kb)return Ta("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Mp(c,o,u)}catch(g){return Ta(g instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Af(m.target)){const g=new ot(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Te.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Nt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new Wf(t,e,this.Ye,this.je,r);return this.je=Pn(),this.Je=Hh(),this.He=Hh(),this.Ye=new ye(At),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new kE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new te(At),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new te(At),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new kE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Hh(){return new ye(ot.comparator)}function PE(){return new ye(ot.comparator)}const b2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A2={and:"AND",or:"OR"};class w2{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Jg(s,t){return s.useProto3Json||Hf(t)?t:{value:t}}function Wo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function mS(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function I2(s,t){return Wo(s,t.toTimestamp())}function gn(s){return gt(!!s,49232),_t.fromTimestamp((function(e){const r=vr(e);return new Zt(r.seconds,r.nanos)})(s))}function kp(s,t){return Zg(s,t).canonicalString()}function Zg(s,t){const e=(function(o){return new Qt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function gS(s){const t=Qt.fromString(s);return gt(AS(t),10190,{key:t.toString()}),t}function If(s,t){return kp(s.databaseId,t.path)}function pa(s,t){const e=gS(t);if(e.get(1)!==s.databaseId.projectId)throw new at(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new at(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new ot(_S(e))}function pS(s,t){return kp(s.databaseId,t)}function yS(s){const t=gS(s);return t.length===4?Qt.emptyPath():_S(t)}function Wg(s){return new Qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function _S(s){return gt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function LE(s,t,e){return{name:If(s,t),fields:e.value.mapValue.fields}}function R2(s,t,e){const r=pa(s,t.name),o=gn(t.updateTime),u=t.createTime?gn(t.createTime):_t.min(),c=new un({mapValue:{fields:t.fields}}),m=Te.newFoundDocument(r,o,u,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function C2(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ht(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(gt(E===void 0||typeof E=="string",58123),Le.fromBase64String(E||"")):(gt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Le.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?X.UNKNOWN:hS(p.code);return new at(E,p.message||"")})(c);e=new dS(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=pa(s,r.document.name),u=gn(r.document.updateTime),c=r.document.createTime?gn(r.document.createTime):_t.min(),m=new un({mapValue:{fields:r.document.fields}}),g=Te.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];e=new lf(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=pa(s,r.document),u=r.readTime?gn(r.readTime):_t.min(),c=Te.newNoDocument(o,u),m=r.removedTargetIds||[];e=new lf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=pa(s,r.document),u=r.removedTargetIds||[];e=new lf([],u,o,null)}else{if(!("filter"in t))return ht(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new y2(o,u),m=r.targetId;e=new fS(m,c)}}return e}function Rf(s,t){let e;if(t instanceof sl)e={update:LE(s,t.key,t.value)};else if(t instanceof ic)e={delete:If(s,t.key)};else if(t instanceof wr)e={update:LE(s,t.key,t.data),updateMask:M2(t.fieldMask)};else{if(!(t instanceof cS))return ht(16599,{Vt:t.type});e={verify:If(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Ku)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Zo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Qu)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ht(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:I2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ht(27497)})(s,t.precondition)),e}function tp(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?Xe.updateTime(gn(u.updateTime)):u.exists!==void 0?Xe.exists(u.exists):Xe.none()})(t.currentDocument):Xe.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)gt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Ku;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Jo(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new Zo(E)}else"increment"in m?g=new Qu(c,m.increment):ht(16584,{proto:m});const p=_e.fromServerFormat(m.fieldPath);return new f2(p,g)})(s,o))):[];if(t.update){t.update.name;const o=pa(s,t.update.name),u=new un({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new wn(p.map((E=>_e.fromServerFormat(E))))})(t.updateMask);return new wr(o,u,c,e,r)}return new sl(o,u,e,r)}if(t.delete){const o=pa(s,t.delete);return new ic(o,e)}if(t.verify){const o=pa(s,t.verify);return new cS(o,e)}return ht(1463,{proto:t})}function x2(s,t){return s&&s.length>0?(gt(t!==void 0,14353),s.map((e=>(function(o,u){let c=o.updateTime?gn(o.updateTime):gn(u);return c.isEqual(_t.min())&&(c=gn(u)),new m2(c,o.transformResults||[])})(e,t)))):[]}function vS(s,t){return{documents:[pS(s,t.path)]}}function ES(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=pS(s,o);const u=(function(p){if(p.length!==0)return SS(Wt.create(p,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(I){return{field:No(I.field),direction:N2(I.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=Jg(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:e,parent:o}}function TS(s){let t=yS(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){gt(r===1,65062);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(T){const I=bS(T);return I instanceof Wt&&Cp(I)?I.getFilters():[I]})(e.where));let c=[];e.orderBy&&(c=(function(T){return T.map((I=>(function(K){return new Sf(Vo(K.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(I)))})(e.orderBy));let m=null;e.limit&&(m=(function(T){let I;return I=typeof T=="object"?T.value:T,Hf(I)?null:I})(e.limit));let g=null;e.startAt&&(g=(function(T){const I=!!T.before,M=T.values||[];return new Xo(M,I)})(e.startAt));let p=null;return e.endAt&&(p=(function(T){const I=!T.before,M=T.values||[];return new Xo(M,I)})(e.endAt)),t2(t,o,c,u,m,"F",g,p)}function D2(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function bS(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Vo(e.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Vo(e.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Vo(e.unaryFilter.field);return zt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vo(e.unaryFilter.field);return zt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ht(61313);default:return ht(60726)}})(s):s.fieldFilter!==void 0?(function(e){return zt.create(Vo(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ht(58110);default:return ht(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return Wt.create(e.compositeFilter.filters.map((r=>bS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ht(1026)}})(e.compositeFilter.op))})(s):ht(30097,{filter:s})}function N2(s){return b2[s]}function V2(s){return S2[s]}function O2(s){return A2[s]}function No(s){return{fieldPath:s.canonicalString()}}function Vo(s){return _e.fromServerFormat(s.fieldPath)}function SS(s){return s instanceof zt?(function(e){if(e.op==="=="){if(TE(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NAN"}};if(EE(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(TE(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NAN"}};if(EE(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(e.field),op:V2(e.op),value:e.value}}})(s):s instanceof Wt?(function(e){const r=e.getFilters().map((o=>SS(o)));return r.length===1?r[0]:{compositeFilter:{op:O2(e.op),filters:r}}})(s):ht(54877,{filter:s})}function M2(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function AS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,e,r,o,u=_t.min(),c=_t.min(),m=Le.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(t){this.yt=t}}function k2(s,t){let e;if(t.document)e=R2(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=ot.fromSegments(t.noDocument.path),o=wa(t.noDocument.readTime);e=Te.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ht(56709);{const r=ot.fromSegments(t.unknownDocument.path),o=wa(t.unknownDocument.version);e=Te.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new Zt(o[0],o[1]);return _t.fromTimestamp(u)})(t.readTime)),e}function zE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Cf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:If(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(u,c.version.toTimestamp()),createTime:Wo(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Aa(t.version)};else{if(!t.isUnknownDocument())return ht(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Aa(t.version)}}return r}function Cf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function Aa(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wa(s){const t=new Zt(s.seconds,s.nanoseconds);return _t.fromTimestamp(t)}function ca(s,t){const e=(t.baseMutations||[]).map((u=>tp(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>tp(s.yt,u))),o=Zt.fromMillis(t.localWriteTimeMs);return new Np(t.batchId,o,e,r)}function Au(s){const t=wa(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?wa(s.lastLimboFreeSnapshotVersion):_t.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return gt(c===1,1966,{count:c}),ti(xp(yS(u.documents[0])))})(s.query):(function(u){return ti(TS(u))})(s.query),new dr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Le.fromBase64String(s.resumeToken))}function IS(s,t){const e=Aa(t.snapshotVersion),r=Aa(t.lastLimboFreeSnapshotVersion);let o;o=Af(t.target)?vS(s.yt,t.target):ES(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sa(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function RS(s){const t=TS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?$g(t,t.limit,"L"):t}function bg(s,t){return new Op(t.largestBatchId,tp(s.yt,t.overlayMutation))}function UE(s,t){const e=t.path.lastSegment();return[s,cn(t.path.popLast()),e]}function BE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:Aa(r.readTime),documentKey:cn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{getBundleMetadata(t,e){return jE(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:wa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return jE(t).put((function(o){return{bundleId:o.id,createTime:Aa(gn(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return qE(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:RS(u.bundledQuery),readTime:wa(u.readTime)}})(r)}))}saveNamedQuery(t,e){return qE(t).put((function(o){return{name:o.name,readTime:Aa(gn(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function jE(s){return Fe(s,Gf)}function qE(s){return Fe(s,Kf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new td(t,r)}getOverlay(t,e){return gu(t).get(UE(this.userId,e)).next((r=>r?bg(this.serializer,r):null))}getOverlays(t,e){const r=ji();return z.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,c)=>{const m=new Op(e,c);o.push(this.St(t,m))})),z.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((c=>o.add(cn(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(gu(t).Z(qg,m))})),z.waitFor(u)}getOverlaysForCollection(t,e,r){const o=ji(),u=cn(e),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gu(t).J(qg,c).next((m=>{for(const g of m){const p=bg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=ji();let c;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gu(t).ee({index:xb,range:m},((g,p,E)=>{const T=bg(this.serializer,p);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>u))}St(t,e){return gu(t).put((function(o,u,c){const[m,g,p]=UE(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Rf(o.yt,c.mutation)}})(this.serializer,this.userId,e))}}function gu(s){return Fe(s,Qf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{bt(t){return Fe(t,Sp)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e==null?void 0:e.value;return r?Le.fromUint8Array(r):Le.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(me(t.integerValue));else if("doubleValue"in t){const r=me(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),zu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=vr(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Er(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?jb(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Xf(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):ht(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){var c,m;const r=t.fields||{};this.Ft(e,53);const o=Qo,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(me(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),ot.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}ha.Kt=new ha;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=255;function z2(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function FE(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=z2(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class U2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=FE(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=FE(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(wo),this.sn(255)}_n(){this.an(wo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===wo?(this.sn(wo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===wo?(this.an(wo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class B2{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class j2{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class pu{constructor(){this.cn=new U2,this.ln=new B2(this.cn),this.hn=new j2(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new fa(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:uf(this.En),directionalValue:uf(this.dn),orderedDocumentKey:uf(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ss(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=HE(s.En,t.En),e!==0?e:(e=HE(s.dn,t.dn),e!==0?e:ot.comparator(s.In,t.In)))}function HE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function uf(s){return eb()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function GE(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class KE{constructor(t){this.mn=new te(((e,r)=>_e.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(gt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Ug(t);if(e!==void 0&&!this.wn(e))return!1;const r=oa(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new te(_e.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new tf(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new tf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new tf(r.field,r.dir==="asc"?0:1)));return new _f(_f.UNKNOWN_ID,this.collectionId,e,Lu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(s){var e,r;if(gt(s instanceof zt||s instanceof Wt,20012),s instanceof zt){if(s instanceof $b){const o=((r=(e=s.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map((u=>zt.create(s.field,"==",u))))||[];return Wt.create(o,"or")}return s}const t=s.filters.map((o=>CS(o)));return Wt.create(t,s.op)}function q2(s){if(s.getFilters().length===0)return[];const t=ip(CS(s));return gt(xS(t),7391),ep(t)||np(t)?[t]:t.getFilters()}function ep(s){return s instanceof zt}function np(s){return s instanceof Wt&&Cp(s)}function xS(s){return ep(s)||np(s)||(function(e){if(e instanceof Wt&&Kg(e)){for(const r of e.getFilters())if(!ep(r)&&!np(r))return!1;return!0}return!1})(s)}function ip(s){if(gt(s instanceof zt||s instanceof Wt,34018),s instanceof zt)return s;if(s.filters.length===1)return ip(s.filters[0]);const t=s.filters.map((r=>ip(r)));let e=Wt.create(t,s.op);return e=xf(e),xS(e)?e:(gt(e instanceof Wt,64498),gt($o(e),40251),gt(e.filters.length>1,57927),e.filters.reduce(((r,o)=>Pp(r,o))))}function Pp(s,t){let e;return gt(s instanceof zt||s instanceof Wt,38388),gt(t instanceof zt||t instanceof Wt,25473),e=s instanceof zt?t instanceof zt?(function(o,u){return Wt.create([o,u],"and")})(s,t):QE(s,t):t instanceof zt?QE(t,s):(function(o,u){if(gt(o.filters.length>0&&u.filters.length>0,48005),$o(o)&&$o(u))return Qb(o,u.getFilters());const c=Kg(o)?o:u,m=Kg(o)?u:o,g=c.filters.map((p=>Pp(p,m)));return Wt.create(g,"or")})(s,t),xf(e)}function QE(s,t){if($o(t))return Qb(t,s.getFilters());{const e=t.filters.map((r=>Pp(s,r)));return Wt.create(e,"or")}}function xf(s){if(gt(s instanceof zt||s instanceof Wt,11850),s instanceof zt)return s;const t=s.getFilters();if(t.length===1)return xf(t[0]);if(Gb(s))return s;const e=t.map((o=>xf(o))),r=[];return e.forEach((o=>{o instanceof zt?r.push(o):o instanceof Wt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Wt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.Cn=new Lp}addToCollectionParentIndex(t,e){return this.Cn.add(e),z.resolve()}getCollectionParents(t,e){return z.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return z.resolve()}deleteFieldIndex(t,e){return z.resolve()}deleteAllFieldIndexes(t){return z.resolve()}createTargetIndexes(t,e){return z.resolve()}getDocumentsMatchingTarget(t,e){return z.resolve(null)}getIndexType(t,e){return z.resolve(0)}getFieldIndexes(t,e){return z.resolve([])}getNextCollectionGroupToUpdate(t){return z.resolve(null)}getMinOffset(t,e){return z.resolve(Ln.min())}getMinOffsetFromCollectionGroup(t,e){return z.resolve(Ln.min())}updateCollectionGroup(t,e,r){return z.resolve()}updateIndexEntries(t,e){return z.resolve()}}class Lp{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new te(Qt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new te(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="IndexedDbIndexManager",Gh=new Uint8Array(0);class H2{constructor(t,e){this.databaseId=e,this.vn=new Lp,this.Fn=new Ar((r=>Sa(r)),((r,o)=>tc(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:cn(o)};return XE(t).put(u)}return z.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[yb(e),""],!1,!0);return XE(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==e)break;r.push(Bi(c.parent))}return r}))}addFieldIndex(t,e){const r=yu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const c=Ro(t);return u.next((m=>{c.put(BE(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=yu(t),o=Ro(t),u=Io(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=yu(t),r=Io(t),o=Ro(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return z.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new KE(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=Io(t);let o=!0;const u=new Map;return z.forEach(this.Mn(e),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Nt();const m=[];return z.forEach(u,((g,p)=>{tt(YE,`Using index ${(function(et){return`id=${et.indexId}|cg=${et.collectionGroup}|f=${et.fields.map((mt=>`${mt.fieldPath}:${mt.kind}`)).join(",")}`})(g)} to execute ${Sa(e)}`);const E=(function(et,mt){const vt=Ug(mt);if(vt===void 0)return null;for(const ft of wf(et,vt.fieldPath))switch(ft.op){case"array-contains-any":return ft.value.arrayValue.values||[];case"array-contains":return[ft.value]}return null})(p,g),T=(function(et,mt){const vt=new Map;for(const ft of oa(mt))for(const C of wf(et,ft.fieldPath))switch(C.op){case"==":case"in":vt.set(ft.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return vt.set(ft.fieldPath.canonicalString(),C.value),Array.from(vt.values())}return null})(p,g),I=(function(et,mt){const vt=[];let ft=!0;for(const C of oa(mt)){const R=C.kind===0?IE(et,C.fieldPath,et.startAt):RE(et,C.fieldPath,et.startAt);vt.push(R.value),ft&&(ft=R.inclusive)}return new Xo(vt,ft)})(p,g),M=(function(et,mt){const vt=[];let ft=!0;for(const C of oa(mt)){const R=C.kind===0?RE(et,C.fieldPath,et.endAt):IE(et,C.fieldPath,et.endAt);vt.push(R.value),ft&&(ft=R.inclusive)}return new Xo(vt,ft)})(p,g),K=this.On(g,p,I),Q=this.On(g,p,M),J=this.Nn(g,p,T),it=this.Bn(g.indexId,E,K,I.inclusive,Q,M.inclusive,J);return z.forEach(it,(rt=>r.Y(rt,e.limit).next((et=>{et.forEach((mt=>{const vt=ot.fromSegments(mt.documentKey);c.has(vt)||(c=c.add(vt),m.push(vt))}))}))))})).next((()=>m))}return z.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=q2(Wt.create(t.filters,"and")).map((r=>Yg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,c,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),p=g/(e!=null?e.length:1),E=[];for(let T=0;T<g;++T){const I=e?this.Ln(e[T/p]):Gh,M=this.kn(t,I,r[T%p],o),K=this.qn(t,I,u[T%p],c),Q=m.map((J=>this.kn(t,I,J,!0)));E.push(...this.createRange(M,K,Q))}return E}kn(t,e,r,o){const u=new fa(t,ot.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new fa(t,ot.empty(),e,r);return o?u.An():u}xn(t,e){const r=new KE(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return z.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new te(_e.comparator),E=!1;for(const T of g.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?E=!0:p=p.add(I.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new pu;for(const o of oa(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);ha.Kt.Dt(u,c)}return r.un()}Ln(t){const e=new pu;return ha.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new pu;return ha.Kt.Dt(Hu(this.databaseId,e),r.Pn((function(u){const c=oa(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new pu);let u=0;for(const c of oa(t)){const m=r[u++];for(const g of o)if(this.Un(e,c.fieldPath)&&Gu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);ha.Kt.Dt(m,p)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new pu;g.seed(m.un()),ha.Kt.Dt(c,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof zt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=yu(t),o=Ro(t);return(e?r.J(jg,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const c=[];return z.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,T){const I=T?new Lu(T.sequenceNumber,new Ln(wa(T.readTime),new ot(Bi(T.documentKey)),T.largestBatchId)):Lu.empty(),M=E.fields.map((([K,Q])=>new tf(_e.fromServerFormat(K),Q)));return new _f(E.indexId,E.collectionGroup,M,I)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:At(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=yu(t),u=Ro(t);return this.Gn(t).next((c=>o.J(jg,IDBKeyRange.bound(e,e)).next((m=>z.forEach(m,(g=>u.put(BE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,e){const r=new Map;return z.forEach(e,((o,u)=>{const c=r.get(o.collectionGroup);return(c?z.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),z.forEach(m,(g=>this.zn(t,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?z.resolve():this.Jn(t,u,g,p,E)})))))))}))}Hn(t,e,r,o){return Io(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return Io(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=Io(t);let u=new te(ss);return o.ee({index:Cb,range:IDBKeyRange.only([r.indexId,this.uid,uf(this.$n(r,e))])},((c,m)=>{u=u.add(new fa(r.indexId,e,GE(m.arrayValue),GE(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new te(ss);const o=this.Qn(e,t);if(o==null)return r;const u=Ug(e);if(u!=null){const c=t.data.field(u.fieldPath);if(Gu(c))for(const m of c.arrayValue.values||[])r=r.add(new fa(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new fa(e.indexId,t.key,Gh,o));return r}Jn(t,e,r,o,u){tt(YE,"Updating index entries for document '%s'",e.key);const c=[];return(function(g,p,E,T,I){const M=g.getIterator(),K=p.getIterator();let Q=Ao(M),J=Ao(K);for(;Q||J;){let it=!1,rt=!1;if(Q&&J){const et=E(Q,J);et<0?rt=!0:et>0&&(it=!0)}else Q!=null?rt=!0:it=!0;it?(T(J),J=Ao(K)):rt?(I(Q),Q=Ao(M)):(Q=Ao(M),J=Ao(K))}})(o,u,ss,(m=>{c.push(this.Hn(t,e,r,m))}),(m=>{c.push(this.Yn(t,e,r,m))})),z.waitFor(c)}Gn(t){let e=1;return Ro(t).ee({index:Rb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((c,m)=>ss(c,m))).filter(((c,m,g)=>!m||ss(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=ss(c,t),g=ss(c,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(e);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Gh,ot.empty()),g=o[c+1].Vn(this.uid,Gh,ot.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return ss(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next($E)}getMinOffset(t,e){return z.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||ht(44426))))).next($E)}}function XE(s){return Fe(s,ju)}function Io(s){return Fe(s,xu)}function yu(s){return Fe(s,bp)}function Ro(s){return Fe(s,Cu)}function $E(s){gt(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;vp(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Ln(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DS=41943040;class ln{static withCacheSize(t){return new ln(t,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(s,t,e){const r=s.store(mi),o=s.store(Fo),u=[],c=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:c},((E,T,I)=>(m++,I.delete())));u.push(g.next((()=>{gt(m===1,47070,{batchId:e.batchId})})));const p=[];for(const E of e.mutations){const T=Ab(t,E.key.path,e.batchId);u.push(o.delete(T)),p.push(E.key)}return z.waitFor(u).next((()=>p))}function Df(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ht(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(DS,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class ed{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){gt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new ed(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return as(t).ee({index:da,range:r},((o,u,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Oo(t),c=as(t);return c.add({}).next((m=>{gt(typeof m=="number",49019);const g=new Np(m,e,r,o),p=(function(M,K,Q){const J=Q.baseMutations.map((rt=>Rf(M.yt,rt))),it=Q.mutations.map((rt=>Rf(M.yt,rt)));return{userId:K,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:J,mutations:it}})(this.serializer,this.userId,g),E=[];let T=new te(((I,M)=>At(I.canonicalString(),M.canonicalString())));for(const I of o){const M=Ab(this.userId,I.key.path,m);T=T.add(I.key.path.popLast()),E.push(c.put(p)),E.push(u.put(M,_C))}return T.forEach((I=>{E.push(this.indexManager.addToCollectionParentIndex(t,I))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),z.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,e){return as(t).get(e).next((r=>r?(gt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),ca(this.serializer,r)):null))}er(t,e){return this.Xn[e]?z.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return as(t).ee({index:da,range:o},((c,m,g)=>{m.userId===this.userId&&(gt(m.batchId>=r,47524,{tr:r}),u=ca(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ma;return as(t).ee({index:da,range:e,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,ma],[this.userId,Number.POSITIVE_INFINITY]);return as(t).J(da,e).next((r=>r.map((o=>ca(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=ef(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Oo(t).ee({range:o},((c,m,g)=>{const[p,E,T]=c,I=Bi(E);if(p===this.userId&&e.path.isEqual(I))return as(t).get(T).next((M=>{if(!M)throw ht(61480,{nr:c,batchId:T});gt(M.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:M.userId,batchId:T}),u.push(ca(this.serializer,M))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new te(At);const o=[];return e.forEach((u=>{const c=ef(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Oo(t).ee({range:m},((p,E,T)=>{const[I,M,K]=p,Q=Bi(M);I===this.userId&&u.path.isEqual(Q)?r=r.add(K):T.done()}));o.push(g)})),z.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=ef(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new te(At);return Oo(t).ee({range:c},((g,p,E)=>{const[T,I,M]=g,K=Bi(I);T===this.userId&&r.isPrefixOf(K)?K.length===o&&(m=m.add(M)):E.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push(as(t).get(u).next((c=>{if(c===null)throw ht(35274,{batchId:u});gt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(ca(this.serializer,c))})))})),z.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return NS(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),z.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return z.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Oo(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Bi(u[1]);o.push(g)}else m.done()})).next((()=>{gt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return VS(t,this.userId,e)}_r(t){return OS(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:ma,lastStreamToken:""}))}}function VS(s,t,e){const r=ef(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Oo(s).ee({range:u,X:!0},((m,g,p)=>{const[E,T,I]=m;E===t&&T===o&&(c=!0),p.done()})).next((()=>c))}function as(s){return Fe(s,mi)}function Oo(s){return Fe(s,Fo)}function OS(s){return Fe(s,Uu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ia(0)}static cr(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new Ia(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>_t.fromTimestamp(new Zt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Co(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(gt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return Co(t).ee(((c,m)=>{const g=Au(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>z.waitFor(u))).next((()=>o))}forEachTarget(t,e){return Co(t).ee(((r,o)=>{const u=Au(o);e(u)}))}lr(t){return ZE(t).get(Tf).next((e=>(gt(e!==null,2888),e)))}hr(t,e){return ZE(t).put(Tf,e)}Pr(t,e){return Co(t).put(IS(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=Sa(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Co(t).ee({range:o,index:Ib},((c,m,g)=>{const p=Au(m);tc(e,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=cs(t);return e.forEach((c=>{const m=cn(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),z.waitFor(o)}removeMatchingKeys(t,e,r){const o=cs(t);return z.forEach(e,(u=>{const c=cn(u.path);return z.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=cs(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=cs(t);let u=Nt();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Bi(c[1]),E=new ot(p);u=u.add(E)})).next((()=>u))}containsKey(t,e){const r=cn(e.path),o=IDBKeyRange.bound([r],[yb(r)],!1,!0);let u=0;return cs(t).ee({index:Tp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(t,e){return Co(t).get(e).next((r=>r?Au(r):null))}}function Co(s){return Fe(s,Ho)}function ZE(s){return Fe(s,ga)}function cs(s){return Fe(s,Go)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="LruGarbageCollector",K2=1048576;function tT([s,t],[e,r]){const o=At(s,e);return o===0?At(t,r):o}class Q2{constructor(t){this.Ir=t,this.buffer=new te(tT),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();tT(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class MS{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(WE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Is(e)?tt(WE,"Ignoring IndexedDB error during garbage collection: ",e):await xa(e)}await this.Vr(3e5)}))}}class Y2{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return z.resolve(Wn.ce);const r=new Q2(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(JE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(r=T,m=Date.now(),this.removeTargets(t,r,e)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(p=Date.now(),xo()<=Lt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function kS(s,t){return new Y2(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t,e){this.db=t,this.garbageCollector=kS(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return Kh(t,r)}removeReference(t,e,r){return Kh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Kh(t,e)}br(t,e){return(function(o,u){let c=!1;return OS(o).te((m=>VS(o,m,u).next((g=>(g&&(c=!0),z.resolve(!g)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=e){const g=this.br(t,c).next((p=>{if(!p)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,_t.min()),cs(t).delete((function(T){return[0,cn(T.path)]})(c)))))}));o.push(g)}})).next((()=>z.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Kh(t,e)}Sr(t,e){const r=cs(t);let o,u=Wn.ce;return r.ee({index:Tp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==Wn.ce&&e(new ot(Bi(o)),u),u=p,o=g):u=Wn.ce})).next((()=>{u!==Wn.ce&&e(new ot(Bi(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Kh(s,t){return cs(s).put((function(r,o){return{targetId:0,path:cn(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.changes=new Ar((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Te.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?z.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return sa(t).put(r)}removeEntry(t,e,r){return sa(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Cf(c),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=Te.newInvalidDocument(e);return sa(t).ee({index:nf,range:IDBKeyRange.only(_u(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:Te.newInvalidDocument(e)};return sa(t).ee({index:nf,range:IDBKeyRange.only(_u(e))},((o,u)=>{r={document:this.Cr(e,u),size:Df(u)}})).next((()=>r))}getEntries(t,e){let r=Pn();return this.Fr(t,e,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,e){let r=Pn(),o=new ye(ot.comparator);return this.Fr(t,e,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Df(c))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return z.resolve();let o=new te(iT);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(_u(o.first()),_u(o.last())),c=o.getIterator();let m=c.getNext();return sa(t).ee({index:nf,range:u},((g,p,E)=>{const T=ot.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&iT(m,T)<0;)r(m,null),m=c.getNext();m&&m.isEqual(T)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(_u(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),Cf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sa(t).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let E=Pn();for(const T of p){const I=this.Cr(ot.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(nc(e,I)||o.has(I.key))&&(E=E.insert(I.key,I))}return E}))}getAllFromCollectionGroup(t,e,r,o){let u=Pn();const c=nT(e,r),m=nT(e,Ln.max());return sa(t).ee({index:wb,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const T=this.Cr(ot.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new J2(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return eT(t).get(Bg).next((e=>(gt(!!e,20021),e)))}Dr(t,e){return eT(t).put(Bg,e)}Cr(t,e){if(e){const r=k2(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(_t.min())))return r}return Te.newInvalidDocument(t)}}function LS(s){return new $2(s)}class J2 extends PS{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Ar((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new te(((u,c)=>At(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=zE(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Df(g);r+=p-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=zE(this.Nr.serializer,c.convertToNoDocument(_t.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),z.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function eT(s){return Fe(s,Bu)}function sa(s){return Fe(s,Ef)}function _u(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function nT(s,t){const e=t.documentKey.path.toArray();return[s,Cf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function iT(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=At(e[u],r[u]),o)return o;return o=At(e.length,r.length),o||(o=At(e[e.length-2],r[r.length-2]),o||At(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&Ou(r.mutation,o,wn.empty(),Zt.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Nt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Nt()){const o=ji();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=bu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=ji();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Nt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Pn();const c=Vu(),m=(function(){return Vu()})();return e.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof wr)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),Ou(E.mutation,p,E.mutation.getFieldMask(),Zt.now())):c.set(p.key,wn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),e.forEach(((p,E)=>m.set(p,new Z2(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Vu();let o=new ye(((c,m)=>c-m)),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=e.get(g);if(p===null)return;let E=r.get(g)||wn.empty();E=m.applyToLocalView(p,E),r.set(g,E);const T=(o.get(m.batchId)||Nt()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=nS();E.forEach((I=>{if(!u.has(I)){const M=lS(e.get(I),r.get(I));M!==null&&T.set(I,M),u=u.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return ot.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Jb(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):z.resolve(ji());let m=Pu,g=u;return c.next((p=>z.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?z.resolve():this.remoteDocumentCache.getEntry(t,E).next((I=>{g=g.insert(E,I)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Nt()))).next((E=>({batchId:m,changes:eS(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ot(e)).next((r=>{let o=bu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=bu();return this.indexManager.getCollectionParents(t,u).next((m=>z.forEach(m,(g=>{const p=(function(T,I){return new ec(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next((E=>{E.forEach(((T,I)=>{c=c.insert(T,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,Te.newInvalidDocument(E)))}));let m=bu();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Ou(E.mutation,p,wn.empty(),Zt.now()),nc(e,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return z.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:gn(o.createTime)}})(e)),z.resolve()}getNamedQuery(t,e){return z.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:RS(o.bundledQuery),readTime:gn(o.readTime)}})(e)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.overlays=new ye(ot.comparator),this.qr=new Map}getOverlay(t,e){return z.resolve(this.overlays.get(e))}getOverlays(t,e){const r=ji();return z.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),z.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(t,e,r){const o=ji(),u=e.length+1,c=new ot(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return z.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new ye(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=ji(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=ji(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return z.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Op(e,r));let u=this.qr.get(e);u===void 0&&(u=Nt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.sessionToken=Le.EMPTY_BYTE_STRING}getSessionToken(t){return z.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.Qr=new te(Ye.$r),this.Ur=new te(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Ye(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new Ye(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new ot(new Qt([])),r=new Ye(e,t),o=new Ye(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ot(new Qt([])),r=new Ye(e,t),o=new Ye(e,t+1);let u=Nt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Ye(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ye{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ot.comparator(t.key,e.key)||At(t.Yr,e.Yr)}static Kr(t,e){return At(t.Yr,e.Yr)||ot.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new te(Ye.$r)}checkEmpty(t){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Np(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Ye(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return z.resolve(c)}lookupMutationBatch(t,e){return z.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ma:this.tr-1)}getAllMutationBatches(t){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ye(e,0),o=new Ye(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new te(At);return e.forEach((o=>{const u=new Ye(o,0),c=new Ye(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;ot.isDocumentKey(u)||(u=u.child(""));const c=new Ye(new ot(u),0);let m=new te(At);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),z.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){gt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(e.mutations,(o=>{const u=new Ye(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new Ye(e,0),o=this.Zr.firstAfterOrEqual(r);return z.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,z.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t){this.ri=t,this.docs=(function(){return new ye(ot.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return z.resolve(r?r.document.mutableCopy():Te.newInvalidDocument(e))}getEntries(t,e){let r=Pn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Te.newInvalidDocument(o))})),z.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Pn();const c=e.path,m=new ot(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||vp(Eb(E),r)<=0||(o.has(E.key)||nc(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return z.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ht(9500)}ii(t,e){return z.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new rx(this)}getSize(t){return z.resolve(this.size)}}class rx extends PS{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),z.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t){this.persistence=t,this.si=new Ar((e=>Sa(e)),tc),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new zp,this.targetCount=0,this.ai=Ia.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),z.resolve()}getLastRemoteSnapshotVersion(t){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return z.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),z.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ia(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,z.resolve()}updateTargetData(t,e){return this.Pr(e),z.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,z.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),z.waitFor(u).next((()=>o))}getTargetCount(t){return z.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return z.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),z.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),z.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),z.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return z.resolve(r)}containsKey(t,e){return z.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(t,e){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new ex,this.referenceDelegate=t(this),this.Pi=new sx(this),this.indexManager=new F2,this.remoteDocumentCache=(function(o){return new ix(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new wS(e),this.Ii=new W2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new tx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new nx(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new ax(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return z.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class ax extends bb{constructor(t){super(),this.currentSequenceNumber=t}}class nd{constructor(t){this.persistence=t,this.Ri=new zp,this.Vi=null}static mi(t){return new nd(t)}get fi(){if(this.Vi)return this.Vi;throw ht(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),z.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),z.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,(r=>{const o=ot.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,_t.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return z.or([()=>z.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Nf{constructor(t,e){this.persistence=t,this.pi=new Ar((r=>cn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=kS(this,e)}static mi(t,e){return new Nf(t,e)}Ei(){}di(t){return z.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return z.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?z.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,_t.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),z.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),z.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),z.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),z.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=sf(t.data.value)),e}br(t,e,r){return z.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return z.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(t){this.serializer=t}k(t,e,r,o){const u=new Ff("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(Wu)})(t),(function(g){g.createObjectStore(Uu,{keyPath:yC}),g.createObjectStore(mi,{keyPath:mE,autoIncrement:!0}).createIndex(da,gE,{unique:!0}),g.createObjectStore(Fo)})(t),rT(t),(function(g){g.createObjectStore(la)})(t));let c=z.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Go),g.deleteObjectStore(Ho),g.deleteObjectStore(ga)})(t),rT(t)),c=c.next((()=>(function(g){const p=g.store(ga),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return p.put(Tf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(mi).J().next((T=>{g.deleteObjectStore(mi),g.createObjectStore(mi,{keyPath:mE,autoIncrement:!0}).createIndex(da,gE,{unique:!0});const I=p.store(mi),M=T.map((K=>I.put(K)));return z.waitFor(M)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Ko,{keyPath:IC})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Bu)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Gf,{keyPath:RC})})(t),(function(g){g.createObjectStore(Kf,{keyPath:CC})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Qf,{keyPath:kC});p.createIndex(qg,PC,{unique:!1}),p.createIndex(xb,LC,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Ef,{keyPath:vC});p.createIndex(nf,EC),p.createIndex(wb,TC)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(la)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(bp,{keyPath:xC,autoIncrement:!0}).createIndex(jg,DC,{unique:!1}),g.createObjectStore(Cu,{keyPath:NC}).createIndex(Rb,VC,{unique:!1}),g.createObjectStore(xu,{keyPath:OC}).createIndex(Cb,MC,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{e.objectStore(Cu).clear()})).next((()=>{e.objectStore(xu).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Sp,{keyPath:zC})})(t)}))),r<18&&o>=18&&eb()&&(c=c.next((()=>{e.objectStore(Cu).clear()})).next((()=>{e.objectStore(xu).clear()}))),c}wi(t){let e=0;return t.store(la).ee(((r,o)=>{e+=Df(o)})).next((()=>{const r={byteSize:e};return t.store(Bu).put(Bg,r)}))}yi(t){const e=t.store(Uu),r=t.store(mi);return e.J().next((o=>z.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ma],[u.userId,u.lastAcknowledgedBatchId]);return r.J(da,c).next((m=>z.forEach(m,(g=>{gt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ca(this.serializer,g);return NS(t,u.userId,p).next((()=>{}))}))))}))))}Si(t){const e=t.store(Go),r=t.store(la);return t.store(ga).get(Tf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Qt(c),p=(function(T){return[0,cn(T)]})(g);u.push(e.get(p).next((E=>E?z.resolve():(T=>e.put({targetId:0,path:cn(T),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>z.waitFor(u)))}))}bi(t,e){t.createObjectStore(ju,{keyPath:wC});const r=e.store(ju),o=new Lp,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:cn(g)})}};return e.store(la).ee({X:!0},((c,m)=>{const g=new Qt(c);return u(g.popLast())})).next((()=>e.store(Fo).ee({X:!0},(([c,m,g],p)=>{const E=Bi(m);return u(E.popLast())}))))}Di(t){const e=t.store(Ho);return e.ee(((r,o)=>{const u=Au(o),c=IS(this.serializer,u);return e.put(c)}))}Ci(t,e){const r=e.store(la),o=[];return r.ee(((u,c)=>{const m=e.store(Ef),g=(function(T){return T.document?new ot(Qt.fromString(T.document.name).popFirst(5)):T.noDocument?ot.fromSegments(T.noDocument.path):T.unknownDocument?ot.fromSegments(T.unknownDocument.path):ht(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>z.waitFor(o)))}Fi(t,e){const r=e.store(mi),o=LS(this.serializer),u=new Up(nd.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Nt();ca(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),z.forEach(m,((g,p)=>{const E=new nn(p),T=td.wt(this.serializer,E),I=u.getIndexManager(E),M=ed.wt(E,this.serializer,I,u.referenceDelegate);return new zS(o,M,T,I).recalculateAndSaveOverlaysForDocumentKeys(new Fg(e,Wn.ce),g).next()}))}))}}function rT(s){s.createObjectStore(Go,{keyPath:SC}).createIndex(Tp,AC,{unique:!0}),s.createObjectStore(Ho,{keyPath:"targetId"}).createIndex(Ib,bC,{unique:!0}),s.createObjectStore(ga)}const os="IndexedDbPersistence",Sg=18e5,Ag=5e3,wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lx="main";class Bp{constructor(t,e,r,o,u,c,m,g,p,E,T=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!Bp.v())throw new at(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new X2(this,o),this.$i=e+lx,this.serializer=new wS(g),this.Ui=new Es(this.$i,this.Ni,new ox(this.serializer)),this.hi=new L2,this.Pi=new G2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LS(this.serializer),this.Ii=new P2,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&mn(os,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new at(X.FAILED_PRECONDITION,wg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new Wn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Qh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Is(t))return tt(os,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(os,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return vu(t).get(So).next((e=>z.resolve(this.es(e))))}ts(t){return Qh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Sg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=Fe(e,Ko);return r.J().next((o=>{const u=this.ss(o,Sg),c=o.filter((m=>u.indexOf(m)===-1));return z.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?z.resolve(!0):vu(t).get(So).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Ag)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new at(X.FAILED_PRECONDITION,wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qh(t).J().next((r=>this.ss(r,Ag).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(os,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Wu,Ko],(t=>{const e=new Fg(t,Wn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Qh(t).J().next((e=>this.ss(e,Sg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return ed.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new H2(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return td.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(os,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?jC:g===17?Ob:g===16?BC:g===15?Ap:g===14?Vb:g===13?Nb:g===12?UC:g===11?Db:void ht(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new Fg(m,this.ci?this.ci.next():Wn.ce),e==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw mn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new at(X.FAILED_PRECONDITION,Tb);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return vu(t).get(So).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Ag)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new at(X.FAILED_PRECONDITION,wg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(t).put(So,e)}static v(){return Es.v()}Zi(t){const e=vu(t);return e.get(So).next((r=>this.es(r)?(tt(os,"Releasing primary lease."),e.delete(So)):z.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(mn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;tb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return tt(os,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mn(os,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){mn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vu(s){return Fe(s,Wu)}function Qh(s){return Fe(s,Ko)}function ux(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Nt(),o=Nt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jp(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tb()?8:Sb(qe())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new cx;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(xo()<=Lt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Do(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(xo()<=Lt.DEBUG&&tt("QueryEngine","Query:",Do(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(xo()<=Lt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Do(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ti(e))):z.resolve())}ys(t,e){if(CE(e))return z.resolve(null);let r=ti(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=$g(e,null,"F"),r=ti(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Nt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const p=this.Ds(e,m);return this.Cs(e,p,c,g.readTime)?this.ys(t,$g(e,null,"F")):this.vs(t,p,e,g)}))))})))))}ws(t,e,r,o){return CE(e)||o.isEqual(_t.min())?z.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?z.resolve(null):(xo()<=Lt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Do(e)),this.vs(t,c,e,cC(o,Pu)).next((m=>m)))}))}Ds(t,e){let r=new te(Wb(t));return e.forEach(((o,u)=>{nc(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return xo()<=Lt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Do(e)),this.ps.getDocumentsMatchingQuery(t,e,Ln.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="LocalStore",hx=3e8;class fx{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new ye(At),this.xs=new Ar((u=>Sa(u)),tc),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function BS(s,t,e,r){return new fx(s,t,e,r)}async function jS(s,t){const e=wt(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Nt();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function dx(s,t){const e=wt(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,I=T.keys();let M=z.resolve();return I.forEach((K=>{M=M.next((()=>E.getEntry(g,K))).next((Q=>{const J=p.docVersions.get(K);gt(J!==null,48541),Q.version.compareTo(J)<0&&(T.applyToRemoteDocument(Q,p),Q.isValidDocument()&&(Q.setReadTime(p.commitVersion),E.addEntry(Q)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Nt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function qS(s){const t=wt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function mx(s,t){const e=wt(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const I=o.get(T);if(!I)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,T))));let M=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?M=M.withResumeToken(Le.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),o=o.insert(T,M),(function(Q,J,it){return Q.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=hx?!0:it.addedDocuments.size+it.modifiedDocuments.size+it.removedDocuments.size>0})(I,M,E)&&m.push(e.Pi.updateTargetData(u,M))}));let g=Pn(),p=Nt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(gx(u,c,t.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(_t.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((T=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return z.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function gx(s,t,e){let r=Nt(),o=Nt();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Pn();return e.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(_t.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):tt(qp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function px(s,t){const e=wt(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ma),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function yx(s,t){const e=wt(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,z.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new dr(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function rp(s,t,e){const r=wt(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Is(c))throw c;tt(qp,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function sT(s,t,e){const r=wt(s);let o=_t.min(),u=Nt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const T=wt(g),I=T.xs.get(E);return I!==void 0?z.resolve(T.Ms.get(I)):T.Pi.getTargetData(p,E)})(r,c,ti(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:_t.min(),e?u:Nt()))).next((m=>(_x(r,n2(t),m),{documents:m,Qs:u})))))}function _x(s,t,e){let r=s.Os.get(t)||_t.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class aT{constructor(){this.activeTargetIds=l2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class FS{constructor(){this.Mo=new aT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new aT,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="ConnectivityMonitor";class lT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(oT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(oT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;function sp(){return Yh===null?Yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yh++,"0x"+Yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="RestConnection",Ex={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=sp(),m=this.zo(t,e.toUriEncodedString());tt(Ig,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=nl(p);return this.Jo(t,m,g,r,E).then((T=>(tt(Ig,`Received RPC '${t}' ${c}: `,T),T)),(T=>{throw Ta(Ig,`RPC '${t}' ${c} failed with error: `,T,"url: ",m,"request:",r),T}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=Ex[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class Sx extends Tx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=sp();return new Promise(((m,g)=>{const p=new cb;p.setWithCredentials(!0),p.listenOnce(hb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wh.NO_ERROR:const T=p.getResponseJson();tt(on,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(T)),m(T);break;case Wh.TIMEOUT:tt(on,`RPC '${t}' ${c} timed out`),g(new at(X.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const I=p.getStatus();if(tt(on,`RPC '${t}' ${c} failed with status:`,I,"response text:",p.getResponseText()),I>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const K=M==null?void 0:M.error;if(K&&K.status&&K.message){const Q=(function(it){const rt=it.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(rt)>=0?rt:X.UNKNOWN})(K.status);g(new at(Q,K.message))}else g(new at(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new at(X.UNAVAILABLE,"Connection failed."));break;default:ht(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{tt(on,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(o);tt(on,`RPC '${t}' ${c} sending request:`,o),p.send(e,"POST",E,r,15)}))}T_(t,e,r){const o=sp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=mb(),m=db(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");tt(on,`Creating RPC '${t}' stream ${o}: ${E}`,g);const T=c.createWebChannel(E,g);this.I_(T);let I=!1,M=!1;const K=new bx({Yo:J=>{M?tt(on,`Not sending because RPC '${t}' stream ${o} is closed:`,J):(I||(tt(on,`Opening RPC '${t}' stream ${o} transport.`),T.open(),I=!0),tt(on,`RPC '${t}' stream ${o} sending:`,J),T.send(J))},Zo:()=>T.close()}),Q=(J,it,rt)=>{J.listen(it,(et=>{try{rt(et)}catch(mt){setTimeout((()=>{throw mt}),0)}}))};return Q(T,Tu.EventType.OPEN,(()=>{M||(tt(on,`RPC '${t}' stream ${o} transport opened.`),K.o_())})),Q(T,Tu.EventType.CLOSE,(()=>{M||(M=!0,tt(on,`RPC '${t}' stream ${o} transport closed`),K.a_(),this.E_(T))})),Q(T,Tu.EventType.ERROR,(J=>{M||(M=!0,Ta(on,`RPC '${t}' stream ${o} transport errored. Name:`,J.name,"Message:",J.message),K.a_(new at(X.UNAVAILABLE,"The operation could not be completed")))})),Q(T,Tu.EventType.MESSAGE,(J=>{var it;if(!M){const rt=J.data[0];gt(!!rt,16349);const et=rt,mt=(et==null?void 0:et.error)||((it=et[0])==null?void 0:it.error);if(mt){tt(on,`RPC '${t}' stream ${o} received error:`,mt);const vt=mt.status;let ft=(function(A){const w=ke[A];if(w!==void 0)return hS(w)})(vt),C=mt.message;ft===void 0&&(ft=X.INTERNAL,C="Unknown error status: "+vt+" with message "+mt.message),M=!0,K.a_(new at(ft,C)),T.close()}else tt(on,`RPC '${t}' stream ${o} received:`,rt),K.u_(rt)}})),Q(m,fb.STAT_EVENT,(J=>{J.stat===Lg.PROXY?tt(on,`RPC '${t}' stream ${o} detected buffering proxy`):J.stat===Lg.NOPROXY&&tt(on,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){return typeof window<"u"?window:null}function cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(s){return new w2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="PersistentStream";class GS{constructor(t,e,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HS(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===X.RESOURCE_EXHAUSTED?(mn(e.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new at(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(uT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(uT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wx extends GS{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=C2(this.serializer,t),r=(function(u){if(!("targetChange"in u))return _t.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?_t.min():c.readTime?gn(c.readTime):_t.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=Wg(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=Af(g)?{documents:vS(u,g)}:{query:ES(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=mS(u,c.resumeToken);const p=Jg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(_t.min())>0){m.readTime=Wo(u,c.snapshotVersion.toTimestamp());const p=Jg(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const r=D2(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=Wg(this.serializer),e.removeTarget=t,this.q_(e)}}class Ix extends GS{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=x2(t.writeResults,t.commitTime),r=gn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=Wg(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>Rf(this.serializer,r)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{}class Cx extends Rx{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new at(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,Zg(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new at(X.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,Zg(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new at(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xx{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="RemoteStore";class Dx{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Da(this)&&(tt(Ra,"Restarting streams for network reachability change."),await(async function(g){const p=wt(g);p.Ea.add(4),await sc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await rd(p)})(this))}))})),this.Ra=new xx(r,o)}}async function rd(s){if(Da(s))for(const t of s.da)await t(!0)}async function sc(s){for(const t of s.da)await t(!1)}function KS(s,t){const e=wt(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Kp(e)?Gp(e):al(e).O_()&&Hp(e,t))}function Fp(s,t){const e=wt(s),r=al(e);e.Ia.delete(t),r.O_()&&QS(e,t),e.Ia.size===0&&(r.O_()?r.L_():Da(e)&&e.Ra.set("Unknown"))}function Hp(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}al(s).Y_(t)}function QS(s,t){s.Va.Ue(t),al(s).Z_(t)}function Gp(s){s.Va=new T2({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),al(s).start(),s.Ra.ua()}function Kp(s){return Da(s)&&!al(s).x_()&&s.Ia.size>0}function Da(s){return wt(s).Ea.size===0}function YS(s){s.Va=void 0}async function Nx(s){s.Ra.set("Online")}async function Vx(s){s.Ia.forEach(((t,e)=>{Hp(s,t)}))}async function Ox(s,t){YS(s),Kp(s)?(s.Ra.ha(t),Gp(s)):s.Ra.set("Unknown")}async function Mx(s,t,e){if(s.Ra.set("Online"),t instanceof dS&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(Ra,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Vf(s,r)}else if(t instanceof lf?s.Va.Ze(t):t instanceof fS?s.Va.st(t):s.Va.tt(t),!e.isEqual(_t.min()))try{const r=await qS(s.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Le.EMPTY_BYTE_STRING,E.snapshotVersion)),QS(u,g);const T=new dr(E.target,g,p,E.sequenceNumber);Hp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(Ra,"Failed to raise snapshot:",r),await Vf(s,r)}}async function Vf(s,t,e){if(!Is(t))throw t;s.Ea.add(1),await sc(s),s.Ra.set("Offline"),e||(e=()=>qS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(Ra,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await rd(s)}))}function XS(s,t){return t().catch((e=>Vf(s,e,t)))}async function ac(s){const t=wt(s),e=As(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ma;for(;kx(t);)try{const o=await px(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,Px(t,o)}catch(o){await Vf(t,o)}$S(t)&&JS(t)}function kx(s){return Da(s)&&s.Ta.length<10}function Px(s,t){s.Ta.push(t);const e=As(s);e.O_()&&e.X_&&e.ea(t.mutations)}function $S(s){return Da(s)&&!As(s).x_()&&s.Ta.length>0}function JS(s){As(s).start()}async function Lx(s){As(s).ra()}async function zx(s){const t=As(s);for(const e of s.Ta)t.ea(e.mutations)}async function Ux(s,t,e){const r=s.Ta.shift(),o=Vp.from(r,t,e);await XS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ac(s)}async function Bx(s,t){t&&As(s).X_&&await(async function(r,o){if((function(c){return _2(c)&&c!==X.ABORTED})(o.code)){const u=r.Ta.shift();As(r).B_(),await XS(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ac(r)}})(s,t),$S(s)&&JS(s)}async function cT(s,t){const e=wt(s);e.asyncQueue.verifyOperationInProgress(),tt(Ra,"RemoteStore received new credentials");const r=Da(e);e.Ea.add(3),await sc(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await rd(e)}async function jx(s,t){const e=wt(s);t?(e.Ea.delete(2),await rd(e)):t||(e.Ea.add(2),await sc(e),e.Ra.set("Unknown"))}function al(s){return s.ma||(s.ma=(function(e,r,o){const u=wt(e);return u.sa(),new wx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:Nx.bind(null,s),t_:Vx.bind(null,s),r_:Ox.bind(null,s),H_:Mx.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Kp(s)?Gp(s):s.Ra.set("Unknown")):(await s.ma.stop(),YS(s))}))),s.ma}function As(s){return s.fa||(s.fa=(function(e,r,o){const u=wt(e);return u.sa(),new Ix(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lx.bind(null,s),r_:Bx.bind(null,s),ta:zx.bind(null,s),na:Ux.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await ac(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(Ra,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new Qp(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(s,t){if(mn("AsyncQueue",`${t}: ${s}`),Is(s))return new at(X.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(t){return new ko(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||ot.comparator(e.key,r.key):(e,r)=>ot.comparator(e.key,r.key),this.keyedMap=bu(),this.sortedSet=new ye(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ko;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.ga=new ye(ot.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ht(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class tl{constructor(t,e,r,o,u,c,m,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new tl(t,e,ko.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$f(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Fx{constructor(){this.queries=fT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=wt(e),u=o.queries;o.queries=fT(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new at(X.ABORTED,"Firestore shutting down"))}}function fT(){return new Ar((s=>Zb(s)),$f)}async function Hx(s,t){const e=wt(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new qx,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=Yp(c,`Initialization of query '${Do(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&Xp(e)}async function Gx(s,t){const e=wt(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Kx(s,t){const e=wt(s);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&Xp(e)}function Qx(s,t,e){const r=wt(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function Xp(s){s.Ca.forEach((t=>{t.next()}))}var ap,dT;(dT=ap||(ap={})).Ma="default",dT.Cache="cache";class Yx{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new tl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=tl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t){this.key=t}}class WS{constructor(t){this.key=t}}class Xx{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=Wb(t),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new hT,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const I=o.get(E),M=nc(this.query,T)?T:null,K=!!I&&this.mutatedKeys.has(I.key),Q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let J=!1;I&&M?I.data.isEqual(M.data)?K!==Q&&(r.track({type:3,doc:M}),J=!0):this.su(I,M)||(r.track({type:2,doc:M}),J=!0,(g&&this.eu(M,g)>0||p&&this.eu(M,p)<0)&&(m=!0)):!I&&M?(r.track({type:0,doc:M}),J=!0):I&&!M&&(r.track({type:1,doc:I}),J=!0,(g||p)&&(m=!0)),J&&(M?(c=c.add(M),u=Q?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,T)=>(function(M,K){const Q=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht(20277,{Rt:J})}};return Q(M)-Q(K)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new tl(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new WS(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new ZS(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Nt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class $x{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Jx{constructor(t){this.key=t,this.hu=!1}}class Zx{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ar((m=>Zb(m)),$f),this.Iu=new Map,this.Eu=new Set,this.du=new ye(ot.comparator),this.Au=new Map,this.Ru=new zp,this.Vu={},this.mu=new Map,this.fu=Ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Wx(s,t,e=!0){const r=sA(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await tA(r,t,e,!0),o}async function tD(s,t){const e=sA(s);await tA(e,t,!0,!1)}async function tA(s,t,e,r){const o=await yx(s.localStore,ti(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await eD(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&e&&KS(s.remoteStore,o),m}async function eD(s,t,e,r,o){s.pu=(T,I,M)=>(async function(Q,J,it,rt){let et=J.view.ru(it);et.Cs&&(et=await sT(Q.localStore,J.query,!1).then((({documents:C})=>J.view.ru(C,et))));const mt=rt&&rt.targetChanges.get(J.targetId),vt=rt&&rt.targetMismatches.get(J.targetId)!=null,ft=J.view.applyChanges(et,Q.isPrimaryClient,mt,vt);return gT(Q,J.targetId,ft.au),ft.snapshot})(s,T,I,M);const u=await sT(s.localStore,t,!0),c=new Xx(t,u.Qs),m=c.ru(u.documents),g=rc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);gT(s,e,p.au);const E=new $x(t,e,c);return s.Tu.set(t,E),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),p.snapshot}async function nD(s,t,e){const r=wt(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!$f(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await rp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Fp(r.remoteStore,o.targetId),op(r,o.targetId)})).catch(xa)):(op(r,o.targetId),await rp(r.localStore,o.targetId,!0))}async function iD(s,t){const e=wt(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Fp(e.remoteStore,r.targetId))}async function rD(s,t,e){const r=aA(s);try{const o=await(function(c,m){const g=wt(c),p=Zt.now(),E=m.reduce(((M,K)=>M.add(K.key)),Nt());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let K=Pn(),Q=Nt();return g.Ns.getEntries(M,E).next((J=>{K=J,K.forEach(((it,rt)=>{rt.isValidDocument()||(Q=Q.add(it))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,K))).next((J=>{T=J;const it=[];for(const rt of m){const et=p2(rt,T.get(rt.key).overlayedDocument);et!=null&&it.push(new wr(rt.key,et,Fb(et.value.mapValue),Xe.exists(!0)))}return g.mutationQueue.addMutationBatch(M,p,it,m)})).next((J=>{I=J;const it=J.applyToLocalDocumentSet(T,Q);return g.documentOverlayCache.saveOverlays(M,J.batchId,it)}))})).then((()=>({batchId:I.batchId,changes:eS(T)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new ye(At)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,e),await oc(r,o.changes),await ac(r.remoteStore)}catch(o){const u=Yp(o,"Failed to persist write");e.reject(u)}}async function eA(s,t){const e=wt(s);try{const r=await mx(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?gt(c.hu,14607):o.removedDocuments.size>0&&(gt(c.hu,42227),c.hu=!1))})),await oc(e,r,t)}catch(r){await xa(r)}}function mT(s,t,e){const r=wt(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=wt(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const I of T.Sa)I.va(m)&&(p=!0)})),p&&Xp(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sD(s,t,e){const r=wt(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new ye(ot.comparator);c=c.insert(u,Te.newNoDocument(u,_t.min()));const m=Nt().add(u),g=new Wf(_t.min(),new Map,new ye(At),c,m);await eA(r,g),r.du=r.du.remove(u),r.Au.delete(t),Jp(r)}else await rp(r.localStore,t,!1).then((()=>op(r,t,e))).catch(xa)}async function aD(s,t){const e=wt(s),r=t.batch.batchId;try{const o=await dx(e.localStore,t);iA(e,r,null),nA(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await oc(e,o)}catch(o){await xa(o)}}async function oD(s,t,e){const r=wt(s);try{const o=await(function(c,m){const g=wt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(gt(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,t);iA(r,t,e),nA(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await oc(r,o)}catch(o){await xa(o)}}function nA(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function iA(s,t,e){const r=wt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function op(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||rA(s,r)}))}function rA(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(Fp(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),Jp(s))}function gT(s,t,e){for(const r of e)r instanceof ZS?(s.Ru.addReference(r.key,t),lD(s,r)):r instanceof WS?(tt($p,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||rA(s,r.key)):ht(19791,{wu:r})}function lD(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt($p,"New document in limbo: "+e),s.Eu.add(r),Jp(s))}function Jp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new ot(Qt.fromString(t)),r=s.fu.next();s.Au.set(r,new Jx(e)),s.du=s.du.insert(e,r),KS(s.remoteStore,new dr(ti(xp(e.path)),r,"TargetPurposeLimboResolution",Wn.ce))}}async function oc(s,t,e){const r=wt(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((p=>{var E;if((p||e)&&r.isPrimaryClient){const T=p?!p.fromCache:(E=e==null?void 0:e.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){o.push(p);const T=jp.As(g.targetId,p);u.push(T)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=wt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>z.forEach(p,(I=>z.forEach(I.Es,(M=>E.persistence.referenceDelegate.addReference(T,I.targetId,M))).next((()=>z.forEach(I.ds,(M=>E.persistence.referenceDelegate.removeReference(T,I.targetId,M)))))))))}catch(T){if(!Is(T))throw T;tt(qp,"Failed to update sequence numbers: "+T)}for(const T of p){const I=T.targetId;if(!T.fromCache){const M=E.Ms.get(I),K=M.snapshotVersion,Q=M.withLastLimboFreeSnapshotVersion(K);E.Ms=E.Ms.insert(I,Q)}}})(r.localStore,u))}async function uD(s,t){const e=wt(s);if(!e.currentUser.isEqual(t)){tt($p,"User change. New user:",t.toKey());const r=await jS(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new at(X.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await oc(e,r.Ls)}}function cD(s,t){const e=wt(s),r=e.Au.get(t);if(r&&r.hu)return Nt().add(r.key);{let o=Nt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function sA(s){const t=wt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=eA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sD.bind(null,t),t.Pu.H_=Kx.bind(null,t.eventManager),t.Pu.yu=Qx.bind(null,t.eventManager),t}function aA(s){const t=wt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oD.bind(null,t),t}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=id(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return BS(this.persistence,new US,t.initialUser,this.serializer)}Cu(t){return new Up(nd.mi,this.serializer)}Du(t){return new FS}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class hD extends Yu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){gt(this.persistence.referenceDelegate instanceof Nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MS(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Up((r=>Nf.mi(r,e)),this.serializer)}}class fD extends Yu{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await aA(this.xu.syncEngine),await ac(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return BS(this.persistence,new US,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new MS(r,t.asyncQueue,e)}Mu(t,e){const r=new mC(e,this.persistence);return new dC(t.asyncQueue,r)}Cu(t){const e=ux(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Bp(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Ax(),cf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new FS}}class Of{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uD.bind(null,this.syncEngine),await jx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Fx})()}createDatastore(t){const e=id(t.databaseInfo.databaseId),r=(function(u){return new Sx(u)})(t.databaseInfo);return(function(u,c,m,g){return new Cx(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new Dx(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>mT(this.syncEngine,e,0)),(function(){return lT.v()?new lT:new vx})())}createSyncEngine(t,e){return(function(o,u,c,m,g,p,E){const T=new Zx(o,u,c,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(o){const u=wt(o);tt(Ra,"RemoteStore shutting down."),u.Ea.add(5),await sc(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):mn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class mD{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{tt(ws,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(tt(ws,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Yp(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Rg(s,t){s.asyncQueue.verifyOperationInProgress(),tt(ws,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await jS(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function pT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await gD(s);tt(ws,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>cT(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>cT(t.remoteStore,o))),s._onlineComponents=t}async function gD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(ws,"Using user provided OfflineComponentProvider");try{await Rg(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Ta("Error using user provided cache. Falling back to memory cache: "+e),await Rg(s,new Yu)}}else tt(ws,"Using default OfflineComponentProvider"),await Rg(s,new hD(void 0));return s._offlineComponents}async function oA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(ws,"Using user provided OnlineComponentProvider"),await pT(s,s._uninitializedComponentsProvider._online)):(tt(ws,"Using default OnlineComponentProvider"),await pT(s,new Of))),s._onlineComponents}function pD(s){return oA(s).then((t=>t.syncEngine))}async function yD(s){const t=await oA(s),e=t.eventManager;return e.onListen=Wx.bind(null,t.syncEngine),e.onUnlisten=nD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=tD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=iD.bind(null,t.syncEngine),e}function _D(s,t,e={}){const r=new pr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new dD({next:I=>{E.Nu(),c.enqueueAndForget((()=>Gx(u,T))),I.fromCache&&g.source==="server"?p.reject(new at(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new Yx(m,E,{includeMetadataChanges:!0,qa:!0});return Hx(u,T)})(await yD(s),s.asyncQueue,t,e,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firestore.googleapis.com",_T=!0;class vT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new at(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uA,this.ssl=_T}else this.host=t.host,this.ssl=t.ssl??_T;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=DS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<K2)throw new at(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}uC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lA(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new at(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new at(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new at(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class sd{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WR;switch(r.type){case"firstParty":return new iC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=yT.get(e);r&&(tt("ComponentProvider","Removing Datastore"),yT.delete(e),r.terminate())})(this),Promise.resolve()}}function vD(s,t,e,r={}){var p;s=_r(s,sd);const o=nl(t),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${e}`;o&&(JT(`https://${m}`),ZT("Firestore",!0)),u.host!==uA&&u.host!==m&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!_a(g,c)&&(s._setSettings(g),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=nn.MOCK_USER;else{E=RI(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new at(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(I)}s._authCredentials=new tC(new pb(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ol(this.firestore,t,this._query)}}class je{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new je(this.firestore,t,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Zu(e,je._jsonSchema))return new je(t,r||null,new ot(Qt.fromString(e.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Pe("string",je._jsonSchemaVersion),referencePath:Pe("string")};class Ts extends ol{constructor(t,e,r){super(t,e,xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new je(this.firestore,null,new ot(t))}withConverter(t){return new Ts(this.firestore,t,this._path)}}function Qe(s,t,...e){if(s=sn(s),_b("collection","path",t),s instanceof sd){const r=Qt.fromString(t,...e);return uE(r),new Ts(s,null,r)}{if(!(s instanceof je||s instanceof Ts))throw new at(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(t,...e));return uE(r),new Ts(s.firestore,null,r)}}function fr(s,t,...e){if(s=sn(s),arguments.length===1&&(t=_p.newId()),_b("doc","path",t),s instanceof sd){const r=Qt.fromString(t,...e);return lE(r),new je(s,null,new ot(r))}{if(!(s instanceof je||s instanceof Ts))throw new at(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(t,...e));return lE(r),new je(s.firestore,s instanceof Ts?s.converter:null,new ot(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="AsyncQueue";class TT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HS(this,"async_queue_retry"),this._c=()=>{const r=cf();r&&tt(ET,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=cf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=cf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Is(t))throw t;tt(ET,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",bT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=Qp.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ht(47125,{Pc:bT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function bT(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class Na extends sd{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new TT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new TT(t),this._firestoreClient=void 0,await t}}}function ED(s,t){const e=typeof s=="object"?s:ab(),r=typeof s=="string"?s:bf,o=pp(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=wI("firestore");u&&vD(o,...u)}return o}function Zp(s){if(s._terminated)throw new at(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||cA(s),s._firestoreClient}function cA(s){var r,o,u;const t=s._freezeSettings(),e=(function(m,g,p,E){return new FC(m,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,lA(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new mD(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function TD(s,t){Ta("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return bD(s,Of.provider,{build:r=>new fD(r,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}function bD(s,t,e){if((s=_r(s,Na))._firestoreClient||s._terminated)throw new at(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new at(X.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},cA(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zn(Le.fromBase64String(t))}catch(e){throw new at(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Zn(Le.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Zu(t,Zn._jsonSchema))return Zn.fromBase64String(t.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Pe("string",Zn._jsonSchemaVersion),bytes:Pe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new at(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _e(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new at(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new at(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(t){if(Zu(t,qi._jsonSchema))return new qi(t.latitude,t.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:Pe("string",qi._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Zu(t,Fi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Fi(t.vectorValues);throw new at(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:Pe("string",Fi._jsonSchemaVersion),vectorValues:Pe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=/^__.*__$/;class AD{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new wr(t,this.data,this.fieldMask,e,this.fieldTransforms):new sl(t,this.data,e,this.fieldTransforms)}}class hA{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new wr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function fA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht(40011,{Ac:s})}}class ty{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ty({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Mf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(fA(this.Ac)&&SD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class wD{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||id(t)}Cc(t,e,r,o=!1){return new ty({Ac:t,methodName:e,Dc:r,path:_e.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(s){const t=s._freezeSettings(),e=id(s._databaseId);return new wD(s._databaseId,!!t.ignoreUndefinedProperties,e)}function dA(s,t,e,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);ey("Data must be an object, but it was:",c,r);const m=pA(r,c);let g,p;if(u.merge)g=new wn(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const I=lp(t,T,e);if(!c.contains(I))throw new at(X.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);_A(E,I)||E.push(I)}g=new wn(E),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new AD(new un(m),g,p)}class od extends Wp{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof od}}function mA(s,t,e,r){const o=s.Cc(1,t,e);ey("Data must be an object, but it was:",o,r);const u=[],c=un.empty();Rs(r,((g,p)=>{const E=ny(t,g,e);p=sn(p);const T=o.yc(E);if(p instanceof od)u.push(E);else{const I=uc(p,T);I!=null&&(u.push(E),c.set(E,I))}}));const m=new wn(u);return new hA(c,m,o.fieldTransforms)}function gA(s,t,e,r,o,u){const c=s.Cc(1,t,e),m=[lp(t,r,e)],g=[o];if(u.length%2!=0)throw new at(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(lp(t,u[I])),g.push(u[I+1]);const p=[],E=un.empty();for(let I=m.length-1;I>=0;--I)if(!_A(p,m[I])){const M=m[I];let K=g[I];K=sn(K);const Q=c.yc(M);if(K instanceof od)p.push(M);else{const J=uc(K,Q);J!=null&&(p.push(M),E.set(M,J))}}const T=new wn(p);return new hA(E,T,c.fieldTransforms)}function ID(s,t,e,r=!1){return uc(e,s.Cc(r?4:3,t))}function uc(s,t){if(yA(s=sn(s)))return ey("Unsupported field value:",t,s),pA(s,t);if(s instanceof Wp)return(function(r,o){if(!fA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=uc(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Zt.fromDate(r);return{timestampValue:Wo(o.serializer,u)}}if(r instanceof Zt){const u=new Zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wo(o.serializer,u)}}if(r instanceof qi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:mS(o.serializer,r._byteString)};if(r instanceof je){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:kp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Fi)return(function(c,m){return{mapValue:{fields:{[Ip]:{stringValue:Rp},[Qo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Dp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${qf(r)}`)})(s,t)}function pA(s,t){const e={};return Mb(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rs(s,((r,o)=>{const u=uc(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function yA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Zt||s instanceof qi||s instanceof Zn||s instanceof je||s instanceof Wp||s instanceof Fi)}function ey(s,t,e){if(!yA(e)||!vb(e)){const r=qf(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function lp(s,t,e){if((t=sn(t))instanceof lc)return t._internalPath;if(typeof t=="string")return ny(s,t);throw Mf("Field path arguments must be of type string or ",s,!1,void 0,e)}const RD=new RegExp("[~\\*/\\[\\]]");function ny(s,t,e){if(t.search(RD)>=0)throw Mf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new lc(...t.split("."))._internalPath}catch{throw Mf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Mf(s,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new at(X.INVALID_ARGUMENT,m+s+g)}function _A(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(iy("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class CD extends vA{data(){return super.data()}}function iy(s,t){return typeof t=="string"?ny(s,t):t instanceof lc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new at(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ry{}class DD extends ry{}function Sn(s,t,...e){let r=[];t instanceof ry&&r.push(t),r=r.concat(e),(function(u){const c=u.filter((g=>g instanceof sy)).length,m=u.filter((g=>g instanceof ld)).length;if(c>1||c>0&&m>0)throw new at(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class ld extends DD{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new ld(t,e,r)}_apply(t){const e=this._parse(t);return EA(t._query,e),new ol(t.firestore,t.converter,Xg(t._query,e))}_parse(t){const e=ad(t.firestore);return(function(u,c,m,g,p,E,T){let I;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new at(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){AT(T,E);const K=[];for(const Q of T)K.push(ST(g,u,Q));I={arrayValue:{values:K}}}else I=ST(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||AT(T,E),I=ID(m,c,T,E==="in"||E==="not-in");return zt.create(p,E,I)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function di(s,t,e){const r=t,o=iy("where",s);return ld._create(o,r,e)}class sy extends ry{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new sy(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:Wt.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)EA(c,g),c=Xg(c,g)})(t._query,e),new ol(t.firestore,t.converter,Xg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ST(s,t,e){if(typeof(e=sn(e))=="string"){if(e==="")throw new at(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(t)&&e.indexOf("/")!==-1)throw new at(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Qt.fromString(e));if(!ot.isDocumentKey(r))throw new at(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hu(s,new ot(r))}if(e instanceof je)return Hu(s,e._key);throw new at(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(e)}.`)}function AT(s,t){if(!Array.isArray(s)||s.length===0)throw new at(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function EA(s,t){const e=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new at(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new at(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class ND{convertValue(t,e="none"){switch(bs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Er(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ht(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Rs(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){var r,o,u;const e=(u=(o=(r=t.fields)==null?void 0:r[Qo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>me(c.doubleValue)));return new Fi(e)}convertGeoPoint(t){return new qi(me(t.latitude),me(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Yf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(qu(t));default:return null}}convertTimestamp(t){const e=vr(t);return new Zt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Qt.fromString(t);gt(AS(r),9688,{name:t});const o=new ba(r.get(1),r.get(3)),u=new ot(r.popFirst(5));return o.isEqual(e)||mn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class Xh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Po extends vA{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(iy("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Po._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:Pe("string",Po._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class hf extends Po{data(t={}){return super.data(t)}}class Lo{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Xh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new hf(this._firestore,this._userDataWriter,r.key,r,new Xh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new at(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xh(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:VD(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Lo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=_p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function VD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht(61501,{type:s})}}Lo._jsonSchemaVersion="firestore/querySnapshot/1.0",Lo._jsonSchema={type:Pe("string",Lo._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class OD extends ND{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,e)}}function An(s){s=_r(s,ol);const t=_r(s.firestore,Na),e=Zp(t),r=new OD(t);return xD(s._query),_D(e,s._query).then((o=>new Lo(t,r,s,o)))}function $h(s,t,e,...r){s=_r(s,je);const o=_r(s.firestore,Na),u=ad(o);let c;return c=typeof(t=sn(t))=="string"||t instanceof lc?gA(u,"updateDoc",s._key,t,e,r):mA(u,"updateDoc",s._key,t),ud(o,[c.toMutation(s._key,Xe.exists(!0))])}function MD(s){return ud(_r(s.firestore,Na),[new ic(s._key,Xe.none())])}function Jh(s,t){const e=_r(s.firestore,Na),r=fr(s),o=TA(s.converter,t);return ud(e,[dA(ad(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Xe.exists(!1))]).then((()=>r))}function ud(s,t){return(function(r,o){const u=new pr;return r.asyncQueue.enqueueAndForget((async()=>rD(await pD(r),o,u))),u.promise})(Zp(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ad(t)}set(t,e,r){this._verifyNotCommitted();const o=Cg(t,this._firestore),u=TA(o.converter,e,r),c=dA(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,Xe.none())),this}update(t,e,r,...o){this._verifyNotCommitted();const u=Cg(t,this._firestore);let c;return c=typeof(e=sn(e))=="string"||e instanceof lc?gA(this._dataReader,"WriteBatch.update",u._key,e,r,o):mA(this._dataReader,"WriteBatch.update",u._key,e),this._mutations.push(c.toMutation(u._key,Xe.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Cg(t,this._firestore);return this._mutations=this._mutations.concat(new ic(e._key,Xe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cg(s,t){if((s=sn(s)).firestore!==t)throw new at(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(s){return Zp(s=_r(s,Na)),new kD(s,(t=>ud(s,t)))}(function(t,e=!0){(function(o){rl=o})(il),jo(new va("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Na(new eC(r.getProvider("auth-internal")),new rC(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new at(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),_s(rE,sE,t),_s(rE,sE,"esm2020")})();function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PD=bA,SA=new $u("auth","Firebase",bA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new mp("@firebase/auth");function LD(s,...t){kf.logLevel<=Lt.WARN&&kf.warn(`Auth (${il}): ${s}`,...t)}function ff(s,...t){kf.logLevel<=Lt.ERROR&&kf.error(`Auth (${il}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(s,...t){throw ay(s,...t)}function Hi(s,...t){return ay(s,...t)}function AA(s,t,e){const r={...PD(),[t]:e};return new $u("auth","Firebase",r).create(t,{appName:s.name})}function ya(s){return AA(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ay(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return SA.create(s,...t)}function bt(s,t,...e){if(!s)throw ay(t,...e)}function mr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw ff(t),new Error(t)}function br(s,t){s||mr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function zD(){return wT()==="http:"||wT()==="https:"}function wT(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zD()||VI()||"connection"in navigator)?navigator.onLine:!0}function BD(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t,e){this.shortDelay=t,this.longDelay=e,br(e>t,"Short delay should be less than long delay!"),this.isMobile=DI()||OI()}get(){return UD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(s,t){br(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FD=new cc(3e4,6e4);function ly(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function ll(s,t,e,r,o={}){return IA(s,o,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=Ju({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:g,...u};return NI()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&nl(s.emulatorConfig.host)&&(p.credentials="include"),wA.fetch()(await RA(s,s.config.apiHost,e,m),p)})}async function IA(s,t,e){s._canInitEmulator=!1;const r={...jD,...t};try{const o=new GD(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Zh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Zh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw Zh(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw AA(s,E,p);Tr(s,E)}}catch(o){if(o instanceof Sr)throw o;Tr(s,"network-request-failed",{message:String(o)})}}async function HD(s,t,e,r,o={}){const u=await ll(s,t,e,r,o);return"mfaPendingCredential"in u&&Tr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function RA(s,t,e,r){const o=`${t}${e}?${r}`,u=s,c=u.config.emulator?oy(s.config,o):`${s.config.apiScheme}://${o}`;return qD.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class GD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Hi(this.auth,"network-request-failed")),FD.get())})}}function Zh(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=Hi(s,t,r);return o.customData._tokenResponse=e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(s,t){return ll(s,"POST","/v1/accounts:delete",t)}async function Pf(s,t){return ll(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function QD(s,t=!1){const e=sn(s),r=await e.getIdToken(t),o=uy(r);bt(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Mu(xg(o.auth_time)),issuedAtTime:Mu(xg(o.iat)),expirationTime:Mu(xg(o.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function xg(s){return Number(s)*1e3}function uy(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const o=KT(e);return o?JSON.parse(o):(ff("Failed to decode base64 JWT payload"),null)}catch(o){return ff("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function IT(s){const t=uy(s);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof Sr&&YD(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function YD({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(s){var T;const t=s.auth,e=await s.getIdToken(),r=await Xu(s,Pf(t,{idToken:e}));bt(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(T=o.providerUserInfo)!=null&&T.length?CA(o.providerUserInfo):[],c=JD(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,E)}async function $D(s){const t=sn(s);await Lf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function JD(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function CA(s){return s.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(s,t){const e=await IA(s,{},async()=>{const r=Ju({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await RA(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&nl(s.emulatorConfig.host)&&(g.credentials="include"),wA.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function WD(s,t){return ll(s,"POST","/v2/accounts:revokeToken",ly(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):IT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const e=IT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await ZD(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,c=new zo;return r&&(bt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(bt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(bt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(s,t){bt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class gi{constructor({uid:t,auth:e,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new XD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Xu(this,this.stsTokenManager.getToken(this.auth,t));return bt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return QD(this,t)}reload(){return $D(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new gi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await Lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ui(this.auth.app))return Promise.reject(ya(this.auth));const t=await this.getIdToken();return await Xu(this,KD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,p=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:T,emailVerified:I,isAnonymous:M,providerData:K,stsTokenManager:Q}=e;bt(T&&Q,t,"internal-error");const J=zo.fromJSON(this.name,Q);bt(typeof T=="string",t,"internal-error"),ls(r,t.name),ls(o,t.name),bt(typeof I=="boolean",t,"internal-error"),bt(typeof M=="boolean",t,"internal-error"),ls(u,t.name),ls(c,t.name),ls(m,t.name),ls(g,t.name),ls(p,t.name),ls(E,t.name);const it=new gi({uid:T,auth:t,email:o,emailVerified:I,displayName:r,isAnonymous:M,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:J,createdAt:p,lastLoginAt:E});return K&&Array.isArray(K)&&(it.providerData=K.map(rt=>({...rt}))),g&&(it._redirectEventId=g),it}static async _fromIdTokenResponse(t,e,r=!1){const o=new zo;o.updateFromServerResponse(e);const u=new gi({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await Lf(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];bt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?CA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new zo;m.updateFromIdToken(r);const g=new gi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new cp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;function gr(s){br(s instanceof Function,"Expected a class definition");let t=RT.get(s);return t?(br(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,RT.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}xA.type="NONE";const CT=xA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(s,t,e){return`firebase:${s}:${t}:${e}`}class Uo{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=df(this.userKey,o.apiKey,u),this.fullPersistenceKey=df("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Pf(this.auth,{idToken:t}).catch(()=>{});return e?gi._fromGetAccountInfoResponse(this.auth,e,t):null}return gi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Uo(gr(CT),t,r);const o=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||gr(CT);const c=df(r,t.config.apiKey,t.name);let m=null;for(const p of e)try{const E=await p._get(c);if(E){let T;if(typeof E=="string"){const I=await Pf(t,{idToken:E}).catch(()=>{});if(!I)break;T=await gi._fromGetAccountInfoResponse(t,I,E)}else T=gi._fromJSON(t,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Uo(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Uo(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(OA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(DA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kA(t))return"Blackberry";if(PA(t))return"Webos";if(NA(t))return"Safari";if((t.includes("chrome/")||VA(t))&&!t.includes("edge/"))return"Chrome";if(MA(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DA(s=qe()){return/firefox\//i.test(s)}function NA(s=qe()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function VA(s=qe()){return/crios\//i.test(s)}function OA(s=qe()){return/iemobile/i.test(s)}function MA(s=qe()){return/android/i.test(s)}function kA(s=qe()){return/blackberry/i.test(s)}function PA(s=qe()){return/webos/i.test(s)}function cy(s=qe()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function tN(s=qe()){var t;return cy(s)&&!!((t=window.navigator)!=null&&t.standalone)}function eN(){return MI()&&document.documentMode===10}function LA(s=qe()){return cy(s)||MA(s)||PA(s)||kA(s)||/windows phone/i.test(s)||OA(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(s,t=[]){let e;switch(s){case"Browser":e=xT(qe());break;case"Worker":e=`${xT(qe())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${il}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(s,t={}){return ll(s,"GET","/v2/passwordPolicy",ly(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=6;class sN{constructor(t){var r;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??rN,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DT(this),this.idTokenSubscription=new DT(this),this.beforeStateQueue=new nN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=gr(e)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Uo.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Pf(this,{idToken:t}),r=await gi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var u;if(Ui(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Lf(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=BD()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ui(this.app))return Promise.reject(ya(this));const e=t?sn(t):null;return e&&bt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ui(this.app)?Promise.reject(ya(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ui(this.app)?Promise.reject(ya(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await iN(this),e=new sN(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $u("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await WD(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&gr(t)||this._popupRedirectResolver;bt(e,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[gr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=zA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&LD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function hy(s){return sn(s)}class DT{constructor(t){this.auth=t,this.observer=null,this.addObserver=BI(e=>this.observer=e)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oN(s){fy=s}function lN(s){return fy.loadJS(s)}function uN(){return fy.gapiScript}function cN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(s,t){const e=pp(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(_a(u,t??{}))return o;Tr(o,"already-initialized")}return e.initialize({options:t})}function fN(s,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(gr);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function dN(s,t,e){const r=hy(s);bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=UA(t),{host:c,port:m}=mN(t),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bt(_a(p,r.config.emulator)&&_a(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,nl(c)?(JT(`${u}//${c}${g}`),ZT("Auth",!0)):gN()}function UA(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function mN(s){const t=UA(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:NT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:NT(c)}}}function NT(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function gN(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return mr("not implemented")}_getIdTokenResponse(t){return mr("not implemented")}_linkToIdToken(t,e){return mr("not implemented")}_getReauthenticationResolver(t){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(s,t){return HD(s,"POST","/v1/accounts:signInWithIdp",ly(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="http://localhost";class Ca extends BA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ca(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Tr("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=e;if(!r||!o)return null;const c=new Ca(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Bo(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Bo(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Bo(t,e)}buildRequest(){const t={requestUri:pN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ju(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends jA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends hc{constructor(){super("facebook.com")}static credential(t){return Ca._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hs.credentialFromTaggedObject(t)}static credentialFromError(t){return hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hs.credential(t.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ca._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return fs.credentialFromTaggedObject(t)}static credentialFromError(t){return fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return fs.credential(e,r)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends hc{constructor(){super("github.com")}static credential(t){return Ca._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ds.credentialFromTaggedObject(t)}static credentialFromError(t){return ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ds.credential(t.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends hc{constructor(){super("twitter.com")}static credential(t,e){return Ca._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ms.credentialFromTaggedObject(t)}static credentialFromError(t){return ms.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return ms.credential(e,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await gi._fromIdTokenResponse(t,r,o),c=VT(r);return new el({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=VT(r);return new el({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function VT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Sr{constructor(t,e,r,o){super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new zf(t,e,r,o)}}function qA(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(s,u,t,r):u})}async function yN(s,t,e=!1){const r=await Xu(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return el._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(s,t,e=!1){const{auth:r}=s;if(Ui(r.app))return Promise.reject(ya(r));const o="reauthenticate";try{const u=await Xu(s,qA(r,o,t,s),e);bt(u.idToken,r,"internal-error");const c=uy(u.idToken);bt(c,r,"internal-error");const{sub:m}=c;return bt(s.uid===m,r,"user-mismatch"),el._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Tr(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(s,t,e=!1){if(Ui(s.app))return Promise.reject(ya(s));const r="signIn",o=await qA(s,r,t),u=await el._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}function EN(s,t,e,r){return sn(s).onIdTokenChanged(t,e,r)}function TN(s,t,e){return sn(s).beforeAuthStateChanged(t,e)}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=1e3,SN=10;class HA extends FA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);eN()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,SN):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},bN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}HA.type="LOCAL";const AN=HA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends FA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}GA.type="SESSION";const KA=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new cd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(e.origin,u)),g=await wN(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=dy("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function RN(s){Gi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function CN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xN(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function DN(){return QA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebaseLocalStorageDb",NN=1,Bf="firebaseLocalStorage",XA="fbase_key";class fc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function hd(s,t){return s.transaction([Bf],t?"readwrite":"readonly").objectStore(Bf)}function VN(){const s=indexedDB.deleteDatabase(YA);return new fc(s).toPromise()}function hp(){const s=indexedDB.open(YA,NN);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Bf,{keyPath:XA})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Bf)?t(r):(r.close(),await VN(),t(await hp()))})})}async function OT(s,t,e){const r=hd(s,!0).put({[XA]:t,value:e});return new fc(r).toPromise()}async function ON(s,t){const e=hd(s,!1).get(t),r=await new fc(e).toPromise();return r===void 0?null:r.value}function MT(s,t){const e=hd(s,!0).delete(t);return new fc(e).toPromise()}const MN=800,kN=3;class $A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>kN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(DN()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await CN(),!this.activeServiceWorker)return;this.sender=new IN(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||xN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hp();return await OT(t,Uf,"1"),await MT(t,Uf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>OT(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>ON(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>MT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=hd(o,!1).getAll();return new fc(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$A.type="LOCAL";const PN=$A;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(s,t){return t?gr(t):(bt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends BA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Bo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Bo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Bo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function zN(s){return vN(s.auth,new my(s),s.bypassAuthState)}function UN(s){const{auth:t,user:e}=s;return bt(e,t,"internal-error"),_N(e,new my(s),s.bypassAuthState)}async function BN(s){const{auth:t,user:e}=s;return bt(e,t,"internal-error"),yN(e,new my(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return zN;case"linkViaPopup":case"linkViaRedirect":return BN;case"reauthViaPopup":case"reauthViaRedirect":return UN;default:Tr(this.auth,"internal-error")}}resolve(t){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new cc(2e3,1e4);class Mo extends JA{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Mo.currentPopupAction&&Mo.currentPopupAction.cancel(),Mo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const t=dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if((r=(e=this.authWindow)==null?void 0:e.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jN.get())};t()}}Mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="pendingRedirect",mf=new Map;class FN extends JA{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=mf.get(this.auth._key());if(!t){try{const r=await HN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}mf.set(this.auth._key(),t)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HN(s,t){const e=QN(t),r=KN(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function GN(s,t){mf.set(s._key(),t)}function KN(s){return gr(s._redirectPersistence)}function QN(s){return df(qN,s.config.apiKey,s.name)}async function YN(s,t,e=!1){if(Ui(s.app))return Promise.reject(ya(s));const r=hy(s),o=LN(r,t),c=await new FN(r,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=600*1e3;class $N{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!JN(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!ZA(t)){const o=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";e.onError(Hi(this.auth,o))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XN&&this.cachedEventUids.clear(),this.cachedEventUids.has(kT(t))}saveEventToCache(t){this.cachedEventUids.add(kT(t)),this.lastProcessedEventTime=Date.now()}}function kT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function ZA({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function JN(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZA(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(s,t={}){return ll(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tV=/^https?/;async function eV(s){if(s.config.emulator)return;const{authorizedDomains:t}=await ZN(s);for(const e of t)try{if(nV(e))return}catch{}Tr(s,"unauthorized-domain")}function nV(s){const t=up(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!tV.test(e))return!1;if(WN.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new cc(3e4,6e4);function PT(){const s=Gi().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function rV(s){return new Promise((t,e)=>{var o,u,c;function r(){PT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{PT(),e(Hi(s,"network-request-failed"))},timeout:iV.get()})}if((u=(o=Gi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)t(gapi.iframes.getContext());else if((c=Gi().gapi)!=null&&c.load)r();else{const m=cN("iframefcb");return Gi()[m]=()=>{gapi.load?r():e(Hi(s,"network-request-failed"))},lN(`${uN()}?onload=${m}`).catch(g=>e(g))}}).catch(t=>{throw gf=null,t})}let gf=null;function sV(s){return gf=gf||rV(s),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=new cc(5e3,15e3),oV="__/auth/iframe",lV="emulator/auth/iframe",uV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hV(s){const t=s.config;bt(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?oy(t,lV):`https://${s.config.authDomain}/${oV}`,r={apiKey:t.apiKey,appName:s.name,v:il},o=cV.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${Ju(r).slice(1)}`}async function fV(s){const t=await sV(s),e=Gi().gapi;return bt(e,s,"internal-error"),t.open({where:document.body,url:hV(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uV,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=Hi(s,"network-request-failed"),m=Gi().setTimeout(()=>{u(c)},aV.get());function g(){Gi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mV=500,gV=600,pV="_blank",yV="http://localhost";class LT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _V(s,t,e,r=mV,o=gV){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...dV,width:r.toString(),height:o.toString(),top:u,left:c},p=qe().toLowerCase();e&&(m=VA(p)?pV:e),DA(p)&&(t=t||yV,g.scrollbars="yes");const E=Object.entries(g).reduce((I,[M,K])=>`${I}${M}=${K},`,"");if(tN(p)&&m!=="_self")return vV(t||"",m),new LT(null);const T=window.open(t||"",m,E);bt(T,s,"popup-blocked");try{T.focus()}catch{}return new LT(T)}function vV(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="__/auth/handler",TV="emulator/auth/handler",bV=encodeURIComponent("fac");async function zT(s,t,e,r,o,u){bt(s.config.authDomain,s,"auth-domain-config-required"),bt(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:il,eventId:o};if(t instanceof jA){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",UI(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(t instanceof hc){const E=t.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),p=g?`#${bV}=${encodeURIComponent(g)}`:"";return`${SV(s)}?${Ju(m).slice(1)}${p}`}function SV({config:s}){return s.emulator?oy(s,TV):`https://${s.authDomain}/${EV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="webStorageSupport";class AV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KA,this._completeRedirectFn=YN,this._overrideRedirectResult=GN}async _openPopup(t,e,r,o){var c;br((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await zT(t,e,r,up(),o);return _V(t,u,dy())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await zT(t,e,r,up(),o);return RN(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(br(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await fV(t),r=new $N(t);return e.register("authEvent",o=>(bt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Dg,{type:Dg},o=>{var c;const u=(c=o==null?void 0:o[0])==null?void 0:c[Dg];u!==void 0&&e(!!u),Tr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=eV(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return LA()||NA()||cy()}}const wV=AV;var UT="@firebase/auth",BT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CV(s){jo(new va("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;bt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zA(s)},p=new aN(r,o,u,g);return fN(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),jo(new va("auth-internal",t=>{const e=hy(t.getProvider("auth").getImmediate());return(r=>new IV(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(UT,BT,RV(s)),_s(UT,BT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=300,DV=$T("authIdTokenMaxAge")||xV;let jT=null;const NV=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>DV)return;const o=e==null?void 0:e.token;jT!==o&&(jT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function VV(s=ab()){const t=pp(s,"auth");if(t.isInitialized())return t.getImmediate();const e=hN(s,{popupRedirectResolver:wV,persistence:[PN,AN,KA]}),r=$T("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=NV(u.toString());TN(e,c,()=>c(e.currentUser)),EN(e,m=>c(m))}}const o=YT("auth");return o&&dN(e,`http://${o}`),e}function OV(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}oN({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=Hi("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",OV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CV("Browser");const MV={apiKey:"AIzaSyCpZ1iVrU_JwK10gEvi9FGderKYaffgMGg",authDomain:"data-library-5cf6c.firebaseapp.com",projectId:"data-library-5cf6c",storageBucket:"data-library-5cf6c.firebasestorage.app",messagingSenderId:"976961164680",appId:"1:976961164680:web:4aa7027e61f13425bc163d"},WA=sb(MV),Ht=ED(WA);VV(WA);TD(Ht).catch(s=>{s.code==="failed-precondition"?console.warn("IndexedDB  :      ."):s.code==="unimplemented"&&console.warn("IndexedDB  ")});const us=()=>new Date().toISOString(),oe={WORKSPACES:"workspaces",CATEGORIES:"categories",ITEMS:"items",CHECKLISTS:"checklists"},ge={workspaces:{list:async()=>{try{const s=Sn(Qe(Ht,oe.WORKSPACES));return(await An(s)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order??0)-(r.order??0))}catch(s){return console.error("Workspaces  :",s),[]}},create:async s=>{try{const t=Sn(Qe(Ht,oe.WORKSPACES)),o=(await An(t)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await Jh(Qe(Ht,oe.WORKSPACES),{name:s,is_locked:!1,order:o+1,created_at:us()})).id,name:s,is_locked:!1,order:o+1,created_at:us()}}catch(t){throw console.error("Workspace  :",t),t}},update:async(s,t)=>{try{const e=fr(Ht,oe.WORKSPACES,s);await $h(e,t)}catch(e){throw console.error("Workspace  :",e),e}},delete:async s=>{try{const t=Eu(Ht),e=Sn(Qe(Ht,oe.CATEGORIES),di("workspace_id","==",s)),r=await An(e),o=r.docs.map(E=>E.id),u=Sn(Qe(Ht,oe.ITEMS),di("category_id","in",o.length>0?o:["__placeholder__"])),c=await An(u),m=c.docs.map(E=>E.id),g=Sn(Qe(Ht,oe.CHECKLISTS),di("item_id","in",m.length>0?m:["__placeholder__"]));(await An(g)).docs.forEach(E=>t.delete(E.ref)),c.docs.forEach(E=>t.delete(E.ref)),r.docs.forEach(E=>t.delete(E.ref)),t.delete(fr(Ht,oe.WORKSPACES,s)),await t.commit()}catch(t){throw console.error("Workspace  :",t),t}},reorder:async s=>{try{const t=Eu(Ht),e=Sn(Qe(Ht,oe.WORKSPACES));(await An(e)).docs.forEach(o=>{const u=s.indexOf(o.id);u!==-1&&t.update(o.ref,{order:u})}),await t.commit()}catch(t){throw console.error("Workspace   :",t),t}}},categories:{listByWorkspace:async s=>{try{const t=Sn(Qe(Ht,oe.CATEGORIES),di("workspace_id","==",s));return(await An(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>r.name.localeCompare(o.name,"ko"))}catch(t){return console.error("Categories  :",t),[]}},create:async(s,t)=>{try{return{id:(await Jh(Qe(Ht,oe.CATEGORIES),{workspace_id:s,name:t,created_at:us()})).id,workspace_id:s,name:t,created_at:us()}}catch(e){throw console.error("Category  :",e),e}},update:async(s,t)=>{try{const e=fr(Ht,oe.CATEGORIES,s);await $h(e,{name:t})}catch(e){throw console.error("Category  :",e),e}},delete:async s=>{try{const t=Eu(Ht),e=Sn(Qe(Ht,oe.ITEMS),di("category_id","==",s)),r=await An(e),o=r.docs.map(u=>u.id);if(o.length>0){const u=Sn(Qe(Ht,oe.CHECKLISTS),di("item_id","in",o));(await An(u)).docs.forEach(m=>t.delete(m.ref))}r.docs.forEach(u=>t.delete(u.ref)),t.delete(fr(Ht,oe.CATEGORIES,s)),await t.commit()}catch(t){throw console.error("Category  :",t),t}}},items:{listByCategory:async s=>{try{const t=Sn(Qe(Ht,oe.ITEMS),di("category_id","==",s));return(await An(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(t){return console.error("Items  :",t),[]}},create:async s=>{try{const t=Sn(Qe(Ht,oe.ITEMS),di("category_id","==",s)),o=(await An(t)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await Jh(Qe(Ht,oe.ITEMS),{category_id:s,title:" ",description:"",order:o+1,created_at:us()})).id,category_id:s,title:" ",description:"",order:o+1,created_at:us()}}catch(t){throw console.error("Item  :",t),t}},update:async s=>{try{const t=fr(Ht,oe.ITEMS,s.id),e={...s};delete e.id,await $h(t,e)}catch(t){throw console.error("Item  :",t),t}},reorder:async(s,t)=>{try{const e=Eu(Ht),r=Sn(Qe(Ht,oe.ITEMS),di("category_id","==",s));(await An(r)).docs.forEach(u=>{const c=t.indexOf(u.id);c!==-1&&e.update(u.ref,{order:c})}),await e.commit()}catch(e){throw console.error("Item  :",e),e}},delete:async s=>{try{const t=Eu(Ht),e=Sn(Qe(Ht,oe.CHECKLISTS),di("item_id","==",s));(await An(e)).docs.forEach(o=>t.delete(o.ref)),t.delete(fr(Ht,oe.ITEMS,s)),await t.commit()}catch(t){throw console.error("Item  :",t),t}}},checklist:{listByItem:async s=>{try{const t=Sn(Qe(Ht,oe.CHECKLISTS),di("item_id","==",s));return(await An(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){return console.error("Checklists  :",t),[]}},create:async s=>{try{return{id:(await Jh(Qe(Ht,oe.CHECKLISTS),{item_id:s,text:"",is_checked:!1,memo:"",created_at:us()})).id,item_id:s,text:"",is_checked:!1,memo:"",created_at:us()}}catch(t){throw console.error("Checklist  :",t),t}},update:async s=>{try{const t=fr(Ht,oe.CHECKLISTS,s.id),e={...s};delete e.id,await $h(t,e)}catch(t){throw console.error("Checklist  :",t),t}},delete:async s=>{try{await MD(fr(Ht,oe.CHECKLISTS,s))}catch(t){throw console.error("Checklist  :",t),t}}}},kV=({categories:s,selectedCategoryId:t,onSelectCategory:e,onRefresh:r,workspaceName:o,isLocked:u,onAddCategory:c,onDeleteWorkspace:m,onToggleLock:g})=>{const[p,E]=Tt.useState(!1),[T,I]=Tt.useState(""),[M,K]=Tt.useState(null),[Q,J]=Tt.useState(""),[it,rt]=Tt.useState("light");Tt.useEffect(()=>{document.documentElement.classList.contains("light-mode")?rt("light"):rt("dark")},[]);const et=A=>{rt(A),A==="light"?document.documentElement.classList.add("light-mode"):document.documentElement.classList.remove("light-mode")},mt=()=>{if(!T.trim()){E(!1);return}c(T),I(""),E(!1)},vt=(A,w,x)=>{A.stopPropagation(),K(w),J(x)},ft=async A=>{if(!Q.trim()){K(null);return}await ge.categories.update(A,Q),r(),K(null)},C=async(A,w)=>{A.stopPropagation(),window.confirm("    . ?")&&(await ge.categories.delete(w),r(),t===w&&e(""))},R=A=>{if(A.preventDefault(),A.stopPropagation(),u){alert("     .");return}window.confirm(`'${o}'  ?
    ,      .`)&&m()};return L.jsxs("div",{className:"flex flex-col h-full w-full",children:[L.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-border bg-zinc-950/50 flex-shrink-0",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsxs("span",{className:"font-bold text-lg tracking-tight text-white leading-none",children:["",L.jsx("span",{className:"text-accent",children:""})]}),u&&L.jsx(Ng,{className:"w-3.5 h-3.5 text-amber-500/80"})]}),L.jsxs("div",{className:"flex bg-zinc-900 p-0.5 rounded-md border border-zinc-800/50",children:[L.jsx("button",{onClick:()=>et("dark"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${it==="dark"?"bg-zinc-700 text-white shadow ring-1 ring-black/20":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Dark Mode",children:"D"}),L.jsx("button",{onClick:()=>et("light"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${it==="light"?"bg-white text-zinc-900 shadow ring-1 ring-black/5":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Light Mode",children:"L"})]})]}),L.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar",children:[L.jsx("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider px-2 mb-2",children:" "}),s.map(A=>L.jsxs("div",{onClick:()=>e(A.id),onDoubleClick:w=>vt(w,A.id,A.name),className:`group flex items-center justify-between px-4 py-3 md:py-2.5 rounded-lg cursor-pointer transition-all ${t===A.id?"bg-accent/10 text-accent border border-accent/20":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/50 border border-transparent"}`,children:[L.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[L.jsx(pe.Folder,{className:`w-5 h-5 md:w-4 md:h-4 flex-shrink-0 ${t===A.id?"fill-accent/20":""}`}),M===A.id?L.jsx("input",{autoFocus:!0,type:"text",value:Q,onChange:w=>J(w.target.value),onBlur:()=>ft(A.id),onKeyDown:w=>{w.stopPropagation(),w.key==="Enter"&&ft(A.id),w.key==="Escape"&&K(null)},onClick:w=>w.stopPropagation(),className:"flex-1 bg-zinc-950 border border-accent rounded px-1 py-0 text-sm text-white focus:outline-none"}):L.jsx("span",{className:"text-base md:text-sm font-medium truncate",children:A.name})]}),M!==A.id&&L.jsxs("div",{className:"flex items-center",children:[L.jsx(pe.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden"}),L.jsx("button",{type:"button",onClick:w=>C(w,A.id),className:"hidden md:block opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",children:L.jsx(pe.Trash,{className:"w-3.5 h-3.5"})})]})]},A.id)),p?L.jsx("div",{className:"px-3 py-2",children:L.jsx("input",{autoFocus:!0,type:"text",value:T,onChange:A=>I(A.target.value),onBlur:mt,onKeyDown:A=>A.key==="Enter"&&mt(),placeholder:"...",className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none"})}):L.jsxs("button",{type:"button",onClick:()=>E(!0),className:"w-full flex items-center gap-2 px-3 py-3 md:py-2.5 text-sm text-zinc-500 hover:text-accent hover:bg-zinc-800/50 rounded-lg transition-colors border border-dashed border-zinc-800 hover:border-zinc-700 mt-2",children:[L.jsx(pe.Plus,{className:"w-4 h-4"}),"  "]})]}),L.jsx("div",{className:"p-4 border-t border-border bg-zinc-950/50 mt-auto",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsxs("button",{type:"button",onClick:g,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-amber-500/10 border-amber-500/30 text-amber-500 hover:bg-amber-500/20":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:text-zinc-200 hover:bg-zinc-700"}`,title:u?" ":" ",children:[u?L.jsx(Ng,{className:"w-3.5 h-3.5"}):L.jsx(lI,{className:"w-3.5 h-3.5"}),u?" ":" "]}),L.jsxs("button",{type:"button",onClick:R,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-zinc-900 border-zinc-800 text-zinc-600 cursor-not-allowed opacity-50":"bg-red-500/10 border-red-500/20 text-red-500 hover:bg-red-500/20 hover:border-red-500/40"}`,children:[L.jsx(pe.Trash,{className:"w-3.5 h-3.5"})," "]})]})})]})},PV=({categoryName:s,items:t,selectedItemId:e,onSelectItem:r,onAddItem:o,onDeleteItem:u,onReorder:c,loading:m,onBack:g})=>{const p=Tt.useRef(null),E=Tt.useRef(null),[T,I]=Tt.useState(t);Tt.useEffect(()=>{I(t)},[t]);const M=(it,rt)=>{p.current=rt,it.dataTransfer.effectAllowed="move",it.dataTransfer.setData("text/html",it.currentTarget.innerHTML)},K=(it,rt)=>{E.current=rt,it.preventDefault()},Q=it=>{it.preventDefault(),it.dataTransfer.dropEffect="move"},J=it=>{it.preventDefault();const rt=p.current,et=E.current;if(rt!==null&&et!==null&&rt!==et){const mt=[...T],vt=mt[rt];mt.splice(rt,1),mt.splice(et,0,vt),I(mt),c(mt)}p.current=null,E.current=null};return L.jsxs("div",{className:"flex flex-col h-full w-full",children:[L.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-border bg-background/50 flex-shrink-0",children:[L.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[L.jsx("button",{onClick:g,className:"md:hidden p-1 -ml-1 text-zinc-400 hover:text-white",children:L.jsx(pe.Back,{className:"w-5 h-5"})}),L.jsx("h2",{className:"font-semibold text-zinc-200 truncate pr-2 text-base md:text-sm",title:s,children:s||""})]}),L.jsx("button",{onClick:o,className:"p-1.5 text-zinc-400 hover:text-accent hover:bg-zinc-800 rounded-md transition-colors",title:"  ",children:L.jsx(pe.Plus,{className:"w-5 h-5"})})]}),L.jsx("div",{className:"flex-1 overflow-y-auto",children:m?L.jsx("div",{className:"p-4 space-y-3 opacity-50",children:[1,2,3].map(it=>L.jsx("div",{className:"h-12 bg-zinc-800/50 rounded animate-pulse"},it))}):T.length>0?L.jsx("div",{className:"divide-y divide-border/50",children:T.map((it,rt)=>L.jsxs("div",{draggable:!0,onDragStart:et=>M(et,rt),onDragEnter:et=>K(et,rt),onDragOver:Q,onDrop:J,onClick:()=>r(it.id),className:`group px-3 py-4 md:py-3 cursor-pointer hover:bg-zinc-900 transition-colors relative flex items-center gap-2 ${e===it.id?"bg-zinc-900 border-l-2 border-accent":"border-l-2 border-transparent"}`,children:[L.jsx("div",{className:"cursor-grab active:cursor-grabbing p-1 text-zinc-600 hover:text-zinc-400 hidden md:block",children:L.jsx(pe.DragHandle,{className:"w-4 h-4"})}),L.jsx("div",{className:"flex-1 min-w-0 pr-6",children:L.jsx("h3",{className:`text-base md:text-sm font-medium leading-tight truncate ${e===it.id?"text-white":"text-zinc-300"}`,children:it.title||" "})}),L.jsx(pe.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden absolute right-3 top-1/2 -translate-y-1/2"}),L.jsx("button",{onClick:et=>{et.stopPropagation(),window.confirm("?")&&u(it.id)},className:"hidden md:block opacity-0 group-hover:opacity-100 p-1.5 text-zinc-600 hover:text-danger hover:bg-zinc-800 rounded transition-all absolute right-2 top-1/2 -translate-y-1/2",children:L.jsx(pe.Trash,{className:"w-4 h-4"})})]},it.id))}):L.jsxs("div",{className:"p-8 text-center text-zinc-500",children:[L.jsx("p",{className:"text-sm",children:" ."}),L.jsx("button",{onClick:o,className:"text-xs text-accent mt-2 hover:underline",children:"+   "})]})})]})},LV=({itemId:s,onOpenMemo:t})=>{const[e,r]=Tt.useState([]),[o,u]=Tt.useState(!0),[c,m]=Tt.useState(""),[g,p]=Tt.useState(null),[E,T]=Tt.useState(null),[I,M]=Tt.useState(""),K=dp.useRef(null),Q=async()=>{const w=await ge.checklist.listByItem(s);r(w),u(!1)};Tt.useEffect(()=>{Q()},[s]);const J=async()=>{if(!c.trim())return;const w=await ge.checklist.create(s),x={...w,text:c};r(k=>[...k,x]),m(""),await ge.checklist.update({id:w.id,text:x.text})},it=w=>{w.key==="Enter"&&!w.nativeEvent.isComposing&&(w.preventDefault(),J())},rt=async(w,x)=>{r(k=>k.map(D=>D.id===w?{...D,...x}:D)),await ge.checklist.update({id:w,...x})},et=(w,x)=>{p(null),rt(w,{memo:x})},mt=async w=>{window.confirm("  ?")&&(r(x=>x.filter(k=>k.id!==w)),await ge.checklist.delete(w))},vt=(w,x)=>{T(w),M(x)},ft=async w=>{var x;I!==((x=e.find(k=>k.id===w))==null?void 0:x.text)&&await rt(w,{text:I}),T(null)},C=(w,x)=>{vt(w,x)},R=(w,x)=>{K.current=setTimeout(()=>{vt(w,x)},300)},A=()=>{K.current&&(clearTimeout(K.current),K.current=null)};return o?L.jsx("div",{className:"text-secondary text-sm",children:" ..."}):L.jsxs("div",{className:"h-full flex flex-col pt-2",children:[L.jsxs("div",{className:"mb-4 flex-shrink-0 flex items-center gap-2",children:[L.jsx("input",{type:"text",value:c,onChange:w=>m(w.target.value),onKeyDown:it,placeholder:"   ",className:"flex-1 bg-zinc-900/50 border border-zinc-700 text-sm text-zinc-200 rounded-lg py-2.5 px-3 focus:ring-1 focus:ring-accent focus:border-accent focus:outline-none transition-all placeholder-zinc-600 shadow-sm"}),L.jsx("button",{onClick:J,disabled:!c.trim(),className:"flex-shrink-0 p-2.5 bg-accent/10 border border-accent/30 text-accent rounded-lg hover:bg-accent/20 hover:border-accent/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",title:"  ( Enter )",children:L.jsx(pe.Plus,{className:"w-5 h-5"})})]}),L.jsxs("div",{className:"space-y-2 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:[e.map(w=>L.jsxs("div",{className:"group flex items-start gap-3 p-2.5 rounded-lg hover:bg-green-500/20 transition-colors border border-transparent hover:border-green-500/30",children:[L.jsx("div",{className:"pt-1",children:L.jsx("input",{type:"checkbox",checked:w.is_checked,onChange:x=>rt(w.id,{is_checked:x.target.checked}),className:"w-4 h-4 rounded border-zinc-600 bg-zinc-900 text-emerald-500 focus:ring-emerald-500/20 focus:ring-offset-0 cursor-pointer accent-emerald-500"})}),L.jsxs("div",{className:"flex-1 min-w-0",children:[E===w.id?L.jsx("input",{autoFocus:!0,type:"text",value:I,onChange:x=>M(x.target.value),onBlur:()=>ft(w.id),onKeyDown:x=>{x.key==="Enter"&&ft(w.id),x.key==="Escape"&&T(null)},className:"w-full bg-zinc-950 border border-accent rounded px-1 py-3 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent min-h-10"}):L.jsx("div",{onDoubleClick:()=>C(w.id,w.text),onTouchStart:()=>R(w.id,w.text),onTouchEnd:A,className:`w-full p-0 text-sm cursor-text select-none ${w.is_checked?"text-yellow-300 line-through decoration-yellow-300":"text-zinc-200"}`,children:w.text||"  ..."}),w.memo&&(g===w.id?L.jsx("div",{className:"mt-1.5 w-full",children:L.jsx("input",{autoFocus:!0,type:"text",defaultValue:w.memo,onBlur:x=>et(w.id,x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),x.currentTarget.blur()),x.key==="Escape"&&p(null)},className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-xs text-zinc-200 focus:outline-none placeholder-zinc-500 shadow-sm"})}):L.jsxs("div",{className:"mt-1.5 text-xs text-zinc-500/80 flex items-center gap-1.5 cursor-pointer w-fit py-0.5 rounded transition-colors hover:text-zinc-300 select-none group/memo",onDoubleClick:()=>p(w.id),title:"  ",children:[L.jsx(pe.Memo,{className:"w-3 h-3 flex-shrink-0"}),L.jsx("span",{className:"truncate max-w-[200px]",children:w.memo})]}))]}),L.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[L.jsx("button",{onClick:()=>t(w),className:`p-1.5 rounded transition-colors ${w.memo?"text-accent bg-accent/10":"text-zinc-500 hover:text-accent hover:bg-zinc-700"}`,title:"  ",children:L.jsx(pe.Memo,{className:"w-4 h-4"})}),L.jsx("button",{onClick:()=>mt(w.id),className:"p-1.5 text-zinc-500 hover:text-danger hover:bg-zinc-700 rounded transition-colors",title:"",children:L.jsx(pe.Trash,{className:"w-4 h-4"})})]})]},w.id)),e.length===0&&L.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-zinc-800/50 rounded-xl text-zinc-600 text-sm bg-zinc-900/20",children:["  .",L.jsx("br",{}),L.jsx("span",{className:"text-xs text-zinc-700 mt-1 block",children:"    ."})]})]})]})},zV=({item:s,onUpdateItem:t,onOpenMemo:e,onBack:r})=>{const[o,u]=Tt.useState(s.title),[c,m]=Tt.useState(s.description),[g,p]=Tt.useState(!1),[E,T]=Tt.useState(!1),[I,M]=Tt.useState(!1),[K,Q]=Tt.useState(!1),J=dp.useRef(null);Tt.useEffect(()=>{u(s.title),m(s.description),T(!1)},[s.id,s.title,s.description]);const it=async()=>{o!==s.title&&(p(!0),await ge.items.update({id:s.id,title:o}),t(s.id,{title:o}),p(!1))},rt=async()=>{T(!1),c!==s.description&&(p(!0),await ge.items.update({id:s.id,description:c}),t(s.id,{description:c}),p(!1))},et=()=>{T(!0)},mt=()=>{J.current=setTimeout(()=>{T(!0)},300)},vt=()=>{J.current&&(clearTimeout(J.current),J.current=null)},ft=C=>{if(!C)return null;const R=/(https?:\/\/[^\s]+)/g;return C.split(R).map((A,w)=>A.match(R)?L.jsx("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline break-all relative z-20",onClick:x=>x.stopPropagation(),children:A},w):A)};return L.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[L.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[L.jsx("button",{onClick:r,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white",children:L.jsx(pe.Back,{className:"w-5 h-5"})}),L.jsx("input",{type:"text",value:o,onChange:C=>u(C.target.value),onBlur:it,className:"flex-1 bg-transparent text-lg md:text-xl font-bold text-white placeholder-zinc-600 border-none p-0 focus:ring-0 focus:outline-none truncate",placeholder:"  "}),g&&L.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 text-xs text-accent bg-accent/10 px-2 py-1 rounded-full animate-pulse",children:[L.jsx(pe.Save,{className:"w-3.5 h-3.5"}),L.jsx("span",{className:"hidden sm:inline",children:" ..."})]})]}),L.jsx("div",{className:"flex-1 flex flex-col p-4 md:p-6 gap-4 md:gap-5 min-h-0",children:L.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[L.jsxs("div",{className:"h-[40%] min-h-[200px] flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden group focus-within:border-zinc-600 transition-colors",children:[L.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2.5 border-b border-border/50 bg-zinc-900/30",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(pe.File,{className:"w-4 h-4 text-zinc-400"}),L.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:" "})]}),L.jsx("button",{onClick:()=>M(!0),className:"text-xs px-2 py-1 rounded bg-accent/20 text-accent hover:bg-accent/30 transition-colors",title:"  ",children:""})]}),E?L.jsx("textarea",{autoFocus:!0,value:c,onChange:C=>m(C.target.value),onBlur:rt,className:"flex-1 w-full bg-transparent border-none p-4 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):L.jsx("div",{onDoubleClick:et,onTouchStart:mt,onTouchEnd:vt,className:"flex-1 w-full p-4 text-sm text-zinc-300 overflow-y-auto whitespace-pre-wrap leading-relaxed custom-scrollbar cursor-text select-none hover:bg-white/5 transition-colors",title:"  ",children:c?ft(c):L.jsx("span",{className:"text-zinc-700",children:"      ..."})})]}),L.jsx("div",{className:"flex-1 flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden min-h-0 group focus-within:border-zinc-600 transition-colors",children:L.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:L.jsx(LV,{itemId:s.id,onOpenMemo:e})})})]})}),I&&L.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:L.jsxs("div",{className:"bg-surface rounded-lg shadow-lg flex flex-col h-[90vh] max-w-2xl w-full",children:[L.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border bg-zinc-900/30",children:[L.jsx("span",{className:"text-lg font-semibold text-white",children:" "}),L.jsx("button",{onClick:()=>{M(!1),Q(!1)},className:"text-zinc-400 hover:text-white text-2xl",children:""})]}),K?L.jsx("textarea",{autoFocus:!0,value:c,onChange:C=>m(C.target.value),className:"flex-1 w-full bg-transparent border-none p-6 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):L.jsx("div",{className:"flex-1 overflow-y-auto p-6 text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed custom-scrollbar",children:c?ft(c):L.jsx("span",{className:"text-zinc-700",children:" ."})}),L.jsx("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-border bg-zinc-900/30",children:K?L.jsxs(L.Fragment,{children:[L.jsx("button",{onClick:()=>{m(s.description),Q(!1)},className:"px-4 py-2 rounded bg-zinc-700 text-white hover:bg-zinc-600 transition-colors text-sm",children:""}),L.jsx("button",{onClick:async()=>{c!==s.description&&(p(!0),await ge.items.update({id:s.id,description:c}),t(s.id,{description:c}),p(!1)),Q(!1)},className:"px-4 py-2 rounded bg-accent text-white hover:bg-accent/90 transition-colors text-sm",children:""})]}):L.jsxs(L.Fragment,{children:[L.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600 transition-colors text-sm",children:""}),L.jsx("button",{onClick:()=>Q(!0),className:"px-4 py-2 rounded bg-yellow-500 text-white hover:bg-yellow-600 transition-colors text-sm",children:""})]})})]})})]})},UV=({isOpen:s,onClose:t,checklistItem:e,onSave:r})=>{const[o,u]=Tt.useState(""),[c,m]=Tt.useState(!1);if(Tt.useEffect(()=>{e&&(u(e.memo||""),m(!1))},[e]),!s||!e)return null;const g=()=>{r(e.id,o),m(!1)},p=()=>{g()};return L.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:L.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col shadow-black/50",children:[L.jsx("div",{className:"p-6 flex-1 flex flex-col min-h-[450px]",children:c?L.jsx("textarea",{className:"flex-1 w-full bg-zinc-950 border border-border rounded-lg p-5 text-base text-zinc-200 resize-none focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent custom-scrollbar leading-relaxed",placeholder:"   ...",value:o,onChange:E=>u(E.target.value),onBlur:p,autoFocus:!0}):L.jsx("div",{className:"flex-1 w-full bg-zinc-900/30 rounded-lg p-5 text-base text-zinc-300 overflow-y-auto custom-scrollbar whitespace-pre-wrap cursor-pointer hover:bg-zinc-900/50 transition-colors border border-transparent hover:border-zinc-800",onDoubleClick:()=>m(!0),title:" ",children:o||L.jsx("span",{className:"text-zinc-500 italic",children:"  .   ."})})}),L.jsxs("div",{className:"p-4 border-t border-border bg-zinc-950/30 flex justify-end gap-3",children:[c?L.jsxs("button",{onClick:g,className:"px-6 py-2.5 text-sm font-medium text-white bg-accent hover:bg-blue-600 rounded-md shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[L.jsx(pe.Save,{className:"w-4 h-4"}),""]}):L.jsx("button",{onClick:()=>m(!0),className:"px-6 py-2.5 text-sm font-medium text-zinc-300 hover:text-white hover:bg-zinc-800 rounded-md transition-colors",children:""}),L.jsx("button",{onClick:t,className:"px-6 py-2.5 text-sm font-medium text-zinc-400 hover:text-white hover:bg-zinc-800 rounded-md transition-colors border border-zinc-800 hover:border-zinc-700",children:""})]})]})})},BV=({workspace:s,onDelete:t,onUpdate:e})=>{const[r,o]=Tt.useState([]),[u,c]=Tt.useState(null),[m,g]=Tt.useState([]),[p,E]=Tt.useState(null),[T,I]=Tt.useState(!1),[M,K]=Tt.useState(!1),[Q,J]=Tt.useState(null);Tt.useEffect(()=>{it(),c(null),g([]),E(null)},[s.id]),Tt.useEffect(()=>{u?(rt(u),E(null)):(g([]),E(null))},[u]);const it=async()=>{const F=await ge.categories.listByWorkspace(s.id);o(F)},rt=async F=>{I(!0);const nt=await ge.items.listByCategory(F);g(nt),I(!1)},et=async F=>{const nt=await ge.categories.create(s.id,F);await it(),c(nt.id)},mt=async()=>{if(!u)return;const F=await ge.items.create(u);g([...m,F]),E(F.id)},vt=async F=>{await ge.items.delete(F),g(nt=>nt.filter(pt=>pt.id!==F)),p===F&&E(null)},ft=async F=>{g(F),u&&await ge.items.reorder(u,F.map(nt=>nt.id))},C=(F,nt)=>{g(pt=>pt.map(Vt=>Vt.id===F?{...Vt,...nt}:Vt))},R=F=>{J(F),K(!0)},A=async(F,nt)=>{await ge.checklist.update({id:F,memo:nt}),le&&E(le.id)},w=()=>{t(s.id)},x=()=>{e(s.id,{is_locked:!s.is_locked})},k=()=>{c(null)},D=()=>{E(null)},ee=r.find(F=>F.id===u),le=m.find(F=>F.id===p);return L.jsxs("div",{className:"flex h-full w-full bg-background text-zinc-100 font-sans selection:bg-accent/30 overflow-hidden relative",children:[L.jsx("div",{className:`${u?"hidden md:flex":"flex"} w-full md:w-64 flex-col border-r border-border bg-surface`,children:L.jsx(kV,{categories:r,selectedCategoryId:u,onSelectCategory:c,onRefresh:it,workspaceName:s.name,isLocked:s.is_locked,onAddCategory:et,onDeleteWorkspace:w,onToggleLock:x})}),L.jsx("div",{className:`${u&&!p?"flex":"hidden md:flex"} ${u?"w-full md:w-80":"hidden md:flex md:w-80"} flex-col border-r border-border bg-background`,children:u?L.jsx(PV,{categoryName:ee==null?void 0:ee.name,items:m,selectedItemId:p,onSelectItem:E,onAddItem:mt,onDeleteItem:vt,onReorder:ft,loading:T,onBack:k}):L.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[L.jsx(pe.Folder,{className:"w-12 h-12 mb-2 opacity-20"}),L.jsx("p",{className:"text-sm",children:" "})]})}),L.jsx("div",{className:`${p?"flex":"hidden md:flex"} flex-1 flex-col h-full bg-background relative min-w-0`,children:le?L.jsx(zV,{item:le,onUpdateItem:C,onOpenMemo:R,onBack:D},le.id):L.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[L.jsx("div",{className:"w-16 h-16 bg-zinc-900/50 rounded-2xl flex items-center justify-center mb-4 border border-zinc-800",children:L.jsx(pe.File,{className:"w-8 h-8 text-zinc-700"})}),L.jsx("p",{className:"text-zinc-500",children:"   ."})]})}),L.jsx(UV,{isOpen:M,onClose:()=>K(!1),checklistItem:Q,onSave:A})]})},jV=({workspaces:s,activeWorkspaceId:t,onSwitch:e,onUpdate:r})=>{const[o,u]=Tt.useState(null),[c,m]=Tt.useState(""),g=async()=>{const M=await ge.workspaces.create(`  ${s.length+1}`);r(),e(M.id)},p=M=>{M.is_locked||(u(M.id),m(M.name))},E=async()=>{o&&c.trim()&&(await ge.workspaces.update(o,{name:c}),r()),u(null)},T=async M=>{const K=s.findIndex(Q=>Q.id===M);if(K>0){const Q=[...s];[Q[K-1],Q[K]]=[Q[K],Q[K-1]],await ge.workspaces.reorder(Q.map(J=>J.id)),r()}},I=async M=>{const K=s.findIndex(Q=>Q.id===M);if(K<s.length-1){const Q=[...s];[Q[K],Q[K+1]]=[Q[K+1],Q[K]],await ge.workspaces.reorder(Q.map(J=>J.id)),r()}};return L.jsxs("div",{className:"h-12 bg-zinc-950 border-t border-border flex items-center flex-shrink-0 z-50 relative",children:[L.jsxs("div",{className:"flex-1 flex items-center gap-2 px-4 overflow-x-auto h-full [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:[s.map((M,K)=>L.jsxs("div",{className:`group flex-shrink-0 relative flex items-center rounded-md transition-all min-w-max border select-none ${t===M.id?"bg-zinc-800 text-white border-zinc-700 shadow-sm":"bg-transparent text-zinc-500 border-transparent hover:bg-zinc-900 hover:text-zinc-300"}`,children:[L.jsx("button",{onClick:Q=>{Q.stopPropagation(),T(M.id)},className:`p-1 transition-opacity ${K===0?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:K===0,title:" ",children:L.jsx(pe.ChevronLeft,{className:"w-3.5 h-3.5"})}),L.jsx("div",{onClick:()=>e(M.id),className:"flex items-center gap-2 px-3 py-1.5 cursor-pointer flex-1",onDoubleClick:()=>p(M),children:o===M.id?L.jsx("input",{autoFocus:!0,className:"bg-zinc-950 text-white text-xs px-1 py-0.5 rounded border border-accent w-full focus:outline-none",value:c,onChange:Q=>m(Q.target.value),onBlur:E,onKeyDown:Q=>Q.key==="Enter"&&E(),onClick:Q=>Q.stopPropagation()}):L.jsxs(L.Fragment,{children:[M.is_locked?L.jsx(Ng,{className:"w-3 h-3 text-amber-500/70"}):L.jsx(pe.Dashboard,{className:`w-3.5 h-3.5 ${t===M.id?"text-accent":"opacity-70"}`}),L.jsx("span",{className:"text-xs font-medium truncate",children:M.name})]})}),L.jsx("button",{onClick:Q=>{Q.stopPropagation(),I(M.id)},className:`p-1 transition-opacity ${K===s.length-1?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:K===s.length-1,title:" ",children:L.jsx(pe.ChevronRight,{className:"w-3.5 h-3.5"})})]},M.id)),L.jsx("div",{className:"w-2 flex-shrink-0"})]}),L.jsx("div",{className:"flex-shrink-0 flex items-center pl-2 pr-2 h-full bg-zinc-950 border-l border-border relative z-10 shadow-[-10px_0_20px_-5px_rgba(0,0,0,0.8)]",children:L.jsx("button",{onClick:g,className:"p-1.5 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",title:"  ",children:L.jsx(pe.Plus,{className:"w-5 h-5"})})})]})},qV=()=>{const[s,t]=Tt.useState([]),[e,r]=Tt.useState(null),o=Tt.useCallback(async()=>{const g=await ge.workspaces.list();t(g)},[]);Tt.useEffect(()=>{o()},[o]),Tt.useEffect(()=>{s.length>0?e&&s.find(g=>g.id===e)||r(s[0].id):r(null)},[s,e]);const u=Tt.useCallback(async g=>{await ge.workspaces.delete(g),await o()},[o]),c=Tt.useCallback(async(g,p)=>{await ge.workspaces.update(g,p),t(E=>E.map(T=>T.id===g?{...T,...p}:T))},[]),m=s.find(g=>g.id===e);return L.jsxs("div",{className:"flex flex-col h-screen bg-black text-zinc-100 font-sans overflow-hidden",children:[L.jsx("div",{className:"flex-1 overflow-hidden relative",children:m?L.jsx(BV,{workspace:m,onDelete:u,onUpdate:c}):L.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:" ."})}),L.jsx(jV,{workspaces:s,activeWorkspaceId:e,onSwitch:r,onUpdate:o})]})};if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("/Data-Library/sw.js").then(t=>{console.log("ServiceWorker registration successful"),setInterval(()=>{t.update()},6e4)}).catch(t=>{console.log("ServiceWorker registration failed:",t)})});let s=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{s||(s=!0,window.location.reload())})}const t1=document.getElementById("root");if(!t1)throw new Error("Could not find root element to mount to");const FV=jw.createRoot(t1);FV.render(L.jsx(dp.StrictMode,{children:L.jsx(qV,{})}));
