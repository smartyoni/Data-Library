(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function xb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Em={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function PT(){if(N0)return Zl;N0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=t,Zl.jsx=n,Zl.jsxs=n,Zl}var D0;function BT(){return D0||(D0=1,Em.exports=PT()),Em.exports}var b=BT(),xm={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function LT(){if(V0)return Bt;V0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function N(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,K={};function dt(M,tt,lt){this.props=M,this.context=tt,this.refs=K,this.updater=lt||B}dt.prototype.isReactComponent={},dt.prototype.setState=function(M,tt){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,tt,"setState")},dt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Z(){}Z.prototype=dt.prototype;function et(M,tt,lt){this.props=M,this.context=tt,this.refs=K,this.updater=lt||B}var ot=et.prototype=new Z;ot.constructor=et,P(ot,dt.prototype),ot.isPureReactComponent=!0;var xt=Array.isArray;function _t(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(M,tt,lt){var pt=lt.ref;return{$$typeof:s,type:M,key:tt,ref:pt!==void 0?pt:null,props:lt}}function k(M,tt){return C(M.type,tt,M.props)}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function z(M){var tt={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(lt){return tt[lt]})}var R=/\/+/g;function Lt(M,tt){return typeof M=="object"&&M!==null&&M.key!=null?z(""+M.key):tt.toString(36)}function ne(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(_t,_t):(M.status="pending",M.then(function(tt){M.status==="pending"&&(M.status="fulfilled",M.value=tt)},function(tt){M.status==="pending"&&(M.status="rejected",M.reason=tt)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,tt,lt,pt,Nt){var kt=typeof M;(kt==="undefined"||kt==="boolean")&&(M=null);var it=!1;if(M===null)it=!0;else switch(kt){case"bigint":case"string":case"number":it=!0;break;case"object":switch(M.$$typeof){case s:case t:it=!0;break;case E:return it=M._init,X(it(M._payload),tt,lt,pt,Nt)}}if(it)return Nt=Nt(M),it=pt===""?"."+Lt(M,0):pt,xt(Nt)?(lt="",it!=null&&(lt=it.replace(R,"$&/")+"/"),X(Nt,tt,lt,"",function(H){return H})):Nt!=null&&(V(Nt)&&(Nt=k(Nt,lt+(Nt.key==null||M&&M.key===Nt.key?"":(""+Nt.key).replace(R,"$&/")+"/")+it)),tt.push(Nt)),1;it=0;var Rt=pt===""?".":pt+":";if(xt(M))for(var wt=0;wt<M.length;wt++)pt=M[wt],kt=Rt+Lt(pt,wt),it+=X(pt,tt,lt,kt,Nt);else if(wt=N(M),typeof wt=="function")for(M=wt.call(M),wt=0;!(pt=M.next()).done;)pt=pt.value,kt=Rt+Lt(pt,wt++),it+=X(pt,tt,lt,kt,Nt);else if(kt==="object"){if(typeof M.then=="function")return X(ne(M),tt,lt,pt,Nt);throw tt=String(M),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return it}function ut(M,tt,lt){if(M==null)return M;var pt=[],Nt=0;return X(M,pt,"","",function(kt){return tt.call(lt,kt,Nt++)}),pt}function Tt(M){if(M._status===-1){var tt=M._result;tt=tt(),tt.then(function(lt){(M._status===0||M._status===-1)&&(M._status=1,M._result=lt)},function(lt){(M._status===0||M._status===-1)&&(M._status=2,M._result=lt)}),M._status===-1&&(M._status=0,M._result=tt)}if(M._status===1)return M._result.default;throw M._result}var Ut=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Kt={map:ut,forEach:function(M,tt,lt){ut(M,function(){tt.apply(this,arguments)},lt)},count:function(M){var tt=0;return ut(M,function(){tt++}),tt},toArray:function(M){return ut(M,function(tt){return tt})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Bt.Activity=x,Bt.Children=Kt,Bt.Component=dt,Bt.Fragment=n,Bt.Profiler=o,Bt.PureComponent=et,Bt.StrictMode=r,Bt.Suspense=g,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},Bt.cache=function(M){return function(){return M.apply(null,arguments)}},Bt.cacheSignal=function(){return null},Bt.cloneElement=function(M,tt,lt){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var pt=P({},M.props),Nt=M.key;if(tt!=null)for(kt in tt.key!==void 0&&(Nt=""+tt.key),tt)!A.call(tt,kt)||kt==="key"||kt==="__self"||kt==="__source"||kt==="ref"&&tt.ref===void 0||(pt[kt]=tt[kt]);var kt=arguments.length-2;if(kt===1)pt.children=lt;else if(1<kt){for(var it=Array(kt),Rt=0;Rt<kt;Rt++)it[Rt]=arguments[Rt+2];pt.children=it}return C(M.type,Nt,pt)},Bt.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Bt.createElement=function(M,tt,lt){var pt,Nt={},kt=null;if(tt!=null)for(pt in tt.key!==void 0&&(kt=""+tt.key),tt)A.call(tt,pt)&&pt!=="key"&&pt!=="__self"&&pt!=="__source"&&(Nt[pt]=tt[pt]);var it=arguments.length-2;if(it===1)Nt.children=lt;else if(1<it){for(var Rt=Array(it),wt=0;wt<it;wt++)Rt[wt]=arguments[wt+2];Nt.children=Rt}if(M&&M.defaultProps)for(pt in it=M.defaultProps,it)Nt[pt]===void 0&&(Nt[pt]=it[pt]);return C(M,kt,Nt)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(M){return{$$typeof:m,render:M}},Bt.isValidElement=V,Bt.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:Tt}},Bt.memo=function(M,tt){return{$$typeof:p,type:M,compare:tt===void 0?null:tt}},Bt.startTransition=function(M){var tt=I.T,lt={};I.T=lt;try{var pt=M(),Nt=I.S;Nt!==null&&Nt(lt,pt),typeof pt=="object"&&pt!==null&&typeof pt.then=="function"&&pt.then(_t,Ut)}catch(kt){Ut(kt)}finally{tt!==null&&lt.types!==null&&(tt.types=lt.types),I.T=tt}},Bt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Bt.use=function(M){return I.H.use(M)},Bt.useActionState=function(M,tt,lt){return I.H.useActionState(M,tt,lt)},Bt.useCallback=function(M,tt){return I.H.useCallback(M,tt)},Bt.useContext=function(M){return I.H.useContext(M)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(M,tt){return I.H.useDeferredValue(M,tt)},Bt.useEffect=function(M,tt){return I.H.useEffect(M,tt)},Bt.useEffectEvent=function(M){return I.H.useEffectEvent(M)},Bt.useId=function(){return I.H.useId()},Bt.useImperativeHandle=function(M,tt,lt){return I.H.useImperativeHandle(M,tt,lt)},Bt.useInsertionEffect=function(M,tt){return I.H.useInsertionEffect(M,tt)},Bt.useLayoutEffect=function(M,tt){return I.H.useLayoutEffect(M,tt)},Bt.useMemo=function(M,tt){return I.H.useMemo(M,tt)},Bt.useOptimistic=function(M,tt){return I.H.useOptimistic(M,tt)},Bt.useReducer=function(M,tt,lt){return I.H.useReducer(M,tt,lt)},Bt.useRef=function(M){return I.H.useRef(M)},Bt.useState=function(M){return I.H.useState(M)},Bt.useSyncExternalStore=function(M,tt,lt){return I.H.useSyncExternalStore(M,tt,lt)},Bt.useTransition=function(){return I.H.useTransition()},Bt.version="19.2.3",Bt}var M0;function _g(){return M0||(M0=1,xm.exports=LT()),xm.exports}var $=_g();const vg=xb($);var Tm={exports:{}},$l={},wm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function UT(){return O0||(O0=1,(function(s){function t(X,ut){var Tt=X.length;X.push(ut);t:for(;0<Tt;){var Ut=Tt-1>>>1,Kt=X[Ut];if(0<o(Kt,ut))X[Ut]=ut,X[Tt]=Kt,Tt=Ut;else break t}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ut=X[0],Tt=X.pop();if(Tt!==ut){X[0]=Tt;t:for(var Ut=0,Kt=X.length,M=Kt>>>1;Ut<M;){var tt=2*(Ut+1)-1,lt=X[tt],pt=tt+1,Nt=X[pt];if(0>o(lt,Tt))pt<Kt&&0>o(Nt,lt)?(X[Ut]=Nt,X[pt]=Tt,Ut=pt):(X[Ut]=lt,X[tt]=Tt,Ut=tt);else if(pt<Kt&&0>o(Nt,Tt))X[Ut]=Nt,X[pt]=Tt,Ut=pt;else break t}}return ut}function o(X,ut){var Tt=X.sortIndex-ut.sortIndex;return Tt!==0?Tt:X.id-ut.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,x=null,S=3,N=!1,B=!1,P=!1,K=!1,dt=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;function ot(X){for(var ut=n(p);ut!==null;){if(ut.callback===null)r(p);else if(ut.startTime<=X)r(p),ut.sortIndex=ut.expirationTime,t(g,ut);else break;ut=n(p)}}function xt(X){if(P=!1,ot(X),!B)if(n(g)!==null)B=!0,_t||(_t=!0,z());else{var ut=n(p);ut!==null&&ne(xt,ut.startTime-X)}}var _t=!1,I=-1,A=5,C=-1;function k(){return K?!0:!(s.unstable_now()-C<A)}function V(){if(K=!1,_t){var X=s.unstable_now();C=X;var ut=!0;try{t:{B=!1,P&&(P=!1,Z(I),I=-1),N=!0;var Tt=S;try{e:{for(ot(X),x=n(g);x!==null&&!(x.expirationTime>X&&k());){var Ut=x.callback;if(typeof Ut=="function"){x.callback=null,S=x.priorityLevel;var Kt=Ut(x.expirationTime<=X);if(X=s.unstable_now(),typeof Kt=="function"){x.callback=Kt,ot(X),ut=!0;break e}x===n(g)&&r(g),ot(X)}else r(g);x=n(g)}if(x!==null)ut=!0;else{var M=n(p);M!==null&&ne(xt,M.startTime-X),ut=!1}}break t}finally{x=null,S=Tt,N=!1}ut=void 0}}finally{ut?z():_t=!1}}}var z;if(typeof et=="function")z=function(){et(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Lt=R.port2;R.port1.onmessage=V,z=function(){Lt.postMessage(null)}}else z=function(){dt(V,0)};function ne(X,ut){I=dt(function(){X(s.unstable_now())},ut)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ut=3;break;default:ut=S}var Tt=S;S=ut;try{return X()}finally{S=Tt}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(X,ut){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Tt=S;S=X;try{return ut()}finally{S=Tt}},s.unstable_scheduleCallback=function(X,ut,Tt){var Ut=s.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Ut+Tt:Ut):Tt=Ut,X){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=Tt+Kt,X={id:E++,callback:ut,priorityLevel:X,startTime:Tt,expirationTime:Kt,sortIndex:-1},Tt>Ut?(X.sortIndex=Tt,t(p,X),n(g)===null&&X===n(p)&&(P?(Z(I),I=-1):P=!0,ne(xt,Tt-Ut))):(X.sortIndex=Kt,t(g,X),B||N||(B=!0,_t||(_t=!0,z()))),X},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(X){var ut=S;return function(){var Tt=S;S=ut;try{return X.apply(this,arguments)}finally{S=Tt}}}})(Sm)),Sm}var k0;function qT(){return k0||(k0=1,wm.exports=UT()),wm.exports}var Am={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function FT(){if(z0)return pn;z0=1;var s=_g();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pn.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},pn.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},pn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},pn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},pn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,x=m(E,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:N}):E==="script"&&r.d.X(g,{crossOrigin:x,integrity:S,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},pn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},pn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,x=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},pn.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},pn.requestFormReset=function(g){r.d.r(g)},pn.unstable_batchedUpdates=function(g,p){return g(p)},pn.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},pn.useFormStatus=function(){return c.H.useHostTransitionStatus()},pn.version="19.2.3",pn}var j0;function HT(){if(j0)return Am.exports;j0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Am.exports=FT(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function GT(){if(P0)return $l;P0=1;var s=qT(),t=_g(),n=HT();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function p(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),e;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),dt=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),et=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Lt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case dt:return"Profiler";case K:return"StrictMode";case xt:return"Suspense";case _t:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case et:return e.displayName||"Context";case Z:return(e._context.displayName||"Context")+".Consumer";case ot:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return i=e.displayName||null,i!==null?i:Lt(e.type)||"Memo";case A:i=e._payload,e=e._init;try{return Lt(e(i))}catch{}}return null}var ne=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},Ut=[],Kt=-1;function M(e){return{current:e}}function tt(e){0>Kt||(e.current=Ut[Kt],Ut[Kt]=null,Kt--)}function lt(e,i){Kt++,Ut[Kt]=e.current,e.current=i}var pt=M(null),Nt=M(null),kt=M(null),it=M(null);function Rt(e,i){switch(lt(kt,i),lt(Nt,e),lt(pt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?W_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=W_(i),e=t0(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}tt(pt),lt(pt,e)}function wt(){tt(pt),tt(Nt),tt(kt)}function H(e){e.memoizedState!==null&&lt(it,e);var i=pt.current,a=t0(i,e.type);i!==a&&(lt(Nt,e),lt(pt,a))}function mt(e){Nt.current===e&&(tt(pt),tt(Nt)),it.current===e&&(tt(it),Kl._currentValue=Tt)}var ft,ee;function Sn(e){if(ft===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ft=i&&i[1]||"",ee=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+e+ee}var Ai=!1;function er(e,i){if(!e||Ai)return"";Ai=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(Y){var G=Y}Reflect.construct(e,[],rt)}else{try{rt.call()}catch(Y){G=Y}e.call(rt.prototype)}}else{try{throw Error()}catch(Y){G=Y}(rt=e())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var D=_.split(`
`),F=T.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===F.length)for(l=D.length-1,f=F.length-1;1<=l&&0<=f&&D[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==F[f]){var W=`
`+D[l].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=l&&0<=f);break}}}finally{Ai=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Sn(a):""}function Ss(e,i){switch(e.tag){case 26:case 27:case 5:return Sn(e.type);case 16:return Sn("Lazy");case 13:return e.child!==i&&i!==null?Sn("Suspense Fallback"):Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 15:return er(e.type,!1);case 11:return er(e.type.render,!1);case 1:return er(e.type,!0);case 31:return Sn("Activity");default:return""}}function As(e){try{var i="",a=null;do i+=Ss(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ne=Object.prototype.hasOwnProperty,Oe=s.unstable_scheduleCallback,hi=s.unstable_cancelCallback,Sa=s.unstable_shouldYield,Rr=s.unstable_requestPaint,ln=s.unstable_now,nr=s.unstable_getCurrentPriorityLevel,Is=s.unstable_ImmediatePriority,ir=s.unstable_UserBlockingPriority,Ii=s.unstable_NormalPriority,Zo=s.unstable_LowPriority,Aa=s.unstable_IdlePriority,Ia=s.log,Ca=s.unstable_setDisableYieldValue,On=null,$e=null;function at(e){if(typeof Ia=="function"&&Ca(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(On,e)}catch{}}var vt=Math.clz32?Math.clz32:Ra,St=Math.log,Je=Math.LN2;function Ra(e){return e>>>=0,e===0?32:31-(St(e)/Je|0)|0}var Yn=256,Cs=262144,Pe=4194304;function Ci(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ri(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=Ci(l):(_&=T,_!==0?f=Ci(_):a||(a=T&~e,a!==0&&(f=Ci(a))))):(T=l&~d,T!==0?f=Ci(T):_!==0?f=Ci(_):a||(a=l&~e,a!==0&&(f=Ci(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function fi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Sf(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hu(){var e=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),e}function Ni(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Rs(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Af(e,i,a,l,f,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,D=e.expirationTimes,F=e.hiddenUpdates;for(a=_&~a;0<a;){var W=31-vt(a),rt=1<<W;T[W]=0,D[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var Y=G[W];Y!==null&&(Y.lane&=-536870913)}a&=~rt}l!==0&&Ns(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~i))}function Ns(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-vt(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function $o(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-vt(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function Jo(e,i){var a=i&-i;return a=(a&42)!==0?1:Ds(a),(a&(e.suspendedLanes|i))!==0?0:a}function Ds(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gu(){var e=ut.p;return e!==0?e:(e=window.event,e===void 0?32:T0(e.type))}function di(e,i){var a=ut.p;try{return ut.p=e,i()}finally{ut.p=a}}var mi=Math.random().toString(36).slice(2),Be="__reactFiber$"+mi,en="__reactProps$"+mi,Di="__reactContainer$"+mi,Na="__reactEvents$"+mi,If="__reactListeners$"+mi,Ku="__reactHandles$"+mi,Qu="__reactResources$"+mi,Vi="__reactMarker$"+mi;function Da(e){delete e[Be],delete e[en],delete e[Na],delete e[If],delete e[Ku]}function Mi(e){var i=e[Be];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Di]||a[Be]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=o0(e);e!==null;){if(a=e[Be])return a;e=o0(e)}return i}e=a,a=e.parentNode}return null}function Xn(e){if(e=e[Be]||e[Di]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function kn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Oi(e){var i=e[Qu];return i||(i=e[Qu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Le(e){e[Vi]=!0}var Wo=new Set,tl={};function ki(e,i){zi(e,i),zi(e+"Capture",i)}function zi(e,i){for(tl[e]=i,e=0;e<i.length;e++)Wo.add(i[e])}var el=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},il={};function Yu(e){return Ne.call(il,e)?!0:Ne.call(nl,e)?!1:el.test(e)?il[e]=!0:(nl[e]=!0,!1)}function Va(e,i,a){if(Yu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function zn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ue(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nr(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function rl(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function ue(e){if(!e._valueTracker){var i=Nr(e)?"checked":"value";e._valueTracker=rl(e,i,""+e[i])}}function Vs(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Nr(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ms=/[\n"\\]/g;function An(e){return e.replace(Ms,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ma(e,i,a,l,f,d,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+nn(i)):e.value!==""+nn(i)&&(e.value=""+nn(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?sl(e,_,nn(i)):a!=null?sl(e,_,nn(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+nn(T):e.removeAttribute("name")}function Xu(e,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){ue(e);return}a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),ue(e)}function sl(e,i,a){i==="number"&&ji(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Dr(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Zu(e,i,a){if(i!=null&&(i=""+nn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+nn(a):""}function Vr(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ne(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=nn(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),ue(e)}function In(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var $u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function al(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||$u.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function ol(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&al(e,f,l)}else for(var d in i)i.hasOwnProperty(d)&&al(e,d,i[d])}function Oa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ka(e){return Mr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function gi(){}var ll=null;function Zn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Or=null,Pi=null;function Os(e){var i=Xn(e);if(i&&(e=i.stateNode)){var a=e[en]||null;t:switch(e=i.stateNode,i.type){case"input":if(Ma(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+An(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[en]||null;if(!f)throw Error(r(90));Ma(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Vs(l)}break t;case"textarea":Zu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Dr(e,!!a.multiple,i,!1)}}}var za=!1;function kr(e,i,a){if(za)return e(i,a);za=!0;try{var l=e(i);return l}finally{if(za=!1,(Or!==null||Pi!==null)&&(Gc(),Or&&(i=Or,e=Pi,Pi=Or=null,Os(i),e)))for(i=0;i<e.length;i++)Os(e[i])}}function pi(e,i){var a=e.stateNode;if(a===null)return null;var l=a[en]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if($n)try{var ge={};Object.defineProperty(ge,"passive",{get:function(){ks=!0}}),window.addEventListener("test",ge,ge),window.removeEventListener("test",ge,ge)}catch{ks=!1}var Bi=null,ul=null,zs=null;function cl(){if(zs)return zs;var e,i=ul,a=i.length,l,f="value"in Bi?Bi.value:Bi.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return zs=f.slice(e,1<l?1-l:void 0)}function js(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function sr(){return!0}function yi(){return!1}function un(e){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?sr:yi,this.isPropagationStopped=yi,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),i}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=un(ar),zr=x({},ar,{view:0,detail:0}),hl=un(zr),jr,ja,Ui,Pa=x({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ui&&(Ui&&e.type==="mousemove"?(jr=e.screenX-Ui.screenX,ja=e.screenY-Ui.screenY):ja=jr=0,Ui=e),jr)},movementY:function(e){return"movementY"in e?e.movementY:ja}}),fl=un(Pa),Ps=x({},Pa,{dataTransfer:0}),Wu=un(Ps),tc=x({},zr,{relatedTarget:0}),Bs=un(tc),dl=x({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=un(dl),Ba=x({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nc=un(Ba),ic=x({},ar,{data:0}),qi=un(ic),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ac[e])?!!i[e]:!1}function Pr(){return oc}var En=x({},zr,{key:function(e){if(e.key){var i=rc[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(e){return e.type==="keypress"?js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lc=un(En),uc=x({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),or=un(uc),h=x({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),y=un(h),v=x({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=un(v),U=x({},Pa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=un(U),ht=x({},ar,{newState:0,oldState:0}),qt=un(ht),ke=[9,13,27,32],se=$n&&"CompositionEvent"in window,xe=null;$n&&"documentMode"in document&&(xe=document.documentMode);var Jn=$n&&"TextEvent"in window&&!xe,Fi=$n&&(!se||xe&&8<xe&&11>=xe),_i=" ",vi=!1;function Ls(e,i){switch(e){case"keyup":return ke.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ua=!1;function lx(e,i){switch(e){case"compositionend":return La(i);case"keypress":return i.which!==32?null:(vi=!0,_i);case"textInput":return e=i.data,e===_i&&vi?null:e;default:return null}}function ux(e,i){if(Ua)return e==="compositionend"||!se&&Ls(e,i)?(e=cl(),zs=ul=Bi=null,Ua=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fi&&i.locale!=="ko"?null:i.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!cx[e.type]:i==="textarea"}function hp(e,i,a,l){Or?Pi?Pi.push(l):Pi=[l]:Or=l,i=Jc(i,"onChange"),0<i.length&&(a=new Li("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var ml=null,gl=null;function hx(e){Q_(e,0)}function cc(e){var i=kn(e);if(Vs(i))return e}function fp(e,i){if(e==="change")return i}var dp=!1;if($n){var Cf;if($n){var Rf="oninput"in document;if(!Rf){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),Rf=typeof mp.oninput=="function"}Cf=Rf}else Cf=!1;dp=Cf&&(!document.documentMode||9<document.documentMode)}function gp(){ml&&(ml.detachEvent("onpropertychange",pp),gl=ml=null)}function pp(e){if(e.propertyName==="value"&&cc(gl)){var i=[];hp(i,gl,e,Zn(e)),kr(hx,i)}}function fx(e,i,a){e==="focusin"?(gp(),ml=i,gl=a,ml.attachEvent("onpropertychange",pp)):e==="focusout"&&gp()}function dx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cc(gl)}function mx(e,i){if(e==="click")return cc(i)}function gx(e,i){if(e==="input"||e==="change")return cc(i)}function px(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var jn=typeof Object.is=="function"?Object.is:px;function pl(e,i){if(jn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ne.call(i,f)||!jn(e[f],i[f]))return!1}return!0}function yp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _p(e,i){var a=yp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=yp(a)}}function vp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?vp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function bp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ji(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ji(e.document)}return i}function Nf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var yx=$n&&"documentMode"in document&&11>=document.documentMode,qa=null,Df=null,yl=null,Vf=!1;function Ep(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vf||qa==null||qa!==ji(l)||(l=qa,"selectionStart"in l&&Nf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),yl&&pl(yl,l)||(yl=l,l=Jc(Df,"onSelect"),0<l.length&&(i=new Li("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=qa)))}function Us(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Fa={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},Mf={},xp={};$n&&(xp=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function qs(e){if(Mf[e])return Mf[e];if(!Fa[e])return e;var i=Fa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in xp)return Mf[e]=i[a];return e}var Tp=qs("animationend"),wp=qs("animationiteration"),Sp=qs("animationstart"),_x=qs("transitionrun"),vx=qs("transitionstart"),bx=qs("transitioncancel"),Ap=qs("transitionend"),Ip=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function bi(e,i){Ip.set(e,i),ki(i,[e])}var hc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wn=[],Ha=0,kf=0;function fc(){for(var e=Ha,i=kf=Ha=0;i<e;){var a=Wn[i];Wn[i++]=null;var l=Wn[i];Wn[i++]=null;var f=Wn[i];Wn[i++]=null;var d=Wn[i];if(Wn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Cp(a,f,d)}}function dc(e,i,a,l){Wn[Ha++]=e,Wn[Ha++]=i,Wn[Ha++]=a,Wn[Ha++]=l,kf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function zf(e,i,a,l){return dc(e,i,a,l),mc(e)}function Fs(e,i){return dc(e,null,null,i),mc(e)}function Cp(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-vt(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function mc(e){if(50<Bl)throw Bl=0,Gd=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ga={};function Ex(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,i,a,l){return new Ex(e,i,a,l)}function jf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lr(e,i){var a=e.alternate;return a===null?(a=Pn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Rp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function gc(e,i,a,l,f,d){var _=0;if(l=e,typeof e=="function")jf(e)&&(_=1);else if(typeof e=="string")_=AT(e,a,pt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=Pn(31,a,i,f),e.elementType=C,e.lanes=d,e;case P:return Hs(a.children,f,d,i);case K:_=8,f|=24;break;case dt:return e=Pn(12,a,i,f|2),e.elementType=dt,e.lanes=d,e;case xt:return e=Pn(13,a,i,f),e.elementType=xt,e.lanes=d,e;case _t:return e=Pn(19,a,i,f),e.elementType=_t,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case et:_=10;break t;case Z:_=9;break t;case ot:_=11;break t;case I:_=14;break t;case A:_=16,l=null;break t}_=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=Pn(_,a,i,f),i.elementType=e,i.type=l,i.lanes=d,i}function Hs(e,i,a,l){return e=Pn(7,e,l,i),e.lanes=a,e}function Pf(e,i,a){return e=Pn(6,e,null,i),e.lanes=a,e}function Np(e){var i=Pn(18,null,null,0);return i.stateNode=e,i}function Bf(e,i,a){return i=Pn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Dp=new WeakMap;function ti(e,i){if(typeof e=="object"&&e!==null){var a=Dp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:As(i)},Dp.set(e,i),i)}return{value:e,source:i,stack:As(i)}}var Ka=[],Qa=0,pc=null,_l=0,ei=[],ni=0,Br=null,Hi=1,Gi="";function ur(e,i){Ka[Qa++]=_l,Ka[Qa++]=pc,pc=e,_l=i}function Vp(e,i,a){ei[ni++]=Hi,ei[ni++]=Gi,ei[ni++]=Br,Br=e;var l=Hi;e=Gi;var f=32-vt(l)-1;l&=~(1<<f),a+=1;var d=32-vt(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Hi=1<<32-vt(i)+f|a<<f|l,Gi=d+e}else Hi=1<<d|a<<f|l,Gi=e}function Lf(e){e.return!==null&&(ur(e,1),Vp(e,1,0))}function Uf(e){for(;e===pc;)pc=Ka[--Qa],Ka[Qa]=null,_l=Ka[--Qa],Ka[Qa]=null;for(;e===Br;)Br=ei[--ni],ei[ni]=null,Gi=ei[--ni],ei[ni]=null,Hi=ei[--ni],ei[ni]=null}function Mp(e,i){ei[ni++]=Hi,ei[ni++]=Gi,ei[ni++]=Br,Hi=i.id,Gi=i.overflow,Br=e}var cn=null,be=null,Jt=!1,Lr=null,ii=!1,qf=Error(r(519));function Ur(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(ti(i,e)),qf}function Op(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Be]=e,i[en]=l,a){case"dialog":Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":case"embed":Yt("load",i);break;case"video":case"audio":for(a=0;a<Ul.length;a++)Yt(Ul[a],i);break;case"source":Yt("error",i);break;case"img":case"image":case"link":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"input":Yt("invalid",i),Xu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Yt("invalid",i);break;case"textarea":Yt("invalid",i),Vr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||$_(i.textContent,a)?(l.popover!=null&&(Yt("beforetoggle",i),Yt("toggle",i)),l.onScroll!=null&&Yt("scroll",i),l.onScrollEnd!=null&&Yt("scrollend",i),l.onClick!=null&&(i.onclick=gi),i=!0):i=!1,i||Ur(e,!0)}function kp(e){for(cn=e.return;cn;)switch(cn.tag){case 5:case 31:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:cn=cn.return}}function Ya(e){if(e!==cn)return!1;if(!Jt)return kp(e),Jt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||am(e.type,e.memoizedProps)),a=!a),a&&be&&Ur(e),kp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));be=a0(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));be=a0(e)}else i===27?(i=be,es(e.type)?(e=hm,hm=null,be=e):be=i):be=cn?si(e.stateNode.nextSibling):null;return!0}function Gs(){be=cn=null,Jt=!1}function Ff(){var e=Lr;return e!==null&&(Dn===null?Dn=e:Dn.push.apply(Dn,e),Lr=null),e}function vl(e){Lr===null?Lr=[e]:Lr.push(e)}var Hf=M(null),Ks=null,cr=null;function qr(e,i,a){lt(Hf,i._currentValue),i._currentValue=a}function hr(e){e._currentValue=Hf.current,tt(Hf)}function Gf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Kf(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=f;for(var D=0;D<i.length;D++)if(T.context===i[D]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Gf(d.return,a,e),l||(_=null);break t}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Gf(_,a,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Xa(e,i,a,l){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;jn(f.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(f===it.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Kl):e=[Kl])}f=f.return}e!==null&&Kf(i,e,a,l),i.flags|=262144}function yc(e){for(e=e.firstContext;e!==null;){if(!jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qs(e){Ks=e,cr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function hn(e){return zp(Ks,e)}function _c(e,i){return Ks===null&&Qs(e),zp(e,i)}function zp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},cr===null){if(e===null)throw Error(r(308));cr=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else cr=cr.next=i;return a}var xx=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Tx=s.unstable_scheduleCallback,wx=s.unstable_NormalPriority,qe={$$typeof:et,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new xx,data:new Map,refCount:0}}function bl(e){e.refCount--,e.refCount===0&&Tx(wx,function(){e.controller.abort()})}var El=null,Yf=0,Za=0,$a=null;function Sx(e,i){if(El===null){var a=El=[];Yf=0,Za=$d(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yf++,i.then(jp,jp),i}function jp(){if(--Yf===0&&El!==null){$a!==null&&($a.status="fulfilled");var e=El;El=null,Za=0,$a=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Ax(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Pp=X.S;X.S=function(e,i){E_=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Sx(e,i),Pp!==null&&Pp(e,i)};var Ys=M(null);function Xf(){var e=Ys.current;return e!==null?e:ve.pooledCache}function vc(e,i){i===null?lt(Ys,Ys.current):lt(Ys,i.pool)}function Bp(){var e=Xf();return e===null?null:{parent:qe._currentValue,pool:e}}var Ja=Error(r(460)),Zf=Error(r(474)),bc=Error(r(542)),Ec={then:function(){}};function Lp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Up(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(gi,gi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Fp(e),e;default:if(typeof i.status=="string")i.then(gi,gi);else{if(e=ve,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Fp(e),e}throw Zs=i,Ja}}function Xs(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Zs=a,Ja):a}}var Zs=null;function qp(){if(Zs===null)throw Error(r(459));var e=Zs;return Zs=null,e}function Fp(e){if(e===Ja||e===bc)throw Error(r(483))}var Wa=null,xl=0;function xc(e){var i=xl;return xl+=1,Wa===null&&(Wa=[]),Up(Wa,e,i)}function Tl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Tc(e,i){throw i.$$typeof===S?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Hp(e){function i(j,O){if(e){var q=j.deletions;q===null?(j.deletions=[O],j.flags|=16):q.push(O)}}function a(j,O){if(!e)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function l(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function f(j,O){return j=lr(j,O),j.index=0,j.sibling=null,j}function d(j,O,q){return j.index=q,e?(q=j.alternate,q!==null?(q=q.index,q<O?(j.flags|=67108866,O):q):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function _(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function T(j,O,q,nt){return O===null||O.tag!==6?(O=Pf(q,j.mode,nt),O.return=j,O):(O=f(O,q),O.return=j,O)}function D(j,O,q,nt){var Dt=q.type;return Dt===P?W(j,O,q.props.children,nt,q.key):O!==null&&(O.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===A&&Xs(Dt)===O.type)?(O=f(O,q.props),Tl(O,q),O.return=j,O):(O=gc(q.type,q.key,q.props,null,j.mode,nt),Tl(O,q),O.return=j,O)}function F(j,O,q,nt){return O===null||O.tag!==4||O.stateNode.containerInfo!==q.containerInfo||O.stateNode.implementation!==q.implementation?(O=Bf(q,j.mode,nt),O.return=j,O):(O=f(O,q.children||[]),O.return=j,O)}function W(j,O,q,nt,Dt){return O===null||O.tag!==7?(O=Hs(q,j.mode,nt,Dt),O.return=j,O):(O=f(O,q),O.return=j,O)}function rt(j,O,q){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Pf(""+O,j.mode,q),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return q=gc(O.type,O.key,O.props,null,j.mode,q),Tl(q,O),q.return=j,q;case B:return O=Bf(O,j.mode,q),O.return=j,O;case A:return O=Xs(O),rt(j,O,q)}if(ne(O)||z(O))return O=Hs(O,j.mode,q,null),O.return=j,O;if(typeof O.then=="function")return rt(j,xc(O),q);if(O.$$typeof===et)return rt(j,_c(j,O),q);Tc(j,O)}return null}function G(j,O,q,nt){var Dt=O!==null?O.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Dt!==null?null:T(j,O,""+q,nt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case N:return q.key===Dt?D(j,O,q,nt):null;case B:return q.key===Dt?F(j,O,q,nt):null;case A:return q=Xs(q),G(j,O,q,nt)}if(ne(q)||z(q))return Dt!==null?null:W(j,O,q,nt,null);if(typeof q.then=="function")return G(j,O,xc(q),nt);if(q.$$typeof===et)return G(j,O,_c(j,q),nt);Tc(j,q)}return null}function Y(j,O,q,nt,Dt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return j=j.get(q)||null,T(O,j,""+nt,Dt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case N:return j=j.get(nt.key===null?q:nt.key)||null,D(O,j,nt,Dt);case B:return j=j.get(nt.key===null?q:nt.key)||null,F(O,j,nt,Dt);case A:return nt=Xs(nt),Y(j,O,q,nt,Dt)}if(ne(nt)||z(nt))return j=j.get(q)||null,W(O,j,nt,Dt,null);if(typeof nt.then=="function")return Y(j,O,q,xc(nt),Dt);if(nt.$$typeof===et)return Y(j,O,q,_c(O,nt),Dt);Tc(O,nt)}return null}function bt(j,O,q,nt){for(var Dt=null,ie=null,At=O,Ht=O=0,Zt=null;At!==null&&Ht<q.length;Ht++){At.index>Ht?(Zt=At,At=null):Zt=At.sibling;var re=G(j,At,q[Ht],nt);if(re===null){At===null&&(At=Zt);break}e&&At&&re.alternate===null&&i(j,At),O=d(re,O,Ht),ie===null?Dt=re:ie.sibling=re,ie=re,At=Zt}if(Ht===q.length)return a(j,At),Jt&&ur(j,Ht),Dt;if(At===null){for(;Ht<q.length;Ht++)At=rt(j,q[Ht],nt),At!==null&&(O=d(At,O,Ht),ie===null?Dt=At:ie.sibling=At,ie=At);return Jt&&ur(j,Ht),Dt}for(At=l(At);Ht<q.length;Ht++)Zt=Y(At,j,Ht,q[Ht],nt),Zt!==null&&(e&&Zt.alternate!==null&&At.delete(Zt.key===null?Ht:Zt.key),O=d(Zt,O,Ht),ie===null?Dt=Zt:ie.sibling=Zt,ie=Zt);return e&&At.forEach(function(as){return i(j,as)}),Jt&&ur(j,Ht),Dt}function Ot(j,O,q,nt){if(q==null)throw Error(r(151));for(var Dt=null,ie=null,At=O,Ht=O=0,Zt=null,re=q.next();At!==null&&!re.done;Ht++,re=q.next()){At.index>Ht?(Zt=At,At=null):Zt=At.sibling;var as=G(j,At,re.value,nt);if(as===null){At===null&&(At=Zt);break}e&&At&&as.alternate===null&&i(j,At),O=d(as,O,Ht),ie===null?Dt=as:ie.sibling=as,ie=as,At=Zt}if(re.done)return a(j,At),Jt&&ur(j,Ht),Dt;if(At===null){for(;!re.done;Ht++,re=q.next())re=rt(j,re.value,nt),re!==null&&(O=d(re,O,Ht),ie===null?Dt=re:ie.sibling=re,ie=re);return Jt&&ur(j,Ht),Dt}for(At=l(At);!re.done;Ht++,re=q.next())re=Y(At,j,Ht,re.value,nt),re!==null&&(e&&re.alternate!==null&&At.delete(re.key===null?Ht:re.key),O=d(re,O,Ht),ie===null?Dt=re:ie.sibling=re,ie=re);return e&&At.forEach(function(jT){return i(j,jT)}),Jt&&ur(j,Ht),Dt}function _e(j,O,q,nt){if(typeof q=="object"&&q!==null&&q.type===P&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case N:t:{for(var Dt=q.key;O!==null;){if(O.key===Dt){if(Dt=q.type,Dt===P){if(O.tag===7){a(j,O.sibling),nt=f(O,q.props.children),nt.return=j,j=nt;break t}}else if(O.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===A&&Xs(Dt)===O.type){a(j,O.sibling),nt=f(O,q.props),Tl(nt,q),nt.return=j,j=nt;break t}a(j,O);break}else i(j,O);O=O.sibling}q.type===P?(nt=Hs(q.props.children,j.mode,nt,q.key),nt.return=j,j=nt):(nt=gc(q.type,q.key,q.props,null,j.mode,nt),Tl(nt,q),nt.return=j,j=nt)}return _(j);case B:t:{for(Dt=q.key;O!==null;){if(O.key===Dt)if(O.tag===4&&O.stateNode.containerInfo===q.containerInfo&&O.stateNode.implementation===q.implementation){a(j,O.sibling),nt=f(O,q.children||[]),nt.return=j,j=nt;break t}else{a(j,O);break}else i(j,O);O=O.sibling}nt=Bf(q,j.mode,nt),nt.return=j,j=nt}return _(j);case A:return q=Xs(q),_e(j,O,q,nt)}if(ne(q))return bt(j,O,q,nt);if(z(q)){if(Dt=z(q),typeof Dt!="function")throw Error(r(150));return q=Dt.call(q),Ot(j,O,q,nt)}if(typeof q.then=="function")return _e(j,O,xc(q),nt);if(q.$$typeof===et)return _e(j,O,_c(j,q),nt);Tc(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,O!==null&&O.tag===6?(a(j,O.sibling),nt=f(O,q),nt.return=j,j=nt):(a(j,O),nt=Pf(q,j.mode,nt),nt.return=j,j=nt),_(j)):a(j,O)}return function(j,O,q,nt){try{xl=0;var Dt=_e(j,O,q,nt);return Wa=null,Dt}catch(At){if(At===Ja||At===bc)throw At;var ie=Pn(29,At,null,j.mode);return ie.lanes=nt,ie.return=j,ie}finally{}}}var $s=Hp(!0),Gp=Hp(!1),Fr=!1;function $f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ae&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=mc(e),Cp(e,null,a),i}return dc(e,l,i,a),mc(e)}function wl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,$o(e,a)}}function Wf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var td=!1;function Sl(){if(td){var e=$a;if(e!==null)throw e}}function Al(e,i,a,l){td=!1;var f=e.updateQueue;Fr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,F=D.next;D.next=null,_===null?d=F:_.next=F,_=D;var W=e.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=F:T.next=F,W.lastBaseUpdate=D))}if(d!==null){var rt=f.baseState;_=0,W=F=D=null,T=d;do{var G=T.lane&-536870913,Y=G!==T.lane;if(Y?(Xt&G)===G:(l&G)===G){G!==0&&G===Za&&(td=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var bt=e,Ot=T;G=i;var _e=a;switch(Ot.tag){case 1:if(bt=Ot.payload,typeof bt=="function"){rt=bt.call(_e,rt,G);break t}rt=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Ot.payload,G=typeof bt=="function"?bt.call(_e,rt,G):bt,G==null)break t;rt=x({},rt,G);break t;case 2:Fr=!0}}G=T.callback,G!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(F=W=Y,D=rt):W=W.next=Y,_|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);W===null&&(D=rt),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),Zr|=_,e.lanes=_,e.memoizedState=rt}}function Kp(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function Qp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kp(a[e],i)}var to=M(null),wc=M(0);function Yp(e,i){e=br,lt(wc,e),lt(to,i),br=e|i.baseLanes}function ed(){lt(wc,br),lt(to,to.current)}function nd(){br=wc.current,tt(to),tt(wc)}var Bn=M(null),ri=null;function Kr(e){var i=e.alternate;lt(ze,ze.current&1),lt(Bn,e),ri===null&&(i===null||to.current!==null||i.memoizedState!==null)&&(ri=e)}function id(e){lt(ze,ze.current),lt(Bn,e),ri===null&&(ri=e)}function Xp(e){e.tag===22?(lt(ze,ze.current),lt(Bn,e),ri===null&&(ri=e)):Qr()}function Qr(){lt(ze,ze.current),lt(Bn,Bn.current)}function Ln(e){tt(Bn),ri===e&&(ri=null),tt(ze)}var ze=M(0);function Sc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||um(a)||cm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fr=0,Ft=null,pe=null,Fe=null,Ac=!1,eo=!1,Js=!1,Ic=0,Il=0,no=null,Ix=0;function De(){throw Error(r(321))}function rd(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!jn(e[a],i[a]))return!1;return!0}function sd(e,i,a,l,f,d){return fr=d,Ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=e===null||e.memoizedState===null?Vy:bd,Js=!1,d=a(l,f),Js=!1,eo&&(d=$p(i,a,l,f)),Zp(e),d}function Zp(e){X.H=Nl;var i=pe!==null&&pe.next!==null;if(fr=0,Fe=pe=Ft=null,Ac=!1,Il=0,no=null,i)throw Error(r(300));e===null||He||(e=e.dependencies,e!==null&&yc(e)&&(He=!0))}function $p(e,i,a,l){Ft=e;var f=0;do{if(eo&&(no=null),Il=0,eo=!1,25<=f)throw Error(r(301));if(f+=1,Fe=pe=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=My,d=i(a,l)}while(eo);return d}function Cx(){var e=X.H,i=e.useState()[0];return i=typeof i.then=="function"?Cl(i):i,e=e.useState()[0],(pe!==null?pe.memoizedState:null)!==e&&(Ft.flags|=1024),i}function ad(){var e=Ic!==0;return Ic=0,e}function od(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function ld(e){if(Ac){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ac=!1}fr=0,Fe=pe=Ft=null,eo=!1,Il=Ic=0,no=null}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ft.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function je(){if(pe===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var i=Fe===null?Ft.memoizedState:Fe.next;if(i!==null)Fe=i,pe=e;else{if(e===null)throw Ft.alternate===null?Error(r(467)):Error(r(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Fe===null?Ft.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(e){var i=Il;return Il+=1,no===null&&(no=[]),e=Up(no,e,i),i=Ft,(Fe===null?i.memoizedState:Fe.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?Vy:bd),e}function Rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Cl(e);if(e.$$typeof===et)return hn(e)}throw Error(r(438,String(e)))}function ud(e){var i=null,a=Ft.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ft.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Cc(),Ft.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=k;return i.index++,a}function dr(e,i){return typeof i=="function"?i(e):i}function Nc(e){var i=je();return cd(i,pe,e)}function cd(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var T=_=null,D=null,F=i,W=!1;do{var rt=F.lane&-536870913;if(rt!==F.lane?(Xt&rt)===rt:(fr&rt)===rt){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),rt===Za&&(W=!0);else if((fr&G)===G){F=F.next,G===Za&&(W=!0);continue}else rt={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=rt,_=d):D=D.next=rt,Ft.lanes|=G,Zr|=G;rt=F.action,Js&&a(d,rt),d=F.hasEagerState?F.eagerState:a(d,rt)}else G={lane:rt,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=G,_=d):D=D.next=G,Ft.lanes|=rt,Zr|=rt;F=F.next}while(F!==null&&F!==i);if(D===null?_=d:D.next=T,!jn(d,e.memoizedState)&&(He=!0,W&&(a=$a,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function hd(e){var i=je(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=e(d,_.action),_=_.next;while(_!==f);jn(d,i.memoizedState)||(He=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Jp(e,i,a){var l=Ft,f=je(),d=Jt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!jn((pe||f).memoizedState,a);if(_&&(f.memoizedState=a,He=!0),f=f.queue,md(ey.bind(null,l,f,e),[e]),f.getSnapshot!==i||_||Fe!==null&&Fe.memoizedState.tag&1){if(l.flags|=2048,io(9,{destroy:void 0},ty.bind(null,l,f,a,i),null),ve===null)throw Error(r(349));d||(fr&127)!==0||Wp(l,i,a)}return a}function Wp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Ft.updateQueue,i===null?(i=Cc(),Ft.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function ty(e,i,a,l){i.value=a,i.getSnapshot=l,ny(i)&&iy(e)}function ey(e,i,a){return a(function(){ny(i)&&iy(e)})}function ny(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!jn(e,a)}catch{return!0}}function iy(e){var i=Fs(e,2);i!==null&&Vn(i,e,2)}function fd(e){var i=xn();if(typeof e=="function"){var a=e;if(e=a(),Js){at(!0);try{a()}finally{at(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:e},i}function ry(e,i,a,l){return e.baseState=a,cd(e,pe,typeof l=="function"?l:dr)}function Rx(e,i,a,l,f){if(Mc(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,sy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function sy(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var d=X.T,_={};X.T=_;try{var T=a(f,l),D=X.S;D!==null&&D(_,T),ay(e,i,T)}catch(F){dd(e,i,F)}finally{d!==null&&_.types!==null&&(d.types=_.types),X.T=d}}else try{d=a(f,l),ay(e,i,d)}catch(F){dd(e,i,F)}}function ay(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){oy(e,i,l)},function(l){return dd(e,i,l)}):oy(e,i,a)}function oy(e,i,a){i.status="fulfilled",i.value=a,ly(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,sy(e,a)))}function dd(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ly(i),i=i.next;while(i!==l)}e.action=null}function ly(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function uy(e,i){return i}function cy(e,i){if(Jt){var a=ve.formState;if(a!==null){t:{var l=Ft;if(Jt){if(be){e:{for(var f=be,d=ii;f.nodeType!==8;){if(!d){f=null;break e}if(f=si(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){be=si(f.nextSibling),l=f.data==="F!";break t}}Ur(l)}l=!1}l&&(i=a[0])}}return a=xn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:i},a.queue=l,a=Ry.bind(null,Ft,l),l.dispatch=a,l=fd(!1),d=vd.bind(null,Ft,!1,l.queue),l=xn(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=Rx.bind(null,Ft,f,d,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function hy(e){var i=je();return fy(i,pe,e)}function fy(e,i,a){if(i=cd(e,i,uy)[0],e=Nc(dr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Cl(i)}catch(_){throw _===Ja?bc:_}else l=i;i=je();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ft.flags|=2048,io(9,{destroy:void 0},Nx.bind(null,f,a),null)),[l,d,e]}function Nx(e,i){e.action=i}function dy(e){var i=je(),a=pe;if(a!==null)return fy(i,a,e);je(),i=i.memoizedState,a=je();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function io(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Ft.updateQueue,i===null&&(i=Cc(),Ft.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function my(){return je().memoizedState}function Dc(e,i,a,l){var f=xn();Ft.flags|=e,f.memoizedState=io(1|i,{destroy:void 0},a,l===void 0?null:l)}function Vc(e,i,a,l){var f=je();l=l===void 0?null:l;var d=f.memoizedState.inst;pe!==null&&l!==null&&rd(l,pe.memoizedState.deps)?f.memoizedState=io(i,d,a,l):(Ft.flags|=e,f.memoizedState=io(1|i,d,a,l))}function gy(e,i){Dc(8390656,8,e,i)}function md(e,i){Vc(2048,8,e,i)}function Dx(e){Ft.flags|=4;var i=Ft.updateQueue;if(i===null)i=Cc(),Ft.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function py(e){var i=je().memoizedState;return Dx({ref:i,nextImpl:e}),function(){if((ae&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function yy(e,i){return Vc(4,2,e,i)}function _y(e,i){return Vc(4,4,e,i)}function vy(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function by(e,i,a){a=a!=null?a.concat([e]):null,Vc(4,4,vy.bind(null,i,e),a)}function gd(){}function Ey(e,i){var a=je();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&rd(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function xy(e,i){var a=je();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&rd(i,l[1]))return l[0];if(l=e(),Js){at(!0);try{e()}finally{at(!1)}}return a.memoizedState=[l,i],l}function pd(e,i,a){return a===void 0||(fr&1073741824)!==0&&(Xt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=T_(),Ft.lanes|=e,Zr|=e,a)}function Ty(e,i,a,l){return jn(a,i)?a:to.current!==null?(e=pd(e,a,l),jn(e,i)||(He=!0),e):(fr&42)===0||(fr&1073741824)!==0&&(Xt&261930)===0?(He=!0,e.memoizedState=a):(e=T_(),Ft.lanes|=e,Zr|=e,i)}function wy(e,i,a,l,f){var d=ut.p;ut.p=d!==0&&8>d?d:8;var _=X.T,T={};X.T=T,vd(e,!1,i,a);try{var D=f(),F=X.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=Ax(D,l);Rl(e,i,W,Fn(e))}else Rl(e,i,l,Fn(e))}catch(rt){Rl(e,i,{then:function(){},status:"rejected",reason:rt},Fn())}finally{ut.p=d,_!==null&&T.types!==null&&(_.types=T.types),X.T=_}}function Vx(){}function yd(e,i,a,l){if(e.tag!==5)throw Error(r(476));var f=Sy(e).queue;wy(e,f,i,Tt,a===null?Vx:function(){return Ay(e),a(l)})}function Sy(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:Tt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Ay(e){var i=Sy(e);i.next===null&&(i=e.alternate.memoizedState),Rl(e,i.next.queue,{},Fn())}function _d(){return hn(Kl)}function Iy(){return je().memoizedState}function Cy(){return je().memoizedState}function Mx(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Fn();e=Hr(a);var l=Gr(i,e,a);l!==null&&(Vn(l,i,a),wl(l,i,a)),i={cache:Qf()},e.payload=i;return}i=i.return}}function Ox(e,i,a){var l=Fn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Mc(e)?Ny(i,a):(a=zf(e,i,a,l),a!==null&&(Vn(a,e,l),Dy(a,i,l)))}function Ry(e,i,a){var l=Fn();Rl(e,i,a,l)}function Rl(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mc(e))Ny(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,jn(T,_))return dc(e,i,f,0),ve===null&&fc(),!1}catch{}finally{}if(a=zf(e,i,f,l),a!==null)return Vn(a,e,l),Dy(a,i,l),!0}return!1}function vd(e,i,a,l){if(l={lane:2,revertLane:$d(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mc(e)){if(i)throw Error(r(479))}else i=zf(e,a,l,2),i!==null&&Vn(i,e,2)}function Mc(e){var i=e.alternate;return e===Ft||i!==null&&i===Ft}function Ny(e,i){eo=Ac=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Dy(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,$o(e,a)}}var Nl={readContext:hn,use:Rc,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De};Nl.useEffectEvent=De;var Vy={readContext:hn,use:Rc,useCallback:function(e,i){return xn().memoizedState=[e,i===void 0?null:i],e},useContext:hn,useEffect:gy,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Dc(4194308,4,vy.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Dc(4194308,4,e,i)},useInsertionEffect:function(e,i){Dc(4,2,e,i)},useMemo:function(e,i){var a=xn();i=i===void 0?null:i;var l=e();if(Js){at(!0);try{e()}finally{at(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=xn();if(a!==void 0){var f=a(i);if(Js){at(!0);try{a(i)}finally{at(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Ox.bind(null,Ft,e),[l.memoizedState,e]},useRef:function(e){var i=xn();return e={current:e},i.memoizedState=e},useState:function(e){e=fd(e);var i=e.queue,a=Ry.bind(null,Ft,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:gd,useDeferredValue:function(e,i){var a=xn();return pd(a,e,i)},useTransition:function(){var e=fd(!1);return e=wy.bind(null,Ft,e.queue,!0,!1),xn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Ft,f=xn();if(Jt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ve===null)throw Error(r(349));(Xt&127)!==0||Wp(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,gy(ey.bind(null,l,d,e),[e]),l.flags|=2048,io(9,{destroy:void 0},ty.bind(null,l,d,a,i),null),a},useId:function(){var e=xn(),i=ve.identifierPrefix;if(Jt){var a=Gi,l=Hi;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ic++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Ix++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:_d,useFormState:cy,useActionState:cy,useOptimistic:function(e){var i=xn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=vd.bind(null,Ft,!0,a),a.dispatch=i,[e,i]},useMemoCache:ud,useCacheRefresh:function(){return xn().memoizedState=Mx.bind(null,Ft)},useEffectEvent:function(e){var i=xn(),a={impl:e};return i.memoizedState=a,function(){if((ae&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},bd={readContext:hn,use:Rc,useCallback:Ey,useContext:hn,useEffect:md,useImperativeHandle:by,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:xy,useReducer:Nc,useRef:my,useState:function(){return Nc(dr)},useDebugValue:gd,useDeferredValue:function(e,i){var a=je();return Ty(a,pe.memoizedState,e,i)},useTransition:function(){var e=Nc(dr)[0],i=je().memoizedState;return[typeof e=="boolean"?e:Cl(e),i]},useSyncExternalStore:Jp,useId:Iy,useHostTransitionStatus:_d,useFormState:hy,useActionState:hy,useOptimistic:function(e,i){var a=je();return ry(a,pe,e,i)},useMemoCache:ud,useCacheRefresh:Cy};bd.useEffectEvent=py;var My={readContext:hn,use:Rc,useCallback:Ey,useContext:hn,useEffect:md,useImperativeHandle:by,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:xy,useReducer:hd,useRef:my,useState:function(){return hd(dr)},useDebugValue:gd,useDeferredValue:function(e,i){var a=je();return pe===null?pd(a,e,i):Ty(a,pe.memoizedState,e,i)},useTransition:function(){var e=hd(dr)[0],i=je().memoizedState;return[typeof e=="boolean"?e:Cl(e),i]},useSyncExternalStore:Jp,useId:Iy,useHostTransitionStatus:_d,useFormState:dy,useActionState:dy,useOptimistic:function(e,i){var a=je();return pe!==null?ry(a,pe,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ud,useCacheRefresh:Cy};My.useEffectEvent=py;function Ed(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:x({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var xd={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=Fn(),f=Hr(l);f.payload=i,a!=null&&(f.callback=a),i=Gr(e,f,l),i!==null&&(Vn(i,e,l),wl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=Fn(),f=Hr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Gr(e,f,l),i!==null&&(Vn(i,e,l),wl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Fn(),l=Hr(a);l.tag=2,i!=null&&(l.callback=i),i=Gr(e,l,a),i!==null&&(Vn(i,e,a),wl(i,e,a))}};function Oy(e,i,a,l,f,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!pl(a,l)||!pl(f,d):!0}function ky(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&xd.enqueueReplaceState(i,i.state,null)}function Ws(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=x({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function zy(e){hc(e)}function jy(e){console.error(e)}function Py(e){hc(e)}function Oc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function By(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Td(e,i,a){return a=Hr(a),a.tag=3,a.payload={element:null},a.callback=function(){Oc(e,i)},a}function Ly(e){return e=Hr(e),e.tag=3,e}function Uy(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){By(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){By(i,a,l),typeof f!="function"&&($r===null?$r=new Set([this]):$r.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function kx(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Xa(i,a,f,!0),a=Bn.current,a!==null){switch(a.tag){case 31:case 13:return ri===null?Kc():a.alternate===null&&Ve===0&&(Ve=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Ec?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Yd(e,l,f)),!1;case 22:return a.flags|=65536,l===Ec?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Yd(e,l,f)),!1}throw Error(r(435,a.tag))}return Yd(e,l,f),Kc(),!1}if(Jt)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==qf&&(e=Error(r(422),{cause:l}),vl(ti(e,a)))):(l!==qf&&(i=Error(r(423),{cause:l}),vl(ti(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=ti(l,a),f=Td(e.stateNode,l,f),Wf(e,f),Ve!==4&&(Ve=2)),!1;var d=Error(r(520),{cause:l});if(d=ti(d,a),Pl===null?Pl=[d]:Pl.push(d),Ve!==4&&(Ve=2),i===null)return!0;l=ti(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Td(a.stateNode,l,e),Wf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&($r===null||!$r.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ly(f),Uy(f,e,a,l),Wf(a,f),!1}a=a.return}while(a!==null);return!1}var wd=Error(r(461)),He=!1;function fn(e,i,a,l){i.child=e===null?Gp(i,null,a,l):$s(i,e.child,a,l)}function qy(e,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Qs(i),l=sd(e,i,a,_,d,f),T=ad(),e!==null&&!He?(od(e,i,f),mr(e,i,f)):(Jt&&T&&Lf(i),i.flags|=1,fn(e,i,l,f),i.child)}function Fy(e,i,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!jf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Hy(e,i,d,l,f)):(e=gc(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Vd(e,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(_,l)&&e.ref===i.ref)return mr(e,i,f)}return i.flags|=1,e=lr(d,l),e.ref=i.ref,e.return=i,i.child=e}function Hy(e,i,a,l,f){if(e!==null){var d=e.memoizedProps;if(pl(d,l)&&e.ref===i.ref)if(He=!1,i.pendingProps=l=d,Vd(e,f))(e.flags&131072)!==0&&(He=!0);else return i.lanes=e.lanes,mr(e,i,f)}return Sd(e,i,a,l,f)}function Gy(e,i,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Ky(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&vc(i,d!==null?d.cachePool:null),d!==null?Yp(i,d):ed(),Xp(i);else return l=i.lanes=536870912,Ky(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(vc(i,d.cachePool),Yp(i,d),Qr(),i.memoizedState=null):(e!==null&&vc(i,null),ed(),Qr());return fn(e,i,f,a),i.child}function Dl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ky(e,i,a,l,f){var d=Xf();return d=d===null?null:{parent:qe._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&vc(i,null),ed(),Xp(i),e!==null&&Xa(e,i,l,!0),i.childLanes=f,null}function kc(e,i){return i=jc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Qy(e,i,a){return $s(i,e.child,null,a),e=kc(i,i.pendingProps),e.flags|=2,Ln(i),i.memoizedState=null,e}function zx(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Jt){if(l.mode==="hidden")return e=kc(i,l),i.lanes=536870912,Dl(null,e);if(id(i),(e=be)?(e=s0(e,ii),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Br!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=Np(e),a.return=i,i.child=a,cn=i,be=null)):e=null,e===null)throw Ur(i);return i.lanes=536870912,null}return kc(i,l)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(id(i),f)if(i.flags&256)i.flags&=-257,i=Qy(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(He||Xa(e,i,a,!1),f=(a&e.childLanes)!==0,He||f){if(l=ve,l!==null&&(_=Jo(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Fs(e,_),Vn(l,e,_),wd;Kc(),i=Qy(e,i,a)}else e=d.treeContext,be=si(_.nextSibling),cn=i,Jt=!0,Lr=null,ii=!1,e!==null&&Mp(i,e),i=kc(i,l),i.flags|=4096;return i}return e=lr(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function zc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Sd(e,i,a,l,f){return Qs(i),a=sd(e,i,a,l,void 0,f),l=ad(),e!==null&&!He?(od(e,i,f),mr(e,i,f)):(Jt&&l&&Lf(i),i.flags|=1,fn(e,i,a,f),i.child)}function Yy(e,i,a,l,f,d){return Qs(i),i.updateQueue=null,a=$p(i,l,a,f),Zp(e),l=ad(),e!==null&&!He?(od(e,i,d),mr(e,i,d)):(Jt&&l&&Lf(i),i.flags|=1,fn(e,i,a,d),i.child)}function Xy(e,i,a,l,f){if(Qs(i),i.stateNode===null){var d=Ga,_=a.contextType;typeof _=="object"&&_!==null&&(d=hn(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=xd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},$f(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?hn(_):Ga,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Ed(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&xd.enqueueReplaceState(d,d.state,null),Al(i,l,d,f),Sl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var T=i.memoizedProps,D=Ws(a,T);d.props=D;var F=d.context,W=a.contextType;_=Ga,typeof W=="object"&&W!==null&&(_=hn(W));var rt=a.getDerivedStateFromProps;W=typeof rt=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||F!==_)&&ky(i,d,l,_),Fr=!1;var G=i.memoizedState;d.state=G,Al(i,l,d,f),Sl(),F=i.memoizedState,T||G!==F||Fr?(typeof rt=="function"&&(Ed(i,a,rt,l),F=i.memoizedState),(D=Fr||Oy(i,a,D,l,G,F,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=_,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Jf(e,i),_=i.memoizedProps,W=Ws(a,_),d.props=W,rt=i.pendingProps,G=d.context,F=a.contextType,D=Ga,typeof F=="object"&&F!==null&&(D=hn(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==rt||G!==D)&&ky(i,d,l,D),Fr=!1,G=i.memoizedState,d.state=G,Al(i,l,d,f),Sl();var Y=i.memoizedState;_!==rt||G!==Y||Fr||e!==null&&e.dependencies!==null&&yc(e.dependencies)?(typeof T=="function"&&(Ed(i,a,T,l),Y=i.memoizedState),(W=Fr||Oy(i,a,W,l,G,Y,D)||e!==null&&e.dependencies!==null&&yc(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=D,l=W):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,zc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=$s(i,e.child,null,f),i.child=$s(i,null,a,f)):fn(e,i,a,f),i.memoizedState=d.state,e=i.child):e=mr(e,i,f),e}function Zy(e,i,a,l){return Gs(),i.flags|=256,fn(e,i,a,l),i.child}var Ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(e){return{baseLanes:e,cachePool:Bp()}}function Cd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=qn),e}function $y(e,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(ze.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Jt){if(f?Kr(i):Qr(),(e=be)?(e=s0(e,ii),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Br!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=Np(e),a.return=i,i.child=a,cn=i,be=null)):e=null,e===null)throw Ur(i);return cm(e)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(Qr(),f=i.mode,T=jc({mode:"hidden",children:T},f),l=Hs(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Id(a),l.childLanes=Cd(e,_,a),i.memoizedState=Ad,Dl(null,l)):(Kr(i),Rd(i,T))}var D=e.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(d)i.flags&256?(Kr(i),i.flags&=-257,i=Nd(e,i,a)):i.memoizedState!==null?(Qr(),i.child=e.child,i.flags|=128,i=null):(Qr(),T=l.fallback,f=i.mode,l=jc({mode:"visible",children:l.children},f),T=Hs(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,$s(i,e.child,null,a),l=i.child,l.memoizedState=Id(a),l.childLanes=Cd(e,_,a),i.memoizedState=Ad,i=Dl(null,l));else if(Kr(i),cm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(r(419)),l.stack="",l.digest=_,vl({value:l,source:null,stack:null}),i=Nd(e,i,a)}else if(He||Xa(e,i,a,!1),_=(a&e.childLanes)!==0,He||_){if(_=ve,_!==null&&(l=Jo(_,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Fs(e,l),Vn(_,e,l),wd;um(T)||Kc(),i=Nd(e,i,a)}else um(T)?(i.flags|=192,i.child=e.child,i=null):(e=D.treeContext,be=si(T.nextSibling),cn=i,Jt=!0,Lr=null,ii=!1,e!==null&&Mp(i,e),i=Rd(i,l.children),i.flags|=4096);return i}return f?(Qr(),T=l.fallback,f=i.mode,D=e.child,F=D.sibling,l=lr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?T=lr(F,T):(T=Hs(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Dl(null,l),l=i.child,T=e.child.memoizedState,T===null?T=Id(a):(f=T.cachePool,f!==null?(D=qe._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Bp(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=Cd(e,_,a),i.memoizedState=Ad,Dl(e.child,l)):(Kr(i),a=e.child,e=a.sibling,a=lr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Rd(e,i){return i=jc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function jc(e,i){return e=Pn(22,e,null,i),e.lanes=0,e}function Nd(e,i,a){return $s(i,e.child,null,a),e=Rd(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Jy(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Gf(e.return,i,a)}function Dd(e,i,a,l,f,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Wy(e,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=ze.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,lt(ze,_),fn(e,i,l,a),l=Jt?_l:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jy(e,a,i);else if(e.tag===19)Jy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Sc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Dd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Sc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Dd(i,!0,a,null,d,l);break;case"together":Dd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function mr(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Zr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Xa(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=lr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=lr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Vd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&yc(e)))}function jx(e,i,a){switch(i.tag){case 3:Rt(i,i.stateNode.containerInfo),qr(i,qe,e.memoizedState.cache),Gs();break;case 27:case 5:H(i);break;case 4:Rt(i,i.stateNode.containerInfo);break;case 10:qr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,id(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Kr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?$y(e,i,a):(Kr(i),e=mr(e,i,a),e!==null?e.sibling:null);Kr(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Xa(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Wy(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),lt(ze,ze.current),l)break;return null;case 22:return i.lanes=0,Gy(e,i,a,i.pendingProps);case 24:qr(i,qe,e.memoizedState.cache)}return mr(e,i,a)}function t_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)He=!0;else{if(!Vd(e,a)&&(i.flags&128)===0)return He=!1,jx(e,i,a);He=(e.flags&131072)!==0}else He=!1,Jt&&(i.flags&1048576)!==0&&Vp(i,_l,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Xs(i.elementType),i.type=e,typeof e=="function")jf(e)?(l=Ws(e,l),i.tag=1,i=Xy(null,i,e,l,a)):(i.tag=0,i=Sd(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===ot){i.tag=11,i=qy(null,i,e,l,a);break t}else if(f===I){i.tag=14,i=Fy(null,i,e,l,a);break t}}throw i=Lt(e)||e,Error(r(306,i,""))}}return i;case 0:return Sd(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ws(l,i.pendingProps),Xy(e,i,l,f,a);case 3:t:{if(Rt(i,i.stateNode.containerInfo),e===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Jf(e,i),Al(i,l,null,a);var _=i.memoizedState;if(l=_.cache,qr(i,qe,l),l!==d.cache&&Kf(i,[qe],a,!0),Sl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Zy(e,i,l,a);break t}else if(l!==f){f=ti(Error(r(424)),i),vl(f),i=Zy(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(be=si(e.firstChild),cn=i,Jt=!0,Lr=null,ii=!0,a=Gp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gs(),l===f){i=mr(e,i,a);break t}fn(e,i,l,a)}i=i.child}return i;case 26:return zc(e,i),e===null?(a=h0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Jt||(a=i.type,e=i.pendingProps,l=Wc(kt.current).createElement(a),l[Be]=i,l[en]=e,dn(l,a,e),Le(l),i.stateNode=l):i.memoizedState=h0(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return H(i),e===null&&Jt&&(l=i.stateNode=l0(i.type,i.pendingProps,kt.current),cn=i,ii=!0,f=be,es(i.type)?(hm=f,be=si(l.firstChild)):be=f),fn(e,i,i.pendingProps.children,a),zc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Jt&&((f=l=be)&&(l=dT(l,i.type,i.pendingProps,ii),l!==null?(i.stateNode=l,cn=i,be=si(l.firstChild),ii=!1,f=!0):f=!1),f||Ur(i)),H(i),f=i.type,d=i.pendingProps,_=e!==null?e.memoizedProps:null,l=d.children,am(f,d)?l=null:_!==null&&am(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=sd(e,i,Cx,null,null,a),Kl._currentValue=f),zc(e,i),fn(e,i,l,a),i.child;case 6:return e===null&&Jt&&((e=a=be)&&(a=mT(a,i.pendingProps,ii),a!==null?(i.stateNode=a,cn=i,be=null,e=!0):e=!1),e||Ur(i)),null;case 13:return $y(e,i,a);case 4:return Rt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=$s(i,null,l,a):fn(e,i,l,a),i.child;case 11:return qy(e,i,i.type,i.pendingProps,a);case 7:return fn(e,i,i.pendingProps,a),i.child;case 8:return fn(e,i,i.pendingProps.children,a),i.child;case 12:return fn(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,qr(i,i.type,l.value),fn(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Qs(i),f=hn(f),l=l(f),i.flags|=1,fn(e,i,l,a),i.child;case 14:return Fy(e,i,i.type,i.pendingProps,a);case 15:return Hy(e,i,i.type,i.pendingProps,a);case 19:return Wy(e,i,a);case 31:return zx(e,i,a);case 22:return Gy(e,i,a,i.pendingProps);case 24:return Qs(i),l=hn(qe),e===null?(f=Xf(),f===null&&(f=ve,d=Qf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},$f(i),qr(i,qe,f)):((e.lanes&a)!==0&&(Jf(e,i),Al(i,null,null,a),Sl()),f=e.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),qr(i,qe,l)):(l=d.cache,qr(i,qe,l),l!==f.cache&&Kf(i,[qe],a,!0))),fn(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function gr(e){e.flags|=4}function Md(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(I_())e.flags|=8192;else throw Zs=Ec,Zf}else e.flags&=-16777217}function e_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!p0(i))if(I_())e.flags|=8192;else throw Zs=Ec,Zf}function Pc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Hu():536870912,e.lanes|=i,oo|=i)}function Vl(e,i){if(!Jt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ee(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function Px(e,i,a){var l=i.pendingProps;switch(Uf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(i),null;case 1:return Ee(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),hr(qe),wt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ya(i)?gr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ff())),Ee(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(gr(i),d!==null?(Ee(i),e_(i,d)):(Ee(i),Md(i,f,null,l,a))):d?d!==e.memoizedState?(gr(i),Ee(i),e_(i,d)):(Ee(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&gr(i),Ee(i),Md(i,f,e,l,a)),null;case 27:if(mt(i),a=kt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&gr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return Ee(i),null}e=pt.current,Ya(i)?Op(i):(e=l0(f,l,a),i.stateNode=e,gr(i))}return Ee(i),null;case 5:if(mt(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&gr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return Ee(i),null}if(d=pt.current,Ya(i))Op(i);else{var _=Wc(kt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Be]=i,d[en]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(dn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&gr(i)}}return Ee(i),Md(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&gr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=kt.current,Ya(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=cn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Be]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||$_(e.nodeValue,a)),e||Ur(i,!0)}else e=Wc(e).createTextNode(l),e[Be]=i,i.stateNode=e}return Ee(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=Ya(i),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Be]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ee(i),e=!1}else a=Ff(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Ln(i),i):(Ln(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Ee(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ya(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Be]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ee(i),f=!1}else f=Ff(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ln(i),i):(Ln(i),null)}return Ln(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Pc(i,i.updateQueue),Ee(i),null);case 4:return wt(),e===null&&em(i.stateNode.containerInfo),Ee(i),null;case 10:return hr(i.type),Ee(i),null;case 19:if(tt(ze),l=i.memoizedState,l===null)return Ee(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Vl(l,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Sc(e),d!==null){for(i.flags|=128,Vl(l,!1),e=d.updateQueue,i.updateQueue=e,Pc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Rp(a,e),a=a.sibling;return lt(ze,ze.current&1|2),Jt&&ur(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&ln()>Fc&&(i.flags|=128,f=!0,Vl(l,!1),i.lanes=4194304)}else{if(!f)if(e=Sc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Pc(i,e),Vl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Jt)return Ee(i),null}else 2*ln()-l.renderingStartTime>Fc&&a!==536870912&&(i.flags|=128,f=!0,Vl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ln(),e.sibling=null,a=ze.current,lt(ze,f?a&1|2:a&1),Jt&&ur(i,l.treeForkCount),e):(Ee(i),null);case 22:case 23:return Ln(i),nd(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Ee(i),i.subtreeFlags&6&&(i.flags|=8192)):Ee(i),a=i.updateQueue,a!==null&&Pc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&tt(Ys),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),hr(qe),Ee(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Bx(e,i){switch(Uf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return hr(qe),wt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return mt(i),null;case 31:if(i.memoizedState!==null){if(Ln(i),i.alternate===null)throw Error(r(340));Gs()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Ln(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Gs()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return tt(ze),null;case 4:return wt(),null;case 10:return hr(i.type),null;case 22:case 23:return Ln(i),nd(),e!==null&&tt(Ys),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return hr(qe),null;case 25:return null;default:return null}}function n_(e,i){switch(Uf(i),i.tag){case 3:hr(qe),wt();break;case 26:case 27:case 5:mt(i);break;case 4:wt();break;case 31:i.memoizedState!==null&&Ln(i);break;case 13:Ln(i);break;case 19:tt(ze);break;case 10:hr(i.type);break;case 22:case 23:Ln(i),nd(),e!==null&&tt(Ys);break;case 24:hr(qe)}}function Ml(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){he(i,i.return,T)}}function Yr(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var D=a,F=T;try{F()}catch(W){he(f,D,W)}}}l=l.next}while(l!==d)}}catch(W){he(i,i.return,W)}}function i_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Qp(i,a)}catch(l){he(e,e.return,l)}}}function r_(e,i,a){a.props=Ws(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){he(e,i,l)}}function Ol(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){he(e,i,f)}}function Ki(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){he(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){he(e,i,f)}else a.current=null}function s_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){he(e,e.return,f)}}function Od(e,i,a){try{var l=e.stateNode;oT(l,e.type,a,i),l[en]=i}catch(f){he(e,e.return,f)}}function a_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&es(e.type)||e.tag===4}function kd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||a_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&es(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zd(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=gi));else if(l!==4&&(l===27&&es(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(zd(e,i,a),e=e.sibling;e!==null;)zd(e,i,a),e=e.sibling}function Bc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&es(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Bc(e,i,a),e=e.sibling;e!==null;)Bc(e,i,a),e=e.sibling}function o_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);dn(i,l,a),i[Be]=e,i[en]=a}catch(d){he(e,e.return,d)}}var pr=!1,Ge=!1,jd=!1,l_=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Lx(e,i){if(e=e.containerInfo,rm=ah,e=bp(e),Nf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,T=-1,D=-1,F=0,W=0,rt=e,G=null;e:for(;;){for(var Y;rt!==a||f!==0&&rt.nodeType!==3||(T=_+f),rt!==d||l!==0&&rt.nodeType!==3||(D=_+l),rt.nodeType===3&&(_+=rt.nodeValue.length),(Y=rt.firstChild)!==null;)G=rt,rt=Y;for(;;){if(rt===e)break e;if(G===a&&++F===f&&(T=_),G===d&&++W===l&&(D=_),(Y=rt.nextSibling)!==null)break;rt=G,G=rt.parentNode}rt=Y}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(sm={focusedElem:e,selectionRange:a},ah=!1,rn=i;rn!==null;)if(i=rn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,rn=e;else for(;rn!==null;){switch(i=rn,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var bt=Ws(a.type,f);e=l.getSnapshotBeforeUpdate(bt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ot){he(a,a.return,Ot)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)lm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,rn=e;break}rn=i.return}}function u_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:_r(e,a),l&4&&Ml(5,a);break;case 1:if(_r(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){he(a,a.return,_)}else{var f=Ws(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){he(a,a.return,_)}}l&64&&i_(a),l&512&&Ol(a,a.return);break;case 3:if(_r(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Qp(e,i)}catch(_){he(a,a.return,_)}}break;case 27:i===null&&l&4&&o_(a);case 26:case 5:_r(e,a),i===null&&l&4&&s_(a),l&512&&Ol(a,a.return);break;case 12:_r(e,a);break;case 31:_r(e,a),l&4&&f_(e,a);break;case 13:_r(e,a),l&4&&d_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Xx.bind(null,a),gT(e,a))));break;case 22:if(l=a.memoizedState!==null||pr,!l){i=i!==null&&i.memoizedState!==null||Ge,f=pr;var d=Ge;pr=l,(Ge=i)&&!d?vr(e,a,(a.subtreeFlags&8772)!==0):_r(e,a),pr=f,Ge=d}break;case 30:break;default:_r(e,a)}}function c_(e){var i=e.alternate;i!==null&&(e.alternate=null,c_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Da(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Te=null,Cn=!1;function yr(e,i,a){for(a=a.child;a!==null;)h_(e,i,a),a=a.sibling}function h_(e,i,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(On,a)}catch{}switch(a.tag){case 26:Ge||Ki(a,i),yr(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ge||Ki(a,i);var l=Te,f=Cn;es(a.type)&&(Te=a.stateNode,Cn=!1),yr(e,i,a),Fl(a.stateNode),Te=l,Cn=f;break;case 5:Ge||Ki(a,i);case 6:if(l=Te,f=Cn,Te=null,yr(e,i,a),Te=l,Cn=f,Te!==null)if(Cn)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(a.stateNode)}catch(d){he(a,i,d)}else try{Te.removeChild(a.stateNode)}catch(d){he(a,i,d)}break;case 18:Te!==null&&(Cn?(e=Te,i0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),po(e)):i0(Te,a.stateNode));break;case 4:l=Te,f=Cn,Te=a.stateNode.containerInfo,Cn=!0,yr(e,i,a),Te=l,Cn=f;break;case 0:case 11:case 14:case 15:Yr(2,a,i),Ge||Yr(4,a,i),yr(e,i,a);break;case 1:Ge||(Ki(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&r_(a,i,l)),yr(e,i,a);break;case 21:yr(e,i,a);break;case 22:Ge=(l=Ge)||a.memoizedState!==null,yr(e,i,a),Ge=l;break;default:yr(e,i,a)}}function f_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{po(e)}catch(a){he(i,i.return,a)}}}function d_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{po(e)}catch(a){he(i,i.return,a)}}function Ux(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new l_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new l_),i;default:throw Error(r(435,e.tag))}}function Lc(e,i){var a=Ux(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=Zx.bind(null,e,l);l.then(f,f)}})}function Rn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,_=i,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(es(T.type)){Te=T.stateNode,Cn=!1;break t}break;case 5:Te=T.stateNode,Cn=!1;break t;case 3:case 4:Te=T.stateNode.containerInfo,Cn=!0;break t}T=T.return}if(Te===null)throw Error(r(160));h_(d,_,f),Te=null,Cn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)m_(i,e),i=i.sibling}var Ei=null;function m_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rn(i,e),Nn(e),l&4&&(Yr(3,e,e.return),Ml(3,e),Yr(5,e,e.return));break;case 1:Rn(i,e),Nn(e),l&512&&(Ge||a===null||Ki(a,a.return)),l&64&&pr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Ei;if(Rn(i,e),Nn(e),l&512&&(Ge||a===null||Ki(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Vi]||d[Be]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),dn(d,l,a),d[Be]=e,Le(d),l=d;break t;case"link":var _=m0("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break e}}d=f.createElement(l),dn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=m0("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break e}}d=f.createElement(l),dn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Be]=e,Le(d),l=d}e.stateNode=l}else g0(f,e.type,e.stateNode);else e.stateNode=d0(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?g0(f,e.type,e.stateNode):d0(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Od(e,e.memoizedProps,a.memoizedProps)}break;case 27:Rn(i,e),Nn(e),l&512&&(Ge||a===null||Ki(a,a.return)),a!==null&&l&4&&Od(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Rn(i,e),Nn(e),l&512&&(Ge||a===null||Ki(a,a.return)),e.flags&32){f=e.stateNode;try{In(f,"")}catch(bt){he(e,e.return,bt)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Od(e,f,a!==null?a.memoizedProps:f)),l&1024&&(jd=!0);break;case 6:if(Rn(i,e),Nn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(bt){he(e,e.return,bt)}}break;case 3:if(nh=null,f=Ei,Ei=th(i.containerInfo),Rn(i,e),Ei=f,Nn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{po(i.containerInfo)}catch(bt){he(e,e.return,bt)}jd&&(jd=!1,g_(e));break;case 4:l=Ei,Ei=th(e.stateNode.containerInfo),Rn(i,e),Nn(e),Ei=l;break;case 12:Rn(i,e),Nn(e);break;case 31:Rn(i,e),Nn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lc(e,l)));break;case 13:Rn(i,e),Nn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qc=ln()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lc(e,l)));break;case 22:f=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=pr,W=Ge;if(pr=F||f,Ge=W||D,Rn(i,e),Ge=W,pr=F,Nn(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||D||pr||Ge||ta(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var rt=D.memoizedProps.style,G=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(bt){he(D,D.return,bt)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(bt){he(D,D.return,bt)}}}else if(i.tag===18){if(a===null){D=i;try{var Y=D.stateNode;f?r0(Y,!0):r0(D.stateNode,!1)}catch(bt){he(D,D.return,bt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lc(e,a))));break;case 19:Rn(i,e),Nn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lc(e,l)));break;case 30:break;case 21:break;default:Rn(i,e),Nn(e)}}function Nn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(a_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=kd(e);Bc(e,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(In(_,""),a.flags&=-33);var T=kd(e);Bc(e,T,_);break;case 3:case 4:var D=a.stateNode.containerInfo,F=kd(e);zd(e,F,D);break;default:throw Error(r(161))}}catch(W){he(e,e.return,W)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function g_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;g_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function _r(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)u_(e,i.alternate,i),i=i.sibling}function ta(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Yr(4,i,i.return),ta(i);break;case 1:Ki(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&r_(i,i.return,a),ta(i);break;case 27:Fl(i.stateNode);case 26:case 5:Ki(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}e=e.sibling}}function vr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:vr(f,d,a),Ml(4,d);break;case 1:if(vr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){he(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Kp(D[f],T)}catch(F){he(l,l.return,F)}}a&&_&64&&i_(d),Ol(d,d.return);break;case 27:o_(d);case 26:case 5:vr(f,d,a),a&&l===null&&_&4&&s_(d),Ol(d,d.return);break;case 12:vr(f,d,a);break;case 31:vr(f,d,a),a&&_&4&&f_(f,d);break;case 13:vr(f,d,a),a&&_&4&&d_(f,d);break;case 22:d.memoizedState===null&&vr(f,d,a),Ol(d,d.return);break;case 30:break;default:vr(f,d,a)}i=i.sibling}}function Pd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&bl(a))}function Bd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&bl(e))}function xi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)p_(e,i,a,l),i=i.sibling}function p_(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:xi(e,i,a,l),f&2048&&Ml(9,i);break;case 1:xi(e,i,a,l);break;case 3:xi(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&bl(e)));break;case 12:if(f&2048){xi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){he(i,i.return,D)}}else xi(e,i,a,l);break;case 31:xi(e,i,a,l);break;case 13:xi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?xi(e,i,a,l):kl(e,i):d._visibility&2?xi(e,i,a,l):(d._visibility|=2,ro(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Pd(_,i);break;case 24:xi(e,i,a,l),f&2048&&Bd(i.alternate,i);break;default:xi(e,i,a,l)}}function ro(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,_=i,T=a,D=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:ro(d,_,T,D,f),Ml(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?ro(d,_,T,D,f):kl(d,_):(W._visibility|=2,ro(d,_,T,D,f)),f&&F&2048&&Pd(_.alternate,_);break;case 24:ro(d,_,T,D,f),f&&F&2048&&Bd(_.alternate,_);break;default:ro(d,_,T,D,f)}i=i.sibling}}function kl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:kl(a,l),f&2048&&Pd(l.alternate,l);break;case 24:kl(a,l),f&2048&&Bd(l.alternate,l);break;default:kl(a,l)}i=i.sibling}}var zl=8192;function so(e,i,a){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)y_(e,i,a),e=e.sibling}function y_(e,i,a){switch(e.tag){case 26:so(e,i,a),e.flags&zl&&e.memoizedState!==null&&IT(a,Ei,e.memoizedState,e.memoizedProps);break;case 5:so(e,i,a);break;case 3:case 4:var l=Ei;Ei=th(e.stateNode.containerInfo),so(e,i,a),Ei=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,so(e,i,a),zl=l):so(e,i,a));break;default:so(e,i,a)}}function __(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function jl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];rn=l,b_(l,e)}__(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)v_(e),e=e.sibling}function v_(e){switch(e.tag){case 0:case 11:case 15:jl(e),e.flags&2048&&Yr(9,e,e.return);break;case 3:jl(e);break;case 12:jl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Uc(e)):jl(e);break;default:jl(e)}}function Uc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];rn=l,b_(l,e)}__(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Yr(8,i,i.return),Uc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Uc(i));break;default:Uc(i)}e=e.sibling}}function b_(e,i){for(;rn!==null;){var a=rn;switch(a.tag){case 0:case 11:case 15:Yr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:bl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,rn=l;else t:for(a=e;rn!==null;){l=rn;var f=l.sibling,d=l.return;if(c_(l),l===a){rn=null;break t}if(f!==null){f.return=d,rn=f;break t}rn=d}}}var qx={getCacheForType:function(e){var i=hn(qe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return hn(qe).controller.signal}},Fx=typeof WeakMap=="function"?WeakMap:Map,ae=0,ve=null,Qt=null,Xt=0,ce=0,Un=null,Xr=!1,ao=!1,Ld=!1,br=0,Ve=0,Zr=0,ea=0,Ud=0,qn=0,oo=0,Pl=null,Dn=null,qd=!1,qc=0,E_=0,Fc=1/0,Hc=null,$r=null,We=0,Jr=null,lo=null,Er=0,Fd=0,Hd=null,x_=null,Bl=0,Gd=null;function Fn(){return(ae&2)!==0&&Xt!==0?Xt&-Xt:X.T!==null?$d():Gu()}function T_(){if(qn===0)if((Xt&536870912)===0||Jt){var e=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),qn=e}else qn=536870912;return e=Bn.current,e!==null&&(e.flags|=32),qn}function Vn(e,i,a){(e===ve&&(ce===2||ce===9)||e.cancelPendingCommit!==null)&&(uo(e,0),Wr(e,Xt,qn,!1)),Rs(e,a),((ae&2)===0||e!==ve)&&(e===ve&&((ae&2)===0&&(ea|=a),Ve===4&&Wr(e,Xt,qn,!1)),Qi(e))}function w_(e,i,a){if((ae&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||fi(e,i),f=l?Kx(e,i):Qd(e,i,!0),d=l;do{if(f===0){ao&&!l&&Wr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!Hx(a)){f=Qd(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var T=e;f=Pl;var D=T.current.memoizedState.isDehydrated;if(D&&(uo(T,_).flags|=256),_=Qd(T,_,!1),_!==2){if(Ld&&!D){T.errorRecoveryDisabledLanes|=d,ea|=d,f=4;break t}d=Dn,Dn=f,d!==null&&(Dn===null?Dn=d:Dn.push.apply(Dn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){uo(e,0),Wr(e,i,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Wr(l,i,qn,!Xr);break t;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=qc+300-ln(),10<f)){if(Wr(l,i,qn,!Xr),Ri(l,0,!0)!==0)break t;Er=i,l.timeoutHandle=e0(S_.bind(null,l,a,Dn,Hc,qd,i,qn,ea,oo,Xr,d,"Throttled",-0,0),f);break t}S_(l,a,Dn,Hc,qd,i,qn,ea,oo,Xr,d,null,-0,0)}}break}while(!0);Qi(e)}function S_(e,i,a,l,f,d,_,T,D,F,W,rt,G,Y){if(e.timeoutHandle=-1,rt=i.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},y_(i,d,rt);var bt=(d&62914560)===d?qc-ln():(d&4194048)===d?E_-ln():0;if(bt=CT(rt,bt),bt!==null){Er=d,e.cancelPendingCommit=bt(M_.bind(null,e,i,d,a,l,f,_,T,D,W,rt,null,G,Y)),Wr(e,d,_,!F);return}}M_(e,i,d,a,l,f,_,T,D)}function Hx(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!jn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wr(e,i,a,l){i&=~Ud,i&=~ea,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var d=31-vt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Ns(e,a,i)}function Gc(){return(ae&6)===0?(Ll(0),!1):!0}function Kd(){if(Qt!==null){if(ce===0)var e=Qt.return;else e=Qt,cr=Ks=null,ld(e),Wa=null,xl=0,e=Qt;for(;e!==null;)n_(e.alternate,e),e=e.return;Qt=null}}function uo(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,cT(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Er=0,Kd(),ve=e,Qt=a=lr(e.current,null),Xt=i,ce=0,Un=null,Xr=!1,ao=fi(e,i),Ld=!1,oo=qn=Ud=ea=Zr=Ve=0,Dn=Pl=null,qd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-vt(l),d=1<<f;i|=e[f],l&=~d}return br=i,fc(),a}function A_(e,i){Ft=null,X.H=Nl,i===Ja||i===bc?(i=qp(),ce=3):i===Zf?(i=qp(),ce=4):ce=i===wd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Un=i,Qt===null&&(Ve=1,Oc(e,ti(i,e.current)))}function I_(){var e=Bn.current;return e===null?!0:(Xt&4194048)===Xt?ri===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?e===ri:!1}function C_(){var e=X.H;return X.H=Nl,e===null?Nl:e}function R_(){var e=X.A;return X.A=qx,e}function Kc(){Ve=4,Xr||(Xt&4194048)!==Xt&&Bn.current!==null||(ao=!0),(Zr&134217727)===0&&(ea&134217727)===0||ve===null||Wr(ve,Xt,qn,!1)}function Qd(e,i,a){var l=ae;ae|=2;var f=C_(),d=R_();(ve!==e||Xt!==i)&&(Hc=null,uo(e,i)),i=!1;var _=Ve;t:do try{if(ce!==0&&Qt!==null){var T=Qt,D=Un;switch(ce){case 8:Kd(),_=6;break t;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var F=ce;if(ce=0,Un=null,co(e,T,D,F),a&&ao){_=0;break t}break;default:F=ce,ce=0,Un=null,co(e,T,D,F)}}Gx(),_=Ve;break}catch(W){A_(e,W)}while(!0);return i&&e.shellSuspendCounter++,cr=Ks=null,ae=l,X.H=f,X.A=d,Qt===null&&(ve=null,Xt=0,fc()),_}function Gx(){for(;Qt!==null;)N_(Qt)}function Kx(e,i){var a=ae;ae|=2;var l=C_(),f=R_();ve!==e||Xt!==i?(Hc=null,Fc=ln()+500,uo(e,i)):ao=fi(e,i);t:do try{if(ce!==0&&Qt!==null){i=Qt;var d=Un;e:switch(ce){case 1:ce=0,Un=null,co(e,i,d,1);break;case 2:case 9:if(Lp(d)){ce=0,Un=null,D_(i);break}i=function(){ce!==2&&ce!==9||ve!==e||(ce=7),Qi(e)},d.then(i,i);break t;case 3:ce=7;break t;case 4:ce=5;break t;case 7:Lp(d)?(ce=0,Un=null,D_(i)):(ce=0,Un=null,co(e,i,d,7));break;case 5:var _=null;switch(Qt.tag){case 26:_=Qt.memoizedState;case 5:case 27:var T=Qt;if(_?p0(_):T.stateNode.complete){ce=0,Un=null;var D=T.sibling;if(D!==null)Qt=D;else{var F=T.return;F!==null?(Qt=F,Qc(F)):Qt=null}break e}}ce=0,Un=null,co(e,i,d,5);break;case 6:ce=0,Un=null,co(e,i,d,6);break;case 8:Kd(),Ve=6;break t;default:throw Error(r(462))}}Qx();break}catch(W){A_(e,W)}while(!0);return cr=Ks=null,X.H=l,X.A=f,ae=a,Qt!==null?0:(ve=null,Xt=0,fc(),Ve)}function Qx(){for(;Qt!==null&&!Sa();)N_(Qt)}function N_(e){var i=t_(e.alternate,e,br);e.memoizedProps=e.pendingProps,i===null?Qc(e):Qt=i}function D_(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Yy(a,i,i.pendingProps,i.type,void 0,Xt);break;case 11:i=Yy(a,i,i.pendingProps,i.type.render,i.ref,Xt);break;case 5:ld(i);default:n_(a,i),i=Qt=Rp(i,br),i=t_(a,i,br)}e.memoizedProps=e.pendingProps,i===null?Qc(e):Qt=i}function co(e,i,a,l){cr=Ks=null,ld(i),Wa=null,xl=0;var f=i.return;try{if(kx(e,f,i,a,Xt)){Ve=1,Oc(e,ti(a,e.current)),Qt=null;return}}catch(d){if(f!==null)throw Qt=f,d;Ve=1,Oc(e,ti(a,e.current)),Qt=null;return}i.flags&32768?(Jt||l===1?e=!0:ao||(Xt&536870912)!==0?e=!1:(Xr=e=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),V_(i,e)):Qc(i)}function Qc(e){var i=e;do{if((i.flags&32768)!==0){V_(i,Xr);return}e=i.return;var a=Px(i.alternate,i,br);if(a!==null){Qt=a;return}if(i=i.sibling,i!==null){Qt=i;return}Qt=i=e}while(i!==null);Ve===0&&(Ve=5)}function V_(e,i){do{var a=Bx(e.alternate,e);if(a!==null){a.flags&=32767,Qt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Qt=e;return}Qt=e=a}while(e!==null);Ve=6,Qt=null}function M_(e,i,a,l,f,d,_,T,D){e.cancelPendingCommit=null;do Yc();while(We!==0);if((ae&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=kf,Af(e,a,d,_,T,D),e===ve&&(Qt=ve=null,Xt=0),lo=i,Jr=e,Er=a,Fd=d,Hd=f,x_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,$x(Ii,function(){return P_(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=ut.p,ut.p=2,_=ae,ae|=4;try{Lx(e,i,a)}finally{ae=_,ut.p=f,X.T=l}}We=1,O_(),k_(),z_()}}function O_(){if(We===1){We=0;var e=Jr,i=lo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ut.p;ut.p=2;var f=ae;ae|=4;try{m_(i,e);var d=sm,_=bp(e.containerInfo),T=d.focusedElem,D=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&vp(T.ownerDocument.documentElement,T)){if(D!==null&&Nf(T)){var F=D.start,W=D.end;if(W===void 0&&(W=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(W,T.value.length);else{var rt=T.ownerDocument||document,G=rt&&rt.defaultView||window;if(G.getSelection){var Y=G.getSelection(),bt=T.textContent.length,Ot=Math.min(D.start,bt),_e=D.end===void 0?Ot:Math.min(D.end,bt);!Y.extend&&Ot>_e&&(_=_e,_e=Ot,Ot=_);var j=_p(T,Ot),O=_p(T,_e);if(j&&O&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==O.node||Y.focusOffset!==O.offset)){var q=rt.createRange();q.setStart(j.node,j.offset),Y.removeAllRanges(),Ot>_e?(Y.addRange(q),Y.extend(O.node,O.offset)):(q.setEnd(O.node,O.offset),Y.addRange(q))}}}}for(rt=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&rt.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<rt.length;T++){var nt=rt[T];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}ah=!!rm,sm=rm=null}finally{ae=f,ut.p=l,X.T=a}}e.current=i,We=2}}function k_(){if(We===2){We=0;var e=Jr,i=lo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ut.p;ut.p=2;var f=ae;ae|=4;try{u_(e,i.alternate,i)}finally{ae=f,ut.p=l,X.T=a}}We=3}}function z_(){if(We===4||We===3){We=0,Rr();var e=Jr,i=lo,a=Er,l=x_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?We=5:(We=0,lo=Jr=null,j_(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&($r=null),rr(a),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(On,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=ut.p,ut.p=2,X.T=null;try{for(var d=e.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{X.T=i,ut.p=f}}(Er&3)!==0&&Yc(),Qi(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Gd?Bl++:(Bl=0,Gd=e):Bl=0,Ll(0)}}function j_(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,bl(i)))}function Yc(){return O_(),k_(),z_(),P_()}function P_(){if(We!==5)return!1;var e=Jr,i=Fd;Fd=0;var a=rr(Er),l=X.T,f=ut.p;try{ut.p=32>a?32:a,X.T=null,a=Hd,Hd=null;var d=Jr,_=Er;if(We=0,lo=Jr=null,Er=0,(ae&6)!==0)throw Error(r(331));var T=ae;if(ae|=4,v_(d.current),p_(d,d.current,_,a),ae=T,Ll(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(On,d)}catch{}return!0}finally{ut.p=f,X.T=l,j_(e,i)}}function B_(e,i,a){i=ti(a,i),i=Td(e.stateNode,i,2),e=Gr(e,i,2),e!==null&&(Rs(e,2),Qi(e))}function he(e,i,a){if(e.tag===3)B_(e,e,a);else for(;i!==null;){if(i.tag===3){B_(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){e=ti(a,e),a=Ly(2),l=Gr(i,a,2),l!==null&&(Uy(a,l,i,e),Rs(l,2),Qi(l));break}}i=i.return}}function Yd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Fx;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Ld=!0,f.add(a),e=Yx.bind(null,e,i,a),i.then(e,e))}function Yx(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ve===e&&(Xt&a)===a&&(Ve===4||Ve===3&&(Xt&62914560)===Xt&&300>ln()-qc?(ae&2)===0&&uo(e,0):Ud|=a,oo===Xt&&(oo=0)),Qi(e)}function L_(e,i){i===0&&(i=Hu()),e=Fs(e,i),e!==null&&(Rs(e,i),Qi(e))}function Xx(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),L_(e,a)}function Zx(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),L_(e,a)}function $x(e,i){return Oe(e,i)}var Xc=null,ho=null,Xd=!1,Zc=!1,Zd=!1,ts=0;function Qi(e){e!==ho&&e.next===null&&(ho===null?Xc=ho=e:ho=ho.next=e),Zc=!0,Xd||(Xd=!0,Wx())}function Ll(e,i){if(!Zd&&Zc){Zd=!0;do for(var a=!1,l=Xc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-vt(42|e)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,H_(l,d))}else d=Xt,d=Ri(l,l===ve?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||fi(l,d)||(a=!0,H_(l,d));l=l.next}while(a);Zd=!1}}function Jx(){U_()}function U_(){Zc=Xd=!1;var e=0;ts!==0&&uT()&&(e=ts);for(var i=ln(),a=null,l=Xc;l!==null;){var f=l.next,d=q_(l,i);d===0?(l.next=null,a===null?Xc=f:a.next=f,f===null&&(ho=a)):(a=l,(e!==0||(d&3)!==0)&&(Zc=!0)),l=f}We!==0&&We!==5||Ll(e),ts!==0&&(ts=0)}function q_(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-vt(d),T=1<<_,D=f[_];D===-1?((T&a)===0||(T&l)!==0)&&(f[_]=Sf(T,i)):D<=i&&(e.expiredLanes|=T),d&=~T}if(i=ve,a=Xt,a=Ri(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(ce===2||ce===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&hi(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||fi(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&hi(l),rr(a)){case 2:case 8:a=ir;break;case 32:a=Ii;break;case 268435456:a=Aa;break;default:a=Ii}return l=F_.bind(null,e),a=Oe(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&hi(l),e.callbackPriority=2,e.callbackNode=null,2}function F_(e,i){if(We!==0&&We!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Yc()&&e.callbackNode!==a)return null;var l=Xt;return l=Ri(e,e===ve?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(w_(e,l,i),q_(e,ln()),e.callbackNode!=null&&e.callbackNode===a?F_.bind(null,e):null)}function H_(e,i){if(Yc())return null;w_(e,i,!0)}function Wx(){hT(function(){(ae&6)!==0?Oe(Is,Jx):U_()})}function $d(){if(ts===0){var e=Za;e===0&&(e=Yn,Yn<<=1,(Yn&261888)===0&&(Yn=256)),ts=e}return ts}function G_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ka(""+e)}function K_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function tT(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=G_((f[en]||null).action),_=l.submitter;_&&(i=(i=_[en]||null)?G_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new Li("action","action",null,l,f);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ts!==0){var D=_?K_(f,_):new FormData(f);yd(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(T.preventDefault(),D=_?K_(f,_):new FormData(f),yd(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var Jd=0;Jd<Of.length;Jd++){var Wd=Of[Jd],eT=Wd.toLowerCase(),nT=Wd[0].toUpperCase()+Wd.slice(1);bi(eT,"on"+nT)}bi(Tp,"onAnimationEnd"),bi(wp,"onAnimationIteration"),bi(Sp,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(_x,"onTransitionRun"),bi(vx,"onTransitionStart"),bi(bx,"onTransitionCancel"),bi(Ap,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function Q_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=F;try{d(f)}catch(W){hc(W)}f.currentTarget=null,d=D}else for(_=0;_<l.length;_++){if(T=l[_],D=T.instance,F=T.currentTarget,T=T.listener,D!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=F;try{d(f)}catch(W){hc(W)}f.currentTarget=null,d=D}}}}function Yt(e,i){var a=i[Na];a===void 0&&(a=i[Na]=new Set);var l=e+"__bubble";a.has(l)||(Y_(i,e,2,!1),a.add(l))}function tm(e,i,a){var l=0;i&&(l|=4),Y_(a,e,l,i)}var $c="_reactListening"+Math.random().toString(36).slice(2);function em(e){if(!e[$c]){e[$c]=!0,Wo.forEach(function(a){a!=="selectionchange"&&(iT.has(a)||tm(a,!1,e),tm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[$c]||(i[$c]=!0,tm("selectionchange",!1,i))}}function Y_(e,i,a,l){switch(T0(i)){case 2:var f=DT;break;case 8:f=VT;break;default:f=pm}a=f.bind(null,i,a,e),f=void 0,!ks||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function nm(e,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Mi(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=d=_;continue t}T=T.parentNode}}l=l.return}kr(function(){var F=d,W=Zn(a),rt=[];t:{var G=Ip.get(e);if(G!==void 0){var Y=Li,bt=e;switch(e){case"keypress":if(js(a)===0)break t;case"keydown":case"keyup":Y=lc;break;case"focusin":bt="focus",Y=Bs;break;case"focusout":bt="blur",Y=Bs;break;case"beforeblur":case"afterblur":Y=Bs;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Tp:case wp:case Sp:Y=ec;break;case Ap:Y=w;break;case"scroll":case"scrollend":Y=hl;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=or;break;case"toggle":case"beforetoggle":Y=qt}var Ot=(i&4)!==0,_e=!Ot&&(e==="scroll"||e==="scrollend"),j=Ot?G!==null?G+"Capture":null:G;Ot=[];for(var O=F,q;O!==null;){var nt=O;if(q=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||q===null||j===null||(nt=pi(O,j),nt!=null&&Ot.push(ql(O,nt,q))),_e)break;O=O.return}0<Ot.length&&(G=new Y(G,bt,null,a,W),rt.push({event:G,listeners:Ot}))}}if((i&7)===0){t:{if(G=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",G&&a!==ll&&(bt=a.relatedTarget||a.fromElement)&&(Mi(bt)||bt[Di]))break t;if((Y||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(bt=a.relatedTarget||a.toElement,Y=F,bt=bt?Mi(bt):null,bt!==null&&(_e=u(bt),Ot=bt.tag,bt!==_e||Ot!==5&&Ot!==27&&Ot!==6)&&(bt=null)):(Y=null,bt=F),Y!==bt)){if(Ot=fl,nt="onMouseLeave",j="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Ot=or,nt="onPointerLeave",j="onPointerEnter",O="pointer"),_e=Y==null?G:kn(Y),q=bt==null?G:kn(bt),G=new Ot(nt,O+"leave",Y,a,W),G.target=_e,G.relatedTarget=q,nt=null,Mi(W)===F&&(Ot=new Ot(j,O+"enter",bt,a,W),Ot.target=q,Ot.relatedTarget=_e,nt=Ot),_e=nt,Y&&bt)e:{for(Ot=rT,j=Y,O=bt,q=0,nt=j;nt;nt=Ot(nt))q++;nt=0;for(var Dt=O;Dt;Dt=Ot(Dt))nt++;for(;0<q-nt;)j=Ot(j),q--;for(;0<nt-q;)O=Ot(O),nt--;for(;q--;){if(j===O||O!==null&&j===O.alternate){Ot=j;break e}j=Ot(j),O=Ot(O)}Ot=null}else Ot=null;Y!==null&&X_(rt,G,Y,Ot,!1),bt!==null&&_e!==null&&X_(rt,_e,bt,Ot,!0)}}t:{if(G=F?kn(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var ie=fp;else if(cp(G))if(dp)ie=gx;else{ie=dx;var At=fx}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Oa(F.elementType)&&(ie=fp):ie=mx;if(ie&&(ie=ie(e,F))){hp(rt,ie,a,W);break t}At&&At(e,G,F),e==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&sl(G,"number",G.value)}switch(At=F?kn(F):window,e){case"focusin":(cp(At)||At.contentEditable==="true")&&(qa=At,Df=F,yl=null);break;case"focusout":yl=Df=qa=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Ep(rt,a,W);break;case"selectionchange":if(yx)break;case"keydown":case"keyup":Ep(rt,a,W)}var Ht;if(se)t:{switch(e){case"compositionstart":var Zt="onCompositionStart";break t;case"compositionend":Zt="onCompositionEnd";break t;case"compositionupdate":Zt="onCompositionUpdate";break t}Zt=void 0}else Ua?Ls(e,a)&&(Zt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Zt="onCompositionStart");Zt&&(Fi&&a.locale!=="ko"&&(Ua||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&Ua&&(Ht=cl()):(Bi=W,ul="value"in Bi?Bi.value:Bi.textContent,Ua=!0)),At=Jc(F,Zt),0<At.length&&(Zt=new qi(Zt,e,null,a,W),rt.push({event:Zt,listeners:At}),Ht?Zt.data=Ht:(Ht=La(a),Ht!==null&&(Zt.data=Ht)))),(Ht=Jn?lx(e,a):ux(e,a))&&(Zt=Jc(F,"onBeforeInput"),0<Zt.length&&(At=new qi("onBeforeInput","beforeinput",null,a,W),rt.push({event:At,listeners:Zt}),At.data=Ht)),tT(rt,e,F,a,W)}Q_(rt,i)})}function ql(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Jc(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=pi(e,a),f!=null&&l.unshift(ql(e,f,d)),f=pi(e,i),f!=null&&l.push(ql(e,f,d))),e.tag===3)return l;e=e.return}return[]}function rT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function X_(e,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||F===null||(D=F,f?(F=pi(a,d),F!=null&&_.unshift(ql(a,F,D))):f||(F=pi(a,d),F!=null&&_.push(ql(a,F,D)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var sT=/\r\n?/g,aT=/\u0000|\uFFFD/g;function Z_(e){return(typeof e=="string"?e:""+e).replace(sT,`
`).replace(aT,"")}function $_(e,i){return i=Z_(i),Z_(e)===i}function ye(e,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||In(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&In(e,""+l);break;case"className":zn(e,"class",l);break;case"tabIndex":zn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(e,a,l);break;case"style":ol(e,l,d);break;case"data":if(i!=="object"){zn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ka(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ye(e,i,"name",f.name,f,null),ye(e,i,"formEncType",f.formEncType,f,null),ye(e,i,"formMethod",f.formMethod,f,null),ye(e,i,"formTarget",f.formTarget,f,null)):(ye(e,i,"encType",f.encType,f,null),ye(e,i,"method",f.method,f,null),ye(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ka(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=gi);break;case"onScroll":l!=null&&Yt("scroll",e);break;case"onScrollEnd":l!=null&&Yt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ka(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Yt("beforetoggle",e),Yt("toggle",e),Va(e,"popover",l);break;case"xlinkActuate":Ue(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ue(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ue(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ue(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ue(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ue(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Va(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ju.get(a)||a,Va(e,a,l))}}function im(e,i,a,l,f,d){switch(a){case"style":ol(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?In(e,l):(typeof l=="number"||typeof l=="bigint")&&In(e,""+l);break;case"onScroll":l!=null&&Yt("scroll",e);break;case"onScrollEnd":l!=null&&Yt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[en]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Va(e,a,l)}}}function dn(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",e),Yt("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ye(e,i,d,_,a,null)}}f&&ye(e,i,"srcSet",a.srcSet,a,null),l&&ye(e,i,"src",a.src,a,null);return;case"input":Yt("invalid",e);var T=d=_=f=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:ye(e,i,l,W,a,null)}}Xu(e,d,T,D,F,_,f,!1);return;case"select":Yt("invalid",e),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:ye(e,i,f,T,a,null)}i=d,a=_,e.multiple=!!l,i!=null?Dr(e,!!l,i,!1):a!=null&&Dr(e,!!l,a,!0);return;case"textarea":Yt("invalid",e),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ye(e,i,_,T,a,null)}Vr(e,l,f,d);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ye(e,i,D,l,a,null)}return;case"dialog":Yt("beforetoggle",e),Yt("toggle",e),Yt("cancel",e),Yt("close",e);break;case"iframe":case"object":Yt("load",e);break;case"video":case"audio":for(l=0;l<Ul.length;l++)Yt(Ul[l],e);break;case"image":Yt("error",e),Yt("load",e);break;case"details":Yt("toggle",e);break;case"embed":case"source":case"link":Yt("error",e),Yt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ye(e,i,F,l,a,null)}return;default:if(Oa(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&im(e,i,W,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ye(e,i,T,l,a,null))}function oT(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,D=null,F=null,W=null;for(Y in a){var rt=a[Y];if(a.hasOwnProperty(Y)&&rt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=rt;default:l.hasOwnProperty(Y)||ye(e,i,Y,null,l,rt)}}for(var G in l){var Y=l[G];if(rt=a[G],l.hasOwnProperty(G)&&(Y!=null||rt!=null))switch(G){case"type":d=Y;break;case"name":f=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":_=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==rt&&ye(e,i,G,Y,l,rt)}}Ma(e,_,T,D,F,W,d,f);return;case"select":Y=_=T=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(d)||ye(e,i,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==D&&ye(e,i,f,d,l,D)}i=T,a=_,l=Y,G!=null?Dr(e,!!a,G,!1):!!l!=!!a&&(i!=null?Dr(e,!!a,i,!0):Dr(e,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ye(e,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ye(e,i,_,f,l,d)}Zu(e,G,Y);return;case"option":for(var bt in a)if(G=a[bt],a.hasOwnProperty(bt)&&G!=null&&!l.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:ye(e,i,bt,null,l,G)}for(D in l)if(G=l[D],Y=a[D],l.hasOwnProperty(D)&&G!==Y&&(G!=null||Y!=null))switch(D){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ye(e,i,D,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in a)G=a[Ot],a.hasOwnProperty(Ot)&&G!=null&&!l.hasOwnProperty(Ot)&&ye(e,i,Ot,null,l,G);for(F in l)if(G=l[F],Y=a[F],l.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:ye(e,i,F,G,l,Y)}return;default:if(Oa(i)){for(var _e in a)G=a[_e],a.hasOwnProperty(_e)&&G!==void 0&&!l.hasOwnProperty(_e)&&im(e,i,_e,void 0,l,G);for(W in l)G=l[W],Y=a[W],!l.hasOwnProperty(W)||G===Y||G===void 0&&Y===void 0||im(e,i,W,G,l,Y);return}}for(var j in a)G=a[j],a.hasOwnProperty(j)&&G!=null&&!l.hasOwnProperty(j)&&ye(e,i,j,null,l,G);for(rt in l)G=l[rt],Y=a[rt],!l.hasOwnProperty(rt)||G===Y||G==null&&Y==null||ye(e,i,rt,G,l,Y)}function J_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&J_(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],F=D.startTime;if(F>T)break;var W=D.transferSize,rt=D.initiatorType;W&&J_(rt)&&(D=D.responseEnd,_+=W*(D<T?1:(T-F)/(D-F)))}if(--l,i+=8*(d+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var rm=null,sm=null;function Wc(e){return e.nodeType===9?e:e.ownerDocument}function W_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t0(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function am(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var om=null;function uT(){var e=window.event;return e&&e.type==="popstate"?e===om?!1:(om=e,!0):(om=null,!1)}var e0=typeof setTimeout=="function"?setTimeout:void 0,cT=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,hT=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(e){return n0.resolve(null).then(e).catch(fT)}:e0;function fT(e){setTimeout(function(){throw e})}function es(e){return e==="head"}function i0(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Fl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Fl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Vi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Fl(e.ownerDocument.body);a=f}while(a);po(i)}function r0(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function lm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lm(a),Da(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function dT(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Vi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=si(e.nextSibling),e===null)break}return null}function mT(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=si(e.nextSibling),e===null))return null;return e}function s0(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=si(e.nextSibling),e===null))return null;return e}function um(e){return e.data==="$?"||e.data==="$~"}function cm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gT(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function si(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var hm=null;function a0(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return si(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function o0(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function l0(e,i,a){switch(i=Wc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Fl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Da(e)}var ai=new Map,u0=new Set;function th(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xr=ut.d;ut.d={f:pT,r:yT,D:_T,C:vT,L:bT,m:ET,X:TT,S:xT,M:wT};function pT(){var e=xr.f(),i=Gc();return e||i}function yT(e){var i=Xn(e);i!==null&&i.tag===5&&i.type==="form"?Ay(i):xr.r(e)}var fo=typeof document>"u"?null:document;function c0(e,i,a){var l=fo;if(l&&typeof i=="string"&&i){var f=An(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),u0.has(f)||(u0.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),dn(i,"link",e),Le(i),l.head.appendChild(i)))}}function _T(e){xr.D(e),c0("dns-prefetch",e,null)}function vT(e,i){xr.C(e,i),c0("preconnect",e,i)}function bT(e,i,a){xr.L(e,i,a);var l=fo;if(l&&e&&i){var f='link[rel="preload"][as="'+An(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+An(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+An(a.imageSizes)+'"]')):f+='[href="'+An(e)+'"]';var d=f;switch(i){case"style":d=mo(e);break;case"script":d=go(e)}ai.has(d)||(e=x({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),ai.set(d,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(Hl(d))||i==="script"&&l.querySelector(Gl(d))||(i=l.createElement("link"),dn(i,"link",e),Le(i),l.head.appendChild(i)))}}function ET(e,i){xr.m(e,i);var a=fo;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+An(l)+'"][href="'+An(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=go(e)}if(!ai.has(d)&&(e=x({rel:"modulepreload",href:e},i),ai.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(d)))return}l=a.createElement("link"),dn(l,"link",e),Le(l),a.head.appendChild(l)}}}function xT(e,i,a){xr.S(e,i,a);var l=fo;if(l&&e){var f=Oi(l).hoistableStyles,d=mo(e);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Hl(d)))T.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},a),(a=ai.get(d))&&fm(e,a);var D=_=l.createElement("link");Le(D),dn(D,"link",e),D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,eh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function TT(e,i){xr.X(e,i);var a=fo;if(a&&e){var l=Oi(a).hoistableScripts,f=go(e),d=l.get(f);d||(d=a.querySelector(Gl(f)),d||(e=x({src:e,async:!0},i),(i=ai.get(f))&&dm(e,i),d=a.createElement("script"),Le(d),dn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function wT(e,i){xr.M(e,i);var a=fo;if(a&&e){var l=Oi(a).hoistableScripts,f=go(e),d=l.get(f);d||(d=a.querySelector(Gl(f)),d||(e=x({src:e,async:!0,type:"module"},i),(i=ai.get(f))&&dm(e,i),d=a.createElement("script"),Le(d),dn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function h0(e,i,a,l){var f=(f=kt.current)?th(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=mo(a.href),a=Oi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=mo(a.href);var d=Oi(f).hoistableStyles,_=d.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=f.querySelector(Hl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),ai.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ai.set(e,a),d||ST(f,e,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=go(a),a=Oi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function mo(e){return'href="'+An(e)+'"'}function Hl(e){return'link[rel="stylesheet"]['+e+"]"}function f0(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function ST(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),dn(i,"link",a),Le(i),e.head.appendChild(i))}function go(e){return'[src="'+An(e)+'"]'}function Gl(e){return"script[async]"+e}function d0(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+An(a.href)+'"]');if(l)return i.instance=l,Le(l),l;var f=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Le(l),dn(l,"style",f),eh(l,a.precedence,e),i.instance=l;case"stylesheet":f=mo(a.href);var d=e.querySelector(Hl(f));if(d)return i.state.loading|=4,i.instance=d,Le(d),d;l=f0(a),(f=ai.get(f))&&fm(l,f),d=(e.ownerDocument||e).createElement("link"),Le(d);var _=d;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),dn(d,"link",l),i.state.loading|=4,eh(d,a.precedence,e),i.instance=d;case"script":return d=go(a.src),(f=e.querySelector(Gl(d)))?(i.instance=f,Le(f),f):(l=a,(f=ai.get(d))&&(l=x({},a),dm(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Le(f),dn(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,eh(l,a.precedence,e));return i.instance}function eh(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function fm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function dm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var nh=null;function m0(e,i,a){if(nh===null){var l=new Map,f=nh=new Map;f.set(a,l)}else f=nh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Vi]||d[Be]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=e+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function g0(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function AT(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function p0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function IT(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=mo(l.href),d=i.querySelector(Hl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=ih.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Le(d);return}d=i.ownerDocument||i,l=f0(l),(f=ai.get(f))&&fm(l,f),d=d.createElement("link"),Le(d);var _=d;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),dn(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ih.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var mm=0;function CT(e,i){return e.stylesheets&&e.count===0&&sh(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&mm===0&&(mm=62500*lT());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>mm?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function ih(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rh=null;function sh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rh=new Map,i.forEach(RT,e),rh=null,ih.call(e))}function RT(e,i){if(!(i.state.loading&4)){var a=rh.get(e);if(a)var l=a.get(null);else{a=new Map,rh.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=ih.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Kl={$$typeof:et,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function NT(e,i,a,l,f,d,_,T,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function y0(e,i,a,l,f,d,_,T,D,F,W,rt){return e=new NT(e,i,a,_,D,F,W,rt,T),i=1,d===!0&&(i|=24),d=Pn(3,null,null,i),e.current=d,d.stateNode=e,i=Qf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},$f(d),e}function _0(e){return e?(e=Ga,e):Ga}function v0(e,i,a,l,f,d){f=_0(f),l.context===null?l.context=f:l.pendingContext=f,l=Hr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Gr(e,l,i),a!==null&&(Vn(a,e,i),wl(a,e,i))}function b0(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function gm(e,i){b0(e,i),(e=e.alternate)&&b0(e,i)}function E0(e){if(e.tag===13||e.tag===31){var i=Fs(e,67108864);i!==null&&Vn(i,e,67108864),gm(e,67108864)}}function x0(e){if(e.tag===13||e.tag===31){var i=Fn();i=Ds(i);var a=Fs(e,i);a!==null&&Vn(a,e,i),gm(e,i)}}var ah=!0;function DT(e,i,a,l){var f=X.T;X.T=null;var d=ut.p;try{ut.p=2,pm(e,i,a,l)}finally{ut.p=d,X.T=f}}function VT(e,i,a,l){var f=X.T;X.T=null;var d=ut.p;try{ut.p=8,pm(e,i,a,l)}finally{ut.p=d,X.T=f}}function pm(e,i,a,l){if(ah){var f=ym(l);if(f===null)nm(e,i,l,oh,a),w0(e,l);else if(OT(f,e,i,a,l))l.stopPropagation();else if(w0(e,l),i&4&&-1<MT.indexOf(e)){for(;f!==null;){var d=Xn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ci(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-vt(_);T.entanglements[1]|=D,_&=~D}Qi(d),(ae&6)===0&&(Fc=ln()+500,Ll(0))}}break;case 31:case 13:T=Fs(d,2),T!==null&&Vn(T,d,2),Gc(),gm(d,2)}if(d=ym(l),d===null&&nm(e,i,l,oh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else nm(e,i,l,null,a)}}function ym(e){return e=Zn(e),_m(e)}var oh=null;function _m(e){if(oh=null,e=Mi(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=c(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return oh=e,null}function T0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nr()){case Is:return 2;case ir:return 8;case Ii:case Zo:return 32;case Aa:return 268435456;default:return 32}default:return 32}}var vm=!1,ns=null,is=null,rs=null,Ql=new Map,Yl=new Map,ss=[],MT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w0(e,i){switch(e){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ql.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(i.pointerId)}}function Xl(e,i,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Xn(i),i!==null&&E0(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function OT(e,i,a,l,f){switch(i){case"focusin":return ns=Xl(ns,e,i,a,l,f),!0;case"dragenter":return is=Xl(is,e,i,a,l,f),!0;case"mouseover":return rs=Xl(rs,e,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Ql.set(d,Xl(Ql.get(d)||null,e,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Yl.set(d,Xl(Yl.get(d)||null,e,i,a,l,f)),!0}return!1}function S0(e){var i=Mi(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){e.blockedOn=i,di(e.priority,function(){x0(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,di(e.priority,function(){x0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=ym(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);ll=l,a.target.dispatchEvent(l),ll=null}else return i=Xn(a),i!==null&&E0(i),e.blockedOn=a,!1;i.shift()}return!0}function A0(e,i,a){lh(e)&&a.delete(i)}function kT(){vm=!1,ns!==null&&lh(ns)&&(ns=null),is!==null&&lh(is)&&(is=null),rs!==null&&lh(rs)&&(rs=null),Ql.forEach(A0),Yl.forEach(A0)}function uh(e,i){e.blockedOn===i&&(e.blockedOn=null,vm||(vm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kT)))}var ch=null;function I0(e){ch!==e&&(ch=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ch===e&&(ch=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var d=Xn(a);d!==null&&(e.splice(i,3),i-=3,yd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function po(e){function i(D){return uh(D,e)}ns!==null&&uh(ns,e),is!==null&&uh(is,e),rs!==null&&uh(rs,e),Ql.forEach(i),Yl.forEach(i);for(var a=0;a<ss.length;a++){var l=ss[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)S0(a),a.blockedOn===null&&ss.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[en]||null;if(typeof d=="function")_||I0(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[en]||null)T=_.formAction;else if(_m(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),I0(a)}}}function C0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function bm(e){this._internalRoot=e}hh.prototype.render=bm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Fn();v0(a,l,e,i,null,null)},hh.prototype.unmount=bm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;v0(e.current,2,null,e,null,null),Gc(),i[Di]=null}};function hh(e){this._internalRoot=e}hh.prototype.unstable_scheduleHydration=function(e){if(e){var i=Gu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<ss.length&&i!==0&&i<ss[a].priority;a++);ss.splice(a,0,e),a===0&&S0(e)}};var R0=t.version;if(R0!=="19.2.3")throw Error(r(527,R0,"19.2.3"));ut.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var zT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{On=fh.inject(zT),$e=fh}catch{}}return $l.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",f=zy,d=jy,_=Py;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=y0(e,1,!1,null,null,a,l,null,f,d,_,C0),e[Di]=i.current,em(e),new bm(i)},$l.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,f="",d=zy,_=jy,T=Py,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=y0(e,1,!0,i,a??null,l,f,D,d,_,T,C0),i.context=_0(null),a=i.current,l=Fn(),l=Ds(l),f=Hr(l),f.callback=null,Gr(a,f,l),a=l,i.current.lanes=a,Rs(i,a),Qi(i),e[Di]=i.current,em(e),new hh(i)},$l.version="19.2.3",$l}var B0;function KT(){if(B0)return Tm.exports;B0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Tm.exports=GT(),Tm.exports}var QT=KT();const YT=xb(QT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZT=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),L0=s=>{const t=ZT(s);return t.charAt(0).toUpperCase()+t.slice(1)},Tb=(...s)=>s.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),$T=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=$.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>$.createElement("svg",{ref:g,...JT,width:t,height:t,stroke:s,strokeWidth:r?Number(n)*24/Number(t):n,className:Tb("lucide",o),...!u&&!$T(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>$.createElement(p,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(s,t)=>{const n=$.forwardRef(({className:r,...o},u)=>$.createElement(WT,{ref:u,iconNode:t,className:Tb(`lucide-${XT(L0(s))}`,`lucide-${s}`,r),...o}));return n.displayName=L0(s),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ew=Ae("arrow-left",tw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],iw=Ae("arrow-right",nw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],sw=Ae("bookmark",rw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ow=Ae("chevron-down",aw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],uw=Ae("chevron-left",lw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hw=Ae("chevron-right",cw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dw=Ae("chevron-up",fw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],gw=Ae("clipboard",mw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],yw=Ae("copy",pw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],vw=Ae("ellipsis-vertical",_w);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ew=Ae("eye-off",bw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Tw=Ae("file-text",xw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Sw=Ae("folder",ww);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Iw=Ae("grip-vertical",Aw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],wb=Ae("house",Cw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Nw=Ae("layout-dashboard",Rw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Vw=Ae("lock-open",Dw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lm=Ae("lock",Mw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kw=Ae("plus",Ow);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jw=Ae("save",zw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bw=Ae("square-check-big",Pw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Uw=Ae("sticky-note",Lw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fw=Ae("trash-2",qw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gw=Ae("x",Hw),yt={Plus:kw,Trash:Fw,Save:jw,More:vw,Check:Bw,File:Tw,Folder:Sw,Memo:Uw,Close:Gw,ChevronRight:hw,ChevronLeft:uw,ChevronDown:ow,ChevronUp:dw,Dashboard:Nw,DragHandle:Iw,Back:ew,ArrowRight:iw,Bookmark:sw,Home:wb,EyeOff:Ew,Copy:yw,Clipboard:gw},Kw=()=>{};var U0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},Qw=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],c=s[n++],m=s[n++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],c=s[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},Ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,x=(u&3)<<4|m>>4;let S=(m&15)<<2|p>>6,N=p&63;g||(N=64,c||(S=64)),r.push(n[E],n[x],n[S],n[N])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Sb(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):Qw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||x==null)throw new Yw;const S=u<<2|m>>4;if(r.push(S),p!==64){const N=m<<4&240|p>>2;if(r.push(N),x!==64){const B=p<<6&192|x;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Yw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xw=function(s){const t=Sb(s);return Ab.encodeByteArray(t,!0)},Vh=function(s){return Xw(s).replace(/\./g,"")},Zw=function(s){try{return Ab.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=()=>Ib().__FIREBASE_DEFAULTS__,Jw=()=>{if(typeof process>"u"||typeof U0>"u")return;const s=U0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Ww=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Zw(s[1]);return t&&JSON.parse(t)},bg=()=>{try{return Kw()||$w()||Jw()||Ww()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},tS=s=>{var t,n;return(n=(t=bg())==null?void 0:t.emulatorHosts)==null?void 0:n[s]},eS=s=>{const t=tS(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Cb=()=>{var s;return(s=bg())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iS(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Vh(JSON.stringify(n)),Vh(JSON.stringify(c)),""].join(".")}const lu={};function sS(){const s={prod:[],emulator:[]};for(const t of Object.keys(lu))lu[t]?s.emulator.push(t):s.prod.push(t);return s}function aS(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let q0=!1;function oS(s,t){if(typeof window>"u"||typeof document>"u"||!Eg(window.location.host)||lu[s]===t||lu[s]||q0)return;lu[s]=t;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=sS().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{q0=!0,c()},S}function E(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function x(){const S=aS(r),N=n("text"),B=document.getElementById(N)||document.createElement("span"),P=n("learnmore"),K=document.getElementById(P)||document.createElement("a"),dt=n("preprendIcon"),Z=document.getElementById(dt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const et=S.element;m(et),E(K,P);const ot=p();g(Z,dt),et.append(Z,B,K,ot),document.body.appendChild(et)}u?(B.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rb(){var t;const s=(t=bg())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nb(){return!Rb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Db(){return!Rb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Vb(){try{return typeof indexedDB=="object"}catch{return!1}}function lS(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="FirebaseError";class Go extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=uS,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mb.prototype.create)}}class Mb{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?cS(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Go(o,m,r)}}function cS(s,t){return s.replace(hS,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const hS=/\{\$([^}]+)}/g;function Oh(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(F0(u)&&F0(c)){if(!Oh(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function F0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(s){return s&&s._delegate?s._delegate:s}class yu{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new nS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mS(t))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ia){return this.instances.has(t)}getOptions(t=ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dS(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ia){return this.component?this.component.multipleInstances?t:ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dS(s){return s===ia?void 0:s}function mS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new fS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(te||(te={}));const pS={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},yS=te.INFO,_S={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},vS=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=_S[t];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ob{constructor(t){this.name=t,this._logLevel=yS,this._logHandler=vS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in te))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}}const bS=(s,t)=>t.some(n=>s instanceof n);let H0,G0;function ES(){return H0||(H0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xS(){return G0||(G0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kb=new WeakMap,Um=new WeakMap,zb=new WeakMap,Im=new WeakMap,xg=new WeakMap;function TS(s){const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{n(ds(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&kb.set(n,s)}).catch(()=>{}),xg.set(t,s),t}function wS(s){if(Um.has(s))return;const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{n(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Um.set(s,t)}let qm={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return Um.get(s);if(t==="objectStoreNames")return s.objectStoreNames||zb.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function SS(s){qm=s(qm)}function AS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(Cm(this),t,...n);return zb.set(r,t.sort?t.sort():[t]),ds(r)}:xS().includes(s)?function(...t){return s.apply(Cm(this),t),ds(kb.get(this))}:function(...t){return ds(s.apply(Cm(this),t))}}function IS(s){return typeof s=="function"?AS(s):(s instanceof IDBTransaction&&wS(s),bS(s,ES())?new Proxy(s,qm):s)}function ds(s){if(s instanceof IDBRequest)return TS(s);if(Im.has(s))return Im.get(s);const t=IS(s);return t!==s&&(Im.set(s,t),xg.set(t,s)),t}const Cm=s=>xg.get(s);function CS(s,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=ds(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ds(c.result),g.oldVersion,g.newVersion,ds(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const RS=["get","getKey","getAll","getAllKeys","count"],NS=["put","add","delete","clear"],Rm=new Map;function K0(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Rm.get(t))return Rm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=NS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||RS.includes(n)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return Rm.set(t,u),u}SS(s=>({...s,get:(t,n,r)=>K0(t,n)||s.get(t,n,r),has:(t,n)=>!!K0(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VS(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Fm="@firebase/app",Q0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Ob("@firebase/app"),MS="@firebase/app-compat",OS="@firebase/analytics-compat",kS="@firebase/analytics",zS="@firebase/app-check-compat",jS="@firebase/app-check",PS="@firebase/auth",BS="@firebase/auth-compat",LS="@firebase/database",US="@firebase/data-connect",qS="@firebase/database-compat",FS="@firebase/functions",HS="@firebase/functions-compat",GS="@firebase/installations",KS="@firebase/installations-compat",QS="@firebase/messaging",YS="@firebase/messaging-compat",XS="@firebase/performance",ZS="@firebase/performance-compat",$S="@firebase/remote-config",JS="@firebase/remote-config-compat",WS="@firebase/storage",tA="@firebase/storage-compat",eA="@firebase/firestore",nA="@firebase/ai",iA="@firebase/firestore-compat",rA="firebase",sA="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",aA={[Fm]:"fire-core",[MS]:"fire-core-compat",[kS]:"fire-analytics",[OS]:"fire-analytics-compat",[jS]:"fire-app-check",[zS]:"fire-app-check-compat",[PS]:"fire-auth",[BS]:"fire-auth-compat",[LS]:"fire-rtdb",[US]:"fire-data-connect",[qS]:"fire-rtdb-compat",[FS]:"fire-fn",[HS]:"fire-fn-compat",[GS]:"fire-iid",[KS]:"fire-iid-compat",[QS]:"fire-fcm",[YS]:"fire-fcm-compat",[XS]:"fire-perf",[ZS]:"fire-perf-compat",[$S]:"fire-rc",[JS]:"fire-rc-compat",[WS]:"fire-gcs",[tA]:"fire-gcs-compat",[eA]:"fire-fst",[iA]:"fire-fst-compat",[nA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,oA=new Map,Gm=new Map;function Y0(s,t){try{s.container.addComponent(t)}catch(n){wr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function zh(s){const t=s.name;if(Gm.has(t))return wr.debug(`There were multiple attempts to register component ${t}.`),!1;Gm.set(t,s);for(const n of kh.values())Y0(n,s);for(const n of oA.values())Y0(n,s);return!0}function lA(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function uA(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Mb("app","Firebase",cA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=sA;function jb(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r={name:Hm,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw ms.create("bad-app-name",{appName:String(o)});if(n||(n=Cb()),!n)throw ms.create("no-options");const u=kh.get(o);if(u){if(Oh(n,u.options)&&Oh(r,u.config))return u;throw ms.create("duplicate-app",{appName:o})}const c=new gS(o);for(const g of Gm.values())c.addComponent(g);const m=new hA(n,r,c);return kh.set(o,m),m}function dA(s=Hm){const t=kh.get(s);if(!t&&s===Hm&&Cb())return jb();if(!t)throw ms.create("no-app",{appName:s});return t}function Ro(s,t,n){let r=aA[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),wr.warn(c.join(" "));return}zh(new yu(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="firebase-heartbeat-database",gA=1,_u="firebase-heartbeat-store";let Nm=null;function Pb(){return Nm||(Nm=CS(mA,gA,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(_u)}catch(n){console.warn(n)}}}}).catch(s=>{throw ms.create("idb-open",{originalErrorMessage:s.message})})),Nm}async function pA(s){try{const n=(await Pb()).transaction(_u),r=await n.objectStore(_u).get(Bb(s));return await n.done,r}catch(t){if(t instanceof Go)wr.warn(t.message);else{const n=ms.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});wr.warn(n.message)}}}async function X0(s,t){try{const r=(await Pb()).transaction(_u,"readwrite");await r.objectStore(_u).put(t,Bb(s)),await r.done}catch(n){if(n instanceof Go)wr.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function Bb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=1024,_A=30;class vA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Z0();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>_A){const c=xA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Z0(),{heartbeatsToSend:r,unsentEntries:o}=bA(this._heartbeatsCache.heartbeats),u=Vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return wr.warn(n),""}}}function Z0(){return new Date().toISOString().substring(0,10)}function bA(s,t=yA){const n=[];let r=s.slice();for(const o of s){const u=n.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),$0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),$0(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vb()?lS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return X0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return X0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function $0(s){return Vh(JSON.stringify({version:2,heartbeats:s})).length}function xA(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(s){zh(new yu("platform-logger",t=>new DS(t),"PRIVATE")),zh(new yu("heartbeat",t=>new vA(t),"PRIVATE")),Ro(Fm,Q0,s),Ro(Fm,Q0,"esm2020"),Ro("fire-js","")}TA("");var wA="firebase",SA="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro(wA,SA,"app");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,Lb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,A){function C(){}C.prototype=A.prototype,I.F=A.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(k,V,z){for(var R=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)R[Lt-2]=arguments[Lt];return A.prototype[V].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,A,C){C||(C=0);const k=Array(16);if(typeof A=="string")for(var V=0;V<16;++V)k[V]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(V=0;V<16;++V)k[V]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=I.g[0],C=I.g[1],V=I.g[2];let z=I.g[3],R;R=A+(z^C&(V^z))+k[0]+3614090360&4294967295,A=C+(R<<7&4294967295|R>>>25),R=z+(V^A&(C^V))+k[1]+3905402710&4294967295,z=A+(R<<12&4294967295|R>>>20),R=V+(C^z&(A^C))+k[2]+606105819&4294967295,V=z+(R<<17&4294967295|R>>>15),R=C+(A^V&(z^A))+k[3]+3250441966&4294967295,C=V+(R<<22&4294967295|R>>>10),R=A+(z^C&(V^z))+k[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=z+(V^A&(C^V))+k[5]+1200080426&4294967295,z=A+(R<<12&4294967295|R>>>20),R=V+(C^z&(A^C))+k[6]+2821735955&4294967295,V=z+(R<<17&4294967295|R>>>15),R=C+(A^V&(z^A))+k[7]+4249261313&4294967295,C=V+(R<<22&4294967295|R>>>10),R=A+(z^C&(V^z))+k[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=z+(V^A&(C^V))+k[9]+2336552879&4294967295,z=A+(R<<12&4294967295|R>>>20),R=V+(C^z&(A^C))+k[10]+4294925233&4294967295,V=z+(R<<17&4294967295|R>>>15),R=C+(A^V&(z^A))+k[11]+2304563134&4294967295,C=V+(R<<22&4294967295|R>>>10),R=A+(z^C&(V^z))+k[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=z+(V^A&(C^V))+k[13]+4254626195&4294967295,z=A+(R<<12&4294967295|R>>>20),R=V+(C^z&(A^C))+k[14]+2792965006&4294967295,V=z+(R<<17&4294967295|R>>>15),R=C+(A^V&(z^A))+k[15]+1236535329&4294967295,C=V+(R<<22&4294967295|R>>>10),R=A+(V^z&(C^V))+k[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=z+(C^V&(A^C))+k[6]+3225465664&4294967295,z=A+(R<<9&4294967295|R>>>23),R=V+(A^C&(z^A))+k[11]+643717713&4294967295,V=z+(R<<14&4294967295|R>>>18),R=C+(z^A&(V^z))+k[0]+3921069994&4294967295,C=V+(R<<20&4294967295|R>>>12),R=A+(V^z&(C^V))+k[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=z+(C^V&(A^C))+k[10]+38016083&4294967295,z=A+(R<<9&4294967295|R>>>23),R=V+(A^C&(z^A))+k[15]+3634488961&4294967295,V=z+(R<<14&4294967295|R>>>18),R=C+(z^A&(V^z))+k[4]+3889429448&4294967295,C=V+(R<<20&4294967295|R>>>12),R=A+(V^z&(C^V))+k[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=z+(C^V&(A^C))+k[14]+3275163606&4294967295,z=A+(R<<9&4294967295|R>>>23),R=V+(A^C&(z^A))+k[3]+4107603335&4294967295,V=z+(R<<14&4294967295|R>>>18),R=C+(z^A&(V^z))+k[8]+1163531501&4294967295,C=V+(R<<20&4294967295|R>>>12),R=A+(V^z&(C^V))+k[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=z+(C^V&(A^C))+k[2]+4243563512&4294967295,z=A+(R<<9&4294967295|R>>>23),R=V+(A^C&(z^A))+k[7]+1735328473&4294967295,V=z+(R<<14&4294967295|R>>>18),R=C+(z^A&(V^z))+k[12]+2368359562&4294967295,C=V+(R<<20&4294967295|R>>>12),R=A+(C^V^z)+k[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=z+(A^C^V)+k[8]+2272392833&4294967295,z=A+(R<<11&4294967295|R>>>21),R=V+(z^A^C)+k[11]+1839030562&4294967295,V=z+(R<<16&4294967295|R>>>16),R=C+(V^z^A)+k[14]+4259657740&4294967295,C=V+(R<<23&4294967295|R>>>9),R=A+(C^V^z)+k[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=z+(A^C^V)+k[4]+1272893353&4294967295,z=A+(R<<11&4294967295|R>>>21),R=V+(z^A^C)+k[7]+4139469664&4294967295,V=z+(R<<16&4294967295|R>>>16),R=C+(V^z^A)+k[10]+3200236656&4294967295,C=V+(R<<23&4294967295|R>>>9),R=A+(C^V^z)+k[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=z+(A^C^V)+k[0]+3936430074&4294967295,z=A+(R<<11&4294967295|R>>>21),R=V+(z^A^C)+k[3]+3572445317&4294967295,V=z+(R<<16&4294967295|R>>>16),R=C+(V^z^A)+k[6]+76029189&4294967295,C=V+(R<<23&4294967295|R>>>9),R=A+(C^V^z)+k[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=z+(A^C^V)+k[12]+3873151461&4294967295,z=A+(R<<11&4294967295|R>>>21),R=V+(z^A^C)+k[15]+530742520&4294967295,V=z+(R<<16&4294967295|R>>>16),R=C+(V^z^A)+k[2]+3299628645&4294967295,C=V+(R<<23&4294967295|R>>>9),R=A+(V^(C|~z))+k[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=z+(C^(A|~V))+k[7]+1126891415&4294967295,z=A+(R<<10&4294967295|R>>>22),R=V+(A^(z|~C))+k[14]+2878612391&4294967295,V=z+(R<<15&4294967295|R>>>17),R=C+(z^(V|~A))+k[5]+4237533241&4294967295,C=V+(R<<21&4294967295|R>>>11),R=A+(V^(C|~z))+k[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=z+(C^(A|~V))+k[3]+2399980690&4294967295,z=A+(R<<10&4294967295|R>>>22),R=V+(A^(z|~C))+k[10]+4293915773&4294967295,V=z+(R<<15&4294967295|R>>>17),R=C+(z^(V|~A))+k[1]+2240044497&4294967295,C=V+(R<<21&4294967295|R>>>11),R=A+(V^(C|~z))+k[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=z+(C^(A|~V))+k[15]+4264355552&4294967295,z=A+(R<<10&4294967295|R>>>22),R=V+(A^(z|~C))+k[6]+2734768916&4294967295,V=z+(R<<15&4294967295|R>>>17),R=C+(z^(V|~A))+k[13]+1309151649&4294967295,C=V+(R<<21&4294967295|R>>>11),R=A+(V^(C|~z))+k[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=z+(C^(A|~V))+k[11]+3174756917&4294967295,z=A+(R<<10&4294967295|R>>>22),R=V+(A^(z|~C))+k[2]+718787259&4294967295,V=z+(R<<15&4294967295|R>>>17),R=C+(z^(V|~A))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+z&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const C=A-this.blockSize,k=this.C;let V=this.h,z=0;for(;z<A;){if(V==0)for(;z<=C;)o(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<A;)if(k[V++]=I.charCodeAt(z++),V==this.blockSize){o(this,k),V=0;break}}else for(;z<A;)if(k[V++]=I[z++],V==this.blockSize){o(this,k),V=0;break}}this.h=V,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)I[A++]=this.g[C]>>>k&255;return I};function u(I,A){var C=m;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=A(I)}function c(I,A){this.h=A;const C=[];let k=!0;for(let V=I.length-1;V>=0;V--){const z=I[V]|0;k&&z==A||(C[V]=z,k=!1)}this.g=C}var m={};function g(I){return-128<=I&&I<128?u(I,function(A){return new c([A|0],A<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return x;if(I<0)return K(p(-I));const A=[];let C=1;for(let k=0;I>=C;k++)A[k]=I/C|0,C*=4294967296;return new c(A,0)}function E(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return K(E(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(A,8));let k=x;for(let z=0;z<I.length;z+=8){var V=Math.min(8,I.length-z);const R=parseInt(I.substring(z,z+V),A);V<8?(V=p(Math.pow(A,V)),k=k.j(V).add(p(R))):(k=k.j(C),k=k.add(p(R)))}return k}var x=g(0),S=g(1),N=g(16777216);s=c.prototype,s.m=function(){if(P(this))return-K(this).m();let I=0,A=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);I+=(k>=0?k:4294967296+k)*A,A*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(B(this))return"0";if(P(this))return"-"+K(this).toString(I);const A=p(Math.pow(I,6));var C=this;let k="";for(;;){const V=ot(C,A).g;C=dt(C,V.j(A));let z=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=V,B(C))return z+k;for(;z.length<6;)z="0"+z;k=z+k}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function B(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function P(I){return I.h==-1}s.l=function(I){return I=dt(this,I),P(I)?-1:B(I)?0:1};function K(I){const A=I.g.length,C=[];for(let k=0;k<A;k++)C[k]=~I.g[k];return new c(C,~I.h).add(S)}s.abs=function(){return P(this)?K(this):this},s.add=function(I){const A=Math.max(this.g.length,I.g.length),C=[];let k=0;for(let V=0;V<=A;V++){let z=k+(this.i(V)&65535)+(I.i(V)&65535),R=(z>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);k=R>>>16,z&=65535,R&=65535,C[V]=R<<16|z}return new c(C,C[C.length-1]&-2147483648?-1:0)};function dt(I,A){return I.add(K(A))}s.j=function(I){if(B(this)||B(I))return x;if(P(this))return P(I)?K(this).j(K(I)):K(K(this).j(I));if(P(I))return K(this.j(K(I)));if(this.l(N)<0&&I.l(N)<0)return p(this.m()*I.m());const A=this.g.length+I.g.length,C=[];for(var k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let V=0;V<I.g.length;V++){const z=this.i(k)>>>16,R=this.i(k)&65535,Lt=I.i(V)>>>16,ne=I.i(V)&65535;C[2*k+2*V]+=R*ne,Z(C,2*k+2*V),C[2*k+2*V+1]+=z*ne,Z(C,2*k+2*V+1),C[2*k+2*V+1]+=R*Lt,Z(C,2*k+2*V+1),C[2*k+2*V+2]+=z*Lt,Z(C,2*k+2*V+2)}for(I=0;I<A;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=A;I<2*A;I++)C[I]=0;return new c(C,0)};function Z(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function et(I,A){this.g=I,this.h=A}function ot(I,A){if(B(A))throw Error("division by zero");if(B(I))return new et(x,x);if(P(I))return A=ot(K(I),A),new et(K(A.g),K(A.h));if(P(A))return A=ot(I,K(A)),new et(K(A.g),A.h);if(I.g.length>30){if(P(I)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var C=S,k=A;k.l(I)<=0;)C=xt(C),k=xt(k);var V=_t(C,1),z=_t(k,1);for(k=_t(k,2),C=_t(C,2);!B(k);){var R=z.add(k);R.l(I)<=0&&(V=V.add(C),z=R),k=_t(k,1),C=_t(C,1)}return A=dt(I,V.j(A)),new et(V,A)}for(V=x;I.l(A)>=0;){for(C=Math.max(1,Math.floor(I.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),z=p(C),R=z.j(A);P(R)||R.l(I)>0;)C-=k,z=p(C),R=z.j(A);B(z)&&(z=S),V=V.add(z),I=dt(I,R)}return new et(V,I)}s.B=function(I){return ot(this,I).h},s.and=function(I){const A=Math.max(this.g.length,I.g.length),C=[];for(let k=0;k<A;k++)C[k]=this.i(k)&I.i(k);return new c(C,this.h&I.h)},s.or=function(I){const A=Math.max(this.g.length,I.g.length),C=[];for(let k=0;k<A;k++)C[k]=this.i(k)|I.i(k);return new c(C,this.h|I.h)},s.xor=function(I){const A=Math.max(this.g.length,I.g.length),C=[];for(let k=0;k<A;k++)C[k]=this.i(k)^I.i(k);return new c(C,this.h^I.h)};function xt(I){const A=I.g.length+1,C=[];for(let k=0;k<A;k++)C[k]=I.i(k)<<1|I.i(k-1)>>>31;return new c(C,I.h)}function _t(I,A){const C=A>>5;A%=32;const k=I.g.length-C,V=[];for(let z=0;z<k;z++)V[z]=A>0?I.i(z+C)>>>A|I.i(z+C+1)<<32-A:I.i(z+C);return new c(V,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Lb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,gs=c}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ub,iu,qb,bh,Km,Fb,Hb,Gb;(function(){var s,t=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(h,y){if(y)t:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var U=h[w];if(!(U in v))break t;v=v[U]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&v.push([w,y[w]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function x(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(w,U,Q){for(var ht=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)ht[qt-2]=arguments[qt];return y.prototype[U].apply(w,ht)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function B(h,y){for(let w=1;w<arguments.length;w++){const U=arguments[w];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=h.length||0;const Q=U.length||0;h.length=v+Q;for(let ht=0;ht<Q;ht++)h[v+ht]=U[ht]}else h.push(U)}}class P{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function K(h){c.setTimeout(()=>{throw h},0)}function dt(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,v){const w=et.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var et=new P(()=>new ot,h=>h.reset());class ot{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let xt,_t=!1,I=new Z,A=()=>{const h=Promise.resolve(void 0);xt=()=>{h.then(C)}};function C(){for(var h;h=dt();){try{h.h.call(h.g)}catch(v){K(v)}var y=et;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}_t=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function Lt(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}x(Lt,V),Lt.prototype.init=function(h,y){const v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),X=0;function ut(h,y,v,w,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=U,this.key=++X,this.da=this.fa=!1}function Tt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ut(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function Kt(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function M(h){const y={};for(const v in h)y[v]=h[v];return y}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(h,y){let v,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(v in w)h[v]=w[v];for(let Q=0;Q<tt.length;Q++)v=tt[Q],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function pt(h){this.src=h,this.g={},this.h=0}pt.prototype.add=function(h,y,v,w,U){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const ht=kt(h,y,w,U);return ht>-1?(y=h[ht],v||(y.fa=!1)):(y=new ut(y,this.src,Q,!!w,U),y.fa=v,h.push(y)),y};function Nt(h,y){const v=y.type;if(v in h.g){var w=h.g[v],U=Array.prototype.indexOf.call(w,y,void 0),Q;(Q=U>=0)&&Array.prototype.splice.call(w,U,1),Q&&(Tt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function kt(h,y,v,w){for(let U=0;U<h.length;++U){const Q=h[U];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==w)return U}return-1}var it="closure_lm_"+(Math.random()*1e6|0),Rt={};function wt(h,y,v,w,U){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)wt(h,y[Q],v,w,U);return null}return v=As(v),h&&h[ne]?h.J(y,v,m(w)?!!w.capture:!1,U):H(h,y,v,!1,w,U)}function H(h,y,v,w,U,Q){if(!y)throw Error("Invalid event type");const ht=m(U)?!!U.capture:!!U;let qt=er(h);if(qt||(h[it]=qt=new pt(h)),v=qt.add(y,v,w,ht,Q),v.proxy)return v;if(w=mt(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)z||(U=ht),U===void 0&&(U=!1),h.addEventListener(y.toString(),w,U);else if(h.attachEvent)h.attachEvent(Sn(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function mt(){function h(v){return y.call(h.src,h.listener,v)}const y=Ai;return h}function ft(h,y,v,w,U){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)ft(h,y[Q],v,w,U);else w=m(w)?!!w.capture:!!w,v=As(v),h&&h[ne]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],v=kt(y,v,w,U),v>-1&&(Tt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=er(h))&&(y=h.g[y.toString()],h=-1,y&&(h=kt(y,v,w,U)),(v=h>-1?y[h]:null)&&ee(v))}function ee(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ne])Nt(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Sn(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=er(y))?(Nt(v,h),v.h==0&&(v.src=null,y[it]=null)):Tt(h)}}}function Sn(h){return h in Rt?Rt[h]:Rt[h]="on"+h}function Ai(h,y){if(h.da)h=!0;else{y=new Lt(y,this);const v=h.listener,w=h.ha||h.src;h.fa&&ee(h),h=v.call(w,y)}return h}function er(h){return h=h[it],h instanceof pt?h:null}var Ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function As(h){return typeof h=="function"?h:(h[Ss]||(h[Ss]=function(y){return h.handleEvent(y)}),h[Ss])}function Ne(){k.call(this),this.i=new pt(this),this.M=this,this.G=null}x(Ne,k),Ne.prototype[ne]=!0,Ne.prototype.removeEventListener=function(h,y,v,w){ft(this,h,y,v,w)};function Oe(h,y){var v,w=h.G;if(w)for(v=[];w;w=w.G)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var U=y;y=new V(w,h),lt(y,U)}U=!0;let Q,ht;if(v)for(ht=v.length-1;ht>=0;ht--)Q=y.g=v[ht],U=hi(Q,w,!0,y)&&U;if(Q=y.g=h,U=hi(Q,w,!0,y)&&U,U=hi(Q,w,!1,y)&&U,v)for(ht=0;ht<v.length;ht++)Q=y.g=v[ht],U=hi(Q,w,!1,y)&&U}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let w=0;w<v.length;w++)Tt(v[w]);delete h.g[y],h.h--}}this.G=null},Ne.prototype.J=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},Ne.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function hi(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let Q=0;Q<y.length;++Q){const ht=y[Q];if(ht&&!ht.da&&ht.capture==v){const qt=ht.listener,ke=ht.ha||ht.src;ht.fa&&Nt(h.i,ht),U=qt.call(ke,w)!==!1&&U}}return U&&!w.defaultPrevented}function Sa(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Rr(h){h.g=Sa(()=>{h.g=null,h.i&&(h.i=!1,Rr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends k{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(h){k.call(this),this.h=h,this.g={}}x(nr,k);var Is=[];function ir(h){Ut(h.g,function(y,v){this.g.hasOwnProperty(v)&&ee(y)},h),h.g={}}nr.prototype.N=function(){nr.Z.N.call(this),ir(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=c.JSON.stringify,Zo=c.JSON.parse,Aa=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ia(){}function Ca(){}var On={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $e(){V.call(this,"d")}x($e,V);function at(){V.call(this,"c")}x(at,V);var vt={},St=null;function Je(){return St=St||new Ne}vt.Ia="serverreachability";function Ra(h){V.call(this,vt.Ia,h)}x(Ra,V);function Yn(h){const y=Je();Oe(y,new Ra(y))}vt.STAT_EVENT="statevent";function Cs(h,y){V.call(this,vt.STAT_EVENT,h),this.stat=y}x(Cs,V);function Pe(h){const y=Je();Oe(y,new Cs(y,h))}vt.Ja="timingevent";function Ci(h,y){V.call(this,vt.Ja,h),this.size=y}x(Ci,V);function Ri(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function Sf(h,y,v,w,U,Q){h.info(function(){if(h.g)if(Q){var ht="",qt=Q.split("&");for(let se=0;se<qt.length;se++){var ke=qt[se].split("=");if(ke.length>1){const xe=ke[0];ke=ke[1];const Jn=xe.split("_");ht=Jn.length>=2&&Jn[1]=="type"?ht+(xe+"="+ke+"&"):ht+(xe+"=redacted&")}}}else ht=null;else ht=Q;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+y+`
`+v+`
`+ht})}function Hu(h,y,v,w,U,Q,ht){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+y+`
`+v+`
`+Q+" "+ht})}function Ni(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Af(h,v)+(w?" "+w:"")})}function Rs(h,y){h.info(function(){return"TIMEOUT: "+y})}fi.prototype.info=function(){};function Af(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var v=Q[h];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var U=w[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ht=1;ht<w.length;ht++)w[ht]=""}}}}return Ii(Q)}catch{return y}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$o={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jo;function Ds(){}x(Ds,Ia),Ds.prototype.g=function(){return new XMLHttpRequest},Jo=new Ds;function rr(h){return encodeURIComponent(String(h))}function Gu(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function di(h,y,v,w){this.j=h,this.i=y,this.l=v,this.S=w||1,this.V=new nr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mi}function mi(){this.i=null,this.g="",this.h=!1}var Be={},en={};function Di(h,y,v){h.M=1,h.A=Vs(Ue(y)),h.u=v,h.R=!0,Na(h,null)}function Na(h,y){h.F=Date.now(),Vi(h),h.B=Ue(h.A);var v=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Oa(v.i,"t",w),h.C=0,v=h.j.L,h.h=new mi,h.g=ac(h.j,v?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,w=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(Is[0]=U.toString()),U=Is);for(let Q=0;Q<U.length;Q++){const ht=wt(v,U[Q],w||y.handleEvent,!1,y.h||y);if(!ht)break;y.g[ht.key]=ht}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Yn(),Sf(h.i,h.v,h.B,h.l,h.S,h.u)}di.prototype.ba=function(h){h=h.target;const y=this.O;y&&yi(h)==3?y.j():this.Y(h)},di.prototype.Y=function(h){try{if(h==this.g)t:{const qt=yi(this.g),ke=this.g.ya(),se=this.g.ca();if(!(qt<3)&&(qt!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||qt!=4||ke==7||(ke==8||se<=0?Yn(3):Yn(2)),Mi(this);var y=this.g.ca();this.X=y;var v=If(this);if(this.o=y==200,Hu(this.i,this.v,this.B,this.l,this.S,qt,y),this.o){if(this.U&&!this.L){e:{if(this.g){var w,U=this.g;if((w=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(w)){var Q=w;break e}}Q=null}if(h=Q)Ni(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oi(this,h);else{this.o=!1,this.m=3,Pe(12),kn(this),Xn(this);break t}}if(this.R){h=!0;let xe;for(;!this.K&&this.C<v.length;)if(xe=Qu(this,v),xe==en){qt==4&&(this.m=4,Pe(14),h=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(xe==Be){this.m=4,Pe(15),Ni(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Ni(this.i,this.l,xe,null),Oi(this,xe);if(Ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||v.length!=0||this.h.h||(this.m=1,Pe(16),h=!1),this.o=this.o&&h,!h)Ni(this.i,this.l,v,"[Invalid Chunked Response]"),kn(this),Xn(this);else if(v.length>0&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.aa&&!ht.P&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),dl(ht),ht.P=!0,Pe(11))}}else Ni(this.i,this.l,v,null),Oi(this,v);qt==4&&kn(this),this.o&&!this.K&&(qt==4?nc(this.j,this):(this.o=!1,Vi(this)))}else ar(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),kn(this),Xn(this)}}}catch{}finally{}};function If(h){if(!Ku(h))return h.g.la();const y=un(h.g);if(y==="")return"";let v="";const w=y.length,U=yi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return kn(h),Xn(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<w;Q++)h.h.h=!0,v+=h.h.i.decode(y[Q],{stream:!(U&&Q==w-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Ku(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Qu(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?en:(v=Number(y.substring(v,w)),isNaN(v)?Be:(w+=1,w+v>y.length?en:(y=y.slice(w,w+v),h.C=w+v,y)))}di.prototype.cancel=function(){this.K=!0,kn(this)};function Vi(h){h.T=Date.now()+h.H,Da(h,h.H)}function Da(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ri(p(h.aa,h),y)}function Mi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}di.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Rs(this.i,this.B),this.M!=2&&(Yn(),Pe(17)),kn(this),this.m=2,Xn(this)):Da(this,this.T-h)};function Xn(h){h.j.I==0||h.K||nc(h.j,h)}function kn(h){Mi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,ir(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Oi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||zi(v.h,h))){if(!h.L&&zi(v.h,h)&&v.I==3){try{var w=v.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ba(v),jr(v);else break t;Bs(v),Pe(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ri(p(v.Va,v),6e3));ki(v.h)<=1&&v.ta&&(v.ta=void 0)}else qi(v,11)}else if((h.L||v.g==h)&&Ba(v),!R(y))for(U=v.Ba.g.parse(y),y=0;y<U.length;y++){let se=U[y];const xe=se[0];if(!(xe<=v.K))if(v.K=xe,se=se[1],v.I==2)if(se[0]=="c"){v.M=se[1],v.ba=se[2];const Jn=se[3];Jn!=null&&(v.ka=Jn,v.j.info("VER="+v.ka));const Fi=se[4];Fi!=null&&(v.za=Fi,v.j.info("SVER="+v.za));const _i=se[5];_i!=null&&typeof _i=="number"&&_i>0&&(w=1.5*_i,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const vi=h.g;if(vi){const Ls=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var Q=w.h;Q.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(el(Q,Q.h),Q.h=null))}if(w.G){const La=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(w.wa=La,ue(w.J,w.G,La))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ht=h;if(w.na=sc(w,w.L?w.ba:null,w.W),ht.L){nl(w.h,ht);var qt=ht,ke=w.O;ke&&(qt.H=ke),qt.D&&(Mi(qt),Vi(qt)),w.g=ht}else tc(w);v.i.length>0&&Ui(v)}else se[0]!="stop"&&se[0]!="close"||qi(v,7);else v.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?qi(v,7):hl(v):se[0]!="noop"&&v.l&&v.l.qa(se),v.A=0)}}Yn(4)}catch{}}var Le=class{constructor(h,y){this.g=h,this.map=y}};function Wo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ki(h){return h.h?1:h.g?h.g.size:0}function zi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function el(h,y){h.g?h.g.add(y):h.h=y}function nl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wo.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function il(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return N(h.i)}var Yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const w=h[v].indexOf("=");let U,Q=null;w>=0?(U=h[v].substring(0,w),Q=h[v].substring(w+1)):U=h[v],y(U,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function zn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof zn?(this.l=h.l,nn(this,h.j),this.o=h.o,this.g=h.g,Nr(this,h.u),this.h=h.h,rl(this,Ju(h.i)),this.m=h.m):h&&(y=String(h).match(Yu))?(this.l=!1,nn(this,y[1]||"",!0),this.o=ji(y[2]||""),this.g=ji(y[3]||"",!0),Nr(this,y[4]),this.h=ji(y[5]||"",!0),rl(this,y[6]||"",!0),this.m=ji(y[7]||"")):(this.l=!1,this.i=new Vr(null,this.l))}zn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ms(y,Ma,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ms(y,Ma,!0),"@"),h.push(rr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ms(v,v.charAt(0)=="/"?sl:Xu,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ms(v,Zu)),h.join("")},zn.prototype.resolve=function(h){const y=Ue(this);let v=!!h.j;v?nn(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var w=h.h;if(v)Nr(y,h.u);else if(v=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var U=y.h.lastIndexOf("/");U!=-1&&(w=y.h.slice(0,U+1)+w)}if(U=w,U==".."||U==".")w="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){w=U.lastIndexOf("/",0)==0,U=U.split("/");const Q=[];for(let ht=0;ht<U.length;){const qt=U[ht++];qt=="."?w&&ht==U.length&&Q.push(""):qt==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&ht==U.length&&Q.push("")):(Q.push(qt),w=!0)}w=Q.join("/")}else w=U}return v?y.h=w:v=h.i.toString()!=="",v?rl(y,Ju(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Ue(h){return new zn(h)}function nn(h,y,v){h.j=v?ji(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Nr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function rl(h,y,v){y instanceof Vr?(h.i=y,ka(h.i,h.l)):(v||(y=Ms(y,Dr)),h.i=new Vr(y,h.l))}function ue(h,y,v){h.i.set(y,v)}function Vs(h){return ue(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ji(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ms(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,An),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function An(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ma=/[#\/\?@]/g,Xu=/[#\?:]/g,sl=/[#\?]/g,Dr=/[#\?@]/g,Zu=/#/g;function Vr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function In(h){h.g||(h.g=new Map,h.h=0,h.i&&Va(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Vr.prototype,s.add=function(h,y){In(this),this.i=null,h=Mr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function $u(h,y){In(h),y=Mr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function al(h,y){return In(h),y=Mr(h,y),h.g.has(y)}s.forEach=function(h,y){In(this),this.g.forEach(function(v,w){v.forEach(function(U){h.call(y,U,w,this)},this)},this)};function ol(h,y){In(h);let v=[];if(typeof y=="string")al(h,y)&&(v=v.concat(h.g.get(Mr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return In(this),this.i=null,h=Mr(this,h),al(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=ol(this,h),h.length>0?String(h[0]):y):y};function Oa(h,y,v){$u(h,y),v.length>0&&(h.i=null,h.g.set(Mr(h,y),N(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var v=y[w];const U=rr(v);v=ol(this,v);for(let Q=0;Q<v.length;Q++){let ht=U;v[Q]!==""&&(ht+="="+rr(v[Q])),h.push(ht)}}return this.i=h.join("&")};function Ju(h){const y=new Vr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Mr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ka(h,y){y&&!h.j&&(In(h),h.i=null,h.g.forEach(function(v,w){const U=w.toLowerCase();w!=U&&($u(this,w),Oa(this,U,v))},h)),h.j=y}function gi(h,y){const v=new fi;if(c.Image){const w=new Image;w.onload=E(Zn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=E(Zn,v,"TestLoadImage: error",!1,y,w),w.onabort=E(Zn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=E(Zn,v,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function ll(h,y){const v=new fi,w=new AbortController,U=setTimeout(()=>{w.abort(),Zn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Q=>{clearTimeout(U),Q.ok?Zn(v,"TestPingServer: ok",!0,y):Zn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Zn(v,"TestPingServer: error",!1,y)})}function Zn(h,y,v,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(v)}catch{}}function Or(){this.g=new Aa}function Pi(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Pi,Ia),Pi.prototype.g=function(){return new Os(this.i,this.h)};function Os(h,y){Ne.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Os,Ne),s=Os.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,pi(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;za(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function za(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?kr(this):pi(this),this.readyState==3&&za(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,kr(this))},s.Na=function(h){this.g&&(this.response=h,kr(this))},s.ga=function(){this.g&&kr(this)};function kr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,pi(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function pi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function $n(h){let y="";return Ut(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function ks(h,y,v){t:{for(w in v){var w=!1;break t}w=!0}w||(v=$n(v),typeof h=="string"?v!=null&&rr(v):ue(h,y,v))}function ge(h){Ne.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(ge,Ne);var Bi=/^https?$/i,ul=["POST","PUT"];s=ge.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jo.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){zs(this,Q);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)v.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())v.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(ul,y,void 0)>=0)||w||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ht]of v)this.g.setRequestHeader(Q,ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){zs(this,Q)}};function zs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,cl(h),sr(h)}function cl(h){h.A||(h.A=!0,Oe(h,"complete"),Oe(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Oe(this,"complete"),Oe(this,"abort"),sr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sr(this,!0)),ge.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},s.Xa=function(){js(this)};function js(h){if(h.h&&typeof u<"u"){if(h.v&&yi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Oe(h,"readystatechange"),yi(h)==4){h.h=!1;try{const Q=h.ca();t:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var w;if(w=Q===0){let ht=String(h.D).match(Yu)[1]||null;!ht&&c.self&&c.self.location&&(ht=c.self.location.protocol.slice(0,-1)),w=!Bi.test(ht?ht.toLowerCase():"")}v=w}if(v)Oe(h,"complete"),Oe(h,"success");else{h.o=6;try{var U=yi(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",cl(h)}}finally{sr(h)}}}}function sr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Oe(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function yi(h){return h.g?h.g.readyState:0}s.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Zo(y)}};function un(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ar(h){const y={};h=(h.g&&yi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(R(h[w]))continue;var v=Gu(h[w]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[U]||[];y[U]=Q,Q.push(v)}Kt(y,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function zr(h){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Li("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Li("baseRetryDelayMs",5e3,h),this.Za=Li("retryDelaySeedMs",1e4,h),this.Ta=Li("forwardChannelMaxRetries",2,h),this.va=Li("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wo(h&&h.concurrentRequestLimit),this.Ba=new Or,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=zr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,w){Pe(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=sc(this,null,this.W),Ui(this)};function hl(h){if(ja(h),h.I==3){var y=h.V++,v=Ue(h.J);if(ue(v,"SID",h.M),ue(v,"RID",y),ue(v,"TYPE","terminate"),Ps(h,v),y=new di(h,h.j,y),y.M=2,y.A=Vs(Ue(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=ac(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Vi(y)}rc(h)}function jr(h){h.g&&(dl(h),h.g.cancel(),h.g=null)}function ja(h){jr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ba(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ui(h){if(!tl(h.h)&&!h.m){h.m=!0;var y=h.Ea;xt||A(),_t||(xt(),_t=!0),I.add(y,h),h.D=0}}function Pa(h,y){return ki(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ri(p(h.Ea,h,y),ic(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new di(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=M(Q),lt(Q,this.U)):Q=this.U),this.u!==null||this.R||(U.J=Q,Q=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Wu(this,U,y),v=Ue(this.J),ue(v,"RID",h),ue(v,"CVER",22),this.G&&ue(v,"X-HTTP-Session-Id",this.G),Ps(this,v),Q&&(this.R?y="headers="+rr($n(Q))+"&"+y:this.u&&ks(v,this.u,Q)),el(this.h,U),this.Ra&&ue(v,"TYPE","init"),this.S?(ue(v,"$req",y),ue(v,"SID","null"),U.U=!0,Di(U,v,null)):Di(U,v,y),this.I=2}}else this.I==3&&(h?fl(this,h):this.i.length==0||tl(this.h)||fl(this))};function fl(h,y){var v;y?v=y.l:v=h.V++;const w=Ue(h.J);ue(w,"SID",h.M),ue(w,"RID",v),ue(w,"AID",h.K),Ps(h,w),h.u&&h.o&&ks(w,h.u,h.o),v=new di(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Wu(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),el(h.h,v),Di(v,w,y)}function Ps(h,y){h.H&&Ut(h.H,function(v,w){ue(y,w,v)}),h.l&&Ut({},function(v,w){ue(y,w,v)})}function Wu(h,y,v){v=Math.min(h.i.length,v);const w=h.l?p(h.l.Ka,h.l,h):null;t:{var U=h.i;let qt=-1;for(;;){const ke=["count="+v];qt==-1?v>0?(qt=U[0].g,ke.push("ofs="+qt)):qt=0:ke.push("ofs="+qt);let se=!0;for(let xe=0;xe<v;xe++){var Q=U[xe].g;const Jn=U[xe].map;if(Q-=qt,Q<0)qt=Math.max(0,U[xe].g-100),se=!1;else try{Q="req"+Q+"_"||"";try{var ht=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Fi,_i]of ht){let vi=_i;m(_i)&&(vi=Ii(_i)),ke.push(Q+Fi+"="+encodeURIComponent(vi))}}catch(Fi){throw ke.push(Q+"type="+encodeURIComponent("_badmap")),Fi}}catch{w&&w(Jn)}}if(se){ht=ke.join("&");break t}}ht=void 0}return h=h.i.splice(0,v),y.G=h,ht}function tc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;xt||A(),_t||(xt(),_t=!0),I.add(y,h),h.A=0}}function Bs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ri(p(h.Da,h),ic(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ri(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),jr(this),ec(this))};function dl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ec(h){h.g=new di(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ue(h.na);ue(y,"RID","rpc"),ue(y,"SID",h.M),ue(y,"AID",h.K),ue(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ue(y,"TO",h.ia),ue(y,"TYPE","xmlhttp"),Ps(h,y),h.u&&h.o&&ks(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Vs(Ue(y)),v.u=null,v.R=!0,Na(v,h)}s.Va=function(){this.C!=null&&(this.C=null,jr(this),Bs(this),Pe(19))};function Ba(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function nc(h,y){var v=null;if(h.g==y){Ba(h),dl(h),h.g=null;var w=2}else if(zi(h.h,y))v=y.G,nl(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var U=h.D;w=Je(),Oe(w,new Ci(w,v)),Ui(h)}else tc(h);else if(U=y.m,U==3||U==0&&y.X>0||!(w==1&&Pa(h,y)||w==2&&Bs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),U){case 1:qi(h,5);break;case 4:qi(h,10);break;case 3:qi(h,6);break;default:qi(h,2)}}}function ic(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function qi(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),w=h.Ua;const U=!w;w=new zn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||nn(w,"https"),Vs(w),U?gi(w.toString(),v):ll(w.toString(),v)}else Pe(2);h.I=0,h.l&&h.l.pa(y),rc(h),ja(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function rc(h){if(h.I=0,h.ja=[],h.l){const y=il(h.h);(y.length!=0||h.i.length!=0)&&(B(h.ja,y),B(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function sc(h,y,v){var w=v instanceof zn?Ue(v):new zn(v);if(w.g!="")y&&(w.g=y+"."+w.g),Nr(w,w.u);else{var U=c.location;w=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const Q=new zn(null);w&&nn(Q,w),y&&(Q.g=y),U&&Nr(Q,U),v&&(Q.h=v),w=Q}return v=h.G,y=h.wa,v&&y&&ue(w,v,y),ue(w,"VER",h.ka),Ps(h,w),w}function ac(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ge(new Pi({ab:v})):new ge(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}s=oc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Pr(){}Pr.prototype.g=function(h,y){return new En(h,y)};function En(h,y){Ne.call(this),this.g=new zr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new or(this)}x(En,Ne),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){hl(this.g)},En.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Ii(h),h=v);y.i.push(new Le(y.Ya++,h)),y.I==3&&Ui(y)},En.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,En.Z.N.call(this)};function lc(h){$e.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}x(lc,$e);function uc(){at.call(this),this.status=1}x(uc,at);function or(h){this.g=h}x(or,oc),or.prototype.ra=function(){Oe(this.g,"a")},or.prototype.qa=function(h){Oe(this.g,new lc(h))},or.prototype.pa=function(h){Oe(this.g,new uc)},or.prototype.oa=function(){Oe(this.g,"b")},Pr.prototype.createWebChannel=Pr.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,Gb=function(){return new Pr},Hb=function(){return Je()},Fb=vt,Km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,bh=Ns,$o.COMPLETE="complete",qb=$o,Ca.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",Ne.prototype.listen=Ne.prototype.J,iu=Ca,ge.prototype.listenOnce=ge.prototype.K,ge.prototype.getLastError=ge.prototype.Ha,ge.prototype.getLastErrorCode=ge.prototype.ya,ge.prototype.getStatus=ge.prototype.ca,ge.prototype.getResponseJson=ge.prototype.La,ge.prototype.getResponseText=ge.prototype.la,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Fa,Ub=ge}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore",tv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Ob("@firebase/firestore");function wo(){return ga.logLevel}function st(s,...t){if(ga.logLevel<=te.DEBUG){const n=t.map(Tg);ga.debug(`Firestore (${Ko}): ${s}`,...n)}}function Tn(s,...t){if(ga.logLevel<=te.ERROR){const n=t.map(Tg);ga.error(`Firestore (${Ko}): ${s}`,...n)}}function pa(s,...t){if(ga.logLevel<=te.WARN){const n=t.map(Tg);ga.warn(`Firestore (${Ko}): ${s}`,...n)}}function Tg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(s,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Kb(s,r,n)}function Kb(s,t,n){let r=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tn(r),new Error(r)}function Ct(s,t,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||Kb(t,o,r)}function Pt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Go{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class AA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(mn.UNAUTHENTICATED)))}shutdown(){}}class IA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class CA{constructor(t){this.t=t,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ct(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $i,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $i)}}),0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new Qb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ct(t===null||typeof t=="string",2055,{h:t}),new mn(t)}}class RA{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NA{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new RA(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ev{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DA{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,uA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ct(this.o===void 0,3512);const r=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,st("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ev(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ev(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=VA(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%62))}return r}}function jt(s,t){return s<t?-1:s>t?1:0}function Qm(s,t){const n=Math.min(s.length,t.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Dm(o)===Dm(u)?jt(o,u):Dm(o)?1:-1}return jt(s.length,t.length)}const MA=55296,OA=57343;function Dm(s){const t=s.charCodeAt(0);return t>=MA&&t<=OA}function Vo(s,t,n){return s.length===t.length&&s.every(((r,o)=>n(r,t[o])))}function Yb(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Yi{constructor(t,n,r){n===void 0?n=0:n>t.length&&Et(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Et(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Yi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Yi?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const u=Yi.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return jt(t.length,n.length)}static compareSegments(t,n){const r=Yi.isNumericId(t),o=Yi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Yi.extractNumericId(t).compare(Yi.extractNumericId(n)):Qm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return gs.fromString(t.substring(4,t.length-2))}}class oe extends Yi{construct(t,n,r){return new oe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ct(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new oe(n)}static emptyPath(){return new oe([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Re extends Yi{construct(t,n,r){return new Re(t,n,r)}static isValidIdentifier(t){return kA.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Re.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new Re([nv])}static fromServerFormat(t){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ct(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ct(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ct(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ct(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Re(n)}static emptyPath(){return new Re([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.path=t}static fromPath(t){return new gt(oe.fromString(t))}static fromName(t){return new gt(oe.fromString(t).popFirst(5))}static empty(){return new gt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return oe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new oe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(s,t,n){if(!n)throw new ct(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function zA(s,t,n,r){if(t===!0&&r===!0)throw new ct(J.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function iv(s){if(!gt.isDocumentKey(s))throw new ct(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rv(s){if(gt.isDocumentKey(s))throw new ct(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Zb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function tf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Et(12329,{type:typeof s})}function Si(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ct(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tf(s);throw new ct(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(s,t){const n={typeString:s};return t&&(n.value=t),n}function Vu(s,t){if(!Zb(s))throw new ct(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ct(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=-62135596800,av=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*av);return new fe(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ct(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ct(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<sv)throw new ct(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(t){return this.seconds===t.seconds?jt(this.nanoseconds,t.nanoseconds):jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Vu(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-sv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:Ye("string",fe._jsonSchemaVersion),seconds:Ye("number"),nanoseconds:Ye("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{static fromTimestamp(t){return new Vt(t)}static min(){return new Vt(new fe(0,0))}static max(){return new Vt(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;class jh{constructor(t,n,r,o){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=o}}function Ym(s){return s.fields.find((t=>t.kind===2))}function ra(s){return s.fields.filter((t=>t.kind!==2))}jh.UNKNOWN_ID=-1;class Eh{constructor(t,n){this.fieldPath=t,this.kind=n}}class bu{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new bu(0,Qn.min())}}function jA(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Vt.fromTimestamp(r===1e9?new fe(n+1,0):new fe(n,r));return new Qn(o,gt.empty(),t)}function $b(s){return new Qn(s.readTime,s.key,vu)}class Qn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Qn(Vt.min(),gt.empty(),vu)}static max(){return new Qn(Vt.max(),gt.empty(),vu)}}function Sg(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=gt.comparator(s.documentKey,t.documentKey),n!==0?n:jt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==Jb)throw s;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new L(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):L.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):L.reject(n)}static resolve(t){return new L(((n,r)=>{n(t)}))}static reject(t){return new L(((n,r)=>{r(t)}))}static waitFor(t){return new L(((n,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&n()}),(g=>r(g)))})),c=!0,u===o&&n()}))}static or(t){let n=L.resolve(!1);for(const r of t)n=n.next((o=>o?L.resolve(o):r()));return n}static forEach(t,n){const r=[];return t.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(t,n){return new L(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(t[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(t,n){return new L(((r,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="SimpleDb";class ef{static open(t,n,r,o){try{return new ef(n,t.transaction(o,r))}catch(u){throw new uu(n,u)}}constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.S=new $i,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new uu(t,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Ag(r.target.error);this.S.reject(new uu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(st(Gn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new BA(n)}}class ps{static delete(t){return st(Gn,"Removing database:",t),aa(Ib().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!Vb())return!1;if(ps.F())return!0;const t=Mh(),n=ps.M(t),r=0<n&&n<10,o=tE(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,n){return t.store(n)}static M(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,ps.M(Mh())===12.2&&Tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(st(Gn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;n(c)},o.onblocked=()=>{r(new uu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new ct(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ct(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new uu(t,c))},o.onupgradeneeded=u=>{st(Gn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{st(Gn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,o){const u=n==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=ef.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),L.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(st(Gn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tE(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class PA{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return aa(this.U.delete())}}class uu extends ct{constructor(t,n){super(J.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function xs(s){return s.name==="IndexedDbTransactionError"}class BA{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(st(Gn,"PUT",this.store.name,t,n),r=this.store.put(n,t)):(st(Gn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),aa(r)}add(t){return st(Gn,"ADD",this.store.name,t,t),aa(this.store.add(t))}get(t){return aa(this.store.get(t)).next((n=>(n===void 0&&(n=null),st(Gn,"GET",this.store.name,t,n),n)))}delete(t){return st(Gn,"DELETE",this.store.name,t),aa(this.store.delete(t))}count(){return st(Gn,"COUNT",this.store.name),aa(this.store.count())}J(t,n){const r=this.options(t,n),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new L(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new L(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,n){st(Gn,"DELETE ALL",this.store.name);const r=this.options(t,n);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,n){let r;n?r=t:(r={},n=t);const o=this.cursor(r);return this.H(o,n)}te(t){const n=this.cursor({});return new L(((r,o)=>{n.onerror=u=>{const c=Ag(u.target.error);o(c)},n.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,n){const r=[];return new L(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new PA(m),p=n(m.primaryKey,m.value,g);if(p instanceof L){const E=p.catch((x=>(g.done(),L.reject(x))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>L.waitFor(r)))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function aa(s){return new L(((t,n)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Ag(r.target.error);n(o)}}))}let ov=!1;function Ag(s){const t=ps.M(Mh());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(n)>=0){const r=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ov||(ov=!0,setTimeout((()=>{throw r}),0)),r}}return s}const cu="IndexBackfiller";class LA{constructor(t,n){this.asyncQueue=t,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){st(cu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const n=await this.ne.ie();st(cu,`Documents written: ${n}`)}catch(n){xs(n)?st(cu,"Ignoring IndexedDB error during index backfill: ",n):await Ta(n)}await this.re(6e4)}))}}class UA{constructor(t,n){this.localStore=t,this.persistence=n}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,t)))}se(t,n){const r=new Set;let o=n,u=!0;return L.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return st(cu,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>n-o))}oe(t,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next((o=>this.localStore.localDocuments.getNextDocuments(t,n,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(st(cu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,n,m)))).next((()=>c.size))}))))}_e(t,n){let r=t;return n.changes.forEach(((o,u)=>{const c=$b(u);Sg(c,r)>0&&(r=c)})),new Qn(r.readTime,r.documentKey,Math.max(n.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ui.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;function nf(s){return s==null}function Eu(s){return s===0&&1/s==-1/0}function qA(s){return typeof s=="number"&&Number.isInteger(s)&&!Eu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="";function bn(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=lv(t)),t=FA(s.get(n),t);return lv(t)}function FA(s,t){let n=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case Ph:n+="";break;default:n+=u}}return n}function lv(s){return s+Ph+""}function Xi(s){const t=s.length;if(Ct(t>=2,64408,{path:s}),t===2)return Ct(s.charAt(0)===Ph&&s.charAt(1)==="",56145,{path:s}),oe.emptyPath();const n=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(Ph,u);switch((c<0||c>n)&&Et(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:Et(61167,{path:s})}u=c+2}return new oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="remoteDocuments",Mu="owner",yo="owner",xu="mutationQueues",HA="userId",Ti="mutations",uv="batchId",ca="userMutationsIndex",cv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(s,t){return[s,bn(t)]}function eE(s,t,n){return[s,bn(t),n]}const GA={},Mo="documentMutations",Bh="remoteDocumentsV14",KA=["prefixPath","collectionGroup","readTime","documentId"],Th="documentKeyIndex",QA=["prefixPath","collectionGroup","documentId"],nE="collectionGroupIndex",YA=["collectionGroup","readTime","prefixPath","documentId"],Tu="remoteDocumentGlobal",Xm="remoteDocumentGlobalKey",Oo="targets",iE="queryTargetsIndex",XA=["canonicalId","targetId"],ko="targetDocuments",ZA=["targetId","path"],Ig="documentTargetsIndex",$A=["path","targetId"],Lh="targetGlobalKey",fa="targetGlobal",wu="collectionParents",JA=["collectionId","parent"],zo="clientMetadata",WA="clientId",rf="bundles",t2="bundleId",sf="namedQueries",e2="name",Cg="indexConfiguration",n2="indexId",Zm="collectionGroupIndex",i2="collectionGroup",hu="indexState",r2=["indexId","uid"],rE="sequenceNumberIndex",s2=["uid","sequenceNumber"],fu="indexEntries",a2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sE="documentKeyIndex",o2=["indexId","uid","orderedDocumentKey"],af="documentOverlays",l2=["userId","collectionPath","documentId"],$m="collectionPathOverlayIndex",u2=["userId","collectionPath","largestBatchId"],aE="collectionGroupOverlayIndex",c2=["userId","collectionGroup","largestBatchId"],Rg="globals",h2="name",oE=[xu,Ti,Mo,sa,Oo,Mu,fa,ko,zo,Tu,wu,rf,sf],f2=[...oE,af],lE=[xu,Ti,Mo,Bh,Oo,Mu,fa,ko,zo,Tu,wu,rf,sf,af],uE=lE,Ng=[...uE,Cg,hu,fu],d2=Ng,cE=[...Ng,Rg],m2=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Wb{constructor(t,n){super(),this.le=t,this.currentSequenceNumber=n}}function tn(s,t){const n=Pt(s);return ps.O(n.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function Ts(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function hE(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t,n){this.comparator=t,this.root=n||gn.EMPTY}insert(t,n){return new Se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(t){return new Se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,gn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mh(this.root,t,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mh(this.root,t,this.comparator,!0)}}class mh{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class gn{constructor(t,n,r,o,u){this.key=t,this.value=n,this.color=r??gn.RED,this.left=o??gn.EMPTY,this.right=u??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,u){return new gn(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return gn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,n,r,o,u){return this}insert(t,n,r){return new gn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.comparator=t,this.data=new Se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(t){return new fv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof me)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new me(this.comparator);return n.data=t,n}}class fv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _o(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.fields=t,t.sort(Re.comparator)}static empty(){return new Mn([])}unionWith(t){let n=new me(Re.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Mn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Vo(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new fE("Invalid base64 string: "+u):u}})(t);return new Ze(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Ze(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const g2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(s){if(Ct(!!s,39018),typeof s=="string"){let t=0;const n=g2.exec(s);if(Ct(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:we(s.seconds),nanos:we(s.nanos)}}function we(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ar(s){return typeof s=="string"?Ze.fromBase64String(s):Ze.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="server_timestamp",mE="__type__",gE="__previous_value__",pE="__local_write_time__";function Dg(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[mE])==null?void 0:r.stringValue)===dE}function of(s){const t=s.mapValue.fields[gE];return Dg(t)?of(t):t}function Su(s){const t=Sr(s.mapValue.fields[pE].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(t,n,r,o,u,c,m,g,p,E){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Uh="(default)";class ya{constructor(t,n){this.projectId=t,this.database=n||Uh}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===Uh}isEqual(t){return t instanceof ya&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="__type__",yE="__max__",fs={mapValue:{fields:{__type__:{stringValue:yE}}}},Mg="__vector__",jo="value",wh={nullValue:"NULL_VALUE"};function _s(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Dg(s)?4:_E(s)?9007199254740991:lf(s)?10:11:Et(28295,{value:s})}function tr(s,t){if(s===t)return!0;const n=_s(s);if(n!==_s(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Su(s).isEqual(Su(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Sr(o.timestampValue),m=Sr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return Ar(o.bytesValue).isEqual(Ar(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return we(o.geoPointValue.latitude)===we(u.geoPointValue.latitude)&&we(o.geoPointValue.longitude)===we(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return we(o.integerValue)===we(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=we(o.doubleValue),m=we(u.doubleValue);return c===m?Eu(c)===Eu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return Vo(s.arrayValue.values||[],t.arrayValue.values||[],tr);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(hv(c)!==hv(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!tr(c[g],m[g])))return!1;return!0})(s,t);default:return Et(52216,{left:s})}}function Au(s,t){return(s.values||[]).find((n=>tr(n,t)))!==void 0}function vs(s,t){if(s===t)return 0;const n=_s(s),r=_s(t);if(n!==r)return jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=we(u.integerValue||u.doubleValue),g=we(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return dv(s.timestampValue,t.timestampValue);case 4:return dv(Su(s),Su(t));case 5:return Qm(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=Ar(u),g=Ar(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=jt(m[p],g[p]);if(E!==0)return E}return jt(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=jt(we(u.latitude),we(c.latitude));return m!==0?m:jt(we(u.longitude),we(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return mv(s.arrayValue,t.arrayValue);case 10:return(function(u,c){var S,N,B,P;const m=u.fields||{},g=c.fields||{},p=(S=m[jo])==null?void 0:S.arrayValue,E=(N=g[jo])==null?void 0:N.arrayValue,x=jt(((B=p==null?void 0:p.values)==null?void 0:B.length)||0,((P=E==null?void 0:E.values)==null?void 0:P.length)||0);return x!==0?x:mv(p,E)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===fs.mapValue&&c===fs.mapValue)return 0;if(u===fs.mapValue)return 1;if(c===fs.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let x=0;x<g.length&&x<E.length;++x){const S=Qm(g[x],E[x]);if(S!==0)return S;const N=vs(m[g[x]],p[E[x]]);if(N!==0)return N}return jt(g.length,E.length)})(s.mapValue,t.mapValue);default:throw Et(23264,{he:n})}}function dv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return jt(s,t);const n=Sr(s),r=Sr(t),o=jt(n.seconds,r.seconds);return o!==0?o:jt(n.nanos,r.nanos)}function mv(s,t){const n=s.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=vs(n[o],r[o]);if(u)return u}return jt(n.length,r.length)}function Po(s){return Wm(s)}function Wm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Sr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ar(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return gt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Wm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Wm(n.fields[c])}`;return o+"}"})(s.mapValue):Et(61005,{value:s})}function Sh(s){switch(_s(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=of(s);return t?16+Sh(t):16;case 5:return 2*s.stringValue.length;case 6:return Ar(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Sh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ts(r.fields,((u,c)=>{o+=u.length+Sh(c)})),o})(s.mapValue);default:throw Et(13486,{value:s})}}function Iu(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function tg(s){return!!s&&"integerValue"in s}function Cu(s){return!!s&&"arrayValue"in s}function gv(s){return!!s&&"nullValue"in s}function pv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ah(s){return!!s&&"mapValue"in s}function lf(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Vg])==null?void 0:r.stringValue)===Mg}function du(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Ts(s.mapValue.fields,((n,r)=>t.mapValue.fields[n]=du(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=du(s.arrayValue.values[n]);return t}return{...s}}function _E(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===yE}const vE={mapValue:{fields:{[Vg]:{stringValue:Mg},[jo]:{arrayValue:{}}}}};function y2(s){return"nullValue"in s?wh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Iu(ya.empty(),gt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?lf(s)?vE:{mapValue:{}}:Et(35942,{value:s})}function _2(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Iu(ya.empty(),gt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?vE:"mapValue"in s?lf(s)?{mapValue:{}}:fs:Et(61959,{value:s})}function yv(s,t){const n=vs(s.value,t.value);return n!==0?n:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function _v(s,t){const n=vs(s.value,t.value);return n!==0?n:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.value=t}static empty(){return new vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ah(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=du(n)}setAll(t){let n=Re.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}c?r[m.lastSegment()]=du(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(t){const n=this.field(t.popLast());Ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return tr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];Ah(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){Ts(n,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new vn(du(this.value))}}function bE(s){const t=[];return Ts(s.fields,((n,r)=>{const o=new Re([n]);if(Ah(r)){const u=bE(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new Mn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,n,r,o,u,c,m){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new Me(t,0,Vt.min(),Vt.min(),Vt.min(),vn.empty(),0)}static newFoundDocument(t,n,r,o){return new Me(t,1,n,Vt.min(),r,o,0)}static newNoDocument(t,n){return new Me(t,2,n,Vt.min(),Vt.min(),vn.empty(),0)}static newUnknownDocument(t,n){return new Me(t,3,n,Vt.min(),Vt.min(),vn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Me&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t,n){this.position=t,this.inclusive=n}}function vv(s,t,n){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=gt.comparator(gt.fromName(c.referenceValue),n.key):r=vs(c,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function bv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!tr(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,n="asc"){this.field=t,this.dir=n}}function v2(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{}class $t extends EE{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new b2(t,n,r):n==="array-contains"?new T2(t,r):n==="in"?new IE(t,r):n==="not-in"?new w2(t,r):n==="array-contains-any"?new S2(t,r):new $t(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new E2(t,r):new x2(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vs(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(vs(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class de extends EE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new de(t,n)}matches(t){return Lo(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lo(s){return s.op==="and"}function eg(s){return s.op==="or"}function Og(s){return xE(s)&&Lo(s)}function xE(s){for(const t of s.filters)if(t instanceof de)return!1;return!0}function ng(s){if(s instanceof $t)return s.field.canonicalString()+s.op.toString()+Po(s.value);if(Og(s))return s.filters.map((t=>ng(t))).join(",");{const t=s.filters.map((n=>ng(n))).join(",");return`${s.op}(${t})`}}function TE(s,t){return s instanceof $t?(function(r,o){return o instanceof $t&&r.op===o.op&&r.field.isEqual(o.field)&&tr(r.value,o.value)})(s,t):s instanceof de?(function(r,o){return o instanceof de&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&TE(c,o.filters[m])),!0):!1})(s,t):void Et(19439)}function wE(s,t){const n=s.filters.concat(t);return de.create(n,s.op)}function SE(s){return s instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`})(s):s instanceof de?(function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"})(s):"Filter"}class b2 extends $t{constructor(t,n,r){super(t,n,r),this.key=gt.fromName(r.referenceValue)}matches(t){const n=gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class E2 extends $t{constructor(t,n){super(t,"in",n),this.keys=AE("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class x2 extends $t{constructor(t,n){super(t,"not-in",n),this.keys=AE("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function AE(s,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>gt.fromName(r.referenceValue)))}class T2 extends $t{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Cu(n)&&Au(n.arrayValue,this.value)}}class IE extends $t{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}}class w2 extends $t{constructor(t,n){super(t,"not-in",n)}matches(t){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Au(this.value.arrayValue,n)}}class S2 extends $t{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Cu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Au(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t,n=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function ig(s,t=null,n=[],r=[],o=null,u=null,c=null){return new A2(s,t,n,r,o,u,c)}function _a(s){const t=Pt(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>ng(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),nf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Po(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Po(r))).join(",")),t.Te=n}return t.Te}function Ou(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!v2(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!TE(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!bv(s.startAt,t.startAt)&&bv(s.endAt,t.endAt)}function Fh(s){return gt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Hh(s,t){return s.filters.filter((n=>n instanceof $t&&n.field.isEqual(t)))}function Ev(s,t,n){let r=wh,o=!0;for(const u of Hh(s,t)){let c=wh,m=!0;switch(u.op){case"<":case"<=":c=y2(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=wh}yv({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(n!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=n.position[u];yv({value:r,inclusive:o},{value:c,inclusive:n.inclusive})<0&&(r=c,o=n.inclusive);break}}return{value:r,inclusive:o}}function xv(s,t,n){let r=fs,o=!0;for(const u of Hh(s,t)){let c=fs,m=!0;switch(u.op){case">=":case">":c=_2(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=fs}_v({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(n!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=n.position[u];_v({value:r,inclusive:o},{value:c,inclusive:n.inclusive})>0&&(r=c,o=n.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t,n=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I2(s,t,n,r,o,u,c,m){return new ku(s,t,n,r,o,u,c,m)}function uf(s){return new ku(s)}function Tv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function CE(s){return s.collectionGroup!==null}function mu(s){const t=Pt(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new me(Re.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new qh(u,r))})),n.has(Re.keyField().canonicalString())||t.Ie.push(new qh(Re.keyField(),r))}return t.Ie}function ci(s){const t=Pt(s);return t.Ee||(t.Ee=C2(t,mu(s))),t.Ee}function C2(s,t){if(s.limitType==="F")return ig(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new qh(o.field,u)}));const n=s.endAt?new Bo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Bo(s.startAt.position,s.startAt.inclusive):null;return ig(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function rg(s,t){const n=s.filters.concat([t]);return new ku(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function sg(s,t,n){return new ku(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function cf(s,t){return Ou(ci(s),ci(t))&&s.limitType===t.limitType}function RE(s){return`${_a(ci(s))}|lt:${s.limitType}`}function So(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>SE(o))).join(", ")}]`),nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Po(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Po(o))).join(",")),`Target(${r})`})(ci(s))}; limitType=${s.limitType})`}function zu(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):gt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of mu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=vv(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,mu(r),o)||r.endAt&&!(function(c,m,g){const p=vv(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,mu(r),o))})(s,t)}function R2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function NE(s){return(t,n)=>{let r=!1;for(const o of mu(s)){const u=N2(o,t,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function N2(s,t,n){const r=s.field.isKeyField()?gt.comparator(t.key,n.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?vs(g,p):Et(42886)})(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Ts(this.inner,((n,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return hE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new Se(gt.comparator);function Kn(){return D2}const DE=new Se(gt.comparator);function ru(...s){let t=DE;for(const n of s)t=t.insert(n.key,n);return t}function VE(s){let t=DE;return s.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Zi(){return gu()}function ME(){return gu()}function gu(){return new Ir((s=>s.toString()),((s,t)=>s.isEqual(t)))}const V2=new Se(gt.comparator),M2=new me(gt.comparator);function Gt(...s){let t=M2;for(const n of s)t=t.add(n);return t}const O2=new me(jt);function k2(){return O2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(t)?"-0":t}}function OE(s){return{integerValue:""+s}}function z2(s,t){return qA(t)?OE(t):kg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function j2(s,t,n){return s instanceof Ru?(function(o,u){const c={fields:{[mE]:{stringValue:dE},[pE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Dg(u)&&(u=of(u)),u&&(c.fields[gE]=u),{mapValue:c}})(n,t):s instanceof Uo?zE(s,t):s instanceof qo?jE(s,t):(function(o,u){const c=kE(o,u),m=wv(c)+wv(o.Ae);return tg(c)&&tg(o.Ae)?OE(m):kg(o.serializer,m)})(s,t)}function P2(s,t,n){return s instanceof Uo?zE(s,t):s instanceof qo?jE(s,t):n}function kE(s,t){return s instanceof Nu?(function(r){return tg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Ru extends hf{}class Uo extends hf{constructor(t){super(),this.elements=t}}function zE(s,t){const n=PE(t);for(const r of s.elements)n.some((o=>tr(o,r)))||n.push(r);return{arrayValue:{values:n}}}class qo extends hf{constructor(t){super(),this.elements=t}}function jE(s,t){let n=PE(t);for(const r of s.elements)n=n.filter((o=>!tr(o,r)));return{arrayValue:{values:n}}}class Nu extends hf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function wv(s){return we(s.integerValue||s.doubleValue)}function PE(s){return Cu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,n){this.field=t,this.transform=n}}function L2(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Uo&&o instanceof Uo||r instanceof qo&&o instanceof qo?Vo(r.elements,o.elements,tr):r instanceof Nu&&o instanceof Nu?tr(r.Ae,o.Ae):r instanceof Ru&&o instanceof Ru})(s.transform,t.transform)}class U2{constructor(t,n){this.version=t,this.transformResults=n}}class on{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new on}static exists(t){return new on(void 0,t)}static updateTime(t){return new on(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ih(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class ff{}function BE(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new ju(s.key,on.none()):new Qo(s.key,s.data,on.none());{const n=s.data,r=vn.empty();let o=new me(Re.comparator);for(let u of t.fields)if(!o.has(u)){let c=n.field(u);c===null&&u.length>1&&(u=u.popLast(),c=n.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Cr(s.key,r,new Mn(o.toArray()),on.none())}}function q2(s,t,n){s instanceof Qo?(function(o,u,c){const m=o.value.clone(),g=Av(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,n):s instanceof Cr?(function(o,u,c){if(!Ih(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Av(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(LE(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,n):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,n)}function pu(s,t,n,r){return s instanceof Qo?(function(u,c,m,g){if(!Ih(u.precondition,c))return m;const p=u.value.clone(),E=Iv(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,t,n,r):s instanceof Cr?(function(u,c,m,g){if(!Ih(u.precondition,c))return m;const p=Iv(u.fieldTransforms,g,c),E=c.data;return E.setAll(LE(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(s,t,n,r):(function(u,c,m){return Ih(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,n)}function F2(s,t){let n=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=kE(r.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(r.field,u))}return n||null}function Sv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Vo(r,o,((u,c)=>L2(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Qo extends ff{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cr extends ff{constructor(t,n,r,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function LE(s){const t=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}})),t}function Av(s,t,n){const r=new Map;Ct(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,P2(c,m,n[o]))}return r}function Iv(s,t,n){const r=new Map;for(const o of s){const u=o.transform,c=n.data.field(o.field);r.set(o.field,j2(u,c,t))}return r}class ju extends ff{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UE extends ff{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&q2(u,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=pu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=pu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=ME();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=n.has(o.key)?null:m;const g=BE(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Vt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Gt())}isEqual(t){return this.batchId===t.batchId&&Vo(this.mutations,t.mutations,((n,r)=>Sv(n,r)))&&Vo(this.baseMutations,t.baseMutations,((n,r)=>Sv(n,r)))}}class jg{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){Ct(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return V2})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new jg(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,Wt;function G2(s){switch(s){case J.OK:return Et(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Et(15467,{code:s})}}function qE(s){if(s===void 0)return Tn("GRPC error has no .code"),J.UNKNOWN;switch(s){case Qe.OK:return J.OK;case Qe.CANCELLED:return J.CANCELLED;case Qe.UNKNOWN:return J.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return J.INTERNAL;case Qe.UNAVAILABLE:return J.UNAVAILABLE;case Qe.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Qe.NOT_FOUND:return J.NOT_FOUND;case Qe.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Qe.ABORTED:return J.ABORTED;case Qe.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Qe.DATA_LOSS:return J.DATA_LOSS;default:return Et(39323,{code:s})}}(Wt=Qe||(Qe={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new gs([4294967295,4294967295],0);function Cv(s){const t=K2().encode(s),n=new Lb;return n.update(t),new Uint8Array(n.digest())}function Rv(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new gs([n,r],0),new gs([o,u],0)]}class Bg{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(r<0)throw new su(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=gs.fromNumber(this.ge)}ye(t,n,r){let o=t.add(n.multiply(gs.fromNumber(r)));return o.compare(Q2)===1&&(o=new gs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Cv(t),[r,o]=Rv(n);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Bg(u,o,n);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const n=Cv(t),[r,o]=Rv(n);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,n,r,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,Pu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new df(Vt.min(),o,new Se(jt),Kn(),Gt())}}class Pu{constructor(t,n,r,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Pu(r,n,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,n,r,o){this.be=t,this.removedTargetIds=n,this.key=r,this.De=o}}class FE{constructor(t,n){this.targetId=t,this.Ce=n}}class HE{constructor(t,n,r=Ze.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Nv{constructor(){this.ve=0,this.Fe=Dv(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Gt(),n=Gt(),r=Gt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Et(38017,{changeType:u})}})),new Pu(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Dv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Y2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Kn(),this.Je=gh(),this.He=gh(),this.Ye=new Se(jt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,r=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Fh(u))if(r===0){const c=new gt(u.path);this.et(n,c,Me.newNoDocument(c,Vt.min()))}else Ct(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let c,m;try{c=Ar(r).toUint8Array()}catch(g){if(g instanceof fE)return pa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Bg(c,o,u)}catch(g){return pa(g instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Fh(m.target)){const g=new gt(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Me.newNoDocument(g,t))}u.Be&&(n.set(c,u.ke()),u.qe())}}));let r=Gt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new df(t,n,this.Ye,this.je,r);return this.je=Kn(),this.Je=gh(),this.He=gh(),this.Ye=new Se(jt),o}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Nv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new me(jt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new me(jt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Nv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function gh(){return new Se(gt.comparator)}function Dv(){return new Se(gt.comparator)}const X2={asc:"ASCENDING",desc:"DESCENDING"},Z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$2={and:"AND",or:"OR"};class J2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ag(s,t){return s.useProto3Json||nf(t)?t:{value:t}}function Fo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function GE(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function W2(s,t){return Fo(s,t.toTimestamp())}function wn(s){return Ct(!!s,49232),Vt.fromTimestamp((function(n){const r=Sr(n);return new fe(r.seconds,r.nanos)})(s))}function Lg(s,t){return og(s,t).canonicalString()}function og(s,t){const n=(function(o){return new oe(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?n:n.child(t)}function KE(s){const t=oe.fromString(s);return Ct(e1(t),10190,{key:t.toString()}),t}function Gh(s,t){return Lg(s.databaseId,t.path)}function da(s,t){const n=KE(t);if(n.get(1)!==s.databaseId.projectId)throw new ct(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ct(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new gt(XE(n))}function QE(s,t){return Lg(s.databaseId,t)}function YE(s){const t=KE(s);return t.length===4?oe.emptyPath():XE(t)}function lg(s){return new oe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function XE(s){return Ct(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Vv(s,t,n){return{name:Gh(s,t),fields:n.value.mapValue.fields}}function tI(s,t,n){const r=da(s,t.name),o=wn(t.updateTime),u=t.createTime?wn(t.createTime):Vt.min(),c=new vn({mapValue:{fields:t.fields}}),m=Me.newFoundDocument(r,o,u,c);return n&&m.setHasCommittedMutations(),n?m.setHasCommittedMutations():m}function eI(s,t){let n;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Et(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(Ct(E===void 0||typeof E=="string",58123),Ze.fromBase64String(E||"")):(Ct(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ze.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?J.UNKNOWN:qE(p.code);return new ct(E,p.message||"")})(c);n=new HE(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=da(s,r.document.name),u=wn(r.document.updateTime),c=r.document.createTime?wn(r.document.createTime):Vt.min(),m=new vn({mapValue:{fields:r.document.fields}}),g=Me.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];n=new Ch(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=da(s,r.document),u=r.readTime?wn(r.readTime):Vt.min(),c=Me.newNoDocument(o,u),m=r.removedTargetIds||[];n=new Ch([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=da(s,r.document),u=r.removedTargetIds||[];n=new Ch([],u,o,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new H2(o,u),m=r.targetId;n=new FE(m,c)}}return n}function Kh(s,t){let n;if(t instanceof Qo)n={update:Vv(s,t.key,t.value)};else if(t instanceof ju)n={delete:Gh(s,t.key)};else if(t instanceof Cr)n={update:Vv(s,t.key,t.data),updateMask:oI(t.fieldMask)};else{if(!(t instanceof UE))return Et(16599,{Vt:t.type});n={verify:Gh(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Ru)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof qo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Nu)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw Et(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:W2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Et(27497)})(s,t.precondition)),n}function ug(s,t){const n=t.currentDocument?(function(u){return u.updateTime!==void 0?on.updateTime(wn(u.updateTime)):u.exists!==void 0?on.exists(u.exists):on.none()})(t.currentDocument):on.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)Ct(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Ru;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Uo(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new qo(E)}else"increment"in m?g=new Nu(c,m.increment):Et(16584,{proto:m});const p=Re.fromServerFormat(m.fieldPath);return new B2(p,g)})(s,o))):[];if(t.update){t.update.name;const o=da(s,t.update.name),u=new vn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new Mn(p.map((E=>Re.fromServerFormat(E))))})(t.updateMask);return new Cr(o,u,c,n,r)}return new Qo(o,u,n,r)}if(t.delete){const o=da(s,t.delete);return new ju(o,n)}if(t.verify){const o=da(s,t.verify);return new UE(o,n)}return Et(1463,{proto:t})}function nI(s,t){return s&&s.length>0?(Ct(t!==void 0,14353),s.map((n=>(function(o,u){let c=o.updateTime?wn(o.updateTime):wn(u);return c.isEqual(Vt.min())&&(c=wn(u)),new U2(c,o.transformResults||[])})(n,t)))):[]}function ZE(s,t){return{documents:[QE(s,t.path)]}}function $E(s,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QE(s,o);const u=(function(p){if(p.length!==0)return t1(de.create(p,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(S){return{field:Ao(S.field),direction:rI(S.dir)}})(E)))})(t.orderBy);c&&(n.structuredQuery.orderBy=c);const m=ag(s,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:o}}function JE(s){let t=YE(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ct(r===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(x){const S=WE(x);return S instanceof de&&Og(S)?S.getFilters():[S]})(n.where));let c=[];n.orderBy&&(c=(function(x){return x.map((S=>(function(B){return new qh(Io(B.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(x){let S;return S=typeof x=="object"?x.value:x,nf(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(x){const S=!!x.before,N=x.values||[];return new Bo(N,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(x){const S=!x.before,N=x.values||[];return new Bo(N,S)})(n.endAt)),I2(t,o,c,u,m,"F",g,p)}function iI(s,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function WE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Io(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Io(n.unaryFilter.field);return $t.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Io(n.unaryFilter.field);return $t.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(s):s.fieldFilter!==void 0?(function(n){return $t.create(Io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return de.create(n.compositeFilter.filters.map((r=>WE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(n.compositeFilter.op))})(s):Et(30097,{filter:s})}function rI(s){return X2[s]}function sI(s){return Z2[s]}function aI(s){return $2[s]}function Ao(s){return{fieldPath:s.canonicalString()}}function Io(s){return Re.fromServerFormat(s.fieldPath)}function t1(s){return s instanceof $t?(function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(n.field),op:sI(n.op),value:n.value}}})(s):s instanceof de?(function(n){const r=n.getFilters().map((o=>t1(o)));return r.length===1?r[0]:{compositeFilter:{op:aI(n.op),filters:r}}})(s):Et(54877,{filter:s})}function oI(s){const t=[];return s.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function e1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,n,r,o,u=Vt.min(),c=Vt.min(),m=Ze.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Tr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t){this.yt=t}}function lI(s,t){let n;if(t.document)n=tI(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=gt.fromSegments(t.noDocument.path),o=ba(t.noDocument.readTime);n=Me.newNoDocument(r,o),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Et(56709);{const r=gt.fromSegments(t.unknownDocument.path),o=ba(t.unknownDocument.version);n=Me.newUnknownDocument(r,o)}}return t.readTime&&n.setReadTime((function(o){const u=new fe(o[0],o[1]);return Vt.fromTimestamp(u)})(t.readTime)),n}function Mv(s,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:Gh(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Fo(u,c.version.toTimestamp()),createTime:Fo(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:va(t.version)};else{if(!t.isUnknownDocument())return Et(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:va(t.version)}}return r}function Qh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function va(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ba(s){const t=new fe(s.seconds,s.nanoseconds);return Vt.fromTimestamp(t)}function oa(s,t){const n=(t.baseMutations||[]).map((u=>ug(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>ug(s.yt,u))),o=fe.fromMillis(t.localWriteTimeMs);return new zg(t.batchId,o,n,r)}function au(s){const t=ba(s.readTime),n=s.lastLimboFreeSnapshotVersion!==void 0?ba(s.lastLimboFreeSnapshotVersion):Vt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return Ct(c===1,1966,{count:c}),ci(uf(YE(u.documents[0])))})(s.query):(function(u){return ci(JE(u))})(s.query),new Tr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,n,Ze.fromBase64String(s.resumeToken))}function i1(s,t){const n=va(t.snapshotVersion),r=va(t.lastLimboFreeSnapshotVersion);let o;o=Fh(t.target)?ZE(s.yt,t.target):$E(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:_a(t.target),readTime:n,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function r1(s){const t=JE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?sg(t,t.limit,"L"):t}function Vm(s,t){return new Pg(t.largestBatchId,ug(s.yt,t.overlayMutation))}function Ov(s,t){const n=t.path.lastSegment();return[s,bn(t.path.popLast()),n]}function kv(s,t,n,r){return{indexId:s,uid:t,sequenceNumber:n,readTime:va(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{getBundleMetadata(t,n){return zv(t).get(n).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:ba(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,n){return zv(t).put((function(o){return{bundleId:o.id,createTime:va(wn(o.createTime)),version:o.version}})(n))}getNamedQuery(t,n){return jv(t).get(n).next((r=>{if(r)return(function(u){return{name:u.name,query:r1(u.bundledQuery),readTime:ba(u.readTime)}})(r)}))}saveNamedQuery(t,n){return jv(t).put((function(o){return{name:o.name,readTime:va(wn(o.readTime)),bundledQuery:o.bundledQuery}})(n))}}function zv(s){return tn(s,rf)}function jv(s){return tn(s,sf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t,n){this.serializer=t,this.userId=n}static wt(t,n){const r=n.uid||"";return new mf(t,r)}getOverlay(t,n){return Jl(t).get(Ov(this.userId,n)).next((r=>r?Vm(this.serializer,r):null))}getOverlays(t,n){const r=Zi();return L.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){const o=[];return r.forEach(((u,c)=>{const m=new Pg(n,c);o.push(this.St(t,m))})),L.waitFor(o)}removeOverlaysForBatchId(t,n,r){const o=new Set;n.forEach((c=>o.add(bn(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Jl(t).Z($m,m))})),L.waitFor(u)}getOverlaysForCollection(t,n,r){const o=Zi(),u=bn(n),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Jl(t).J($m,c).next((m=>{for(const g of m){const p=Vm(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(t,n,r,o){const u=Zi();let c;const m=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Jl(t).ee({index:aE,range:m},((g,p,E)=>{const x=Vm(this.serializer,p);u.size()<o||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):E.done()})).next((()=>u))}St(t,n){return Jl(t).put((function(o,u,c){const[m,g,p]=Ov(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kh(o.yt,c.mutation)}})(this.serializer,this.userId,n))}}function Jl(s){return tn(s,af)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{bt(t){return tn(t,Rg)}getSessionToken(t){return this.bt(t).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?Ze.fromUint8Array(r):Ze.EMPTY_BYTE_STRING}))}setSessionToken(t,n){return this.bt(t).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){}Dt(t,n){this.Ct(t,n),n.vt()}Ct(t,n){if("nullValue"in t)this.Ft(n,5);else if("booleanValue"in t)this.Ft(n,10),n.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(n,15),n.Mt(we(t.integerValue));else if("doubleValue"in t){const r=we(t.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Eu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Sr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,n),this.Nt(n);else if("bytesValue"in t)this.Ft(n,30),n.Bt(Ar(t.bytesValue)),this.Nt(n);else if("referenceValue"in t)this.Lt(t.referenceValue,n);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in t?_E(t)?this.Ft(n,Number.MAX_SAFE_INTEGER):lf(t)?this.kt(t.mapValue,n):(this.qt(t.mapValue,n),this.Nt(n)):"arrayValue"in t?(this.Qt(t.arrayValue,n),this.Nt(n)):Et(19022,{$t:t})}Ot(t,n){this.Ft(n,25),this.Ut(t,n)}Ut(t,n){n.xt(t)}qt(t,n){const r=t.fields||{};this.Ft(n,55);for(const o of Object.keys(r))this.Ot(o,n),this.Ct(r[o],n)}kt(t,n){var c,m;const r=t.fields||{};this.Ft(n,53);const o=jo,u=((m=(c=r[o].arrayValue)==null?void 0:c.values)==null?void 0:m.length)||0;this.Ft(n,15),n.Mt(we(u)),this.Ot(o,n),this.Ct(r[o],n)}Qt(t,n){const r=t.values||[];this.Ft(n,50);for(const o of r)this.Ct(o,n)}Lt(t,n){this.Ft(n,37),gt.fromName(t).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(t,n){t.Mt(n)}Nt(t){t.Mt(2)}}la.Kt=new la;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=255;function hI(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function Pv(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=hI(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class fI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=n.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=n.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const n=this.en(t),r=Pv(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=255&n[o]}nn(t){const n=this.en(t),r=Pv(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=~(255&n[o])}rn(){this.sn(vo),this.sn(255)}_n(){this.an(vo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const n=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&n[0]);n[0]^=r?255:128;for(let o=1;o<n.length;++o)n[o]^=r?255:0;return n}Gt(t){const n=255&t;n===0?(this.sn(0),this.sn(255)):n===vo?(this.sn(vo),this.sn(0)):this.sn(n)}Jt(t){const n=255&t;n===0?(this.an(0),this.an(255)):n===vo?(this.an(vo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const n=t+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class dI{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class mI{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Wl{constructor(){this.cn=new fI,this.ln=new dI(this.cn),this.hn=new mI(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n,r,o){this.Tn=t,this.In=n,this.En=r,this.dn=o}An(){const t=this.dn.length,n=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.dn,0),n!==t?r.set([0],this.dn.length):++r[r.length-1],new ua(this.Tn,this.In,this.En,r)}Rn(t,n,r){return{indexId:this.Tn,uid:t,arrayValue:Rh(this.En),directionalValue:Rh(this.dn),orderedDocumentKey:Rh(n),documentKey:r.path.toArray()}}Vn(t,n,r){const o=this.Rn(t,n,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function os(s,t){let n=s.Tn-t.Tn;return n!==0?n:(n=Bv(s.En,t.En),n!==0?n:(n=Bv(s.dn,t.dn),n!==0?n:gt.comparator(s.In,t.In)))}function Bv(s,t){for(let n=0;n<s.length&&n<t.length;++n){const r=s[n]-t[n];if(r!==0)return r}return s.length-t.length}function Rh(s){return Db()?(function(n){let r="";for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return r})(s):s}function Lv(s){return typeof s!="string"?s:(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(s)}class Uv{constructor(t){this.mn=new me(((n,r)=>Re.comparator(n.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const n of t.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(Ct(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Ym(t);if(n!==void 0&&!this.wn(n))return!1;const r=ra(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new me(Re.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Eh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),n.push(new Eh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),n.push(new Eh(r.field,r.dir==="asc"?0:1)));return new jh(jh.UNKNOWN_ID,this.collectionId,n,bu.empty())}wn(t){for(const n of this.gn)if(this.Sn(n,t))return!0;return!1}Sn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===r}bn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(s){var n,r;if(Ct(s instanceof $t||s instanceof de,20012),s instanceof $t){if(s instanceof IE){const o=((r=(n=s.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((u=>$t.create(s.field,"==",u))))||[];return de.create(o,"or")}return s}const t=s.filters.map((o=>s1(o)));return de.create(t,s.op)}function gI(s){if(s.getFilters().length===0)return[];const t=fg(s1(s));return Ct(a1(t),7391),cg(t)||hg(t)?[t]:t.getFilters()}function cg(s){return s instanceof $t}function hg(s){return s instanceof de&&Og(s)}function a1(s){return cg(s)||hg(s)||(function(n){if(n instanceof de&&eg(n)){for(const r of n.getFilters())if(!cg(r)&&!hg(r))return!1;return!0}return!1})(s)}function fg(s){if(Ct(s instanceof $t||s instanceof de,34018),s instanceof $t)return s;if(s.filters.length===1)return fg(s.filters[0]);const t=s.filters.map((r=>fg(r)));let n=de.create(t,s.op);return n=Yh(n),a1(n)?n:(Ct(n instanceof de,64498),Ct(Lo(n),40251),Ct(n.filters.length>1,57927),n.filters.reduce(((r,o)=>Ug(r,o))))}function Ug(s,t){let n;return Ct(s instanceof $t||s instanceof de,38388),Ct(t instanceof $t||t instanceof de,25473),n=s instanceof $t?t instanceof $t?(function(o,u){return de.create([o,u],"and")})(s,t):qv(s,t):t instanceof $t?qv(t,s):(function(o,u){if(Ct(o.filters.length>0&&u.filters.length>0,48005),Lo(o)&&Lo(u))return wE(o,u.getFilters());const c=eg(o)?o:u,m=eg(o)?u:o,g=c.filters.map((p=>Ug(p,m)));return de.create(g,"or")})(s,t),Yh(n)}function qv(s,t){if(Lo(t))return wE(t,s.getFilters());{const n=t.filters.map((r=>Ug(s,r)));return de.create(n,"or")}}function Yh(s){if(Ct(s instanceof $t||s instanceof de,11850),s instanceof $t)return s;const t=s.getFilters();if(t.length===1)return Yh(t[0]);if(xE(s))return s;const n=t.map((o=>Yh(o))),r=[];return n.forEach((o=>{o instanceof $t?r.push(o):o instanceof de&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:de.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.Cn=new qg}addToCollectionParentIndex(t,n){return this.Cn.add(n),L.resolve()}getCollectionParents(t,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return L.resolve()}deleteFieldIndex(t,n){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,n){return L.resolve()}getDocumentsMatchingTarget(t,n){return L.resolve(null)}getIndexType(t,n){return L.resolve(0)}getFieldIndexes(t,n){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,n){return L.resolve(Qn.min())}getMinOffsetFromCollectionGroup(t,n){return L.resolve(Qn.min())}updateCollectionGroup(t,n,r){return L.resolve()}updateIndexEntries(t,n){return L.resolve()}}class qg{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new me(oe.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new me(oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="IndexedDbIndexManager",ph=new Uint8Array(0);class yI{constructor(t,n){this.databaseId=n,this.vn=new qg,this.Fn=new Ir((r=>_a(r)),((r,o)=>Ou(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.vn.has(n)){const r=n.lastSegment(),o=n.popLast();t.addOnCommittedListener((()=>{this.vn.add(n)}));const u={collectionId:r,parent:bn(o)};return Hv(t).put(u)}return L.resolve()}getCollectionParents(t,n){const r=[],o=IDBKeyRange.bound([n,""],[Yb(n),""],!1,!0);return Hv(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==n)break;r.push(Xi(c.parent))}return r}))}addFieldIndex(t,n){const r=tu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(n);delete o.indexId;const u=r.add(o);if(n.indexState){const c=Eo(t);return u.next((m=>{c.put(kv(m,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return u.next()}deleteFieldIndex(t,n){const r=tu(t),o=Eo(t),u=bo(t);return r.delete(n.indexId).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const n=tu(t),r=bo(t),o=Eo(t);return n.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,n){return L.forEach(this.Mn(n),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new Uv(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,n){const r=bo(t);let o=!0;const u=new Map;return L.forEach(this.Mn(n),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Gt();const m=[];return L.forEach(u,((g,p)=>{st(Fv,`Using index ${(function(et){return`id=${et.indexId}|cg=${et.collectionGroup}|f=${et.fields.map((ot=>`${ot.fieldPath}:${ot.kind}`)).join(",")}`})(g)} to execute ${_a(n)}`);const E=(function(et,ot){const xt=Ym(ot);if(xt===void 0)return null;for(const _t of Hh(et,xt.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null})(p,g),x=(function(et,ot){const xt=new Map;for(const _t of ra(ot))for(const I of Hh(et,_t.fieldPath))switch(I.op){case"==":case"in":xt.set(_t.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return xt.set(_t.fieldPath.canonicalString(),I.value),Array.from(xt.values())}return null})(p,g),S=(function(et,ot){const xt=[];let _t=!0;for(const I of ra(ot)){const A=I.kind===0?Ev(et,I.fieldPath,et.startAt):xv(et,I.fieldPath,et.startAt);xt.push(A.value),_t&&(_t=A.inclusive)}return new Bo(xt,_t)})(p,g),N=(function(et,ot){const xt=[];let _t=!0;for(const I of ra(ot)){const A=I.kind===0?xv(et,I.fieldPath,et.endAt):Ev(et,I.fieldPath,et.endAt);xt.push(A.value),_t&&(_t=A.inclusive)}return new Bo(xt,_t)})(p,g),B=this.On(g,p,S),P=this.On(g,p,N),K=this.Nn(g,p,x),dt=this.Bn(g.indexId,E,B,S.inclusive,P,N.inclusive,K);return L.forEach(dt,(Z=>r.Y(Z,n.limit).next((et=>{et.forEach((ot=>{const xt=gt.fromSegments(ot.documentKey);c.has(xt)||(c=c.add(xt),m.push(xt))}))}))))})).next((()=>m))}return L.resolve(null)}))}Mn(t){let n=this.Fn.get(t);return n||(t.filters.length===0?n=[t]:n=gI(de.create(t.filters,"and")).map((r=>ig(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,n),n)}Bn(t,n,r,o,u,c,m){const g=(n!=null?n.length:1)*Math.max(r.length,u.length),p=g/(n!=null?n.length:1),E=[];for(let x=0;x<g;++x){const S=n?this.Ln(n[x/p]):ph,N=this.kn(t,S,r[x%p],o),B=this.qn(t,S,u[x%p],c),P=m.map((K=>this.kn(t,S,K,!0)));E.push(...this.createRange(N,B,P))}return E}kn(t,n,r,o){const u=new ua(t,gt.empty(),n,r);return o?u:u.An()}qn(t,n,r,o){const u=new ua(t,gt.empty(),n,r);return o?u.An():u}xn(t,n){const r=new Uv(n),o=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,n){let r=2;const o=this.Mn(n);return L.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new me(Re.comparator),E=!1;for(const x of g.filters)for(const S of x.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:p=p.add(S.field));for(const x of g.orderBy)x.field.isKeyField()||(p=p.add(x.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(n)&&o.length>1&&r===2?1:r))}Qn(t,n){const r=new Wl;for(const o of ra(t)){const u=n.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);la.Kt.Dt(u,c)}return r.un()}Ln(t){const n=new Wl;return la.Kt.Dt(t,n.Pn(0)),n.un()}$n(t,n){const r=new Wl;return la.Kt.Dt(Iu(this.databaseId,n),r.Pn((function(u){const c=ra(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,n,r){if(r===null)return[];let o=[];o.push(new Wl);let u=0;for(const c of ra(t)){const m=r[u++];for(const g of o)if(this.Un(n,c.fieldPath)&&Cu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);la.Kt.Dt(m,p)}}return this.Wn(o)}On(t,n,r){return this.Nn(t,n,r.position)}Wn(t){const n=[];for(let r=0;r<t.length;++r)n[r]=t[r].un();return n}Kn(t,n,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new Wl;g.seed(m.un()),la.Kt.Dt(c,g.Pn(n.kind)),u.push(g)}return u}Un(t,n){return!!t.filters.find((r=>r instanceof $t&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,n){const r=tu(t),o=Eo(t);return(n?r.J(Zm,IDBKeyRange.bound(n,n)):r.J()).next((u=>{const c=[];return L.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,x){const S=x?new bu(x.sequenceNumber,new Qn(ba(x.readTime),new gt(Xi(x.documentKey)),x.largestBatchId)):bu.empty(),N=E.fields.map((([B,P])=>new Eh(Re.fromServerFormat(B),P)));return new jh(E.indexId,E.collectionGroup,N,S)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((n=>n.length===0?null:(n.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:jt(r.collectionGroup,o.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(t,n,r){const o=tu(t),u=Eo(t);return this.Gn(t).next((c=>o.J(Zm,IDBKeyRange.bound(n,n)).next((m=>L.forEach(m,(g=>u.put(kv(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,n){const r=new Map;return L.forEach(n,((o,u)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),L.forEach(m,(g=>this.zn(t,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?L.resolve():this.Jn(t,u,g,p,E)})))))))}))}Hn(t,n,r,o){return bo(t).put(o.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(t,n,r,o){return bo(t).delete(o.Vn(this.uid,this.$n(r,n.key),n.key))}zn(t,n,r){const o=bo(t);let u=new me(os);return o.ee({index:sE,range:IDBKeyRange.only([r.indexId,this.uid,Rh(this.$n(r,n))])},((c,m)=>{u=u.add(new ua(r.indexId,n,Lv(m.arrayValue),Lv(m.directionalValue)))})).next((()=>u))}jn(t,n){let r=new me(os);const o=this.Qn(n,t);if(o==null)return r;const u=Ym(n);if(u!=null){const c=t.data.field(u.fieldPath);if(Cu(c))for(const m of c.arrayValue.values||[])r=r.add(new ua(n.indexId,t.key,this.Ln(m),o))}else r=r.add(new ua(n.indexId,t.key,ph,o));return r}Jn(t,n,r,o,u){st(Fv,"Updating index entries for document '%s'",n.key);const c=[];return(function(g,p,E,x,S){const N=g.getIterator(),B=p.getIterator();let P=_o(N),K=_o(B);for(;P||K;){let dt=!1,Z=!1;if(P&&K){const et=E(P,K);et<0?Z=!0:et>0&&(dt=!0)}else P!=null?Z=!0:dt=!0;dt?(x(K),K=_o(B)):Z?(S(P),P=_o(N)):(P=_o(N),K=_o(B))}})(o,u,os,(m=>{c.push(this.Hn(t,n,r,m))}),(m=>{c.push(this.Yn(t,n,r,m))})),L.waitFor(c)}Gn(t){let n=1;return Eo(t).ee({index:rE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),n=o.sequenceNumber+1})).next((()=>n))}createRange(t,n,r){r=r.sort(((c,m)=>os(c,m))).filter(((c,m,g)=>!m||os(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=os(c,t),g=os(c,n);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(n);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,ph,gt.empty()),g=o[c+1].Vn(this.uid,ph,gt.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,n){return os(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(Gv)}getMinOffset(t,n){return L.mapArray(this.Mn(n),(r=>this.xn(t,r).next((o=>o||Et(44426))))).next(Gv)}}function Hv(s){return tn(s,wu)}function bo(s){return tn(s,fu)}function tu(s){return tn(s,Cg)}function Eo(s){return tn(s,hu)}function Gv(s){Ct(s.length!==0,28825);let t=s[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Sg(o,t)<0&&(t=o),n<o.largestBatchId&&(n=o.largestBatchId)}return new Qn(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o1=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(s,t,n){const r=s.store(Ti),o=s.store(Mo),u=[],c=IDBKeyRange.only(n.batchId);let m=0;const g=r.ee({range:c},((E,x,S)=>(m++,S.delete())));u.push(g.next((()=>{Ct(m===1,47070,{batchId:n.batchId})})));const p=[];for(const E of n.mutations){const x=eE(t,E.key.path,n.batchId);u.push(o.delete(x)),p.push(E.key)}return L.waitFor(u).next((()=>p))}function Xh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw Et(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(o1,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class gf{constructor(t,n,r,o){this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,n,r,o){Ct(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new gf(u,n,r,o)}checkEmpty(t){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ls(t).ee({index:ca,range:r},((o,u,c)=>{n=!1,c.done()})).next((()=>n))}addMutationBatch(t,n,r,o){const u=Co(t),c=ls(t);return c.add({}).next((m=>{Ct(typeof m=="number",49019);const g=new zg(m,n,r,o),p=(function(N,B,P){const K=P.baseMutations.map((Z=>Kh(N.yt,Z))),dt=P.mutations.map((Z=>Kh(N.yt,Z)));return{userId:B,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:K,mutations:dt}})(this.serializer,this.userId,g),E=[];let x=new me(((S,N)=>jt(S.canonicalString(),N.canonicalString())));for(const S of o){const N=eE(this.userId,S.key.path,m);x=x.add(S.key.path.popLast()),E.push(c.put(p)),E.push(u.put(N,GA))}return x.forEach((S=>{E.push(this.indexManager.addToCollectionParentIndex(t,S))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),L.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,n){return ls(t).get(n).next((r=>r?(Ct(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),oa(this.serializer,r)):null))}er(t,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(t,n).next((r=>{if(r){const o=r.keys();return this.Xn[n]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ls(t).ee({index:ca,range:o},((c,m,g)=>{m.userId===this.userId&&(Ct(m.batchId>=r,47524,{tr:r}),u=oa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ha;return ls(t).ee({index:ca,range:n,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,ha],[this.userId,Number.POSITIVE_INFINITY]);return ls(t).J(ca,n).next((r=>r.map((o=>oa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,n){const r=xh(this.userId,n.path),o=IDBKeyRange.lowerBound(r),u=[];return Co(t).ee({range:o},((c,m,g)=>{const[p,E,x]=c,S=Xi(E);if(p===this.userId&&n.path.isEqual(S))return ls(t).get(x).next((N=>{if(!N)throw Et(61480,{nr:c,batchId:x});Ct(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:x}),u.push(oa(this.serializer,N))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new me(jt);const o=[];return n.forEach((u=>{const c=xh(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Co(t).ee({range:m},((p,E,x)=>{const[S,N,B]=p,P=Xi(N);S===this.userId&&u.path.isEqual(P)?r=r.add(B):x.done()}));o.push(g)})),L.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1,u=xh(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new me(jt);return Co(t).ee({range:c},((g,p,E)=>{const[x,S,N]=g,B=Xi(S);x===this.userId&&r.isPrefixOf(B)?B.length===o&&(m=m.add(N)):E.done()})).next((()=>this.rr(t,m)))}rr(t,n){const r=[],o=[];return n.forEach((u=>{o.push(ls(t).get(u).next((c=>{if(c===null)throw Et(35274,{batchId:u});Ct(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(oa(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(t,n){return l1(t.le,this.userId,n).next((r=>(t.addOnCommittedListener((()=>{this.ir(n.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Co(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Xi(u[1]);o.push(g)}else m.done()})).next((()=>{Ct(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,n){return u1(t,this.userId,n)}_r(t){return c1(t).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:ha,lastStreamToken:""}))}}function u1(s,t,n){const r=xh(t,n.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Co(s).ee({range:u,X:!0},((m,g,p)=>{const[E,x,S]=m;E===t&&x===o&&(c=!0),p.done()})).next((()=>c))}function ls(s){return tn(s,Ti)}function Co(s){return tn(s,Mo)}function c1(s){return tn(s,xu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ea(0)}static cr(){return new Ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.lr(t).next((n=>{const r=new Ea(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(t,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((n=>Vt.fromTimestamp(new fe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(t,n,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),this.hr(t,o))))}addTargetData(t,n){return this.Pr(t,n).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(t,r))))))}updateTargetData(t,n){return this.Pr(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next((()=>xo(t).delete(n.targetId))).next((()=>this.lr(t))).next((r=>(Ct(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,n,r){let o=0;const u=[];return xo(t).ee(((c,m)=>{const g=au(m);g.sequenceNumber<=n&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>L.waitFor(u))).next((()=>o))}forEachTarget(t,n){return xo(t).ee(((r,o)=>{const u=au(o);n(u)}))}lr(t){return Qv(t).get(Lh).next((n=>(Ct(n!==null,2888),n)))}hr(t,n){return Qv(t).put(Lh,n)}Pr(t,n){return xo(t).put(i1(this.serializer,n))}Tr(t,n){let r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((n=>n.targetCount))}getTargetData(t,n){const r=_a(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return xo(t).ee({range:o,index:iE},((c,m,g)=>{const p=au(m);Ou(n,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(t,n,r){const o=[],u=hs(t);return n.forEach((c=>{const m=bn(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),L.waitFor(o)}removeMatchingKeys(t,n,r){const o=hs(t);return L.forEach(n,(u=>{const c=bn(u.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,n){const r=hs(t),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),o=hs(t);let u=Gt();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Xi(c[1]),E=new gt(p);u=u.add(E)})).next((()=>u))}containsKey(t,n){const r=bn(n.path),o=IDBKeyRange.bound([r],[Yb(r)],!1,!0);let u=0;return hs(t).ee({index:Ig,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(t,n){return xo(t).get(n).next((r=>r?au(r):null))}}function xo(s){return tn(s,Oo)}function Qv(s){return tn(s,fa)}function hs(s){return tn(s,ko)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="LruGarbageCollector",vI=1048576;function Xv([s,t],[n,r]){const o=jt(s,n);return o===0?jt(t,r):o}class bI{constructor(t){this.Ir=t,this.buffer=new me(Xv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h1{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Yv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xs(n)?st(Yv,"Ignoring IndexedDB error during garbage collection: ",n):await Ta(n)}await this.Vr(3e5)}))}}class EI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return L.resolve(ui.ce);const r=new bI(n);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Kv)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(t,o)))).next((x=>(r=x,m=Date.now(),this.removeTargets(t,r,n)))).next((x=>(u=x,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((x=>(p=Date.now(),wo()<=te.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${x} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function f1(s,t){return new EI(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,n){this.db=t,this.garbageCollector=f1(this,n)}gr(t){const n=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}pr(t,n){return this.Sr(t,((r,o)=>n(o)))}addReference(t,n,r){return yh(t,r)}removeReference(t,n,r){return yh(t,r)}removeTargets(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)}markPotentiallyOrphaned(t,n){return yh(t,n)}br(t,n){return(function(o,u){let c=!1;return c1(o).te((m=>u1(o,m,u).next((g=>(g&&(c=!0),L.resolve(!g)))))).next((()=>c))})(t,n)}removeOrphanedDocuments(t,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=n){const g=this.br(t,c).next((p=>{if(!p)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,Vt.min()),hs(t).delete((function(x){return[0,bn(x.path)]})(c)))))}));o.push(g)}})).next((()=>L.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,n){return yh(t,n)}Sr(t,n){const r=hs(t);let o,u=ui.ce;return r.ee({index:Ig},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==ui.ce&&n(new gt(Xi(o)),u),u=p,o=g):u=ui.ce})).next((()=>{u!==ui.ce&&n(new gt(Xi(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function yh(s,t){return hs(s).put((function(r,o){return{targetId:0,path:bn(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.changes=new Ir((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Me.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,r){return na(t).put(r)}removeEntry(t,n,r){return na(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Qh(c),m[m.length-1]]})(n,r))}updateMetadata(t,n){return this.getMetadata(t).next((r=>(r.byteSize+=n,this.Dr(t,r))))}getEntry(t,n){let r=Me.newInvalidDocument(n);return na(t).ee({index:Th,range:IDBKeyRange.only(eu(n))},((o,u)=>{r=this.Cr(n,u)})).next((()=>r))}vr(t,n){let r={size:0,document:Me.newInvalidDocument(n)};return na(t).ee({index:Th,range:IDBKeyRange.only(eu(n))},((o,u)=>{r={document:this.Cr(n,u),size:Xh(u)}})).next((()=>r))}getEntries(t,n){let r=Kn();return this.Fr(t,n,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,n){let r=Kn(),o=new Se(gt.comparator);return this.Fr(t,n,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Xh(c))})).next((()=>({documents:r,Or:o})))}Fr(t,n,r){if(n.isEmpty())return L.resolve();let o=new me(Jv);n.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(eu(o.first()),eu(o.last())),c=o.getIterator();let m=c.getNext();return na(t).ee({index:Th,range:u},((g,p,E)=>{const x=gt.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&Jv(m,x)<0;)r(m,null),m=c.getNext();m&&m.isEqual(x)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(eu(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,n,r,o,u){const c=n.path,m=[c.popLast().toArray(),c.lastSegment(),Qh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(t).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u==null||u.incrementDocumentReadCount(p.length);let E=Kn();for(const x of p){const S=this.Cr(gt.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);S.isFoundDocument()&&(zu(n,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E}))}getAllFromCollectionGroup(t,n,r,o){let u=Kn();const c=$v(n,r),m=$v(n,Qn.max());return na(t).ee({index:nE,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const x=this.Cr(gt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(x.key,x),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new wI(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((n=>n.byteSize))}getMetadata(t){return Zv(t).get(Xm).next((n=>(Ct(!!n,20021),n)))}Dr(t,n){return Zv(t).put(Xm,n)}Cr(t,n){if(n){const r=lI(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Vt.min())))return r}return Me.newInvalidDocument(t)}}function m1(s){return new TI(s)}class wI extends d1{constructor(t,n){super(),this.Nr=t,this.trackRemovals=n,this.Br=new Ir((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const n=[];let r=0,o=new me(((u,c)=>jt(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(n.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=Mv(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Xh(g);r+=p-m.size,n.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=Mv(this.Nr.serializer,c.convertToNoDocument(Vt.min()));n.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),n.push(this.Nr.updateMetadata(t,r)),L.waitFor(n)}getFromCache(t,n){return this.Nr.vr(t,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,n){return this.Nr.Mr(t,n).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function Zv(s){return tn(s,Tu)}function na(s){return tn(s,Bh)}function eu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $v(s,t){const n=t.documentKey.path.toArray();return[s,Qh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jv(s,t){const n=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<n.length-2&&u<r.length-2;++u)if(o=jt(n[u],r[u]),o)return o;return o=jt(n.length,r.length),o||(o=jt(n[n.length-2],r[r.length-2]),o||jt(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(r!==null&&pu(r.mutation,o,Mn.empty(),fe.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,Gt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=Gt()){const o=Zi();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,r).next((u=>{let c=ru();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,n){const r=Zi();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,Gt())))}populateOverlays(t,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{n.set(c,m)}))}))}computeViews(t,n,r,o){let u=Kn();const c=gu(),m=(function(){return gu()})();return n.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Cr)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),pu(E.mutation,p,E.mutation.getFieldMask(),fe.now())):c.set(p.key,Mn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),n.forEach(((p,E)=>m.set(p,new SI(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,n){const r=gu();let o=new Se(((c,m)=>c-m)),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let E=r.get(g)||Mn.empty();E=m.applyToLocalView(p,E),r.set(g,E);const x=(o.get(m.batchId)||Gt()).add(g);o=o.insert(m.batchId,x)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,x=ME();E.forEach((S=>{if(!u.has(S)){const N=BE(n.get(S),r.get(S));N!==null&&x.set(S,N),u=u.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,x))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,o){return(function(c){return gt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):CE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-u.size):L.resolve(Zi());let m=vu,g=u;return c.next((p=>L.forEach(p,((E,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),u.get(E)?L.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Gt()))).next((E=>({batchId:m,changes:VE(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new gt(n)).next((r=>{let o=ru();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const u=n.collectionGroup;let c=ru();return this.indexManager.getCollectionParents(t,u).next((m=>L.forEach(m,(g=>{const p=(function(x,S){return new ku(S,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next((E=>{E.forEach(((x,S)=>{c=c.insert(x,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,Me.newInvalidDocument(E)))}));let m=ru();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&pu(E.mutation,p,Mn.empty(),fe.now()),zu(n,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:wn(o.createTime)}})(n)),L.resolve()}getNamedQuery(t,n){return L.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:r1(o.bundledQuery),readTime:wn(o.readTime)}})(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.overlays=new Se(gt.comparator),this.qr=new Map}getOverlay(t,n){return L.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Zi();return L.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((o,u)=>{this.St(t,n,u)})),L.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(t,n,r){const o=Zi(),u=n.length+1,c=new gt(n.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return L.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let u=new Se(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Zi(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Zi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return L.resolve(m)}St(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Pg(n,r));let u=this.qr.get(n);u===void 0&&(u=Gt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(t){return L.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Qr=new me(an.$r),this.Ur=new me(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new an(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new an(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new gt(new oe([])),r=new an(n,t),o=new an(n,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new gt(new oe([])),r=new an(n,t),o=new an(n,t+1);let u=Gt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const n=new an(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class an{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return gt.comparator(t.key,n.key)||jt(t.Yr,n.Yr)}static Kr(t,n){return jt(t.Yr,n.Yr)||gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new me(an.$r)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zg(u,n,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new an(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return L.resolve(c)}lookupMutationBatch(t,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return L.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ha:this.tr-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new an(n,0),o=new an(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),L.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new me(jt);return n.forEach((o=>{const u=new an(o,0),c=new an(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let u=r;gt.isDocumentKey(u)||(u=u.child(""));const c=new an(new gt(u),0);let m=new me(jt);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),L.resolve(this.ti(m))}ti(t){const n=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){Ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,(o=>{const u=new an(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new an(n,0),o=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t){this.ri=t,this.docs=(function(){return new Se(gt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(t,n){let r=Kn();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Me.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let u=Kn();const c=n.path,m=new gt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Sg($b(E),r)<=0||(o.has(E.key)||zu(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return L.resolve(u)}getAllFromCollectionGroup(t,n,r,o){Et(9500)}ii(t,n){return L.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new DI(this)}getSize(t){return L.resolve(this.size)}}class DI extends d1{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),L.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t){this.persistence=t,this.si=new Ir((n=>_a(n)),Ou),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Fg,this.targetCount=0,this.ai=Ea.ur()}forEachTarget(t,n){return this.si.forEach(((r,o)=>n(o))),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ea(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(t,n){return this.Pr(n),L.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,n,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),L.waitFor(u).next((()=>o))}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),L.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(t,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,n){this.ui={},this.overlays={},this.ci=new ui(0),this.li=!1,this.li=!0,this.hi=new CI,this.referenceDelegate=t(this),this.Pi=new VI(this),this.indexManager=new pI,this.remoteDocumentCache=(function(o){return new NI(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new n1(n),this.Ii=new AI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new II,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new RI(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){st("MemoryPersistence","Starting transaction:",t);const o=new MI(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return L.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class MI extends Wb{constructor(t){super(),this.currentSequenceNumber=t}}class pf{constructor(t){this.persistence=t,this.Ri=new Fg,this.Vi=null}static mi(t){return new pf(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(r=>{const o=gt.fromPath(r);return this.gi(t,o).next((u=>{u||n.removeEntry(o,Vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Zh{constructor(t,n){this.persistence=t,this.pi=new Ir((r=>bn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=f1(this,n)}static mi(t,n){return new Zh(t,n)}Ei(){}di(t){return L.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return L.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?L.resolve():n(o)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,n).next((m=>{m||(r++,u.removeEntry(c,Vt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),L.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),L.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),L.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),L.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Sh(t.data.value)),n}br(t,n,r){return L.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t){this.serializer=t}k(t,n,r,o){const u=new ef("createOrUpgrade",n);r<1&&o>=1&&((function(g){g.createObjectStore(Mu)})(t),(function(g){g.createObjectStore(xu,{keyPath:HA}),g.createObjectStore(Ti,{keyPath:uv,autoIncrement:!0}).createIndex(ca,cv,{unique:!0}),g.createObjectStore(Mo)})(t),Wv(t),(function(g){g.createObjectStore(sa)})(t));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(ko),g.deleteObjectStore(Oo),g.deleteObjectStore(fa)})(t),Wv(t)),c=c.next((()=>(function(g){const p=g.store(fa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return p.put(Lh,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(Ti).J().next((x=>{g.deleteObjectStore(Ti),g.createObjectStore(Ti,{keyPath:uv,autoIncrement:!0}).createIndex(ca,cv,{unique:!0});const S=p.store(Ti),N=x.map((B=>S.put(B)));return L.waitFor(N)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(zo,{keyPath:WA})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Tu)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(rf,{keyPath:t2})})(t),(function(g){g.createObjectStore(sf,{keyPath:e2})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(af,{keyPath:l2});p.createIndex($m,u2,{unique:!1}),p.createIndex(aE,c2,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Bh,{keyPath:KA});p.createIndex(Th,QA),p.createIndex(nE,YA)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(sa)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Cg,{keyPath:n2,autoIncrement:!0}).createIndex(Zm,i2,{unique:!1}),g.createObjectStore(hu,{keyPath:r2}).createIndex(rE,s2,{unique:!1}),g.createObjectStore(fu,{keyPath:a2}).createIndex(sE,o2,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{n.objectStore(hu).clear()})).next((()=>{n.objectStore(fu).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Rg,{keyPath:h2})})(t)}))),r<18&&o>=18&&Db()&&(c=c.next((()=>{n.objectStore(hu).clear()})).next((()=>{n.objectStore(fu).clear()}))),c}wi(t){let n=0;return t.store(sa).ee(((r,o)=>{n+=Xh(o)})).next((()=>{const r={byteSize:n};return t.store(Tu).put(Xm,r)}))}yi(t){const n=t.store(xu),r=t.store(Ti);return n.J().next((o=>L.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ha],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ca,c).next((m=>L.forEach(m,(g=>{Ct(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=oa(this.serializer,g);return l1(t,u.userId,p).next((()=>{}))}))))}))))}Si(t){const n=t.store(ko),r=t.store(sa);return t.store(fa).get(Lh).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new oe(c),p=(function(x){return[0,bn(x)]})(g);u.push(n.get(p).next((E=>E?L.resolve():(x=>n.put({targetId:0,path:bn(x),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>L.waitFor(u)))}))}bi(t,n){t.createObjectStore(wu,{keyPath:JA});const r=n.store(wu),o=new qg,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:bn(g)})}};return n.store(sa).ee({X:!0},((c,m)=>{const g=new oe(c);return u(g.popLast())})).next((()=>n.store(Mo).ee({X:!0},(([c,m,g],p)=>{const E=Xi(m);return u(E.popLast())}))))}Di(t){const n=t.store(Oo);return n.ee(((r,o)=>{const u=au(o),c=i1(this.serializer,u);return n.put(c)}))}Ci(t,n){const r=n.store(sa),o=[];return r.ee(((u,c)=>{const m=n.store(Bh),g=(function(x){return x.document?new gt(oe.fromString(x.document.name).popFirst(5)):x.noDocument?gt.fromSegments(x.noDocument.path):x.unknownDocument?gt.fromSegments(x.unknownDocument.path):Et(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>L.waitFor(o)))}Fi(t,n){const r=n.store(Ti),o=m1(this.serializer),u=new Hg(pf.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Gt();oa(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),L.forEach(m,((g,p)=>{const E=new mn(p),x=mf.wt(this.serializer,E),S=u.getIndexManager(E),N=gf.wt(E,this.serializer,S,u.referenceDelegate);return new g1(o,N,x,S).recalculateAndSaveOverlaysForDocumentKeys(new Jm(n,ui.ce),g).next()}))}))}}function Wv(s){s.createObjectStore(ko,{keyPath:ZA}).createIndex(Ig,$A,{unique:!0}),s.createObjectStore(Oo,{keyPath:"targetId"}).createIndex(iE,XA,{unique:!0}),s.createObjectStore(fa)}const us="IndexedDbPersistence",Mm=18e5,Om=5e3,km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kI="main";class Gg{constructor(t,n,r,o,u,c,m,g,p,E,x=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=x,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Gg.v())throw new ct(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xI(this,o),this.$i=n+kI,this.serializer=new n1(g),this.Ui=new ps(this.$i,this.Ni,new OI(this.serializer)),this.hi=new cI,this.Pi=new _I(this.referenceDelegate,this.serializer),this.remoteDocumentCache=m1(this.serializer),this.Ii=new uI,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Tn(us,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ct(J.FAILED_PRECONDITION,km);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new ui(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async n=>{n.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>_h(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((n=>this.isPrimary&&!n?this.Zi(t).next((()=>!1)):!!n&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(xs(t))return st(us,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return st(us,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return nu(t).get(yo).next((n=>L.resolve(this.es(n))))}ts(t){return _h(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Mm)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=tn(n,zo);return r.J().next((o=>{const u=this.ss(o,Mm),c=o.filter((m=>u.indexOf(m)===-1));return L.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const n of t)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?L.resolve(!0):nu(t).get(yo).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Om)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ct(J.FAILED_PRECONDITION,km);return!1}}return!(!this.networkEnabled||!this.inForeground)||_h(t).J().next((r=>this.ss(r,Om).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&st(us,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Mu,zo],(t=>{const n=new Jm(t,ui.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(t,n){return t.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>_h(t).J().next((n=>this.ss(n,Mm).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,n){return gf.wt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new yI(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return mf.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,n,r){st(us,"Starting transaction:",t);const o=n==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?m2:g===17?cE:g===16?d2:g===15?Ng:g===14?uE:g===13?lE:g===12?f2:g===11?oE:void Et(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new Jm(m,this.ci?this.ci.next():ui.ce),n==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Tn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ct(J.FAILED_PRECONDITION,Jb);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return nu(t).get(yo).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Om)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ct(J.FAILED_PRECONDITION,km)}))}Xi(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nu(t).put(yo,n)}static v(){return ps.v()}Zi(t){const n=nu(t);return n.get(yo).next((r=>this.es(r)?(st(us,"Releasing primary lease."),n.delete(yo)):L.resolve()))}rs(t,n){const r=Date.now();return!(t<r-n)&&(!(t>r)||(Tn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;Nb()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(t)))!==null;return st(us,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tn(us,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Tn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function nu(s){return tn(s,Mu)}function _h(s){return tn(s,zo)}function zI(s,t){let n=s.projectId;return s.isDefaultDatabase||(n+="."+s.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=o}static As(t,n){let r=Gt(),o=Gt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Kg(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Nb()?8:tE(Mh())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,o){const u={result:null};return this.ys(t,n).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,n,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new jI;return this.Ss(t,n,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,n,c,m.size)}))})).next((()=>u.result))}bs(t,n,r,o){return r.documentReadCount<this.fs?(wo()<=te.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(wo()<=te.DEBUG&&st("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(wo()<=te.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ci(n))):L.resolve())}ys(t,n){if(Tv(n))return L.resolve(null);let r=ci(n);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=sg(n,null,"F"),r=ci(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Gt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,c,g.readTime)?this.ys(t,sg(n,null,"F")):this.vs(t,p,n,g)}))))})))))}ws(t,n,r,o){return Tv(n)||o.isEqual(Vt.min())?L.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(n,u);return this.Cs(n,c,r,o)?L.resolve(null):(wo()<=te.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(n)),this.vs(t,c,n,jA(o,vu)).next((m=>m)))}))}Ds(t,n){let r=new me(NE(t));return n.forEach(((o,u)=>{zu(t,u)&&(r=r.add(u))})),r}Cs(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,r){return wo()<=te.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",So(n)),this.ps.getDocumentsMatchingQuery(t,n,Qn.min(),r)}vs(t,n,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(n.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="LocalStore",PI=3e8;class BI{constructor(t,n,r,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new Se(jt),this.xs=new Ir((u=>_a(u)),Ou),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new g1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function y1(s,t,n,r){return new BI(s,t,n,r)}async function _1(s,t){const n=Pt(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Gt();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function LI(s,t){const n=Pt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const x=p.batch,S=x.keys();let N=L.resolve();return S.forEach((B=>{N=N.next((()=>E.getEntry(g,B))).next((P=>{const K=p.docVersions.get(B);Ct(K!==null,48541),P.version.compareTo(K)<0&&(x.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),E.addEntry(P)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,x)))})(n,r,t,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Gt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function v1(s){const t=Pt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function UI(s,t){const n=Pt(s),r=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach(((E,x)=>{const S=o.get(x);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,x))));let N=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(x)!==null?N=N.withResumeToken(Ze.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,r)),o=o.insert(x,N),(function(P,K,dt){return P.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=PI?!0:dt.addedDocuments.size+dt.modifiedDocuments.size+dt.removedDocuments.size>0})(S,N,E)&&m.push(n.Pi.updateTargetData(u,N))}));let g=Kn(),p=Gt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(qI(u,c,t.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(Vt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((x=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return L.waitFor(m).next((()=>c.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function qI(s,t,n){let r=Gt(),o=Gt();return n.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Kn();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Vt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):st(Qg,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function FI(s,t){const n=Pt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ha),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function HI(s,t){const n=Pt(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,t).next((u=>u?(o=u,L.resolve(o)):n.Pi.allocateTargetId(r).next((c=>(o=new Tr(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function dg(s,t,n){const r=Pt(s),o=r.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!xs(c))throw c;st(Qg,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function tb(s,t,n){const r=Pt(s);let o=Vt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const x=Pt(g),S=x.xs.get(E);return S!==void 0?L.resolve(x.Ms.get(S)):x.Pi.getTargetData(p,E)})(r,c,ci(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,n?o:Vt.min(),n?u:Gt()))).next((m=>(GI(r,R2(t),m),{documents:m,Qs:u})))))}function GI(s,t,n){let r=s.Os.get(t)||Vt.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class eb{constructor(){this.activeTargetIds=k2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class b1{constructor(){this.Mo=new eb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new eb,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="ConnectivityMonitor";class ib{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(nb,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(nb,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh=null;function mg(){return vh===null?vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():vh++,"0x"+vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Uh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,n,r,o,u){const c=mg(),m=this.zo(t,n.toUriEncodedString());st(zm,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=Eg(p);return this.Jo(t,m,g,r,E).then((x=>(st(zm,`Received RPC '${t}' ${c}: `,x),x)),(x=>{throw pa(zm,`RPC '${t}' ${c} failed with error: `,x,"url: ",m,"request:",r),x}))}Ho(t,n,r,o,u,c){return this.Go(t,n,r,o,u)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ko})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const r=QI[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class ZI extends YI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,o,u){const c=mg();return new Promise(((m,g)=>{const p=new Ub;p.setWithCredentials(!0),p.listenOnce(qb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case bh.NO_ERROR:const x=p.getResponseJson();st(yn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(x)),m(x);break;case bh.TIMEOUT:st(yn,`RPC '${t}' ${c} timed out`),g(new ct(J.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const S=p.getStatus();if(st(yn,`RPC '${t}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const B=N==null?void 0:N.error;if(B&&B.status&&B.message){const P=(function(dt){const Z=dt.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Z)>=0?Z:J.UNKNOWN})(B.status);g(new ct(P,B.message))}else g(new ct(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ct(J.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{st(yn,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(o);st(yn,`RPC '${t}' ${c} sending request:`,o),p.send(n,"POST",E,r,15)}))}T_(t,n,r){const o=mg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=Gb(),m=Hb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const E=u.join("");st(yn,`Creating RPC '${t}' stream ${o}: ${E}`,g);const x=c.createWebChannel(E,g);this.I_(x);let S=!1,N=!1;const B=new XI({Yo:K=>{N?st(yn,`Not sending because RPC '${t}' stream ${o} is closed:`,K):(S||(st(yn,`Opening RPC '${t}' stream ${o} transport.`),x.open(),S=!0),st(yn,`RPC '${t}' stream ${o} sending:`,K),x.send(K))},Zo:()=>x.close()}),P=(K,dt,Z)=>{K.listen(dt,(et=>{try{Z(et)}catch(ot){setTimeout((()=>{throw ot}),0)}}))};return P(x,iu.EventType.OPEN,(()=>{N||(st(yn,`RPC '${t}' stream ${o} transport opened.`),B.o_())})),P(x,iu.EventType.CLOSE,(()=>{N||(N=!0,st(yn,`RPC '${t}' stream ${o} transport closed`),B.a_(),this.E_(x))})),P(x,iu.EventType.ERROR,(K=>{N||(N=!0,pa(yn,`RPC '${t}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),B.a_(new ct(J.UNAVAILABLE,"The operation could not be completed")))})),P(x,iu.EventType.MESSAGE,(K=>{var dt;if(!N){const Z=K.data[0];Ct(!!Z,16349);const et=Z,ot=(et==null?void 0:et.error)||((dt=et[0])==null?void 0:dt.error);if(ot){st(yn,`RPC '${t}' stream ${o} received error:`,ot);const xt=ot.status;let _t=(function(C){const k=Qe[C];if(k!==void 0)return qE(k)})(xt),I=ot.message;_t===void 0&&(_t=J.INTERNAL,I="Unknown error status: "+xt+" with message "+ot.message),N=!0,B.a_(new ct(_t,I)),x.close()}else st(yn,`RPC '${t}' stream ${o} received:`,Z),B.u_(Z)}})),P(m,Fb.STAT_EVENT,(K=>{K.stat===Km.PROXY?st(yn,`RPC '${t}' stream ${o} detected buffering proxy`):K.stat===Km.NOPROXY&&st(yn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof window<"u"?window:null}function Nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(s){return new J2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t,n,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&st("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="PersistentStream";class x1{constructor(t,n,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new E1(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{t((()=>{const o=new ct(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(rb,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JI extends x1{constructor(t,n,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,c),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=eI(this.serializer,t),r=(function(u){if(!("targetChange"in u))return Vt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Vt.min():c.readTime?wn(c.readTime):Vt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=lg(this.serializer),n.addTarget=(function(u,c){let m;const g=c.target;if(m=Fh(g)?{documents:ZE(u,g)}:{query:$E(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=GE(u,c.resumeToken);const p=ag(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Vt.min())>0){m.readTime=Fo(u,c.snapshotVersion.toTimestamp());const p=ag(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const r=iI(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=lg(this.serializer),n.removeTarget=t,this.q_(n)}}class WI extends x1{constructor(t,n,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=nI(t.writeResults,t.commitTime),r=wn(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=lg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>Kh(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{}class eC extends tC{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ct(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,og(n,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ct(J.UNKNOWN,u.toString())}))}Ho(t,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,og(n,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tn(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class iC{constructor(t,n,r,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{wa(this)&&(st(xa,"Restarting streams for network reachability change."),await(async function(g){const p=Pt(g);p.Ea.add(4),await Bu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await _f(p)})(this))}))})),this.Ra=new nC(r,o)}}async function _f(s){if(wa(s))for(const t of s.da)await t(!0)}async function Bu(s){for(const t of s.da)await t(!1)}function T1(s,t){const n=Pt(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),$g(n)?Zg(n):Yo(n).O_()&&Xg(n,t))}function Yg(s,t){const n=Pt(s),r=Yo(n);n.Ia.delete(t),r.O_()&&w1(n,t),n.Ia.size===0&&(r.O_()?r.L_():wa(n)&&n.Ra.set("Unknown"))}function Xg(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yo(s).Y_(t)}function w1(s,t){s.Va.Ue(t),Yo(s).Z_(t)}function Zg(s){s.Va=new Y2({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),Yo(s).start(),s.Ra.ua()}function $g(s){return wa(s)&&!Yo(s).x_()&&s.Ia.size>0}function wa(s){return Pt(s).Ea.size===0}function S1(s){s.Va=void 0}async function rC(s){s.Ra.set("Online")}async function sC(s){s.Ia.forEach(((t,n)=>{Xg(s,t)}))}async function aC(s,t){S1(s),$g(s)?(s.Ra.ha(t),Zg(s)):s.Ra.set("Unknown")}async function oC(s,t,n){if(s.Ra.set("Online"),t instanceof HE&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){st(xa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await $h(s,r)}else if(t instanceof Ch?s.Va.Ze(t):t instanceof FE?s.Va.st(t):s.Va.tt(t),!n.isEqual(Vt.min()))try{const r=await v1(s.localStore);n.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Ze.EMPTY_BYTE_STRING,E.snapshotVersion)),w1(u,g);const x=new Tr(E.target,g,p,E.sequenceNumber);Xg(u,x)})),u.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){st(xa,"Failed to raise snapshot:",r),await $h(s,r)}}async function $h(s,t,n){if(!xs(t))throw t;s.Ea.add(1),await Bu(s),s.Ra.set("Offline"),n||(n=()=>v1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{st(xa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await _f(s)}))}function A1(s,t){return t().catch((n=>$h(s,n,t)))}async function Lu(s){const t=Pt(s),n=bs(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ha;for(;lC(t);)try{const o=await FI(t.localStore,r);if(o===null){t.Ta.length===0&&n.L_();break}r=o.batchId,uC(t,o)}catch(o){await $h(t,o)}I1(t)&&C1(t)}function lC(s){return wa(s)&&s.Ta.length<10}function uC(s,t){s.Ta.push(t);const n=bs(s);n.O_()&&n.X_&&n.ea(t.mutations)}function I1(s){return wa(s)&&!bs(s).x_()&&s.Ta.length>0}function C1(s){bs(s).start()}async function cC(s){bs(s).ra()}async function hC(s){const t=bs(s);for(const n of s.Ta)t.ea(n.mutations)}async function fC(s,t,n){const r=s.Ta.shift(),o=jg.from(r,t,n);await A1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Lu(s)}async function dC(s,t){t&&bs(s).X_&&await(async function(r,o){if((function(c){return G2(c)&&c!==J.ABORTED})(o.code)){const u=r.Ta.shift();bs(r).B_(),await A1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Lu(r)}})(s,t),I1(s)&&C1(s)}async function sb(s,t){const n=Pt(s);n.asyncQueue.verifyOperationInProgress(),st(xa,"RemoteStore received new credentials");const r=wa(n);n.Ea.add(3),await Bu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _f(n)}async function mC(s,t){const n=Pt(s);t?(n.Ea.delete(2),await _f(n)):t||(n.Ea.add(2),await Bu(n),n.Ra.set("Unknown"))}function Yo(s){return s.ma||(s.ma=(function(n,r,o){const u=Pt(n);return u.sa(),new JI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:rC.bind(null,s),t_:sC.bind(null,s),r_:aC.bind(null,s),H_:oC.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),$g(s)?Zg(s):s.Ra.set("Unknown")):(await s.ma.stop(),S1(s))}))),s.ma}function bs(s){return s.fa||(s.fa=(function(n,r,o){const u=Pt(n);return u.sa(),new WI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:cC.bind(null,s),r_:dC.bind(null,s),ta:hC.bind(null,s),na:fC.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Lu(s)):(await s.fa.stop(),s.Ta.length>0&&(st(xa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t,n,r,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,u){const c=Date.now()+r,m=new Jg(t,n,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wg(s,t){if(Tn("AsyncQueue",`${t}: ${s}`),xs(s))return new ct(J.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(t){return new No(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||gt.comparator(n.key,r.key):(n,r)=>gt.comparator(n.key,r.key),this.keyedMap=ru(),this.sortedSet=new Se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new No;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.ga=new Se(gt.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Ho{constructor(t,n,r,o,u,c,m,g,p){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,n,r,o,u){const c=[];return n.forEach((m=>{c.push({type:0,doc:m})})),new Ho(t,n,No.emptySet(n),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class pC{constructor(){this.queries=ob(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Pt(n),u=o.queries;o.queries=ob(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ct(J.ABORTED,"Firestore shutting down"))}}function ob(){return new Ir((s=>RE(s)),cf)}async function R1(s,t){const n=Pt(s);let r=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new gC,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(c){const m=Wg(c,`Initialization of query '${So(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&tp(n)}async function N1(s,t){const n=Pt(s),r=t.query;let o=3;const u=n.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yC(s,t){const n=Pt(s);let r=!1;for(const o of t){const u=o.query,c=n.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&tp(n)}function _C(s,t,n){const r=Pt(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(t)}function tp(s){s.Ca.forEach((t=>{t.next()}))}var gg,lb;(lb=gg||(gg={})).Ma="default",lb.Cache="cache";class D1{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Ho(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ho.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t){this.key=t}}class M1{constructor(t){this.key=t}}class vC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=NE(t),this.tu=new No(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new ab,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,x)=>{const S=o.get(E),N=zu(this.query,x)?x:null,B=!!S&&this.mutatedKeys.has(S.key),P=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let K=!1;S&&N?S.data.isEqual(N.data)?B!==P&&(r.track({type:3,doc:N}),K=!0):this.su(S,N)||(r.track({type:2,doc:N}),K=!0,(g&&this.eu(N,g)>0||p&&this.eu(N,p)<0)&&(m=!0)):!S&&N?(r.track({type:0,doc:N}),K=!0):S&&!N&&(r.track({type:1,doc:S}),K=!0,(g||p)&&(m=!0)),K&&(N?(c=c.add(N),u=P?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,x)=>(function(N,B){const P=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:K})}};return P(N)-P(B)})(E.type,x.type)||this.eu(E.doc,x.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Ho(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ab,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Gt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new M1(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new V1(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=Gt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ep="SyncEngine";class bC{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class EC{constructor(t){this.key=t,this.hu=!1}}class xC{constructor(t,n,r,o,u,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ir((m=>RE(m)),cf),this.Iu=new Map,this.Eu=new Set,this.du=new Se(gt.comparator),this.Au=new Map,this.Ru=new Fg,this.Vu={},this.mu=new Map,this.fu=Ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TC(s,t,n=!0){const r=B1(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await O1(r,t,n,!0),o}async function wC(s,t){const n=B1(s);await O1(n,t,!0,!1)}async function O1(s,t,n,r){const o=await HI(s.localStore,ci(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await SC(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&n&&T1(s.remoteStore,o),m}async function SC(s,t,n,r,o){s.pu=(x,S,N)=>(async function(P,K,dt,Z){let et=K.view.ru(dt);et.Cs&&(et=await tb(P.localStore,K.query,!1).then((({documents:I})=>K.view.ru(I,et))));const ot=Z&&Z.targetChanges.get(K.targetId),xt=Z&&Z.targetMismatches.get(K.targetId)!=null,_t=K.view.applyChanges(et,P.isPrimaryClient,ot,xt);return cb(P,K.targetId,_t.au),_t.snapshot})(s,x,S,N);const u=await tb(s.localStore,t,!0),c=new vC(t,u.Qs),m=c.ru(u.documents),g=Pu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);cb(s,n,p.au);const E=new bC(t,n,c);return s.Tu.set(t,E),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),p.snapshot}async function AC(s,t,n){const r=Pt(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!cf(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await dg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Yg(r.remoteStore,o.targetId),pg(r,o.targetId)})).catch(Ta)):(pg(r,o.targetId),await dg(r.localStore,o.targetId,!0))}async function IC(s,t){const n=Pt(s),r=n.Tu.get(t),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yg(n.remoteStore,r.targetId))}async function CC(s,t,n){const r=L1(s);try{const o=await(function(c,m){const g=Pt(c),p=fe.now(),E=m.reduce(((N,B)=>N.add(B.key)),Gt());let x,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let B=Kn(),P=Gt();return g.Ns.getEntries(N,E).next((K=>{B=K,B.forEach(((dt,Z)=>{Z.isValidDocument()||(P=P.add(dt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,B))).next((K=>{x=K;const dt=[];for(const Z of m){const et=F2(Z,x.get(Z.key).overlayedDocument);et!=null&&dt.push(new Cr(Z.key,et,bE(et.value.mapValue),on.exists(!0)))}return g.mutationQueue.addMutationBatch(N,p,dt,m)})).next((K=>{S=K;const dt=K.applyToLocalDocumentSet(x,P);return g.documentOverlayCache.saveOverlays(N,K.batchId,dt)}))})).then((()=>({batchId:S.batchId,changes:VE(x)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new Se(jt)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,n),await Uu(r,o.changes),await Lu(r.remoteStore)}catch(o){const u=Wg(o,"Failed to persist write");n.reject(u)}}async function k1(s,t){const n=Pt(s);try{const r=await UI(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=n.Au.get(u);c&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ct(c.hu,14607):o.removedDocuments.size>0&&(Ct(c.hu,42227),c.hu=!1))})),await Uu(n,r,t)}catch(r){await Ta(r)}}function ub(s,t,n){const r=Pt(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=Pt(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,x)=>{for(const S of x.Sa)S.va(m)&&(p=!0)})),p&&tp(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function RC(s,t,n){const r=Pt(s);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new Se(gt.comparator);c=c.insert(u,Me.newNoDocument(u,Vt.min()));const m=Gt().add(u),g=new df(Vt.min(),new Map,new Se(jt),c,m);await k1(r,g),r.du=r.du.remove(u),r.Au.delete(t),np(r)}else await dg(r.localStore,t,!1).then((()=>pg(r,t,n))).catch(Ta)}async function NC(s,t){const n=Pt(s),r=t.batch.batchId;try{const o=await LI(n.localStore,t);j1(n,r,null),z1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uu(n,o)}catch(o){await Ta(o)}}async function DC(s,t,n){const r=Pt(s);try{const o=await(function(c,m){const g=Pt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((x=>(Ct(x!==null,37113),E=x.keys(),g.mutationQueue.removeMutationBatch(p,x)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,t);j1(r,t,n),z1(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uu(r,o)}catch(o){await Ta(o)}}function z1(s,t){(s.mu.get(t)||[]).forEach((n=>{n.resolve()})),s.mu.delete(t)}function j1(s,t,n){const r=Pt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function pg(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||P1(s,r)}))}function P1(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(Yg(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),np(s))}function cb(s,t,n){for(const r of n)r instanceof V1?(s.Ru.addReference(r.key,t),VC(s,r)):r instanceof M1?(st(ep,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||P1(s,r.key)):Et(19791,{wu:r})}function VC(s,t){const n=t.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(st(ep,"New document in limbo: "+n),s.Eu.add(r),np(s))}function np(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new gt(oe.fromString(t)),r=s.fu.next();s.Au.set(r,new EC(n)),s.du=s.du.insert(n,r),T1(s.remoteStore,new Tr(ci(uf(n.path)),r,"TargetPurposeLimboResolution",ui.ce))}}async function Uu(s,t,n){const r=Pt(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,n).then((p=>{var E;if((p||n)&&r.isPrimaryClient){const x=p?!p.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(p){o.push(p);const x=Kg.As(g.targetId,p);u.push(x)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=Pt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>L.forEach(p,(S=>L.forEach(S.Es,(N=>E.persistence.referenceDelegate.addReference(x,S.targetId,N))).next((()=>L.forEach(S.ds,(N=>E.persistence.referenceDelegate.removeReference(x,S.targetId,N)))))))))}catch(x){if(!xs(x))throw x;st(Qg,"Failed to update sequence numbers: "+x)}for(const x of p){const S=x.targetId;if(!x.fromCache){const N=E.Ms.get(S),B=N.snapshotVersion,P=N.withLastLimboFreeSnapshotVersion(B);E.Ms=E.Ms.insert(S,P)}}})(r.localStore,u))}async function MC(s,t){const n=Pt(s);if(!n.currentUser.isEqual(t)){st(ep,"User change. New user:",t.toKey());const r=await _1(n.localStore,t);n.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ct(J.CANCELLED,c))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Uu(n,r.Ls)}}function OC(s,t){const n=Pt(s),r=n.Au.get(t);if(r&&r.hu)return Gt().add(r.key);{let o=Gt();const u=n.Iu.get(t);if(!u)return o;for(const c of u){const m=n.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function B1(s){const t=Pt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=k1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=OC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RC.bind(null,t),t.Pu.H_=yC.bind(null,t.eventManager),t.Pu.yu=_C.bind(null,t.eventManager),t}function L1(s){const t=Pt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=NC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DC.bind(null,t),t}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return y1(this.persistence,new p1,t.initialUser,this.serializer)}Cu(t){return new Hg(pf.mi,this.serializer)}Du(t){return new b1}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class kC extends Du{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ct(this.persistence.referenceDelegate instanceof Zh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h1(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Hg((r=>Zh.mi(r,n)),this.serializer)}}class zC extends Du{constructor(t,n,r){super(),this.xu=t,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await L1(this.xu.syncEngine),await Lu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return y1(this.persistence,new p1,t.initialUser,this.serializer)}Fu(t,n){const r=this.persistence.referenceDelegate.garbageCollector;return new h1(r,t.asyncQueue,n)}Mu(t,n){const r=new UA(n,this.persistence);return new LA(t.asyncQueue,r)}Cu(t){const n=zI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Gg(this.synchronizeTabs,n,t.clientId,r,t.asyncQueue,$I(),Nh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new b1}}class Jh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ub(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MC.bind(null,this.syncEngine),await mC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new pC})()}createDatastore(t){const n=yf(t.databaseInfo.databaseId),r=(function(u){return new ZI(u)})(t.databaseInfo);return(function(u,c,m,g){return new eC(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,o,u,c,m){return new iC(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>ub(this.syncEngine,n,0)),(function(){return ib.v()?new ib:new KI})())}createSyncEngine(t,n){return(function(o,u,c,m,g,p,E){const x=new xC(o,u,c,m,g,p);return E&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(o){const u=Pt(o);st(xa,"RemoteStore shutting down."),u.Ea.add(5),await Bu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Jh.provider={build:()=>new Jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Tn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class jC{constructor(t,n,r,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{st(Es,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(st(Es,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Wg(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function jm(s,t){s.asyncQueue.verifyOperationInProgress(),st(Es,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await _1(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function hb(s,t){s.asyncQueue.verifyOperationInProgress();const n=await PC(s);st(Es,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener((r=>sb(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>sb(t.remoteStore,o))),s._onlineComponents=t}async function PC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){st(Es,"Using user provided OfflineComponentProvider");try{await jm(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;pa("Error using user provided cache. Falling back to memory cache: "+n),await jm(s,new Du)}}else st(Es,"Using default OfflineComponentProvider"),await jm(s,new kC(void 0));return s._offlineComponents}async function q1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(st(Es,"Using user provided OnlineComponentProvider"),await hb(s,s._uninitializedComponentsProvider._online)):(st(Es,"Using default OnlineComponentProvider"),await hb(s,new Jh))),s._onlineComponents}function BC(s){return q1(s).then((t=>t.syncEngine))}async function F1(s){const t=await q1(s),n=t.eventManager;return n.onListen=TC.bind(null,t.syncEngine),n.onUnlisten=AC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=wC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=IC.bind(null,t.syncEngine),n}function LC(s,t,n={}){const r=new $i;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new U1({next:S=>{E.Nu(),c.enqueueAndForget((()=>N1(u,x)));const N=S.docs.has(m);!N&&S.fromCache?p.reject(new ct(J.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&g&&g.source==="server"?p.reject(new ct(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),x=new D1(uf(m.path),E,{includeMetadataChanges:!0,qa:!0});return R1(u,x)})(await F1(s),s.asyncQueue,t,n,r))),r.promise}function UC(s,t,n={}){const r=new $i;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new U1({next:S=>{E.Nu(),c.enqueueAndForget((()=>N1(u,x))),S.fromCache&&g.source==="server"?p.reject(new ct(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),x=new D1(m,E,{includeMetadataChanges:!0,qa:!0});return R1(u,x)})(await F1(s),s.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firestore.googleapis.com",db=!0;class mb{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G1,this.ssl=db}else this.host=t.host,this.ssl=t.ssl??db;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=o1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vI)throw new ct(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H1(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ct(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ct(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ct(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class vf{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mb(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AA;switch(r.type){case"firstParty":return new NA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=fb.get(n);r&&(st("ComponentProvider","Removing Datastore"),fb.delete(n),r.terminate())})(this),Promise.resolve()}}function qC(s,t,n,r={}){var p;s=Si(s,vf);const o=Eg(t),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${n}`;o&&(iS(`https://${m}`),oS("Firestore",!0)),u.host!==G1&&u.host!==m&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!Oh(g,c)&&(s._setSettings(g),r.mockUserToken)){let E,x;if(typeof r.mockUserToken=="string")E=r.mockUserToken,x=mn.MOCK_USER;else{E=rS(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ct(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new mn(S)}s._authCredentials=new IA(new Qb(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Xo(this.firestore,t,this._query)}}class Xe{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xe(this.firestore,t,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Vu(n,Xe._jsonSchema))return new Xe(t,r||null,new gt(oe.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Ye("string",Xe._jsonSchemaVersion),referencePath:Ye("string")};class ys extends Xo{constructor(t,n,r){super(t,n,uf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xe(this.firestore,null,new gt(t))}withConverter(t){return new ys(this.firestore,t,this._path)}}function le(s,t,...n){if(s=wi(s),Xb("collection","path",t),s instanceof vf){const r=oe.fromString(t,...n);return rv(r),new ys(s,null,r)}{if(!(s instanceof Xe||s instanceof ys))throw new ct(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(oe.fromString(t,...n));return rv(r),new ys(s.firestore,null,r)}}function Ke(s,t,...n){if(s=wi(s),arguments.length===1&&(t=wg.newId()),Xb("doc","path",t),s instanceof vf){const r=oe.fromString(t,...n);return iv(r),new Xe(s,null,new gt(r))}{if(!(s instanceof Xe||s instanceof ys))throw new ct(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(oe.fromString(t,...n));return iv(r),new Xe(s.firestore,s instanceof ys?s.converter:null,new gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="AsyncQueue";class pb{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new E1(this,"async_queue_retry"),this._c=()=>{const r=Nh();r&&st(gb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Nh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Nh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new $i;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!xs(t))throw t;st(gb,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Tn("INTERNAL UNHANDLED ERROR: ",yb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Jg.createAndSchedule(this,t,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Et(47125,{Pc:yb(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function yb(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class ws extends vf{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new pb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pb(t),this._firestoreClient=void 0,await t}}}function FC(s,t){const n=typeof s=="object"?s:dA(),r=typeof s=="string"?s:Uh,o=lA(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=eS("firestore");u&&qC(o,...u)}return o}function bf(s){if(s._terminated)throw new ct(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||K1(s),s._firestoreClient}function K1(s){var r,o,u;const t=s._freezeSettings(),n=(function(m,g,p,E){return new p2(m,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,H1(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new jC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function HC(s,t){pa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=s._freezeSettings();return GC(s,Jh.provider,{build:r=>new zC(r,n.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}function GC(s,t,n){if((s=Si(s,ws))._firestoreClient||s._terminated)throw new ct(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ct(J.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:n},K1(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t){this._byteString=t}static fromBase64String(t){try{return new li(Ze.fromBase64String(t))}catch(n){throw new ct(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new li(Ze.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Vu(t,li._jsonSchema))return li.fromBase64String(t.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:Ye("string",li._jsonSchemaVersion),bytes:Ye("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ct(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ct(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ct(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return jt(this._lat,t._lat)||jt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(t){if(Vu(t,Ji._jsonSchema))return new Ji(t.latitude,t.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Ye("string",Ji._jsonSchemaVersion),latitude:Ye("number"),longitude:Ye("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Vu(t,Wi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Wi(t.vectorValues);throw new ct(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Ye("string",Wi._jsonSchemaVersion),vectorValues:Ye("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^__.*__$/;class QC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Cr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Qo(t,this.data,n,this.fieldTransforms)}}class Q1{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Cr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Y1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:s})}}class rp{constructor(t,n,r,o,u,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new rp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Wh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Y1(this.Ac)&&KC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class YC{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||yf(t)}Cc(t,n,r,o=!1){return new rp({Ac:t,methodName:n,Dc:r,path:Re.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(s){const t=s._freezeSettings(),n=yf(s._databaseId);return new YC(s._databaseId,!!t.ignoreUndefinedProperties,n)}function X1(s,t,n,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,n,o);sp("Data must be an object, but it was:",c,r);const m=J1(r,c);let g,p;if(u.merge)g=new Mn(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const x of u.mergeFields){const S=yg(t,x,n);if(!c.contains(S))throw new ct(J.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);tx(E,S)||E.push(S)}g=new Mn(E),p=c.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,p=c.fieldTransforms;return new QC(new vn(m),g,p)}class xf extends ip{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof xf}}function Z1(s,t,n,r){const o=s.Cc(1,t,n);sp("Data must be an object, but it was:",o,r);const u=[],c=vn.empty();Ts(r,((g,p)=>{const E=ap(t,g,n);p=wi(p);const x=o.yc(E);if(p instanceof xf)u.push(E);else{const S=Fu(p,x);S!=null&&(u.push(E),c.set(E,S))}}));const m=new Mn(u);return new Q1(c,m,o.fieldTransforms)}function $1(s,t,n,r,o,u){const c=s.Cc(1,t,n),m=[yg(t,r,n)],g=[o];if(u.length%2!=0)throw new ct(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(yg(t,u[S])),g.push(u[S+1]);const p=[],E=vn.empty();for(let S=m.length-1;S>=0;--S)if(!tx(p,m[S])){const N=m[S];let B=g[S];B=wi(B);const P=c.yc(N);if(B instanceof xf)p.push(N);else{const K=Fu(B,P);K!=null&&(p.push(N),E.set(N,K))}}const x=new Mn(p);return new Q1(E,x,c.fieldTransforms)}function XC(s,t,n,r=!1){return Fu(n,s.Cc(r?4:3,t))}function Fu(s,t){if(W1(s=wi(s)))return sp("Unsupported field value:",t,s),J1(s,t);if(s instanceof ip)return(function(r,o){if(!Y1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=Fu(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=wi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=fe.fromDate(r);return{timestampValue:Fo(o.serializer,u)}}if(r instanceof fe){const u=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fo(o.serializer,u)}}if(r instanceof Ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:GE(o.serializer,r._byteString)};if(r instanceof Xe){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Wi)return(function(c,m){return{mapValue:{fields:{[Vg]:{stringValue:Mg},[jo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return kg(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${tf(r)}`)})(s,t)}function J1(s,t){const n={};return hE(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(s,((r,o)=>{const u=Fu(o,t.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function W1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof fe||s instanceof Ji||s instanceof li||s instanceof Xe||s instanceof ip||s instanceof Wi)}function sp(s,t,n){if(!W1(n)||!Zb(n)){const r=tf(n);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function yg(s,t,n){if((t=wi(t))instanceof qu)return t._internalPath;if(typeof t=="string")return ap(s,t);throw Wh("Field path arguments must be of type string or ",s,!1,void 0,n)}const ZC=new RegExp("[~\\*/\\[\\]]");function ap(s,t,n){if(t.search(ZC)>=0)throw Wh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new qu(...t.split("."))._internalPath}catch{throw Wh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Wh(s,t,n,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ct(J.INVALID_ARGUMENT,m+s+g)}function tx(s,t){return s.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t,n,r,o,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $C(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(op("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $C extends ex{data(){return super.data()}}function op(s,t){return typeof t=="string"?ap(s,t):t instanceof qu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ct(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lp{}class WC extends lp{}function Ie(s,t,...n){let r=[];t instanceof lp&&r.push(t),r=r.concat(n),(function(u){const c=u.filter((g=>g instanceof up)).length,m=u.filter((g=>g instanceof Tf)).length;if(c>1||c>0&&m>0)throw new ct(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Tf extends WC{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Tf(t,n,r)}_apply(t){const n=this._parse(t);return nx(t._query,n),new Xo(t.firestore,t.converter,rg(t._query,n))}_parse(t){const n=Ef(t.firestore);return(function(u,c,m,g,p,E,x){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ct(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){vb(x,E);const B=[];for(const P of x)B.push(_b(g,u,P));S={arrayValue:{values:B}}}else S=_b(g,u,x)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||vb(x,E),S=XC(m,c,x,E==="in"||E==="not-in");return $t.create(p,E,S)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function sn(s,t,n){const r=t,o=op("where",s);return Tf._create(o,r,n)}class up extends lp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new up(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:de.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)nx(c,g),c=rg(c,g)})(t._query,n),new Xo(t.firestore,t.converter,rg(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _b(s,t,n){if(typeof(n=wi(n))=="string"){if(n==="")throw new ct(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(t)&&n.indexOf("/")!==-1)throw new ct(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(oe.fromString(n));if(!gt.isDocumentKey(r))throw new ct(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iu(s,new gt(r))}if(n instanceof Xe)return Iu(s,n._key);throw new ct(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(n)}.`)}function vb(s,t){if(!Array.isArray(s)||s.length===0)throw new ct(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function nx(s,t){const n=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new ct(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class tR{convertValue(t,n="none"){switch(_s(t)){case 0:return null;case 1:return t.booleanValue;case 2:return we(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ts(t,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(t){var r,o,u;const n=(u=(o=(r=t.fields)==null?void 0:r[jo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>we(c.doubleValue)));return new Wi(n)}convertGeoPoint(t){return new Ji(we(t.latitude),we(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=of(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(t));default:return null}}convertTimestamp(t){const n=Sr(t);return new fe(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=oe.fromString(t);Ct(e1(r),9688,{name:t});const o=new ya(r.get(1),r.get(3)),u=new gt(r.popFirst(5));return o.isEqual(n)||Tn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(s,t,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(t,n):s.toFirestore(t):t,r}class ou{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ma extends ex{constructor(t,n,r,o,u,c){super(t,n,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(op("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ma._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Ye("string",ma._jsonSchemaVersion),bundleSource:Ye("string","DocumentSnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class Dh extends ma{data(t={}){return super.data(t)}}class Do{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new ou(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Dh(this._firestore,this._userDataWriter,r.key,r,new ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ct(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new Dh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ou(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Dh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ou(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:eR(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Do._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function eR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(s){s=Si(s,Xe);const t=Si(s.firestore,ws);return LC(bf(t),s._key).then((n=>nR(t,s,n)))}Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:Ye("string",Do._jsonSchemaVersion),bundleSource:Ye("string","QuerySnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class rx extends tR{constructor(t){super(),this.firestore=t}convertBytes(t){return new li(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function Ce(s){s=Si(s,Xo);const t=Si(s.firestore,ws),n=bf(t),r=new rx(t);return JC(s._query),UC(n,s._query).then((o=>new Do(t,r,s,o)))}function cs(s,t,n,...r){s=Si(s,Xe);const o=Si(s.firestore,ws),u=Ef(o);let c;return c=typeof(t=wi(t))=="string"||t instanceof qu?$1(u,"updateDoc",s._key,t,n,r):Z1(u,"updateDoc",s._key,t),wf(o,[c.toMutation(s._key,on.exists(!0))])}function Eb(s){return wf(Si(s.firestore,ws),[new ju(s._key,on.none())])}function To(s,t){const n=Si(s.firestore,ws),r=Ke(s),o=ix(s.converter,t);return wf(n,[X1(Ef(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function wf(s,t){return(function(r,o){const u=new $i;return r.asyncQueue.enqueueAndForget((async()=>CC(await BC(r),o,u))),u.promise})(bf(s),t)}function nR(s,t,n){const r=n.docs.get(t._key),o=new rx(s);return new ma(s,o,t._key,r,new ou(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ef(t)}set(t,n,r){this._verifyNotCommitted();const o=Pm(t,this._firestore),u=ix(o.converter,n,r),c=X1(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,on.none())),this}update(t,n,r,...o){this._verifyNotCommitted();const u=Pm(t,this._firestore);let c;return c=typeof(n=wi(n))=="string"||n instanceof qu?$1(this._dataReader,"WriteBatch.update",u._key,n,r,o):Z1(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(c.toMutation(u._key,on.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Pm(t,this._firestore);return this._mutations=this._mutations.concat(new ju(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pm(s,t){if((s=wi(s)).firestore!==t)throw new ct(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(s){return bf(s=Si(s,ws)),new iR(s,(t=>wf(s,t)))}(function(t,n=!0){(function(o){Ko=o})(fA),zh(new yu("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new ws(new CA(r.getProvider("auth-internal")),new DA(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ct(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ro(W0,tv,t),Ro(W0,tv,"esm2020")})();const rR={apiKey:"AIzaSyCpZ1iVrU_JwK10gEvi9FGderKYaffgMGg",authDomain:"data-library-5cf6c.firebaseapp.com",projectId:"data-library-5cf6c",storageBucket:"data-library-5cf6c.firebasestorage.app",messagingSenderId:"976961164680",appId:"1:976961164680:web:4aa7027e61f13425bc163d"},sR=jb(rR),It=FC(sR);HC(It).catch(s=>{s.code==="failed-precondition"?console.warn("IndexedDB  :      ."):s.code==="unimplemented"&&console.warn("IndexedDB  ")});const Hn=()=>new Date().toISOString(),zt={WORKSPACES:"workspaces",CATEGORIES:"categories",ITEMS:"items",CHECKLISTS:"checklists",BOOKMARK_ZONES:"bookmark_zones",BOOKMARKS:"bookmarks"},Bm=[{name:"1",default_color:"#D99B71",order:0},{name:"2",default_color:"#D9C659",order:1},{name:"3",default_color:"#C5E6A5",order:2},{name:"4",default_color:"#9CBFF5",order:3},{name:"5",default_color:"#C9B3E6",order:4},{name:"6",default_color:"#E6B3D9",order:5}],Mt={workspaces:{list:async()=>{try{const s=Ie(le(It,zt.WORKSPACES));return(await Ce(s)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>(n.order??0)-(r.order??0))}catch(s){return console.error("Workspaces  :",s),[]}},create:async s=>{try{const t=Ie(le(It,zt.WORKSPACES)),o=(await Ce(t)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await To(le(It,zt.WORKSPACES),{name:s,is_locked:!1,order:o+1,created_at:Hn()})).id,name:s,is_locked:!1,order:o+1,created_at:Hn()}}catch(t){throw console.error("Workspace  :",t),t}},update:async(s,t)=>{try{const n=Ke(It,zt.WORKSPACES,s);await cs(n,t)}catch(n){throw console.error("Workspace  :",n),n}},delete:async s=>{try{const t=oi(It),n=Ie(le(It,zt.CATEGORIES),sn("workspace_id","==",s)),r=await Ce(n),o=r.docs.map(E=>E.id),u=Ie(le(It,zt.ITEMS),sn("category_id","in",o.length>0?o:["__placeholder__"])),c=await Ce(u),m=c.docs.map(E=>E.id),g=Ie(le(It,zt.CHECKLISTS),sn("item_id","in",m.length>0?m:["__placeholder__"]));(await Ce(g)).docs.forEach(E=>t.delete(E.ref)),c.docs.forEach(E=>t.delete(E.ref)),r.docs.forEach(E=>t.delete(E.ref)),t.delete(Ke(It,zt.WORKSPACES,s)),await t.commit()}catch(t){throw console.error("Workspace  :",t),t}},reorder:async s=>{try{const t=oi(It),n=Ie(le(It,zt.WORKSPACES));(await Ce(n)).docs.forEach(o=>{const u=s.indexOf(o.id);u!==-1&&t.update(o.ref,{order:u})}),await t.commit()}catch(t){throw console.error("Workspace   :",t),t}}},categories:{listByWorkspace:async(s,t=!1)=>{try{const n=Ie(le(It,zt.CATEGORIES),sn("workspace_id","==",s)),r=await Ce(n);if(r.docs.some(c=>c.data().order===void 0)&&r.docs.length>0){const c=[...r.docs].sort((p,E)=>p.data().name.localeCompare(E.data().name,"ko")),m=oi(It);c.forEach((p,E)=>{m.update(p.ref,{order:E})}),await m.commit();const g=c.map((p,E)=>({id:p.id,...p.data(),order:E}));return t?g:g.filter(p=>!p.is_hidden)}const u=r.docs.map(c=>({id:c.id,...c.data()})).sort((c,m)=>(c.order??0)-(m.order??0));return t?u:u.filter(c=>!c.is_hidden)}catch(n){return console.error("Categories  :",n),[]}},create:async(s,t)=>{try{const n=Ie(le(It,zt.CATEGORIES),sn("workspace_id","==",s)),u=(await Ce(n)).docs.map(m=>m.data()).reduce((m,g)=>Math.max(m,g.order??0),-1);return{id:(await To(le(It,zt.CATEGORIES),{workspace_id:s,name:t,order:u+1,is_hidden:!1,created_at:Hn()})).id,workspace_id:s,name:t,order:u+1,is_hidden:!1,created_at:Hn()}}catch(n){throw console.error("Category  :",n),n}},update:async(s,t)=>{try{const n=Ke(It,zt.CATEGORIES,s);await cs(n,{name:t})}catch(n){throw console.error("Category  :",n),n}},reorder:async(s,t)=>{try{const n=oi(It),r=Ie(le(It,zt.CATEGORIES),sn("workspace_id","==",s));(await Ce(r)).docs.forEach(u=>{const c=t.indexOf(u.id);c!==-1&&n.update(u.ref,{order:c})}),await n.commit()}catch(n){throw console.error("Category  :",n),n}},delete:async s=>{try{const t=oi(It),n=Ie(le(It,zt.ITEMS),sn("category_id","==",s)),r=await Ce(n),o=r.docs.map(u=>u.id);if(o.length>0){const u=Ie(le(It,zt.CHECKLISTS),sn("item_id","in",o));(await Ce(u)).docs.forEach(m=>t.delete(m.ref))}r.docs.forEach(u=>t.delete(u.ref)),t.delete(Ke(It,zt.CATEGORIES,s)),await t.commit()}catch(t){throw console.error("Category  :",t),t}},hide:async s=>{try{const t=Ke(It,zt.CATEGORIES,s);await cs(t,{is_hidden:!0})}catch(t){throw console.error("Category  :",t),t}},unhide:async s=>{try{const t=Ke(It,zt.CATEGORIES,s);await cs(t,{is_hidden:!1})}catch(t){throw console.error("Category  :",t),t}},move:async(s,t)=>{try{if(!s||!t)throw new Error(" ID   ID .");if(!(await bb(Ke(It,zt.CATEGORIES,s))).exists())throw new Error("   .");if(!(await bb(Ke(It,zt.WORKSPACES,t))).exists())throw new Error("    .");const o=oi(It),u=Ie(le(It,zt.CATEGORIES),sn("workspace_id","==",t)),g=(await Ce(u)).docs.map(E=>E.data()).reduce((E,x)=>Math.max(E,x.order??0),-1),p=Ke(It,zt.CATEGORIES,s);o.update(p,{workspace_id:t,order:g+1,is_hidden:!1}),await o.commit()}catch(n){throw console.error("  :",n),n}}},items:{listByCategory:async s=>{try{const t=Ie(le(It,zt.ITEMS),sn("category_id","==",s));return(await Ce(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(t){return console.error("Items  :",t),[]}},create:async s=>{try{const t=Ie(le(It,zt.ITEMS),sn("category_id","==",s)),o=(await Ce(t)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await To(le(It,zt.ITEMS),{category_id:s,title:" ",description:"",order:o+1,created_at:Hn()})).id,category_id:s,title:" ",description:"",order:o+1,created_at:Hn()}}catch(t){throw console.error("Item  :",t),t}},update:async s=>{try{const t=Ke(It,zt.ITEMS,s.id),n={...s};delete n.id,await cs(t,n)}catch(t){throw console.error("Item  :",t),t}},reorder:async(s,t)=>{try{const n=oi(It),r=Ie(le(It,zt.ITEMS),sn("category_id","==",s));(await Ce(r)).docs.forEach(u=>{const c=t.indexOf(u.id);c!==-1&&n.update(u.ref,{order:c})}),await n.commit()}catch(n){throw console.error("Item  :",n),n}},delete:async s=>{try{const t=oi(It),n=Ie(le(It,zt.CHECKLISTS),sn("item_id","==",s));(await Ce(n)).docs.forEach(o=>t.delete(o.ref)),t.delete(Ke(It,zt.ITEMS,s)),await t.commit()}catch(t){throw console.error("Item  :",t),t}},move:async(s,t)=>{try{const n=oi(It),r=Ie(le(It,zt.ITEMS),sn("category_id","==",t)),c=(await Ce(r)).docs.map(g=>g.data()).reduce((g,p)=>Math.max(g,p.order??0),-1),m=Ke(It,zt.ITEMS,s);n.update(m,{category_id:t,order:c+1}),await n.commit()}catch(n){throw console.error("  :",n),n}}},checklist:{listByItem:async s=>{try{const t=Ie(le(It,zt.CHECKLISTS),sn("item_id","==",s));return(await Ce(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(t){return console.error("Checklists  :",t),[]}},create:async s=>{try{const t=Ie(le(It,zt.CHECKLISTS),sn("item_id","==",s)),o=(await Ce(t)).docs.map(c=>c.data()).reduce((c,m)=>Math.max(c,m.order??0),-1);return{id:(await To(le(It,zt.CHECKLISTS),{item_id:s,text:"",is_checked:!1,memo:"",order:o+1,created_at:Hn()})).id,item_id:s,text:"",is_checked:!1,memo:"",order:o+1,created_at:Hn()}}catch(t){throw console.error("Checklist  :",t),t}},update:async s=>{try{const t=Ke(It,zt.CHECKLISTS,s.id),n={...s};delete n.id,await cs(t,n)}catch(t){throw console.error("Checklist  :",t),t}},delete:async s=>{try{await Eb(Ke(It,zt.CHECKLISTS,s))}catch(t){throw console.error("Checklist  :",t),t}},reorder:async(s,t)=>{try{const n=oi(It),r=Ie(le(It,zt.CHECKLISTS),sn("item_id","==",s));(await Ce(r)).docs.forEach(u=>{const c=t.indexOf(u.id);c!==-1&&n.update(u.ref,{order:c})}),await n.commit()}catch(n){throw console.error("Checklist  :",n),n}}},bookmarkZones:{list:async()=>{try{const s=Ie(le(It,zt.BOOKMARK_ZONES));return(await Ce(s)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>(n.order??0)-(r.order??0))}catch(s){return console.error("BookmarkZones  :",s),[]}},create:async(s,t,n)=>{try{return{id:(await To(le(It,zt.BOOKMARK_ZONES),{name:s,default_color:t,order:n,created_at:Hn()})).id,name:s,default_color:t,order:n,created_at:Hn()}}catch(r){throw console.error("BookmarkZone  :",r),r}},update:async(s,t)=>{try{const n=Ke(It,zt.BOOKMARK_ZONES,s);await cs(n,t)}catch(n){throw console.error("BookmarkZone  :",n),n}},initializeDefaults:async()=>{try{const s=await Mt.bookmarkZones.list();if(s.length===0){const t=oi(It);Bm.forEach(n=>{const r=Ke(le(It,zt.BOOKMARK_ZONES));t.set(r,{...n,created_at:Hn()})}),await t.commit()}else if(s.length===Bm.length){const t=oi(It);s.forEach((n,r)=>{const o=Bm[r],u=Ke(It,zt.BOOKMARK_ZONES,n.id);t.update(u,{default_color:o.default_color,order:o.order})}),await t.commit()}}catch(s){console.error("Default zones  :",s)}}},bookmarks:{list:async()=>{try{const s=Ie(le(It,zt.BOOKMARKS));return(await Ce(s)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>(n.order??0)-(r.order??0))}catch(s){return console.error("Bookmarks  :",s),[]}},listByZone:async s=>{try{const t=Ie(le(It,zt.BOOKMARKS),sn("zone_id","==",s));return(await Ce(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>(r.order??0)-(o.order??0))}catch(t){return console.error("Zone bookmarks  :",t),[]}},create:async(s,t,n,r)=>{try{const u=(await Mt.bookmarks.listByZone(s)).reduce((m,g)=>Math.max(m,g.order??0),-1);return{id:(await To(le(It,zt.BOOKMARKS),{zone_id:s,name:t,url:n,color:r,order:u+1,created_at:Hn()})).id,zone_id:s,name:t,url:n,color:r,order:u+1,created_at:Hn()}}catch(o){throw console.error("Bookmark  :",o),o}},update:async(s,t)=>{try{const n=Ke(It,zt.BOOKMARKS,s),r={...t};await cs(n,r)}catch(n){throw console.error("Bookmark  :",n),n}},delete:async s=>{try{await Eb(Ke(It,zt.BOOKMARKS,s))}catch(t){throw console.error("Bookmark  :",t),t}}}},sx=({isOpen:s,title:t,message:n,confirmText:r="",cancelText:o="",onConfirm:u,onCancel:c,danger:m=!1})=>($.useEffect(()=>{const g=p=>{p.key==="Escape"&&c()};if(s)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,c]),s?b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:c,children:b.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl max-w-md w-full",onClick:g=>g.stopPropagation(),children:[b.jsx("div",{className:"px-6 py-4 border-b border-border",children:b.jsx("h2",{className:"text-base font-semibold text-white",children:t})}),b.jsx("div",{className:"px-6 py-4",children:b.jsx("p",{className:"text-sm text-zinc-300",children:n})}),b.jsxs("div",{className:"px-6 py-4 border-t border-border flex justify-end gap-2",children:[b.jsx("button",{onClick:c,className:"px-4 py-2 rounded bg-zinc-800 text-white hover:bg-zinc-700 transition-colors text-sm",children:o}),b.jsx("button",{onClick:u,className:`px-4 py-2 rounded text-white transition-colors text-sm font-medium ${m?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"}`,children:r})]})]})}):null),aR=({isOpen:s,hiddenCategories:t,onUnhide:n,onDelete:r,onMove:o,onClose:u})=>s?b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:u,children:b.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col",onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[b.jsxs("h2",{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[b.jsx(yt.EyeOff,{className:"w-5 h-5"}),"  "]}),b.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"",children:b.jsx(yt.Close,{className:"w-5 h-5 text-gray-600"})})]}),b.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[b.jsx(yt.Folder,{className:"w-12 h-12 text-gray-400 mb-3 opacity-50"}),b.jsx("p",{className:"text-sm text-gray-500",children:"  ."})]}):b.jsx("div",{className:"space-y-2",children:t.map(c=>b.jsxs("div",{className:"flex items-center justify-between px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 hover:border-gray-300 hover:bg-gray-100 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[b.jsx(yt.Folder,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),b.jsx("span",{className:"text-sm font-medium text-gray-800 truncate",children:c.name})]}),b.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[b.jsx("button",{onClick:()=>o(c.id),className:"px-3 py-1.5 rounded bg-yellow-500/20 text-yellow-600 hover:bg-yellow-500/30 transition-colors text-xs font-medium whitespace-nowrap",title:"  ",children:""}),b.jsx("button",{onClick:()=>n(c.id),className:"px-3 py-1.5 rounded bg-blue-500/20 text-blue-600 hover:bg-blue-500/30 transition-colors text-xs font-medium whitespace-nowrap",title:" ",children:""}),b.jsx("button",{onClick:()=>r(c.id),className:"px-3 py-1.5 rounded bg-red-500/10 text-red-600 hover:bg-red-500/20 transition-colors text-xs font-medium whitespace-nowrap",title:"  ",children:""})]})]},c.id))})}),b.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:b.jsx("button",{onClick:u,className:"w-full px-4 py-2 rounded bg-gray-100 text-gray-800 hover:bg-gray-200 transition-colors text-sm font-medium",children:""})})]})}):null,oR=({isOpen:s,category:t,currentWorkspaceId:n,allWorkspaces:r,itemCount:o,onMove:u,onClose:c})=>{const[m,g]=$.useState(null),[p,E]=$.useState(!1);$.useEffect(()=>{s&&g(null)},[s]);const x=async()=>{if(m){E(!0);try{await u(m),c()}catch(N){console.error("   :",N),alert("  .")}finally{E(!1)}}};if($.useEffect(()=>{const N=B=>{B.key==="Escape"&&c()};if(s)return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[s,c]),!s||!t)return null;const S=r.filter(N=>N.id!==n);return b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:c,children:b.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl max-w-lg w-full max-h-[80vh] flex flex-col",onClick:N=>N.stopPropagation(),children:[b.jsxs("div",{className:"px-6 py-4 border-b border-border flex-shrink-0",children:[b.jsx("h2",{className:"text-base font-semibold text-white",children:" "}),b.jsxs("p",{className:"text-xs text-zinc-400 mt-1 truncate",children:['"',t.name,'" ',o>0&&`(${o}  )`]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider",children:"  "}),S.length>0?b.jsx("div",{className:"mt-2 space-y-2",children:S.map(N=>b.jsxs("button",{onClick:()=>g(N.id),className:`w-full px-4 py-3 rounded-lg text-sm text-left transition-colors flex items-center justify-between ${m===N.id?"bg-accent/20 text-white border border-accent":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(yt.Folder,{className:"w-4 h-4"}),b.jsx("span",{children:N.name})]}),m===N.id&&b.jsx(yt.Check,{className:"w-4 h-4 text-accent"})]},N.id))}):b.jsx("div",{className:"mt-2 p-4 text-center text-sm text-zinc-500",children:"    ."})]}),m&&b.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:b.jsxs("p",{className:"text-xs text-blue-400",children:[b.jsx("strong",{children:":"}),"   (",o,")   ."]})})]}),b.jsxs("div",{className:"px-6 py-4 border-t border-border flex justify-end gap-2 flex-shrink-0",children:[b.jsx("button",{onClick:c,disabled:p,className:"px-4 py-2 rounded bg-zinc-800 text-white hover:bg-zinc-700 transition-colors text-sm disabled:opacity-50",children:""}),b.jsx("button",{onClick:x,disabled:!m||p,className:`px-4 py-2 rounded text-white transition-colors text-sm font-medium flex items-center gap-2 ${!m||p?"bg-zinc-700 text-zinc-500 cursor-not-allowed":"bg-accent hover:bg-accent/90"}`,children:p?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"animate-spin",children:b.jsx(yt.Plus,{className:"w-4 h-4"})})," ..."]}):b.jsxs(b.Fragment,{children:[b.jsx(yt.ArrowRight,{className:"w-4 h-4"}),""]})})]})]})})},lR=({categories:s,selectedCategoryId:t,onSelectCategory:n,onRefresh:r,workspaceName:o,isLocked:u,onAddCategory:c,onDeleteWorkspace:m,onToggleLock:g,onShowBookmarks:p,hiddenCategoriesCount:E=0,allWorkspaces:x,currentWorkspaceId:S,onMoveCategory:N})=>{const[B,P]=$.useState(!1),[K,dt]=$.useState(""),[Z,et]=$.useState(null),[ot,xt]=$.useState(""),[_t,I]=$.useState("light"),[A,C]=$.useState(null),[k,V]=$.useState(!1),[z,R]=$.useState(null),[Lt,ne]=$.useState(null),[X,ut]=$.useState({x:0,y:0}),[Tt,Ut]=$.useState(!1),[Kt,M]=$.useState([]),[tt,lt]=$.useState(!1),[pt,Nt]=$.useState(null),[kt,it]=$.useState(0),Rt=$.useRef(null),wt=$.useRef(null),[H,mt]=$.useState(s);$.useEffect(()=>{mt(s)},[s]),$.useEffect(()=>{document.documentElement.classList.contains("light-mode")?I("light"):I("dark")},[]),$.useEffect(()=>{const at=()=>C(null);if(A)return document.addEventListener("click",at),()=>document.removeEventListener("click",at)},[A]);const ft=at=>{I(at),at==="light"?document.documentElement.classList.add("light-mode"):document.documentElement.classList.remove("light-mode")},ee=()=>{if(!K.trim()){P(!1);return}c(K),dt(""),P(!1)},Sn=(at,vt,St)=>{at.stopPropagation(),et(vt),xt(St)},Ai=async at=>{if(!ot.trim()){et(null);return}await Mt.categories.update(at,ot),r(),et(null)},er=async(at,vt)=>{at.stopPropagation(),window.confirm("    . ?")&&(await Mt.categories.delete(vt),r(),t===vt&&n(""))},Ss=at=>{C(null),R(at),V(!0)},As=async()=>{z&&(await Mt.categories.delete(z),r(),t===z&&n("")),V(!1),R(null)},Ne=()=>{V(!1),R(null)},Oe=(at,vt)=>{at.preventDefault(),at.stopPropagation(),ne(vt),ut({x:at.clientX,y:at.clientY})},hi=()=>{ne(null)},Sa=async at=>{try{await Mt.categories.hide(at),ne(null),t===at&&n(""),r()}catch(vt){console.error("  :",vt)}},Rr=async()=>{try{if(s.length===0)return;const at=s[0].workspace_id,vt=await Mt.categories.listByWorkspace(at,!0);M(vt.filter(St=>St.is_hidden))}catch(at){console.error("   :",at)}},ln=async()=>{await Rr(),Ut(!0)},nr=async at=>{try{await Mt.categories.unhide(at),await Rr(),r()}catch(vt){console.error("  :",vt)}},Is=async at=>{if(window.confirm("  ?    ."))try{await Mt.categories.delete(at),await Rr(),r()}catch(vt){console.error("  :",vt)}},ir=async at=>{try{const vt=await Mt.items.listByCategory(at),St=H.find(Je=>Je.id===at);St&&(Nt(St),it(vt.length),lt(!0),ne(null),C(null))}catch(vt){console.error("   :",vt)}},Ii=at=>{if(at.preventDefault(),at.stopPropagation(),u){alert("     .");return}window.confirm(`'${o}'  ?
    ,      .`)&&m()},Zo=(at,vt)=>{Rt.current=vt,at.dataTransfer.effectAllowed="move",at.dataTransfer.setData("text/html",at.currentTarget.innerHTML)},Aa=(at,vt)=>{wt.current=vt,at.preventDefault()},Ia=at=>{at.preventDefault(),at.dataTransfer.dropEffect="move"},Ca=async at=>{at.preventDefault();const vt=Rt.current,St=wt.current;if(vt!==null&&St!==null&&vt!==St){const Je=[...H],Ra=Je[vt];Je.splice(vt,1),Je.splice(St,0,Ra),mt(Je),await Mt.categories.reorder(Je[0].workspace_id,Je.map(Yn=>Yn.id))}Rt.current=null,wt.current=null},On=async at=>{const vt=H.findIndex(St=>St.id===at);if(vt>0){const St=[...H];[St[vt-1],St[vt]]=[St[vt],St[vt-1]],mt(St),await Mt.categories.reorder(St[0].workspace_id,St.map(Je=>Je.id))}},$e=async at=>{const vt=H.findIndex(St=>St.id===at);if(vt<H.length-1){const St=[...H];[St[vt],St[vt+1]]=[St[vt+1],St[vt]],mt(St),await Mt.categories.reorder(St[0].workspace_id,St.map(Je=>Je.id))}};return b.jsxs("div",{className:"flex flex-col h-full w-full",children:[b.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-border bg-zinc-950/50 flex-shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("span",{className:"font-bold text-lg tracking-tight text-white leading-none",children:["",b.jsx("span",{className:"text-accent",children:""})]}),u&&b.jsx(Lm,{className:"w-3.5 h-3.5 text-amber-500/80"})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{type:"button",onClick:()=>p==null?void 0:p(),className:"p-1.5 text-green-500 border border-green-500/50 hover:text-white hover:bg-green-500/20 hover:border-green-500 rounded transition-colors",title:" ",children:b.jsx(wb,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex bg-zinc-900 p-0.5 rounded-md border border-zinc-800/50",children:[b.jsx("button",{onClick:()=>ft("dark"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${_t==="dark"?"bg-zinc-700 text-white shadow ring-1 ring-black/20":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Dark Mode",children:"D"}),b.jsx("button",{onClick:()=>ft("light"),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded transition-all ${_t==="light"?"bg-white text-zinc-900 shadow ring-1 ring-black/5":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,title:"Light Mode",children:"L"})]})]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar",children:[b.jsx("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider px-2 mb-2",children:" "}),H.map((at,vt)=>b.jsxs("div",{draggable:!0,onDragStart:St=>Zo(St,vt),onDragEnter:St=>Aa(St,vt),onDragOver:Ia,onDrop:Ca,onClick:()=>n(at.id),onDoubleClick:St=>Sn(St,at.id,at.name),onContextMenu:St=>Oe(St,at.id),className:`group flex items-center justify-between px-4 py-3 md:py-2.5 rounded-lg cursor-pointer transition-all ${t===at.id?"bg-accent/10 text-accent border border-accent/20":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/50 border border-transparent"}`,children:[b.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[b.jsx("div",{className:"hidden md:block cursor-grab active:cursor-grabbing pt-1 text-zinc-600 hover:text-zinc-400",children:b.jsx(yt.DragHandle,{className:"w-4 h-4"})}),b.jsxs("div",{className:"flex md:hidden flex-col gap-0.5 pt-1",children:[b.jsx("button",{onClick:St=>{St.stopPropagation(),On(at.id)},disabled:vt===0,className:`p-0.5 transition-colors ${vt===0?"opacity-20 cursor-not-allowed text-zinc-700":"text-zinc-500 hover:text-accent"}`,title:" ",children:b.jsx(yt.ChevronUp,{className:"w-3.5 h-3.5"})}),b.jsx("button",{onClick:St=>{St.stopPropagation(),$e(at.id)},disabled:vt===H.length-1,className:`p-0.5 transition-colors ${vt===H.length-1?"opacity-20 cursor-not-allowed text-zinc-700":"text-zinc-500 hover:text-accent"}`,title:" ",children:b.jsx(yt.ChevronDown,{className:"w-3.5 h-3.5"})})]}),b.jsx(yt.Folder,{className:`w-5 h-5 md:w-4 md:h-4 flex-shrink-0 ${t===at.id?"fill-accent/20":""}`}),Z===at.id?b.jsx("input",{autoFocus:!0,type:"text",value:ot,onChange:St=>xt(St.target.value),onBlur:()=>Ai(at.id),onKeyDown:St=>{St.stopPropagation(),St.key==="Enter"&&Ai(at.id),St.key==="Escape"&&et(null)},onClick:St=>St.stopPropagation(),className:"flex-1 bg-zinc-950 border border-accent rounded px-1 py-0 text-sm text-white focus:outline-none"}):b.jsx("span",{className:"text-base md:text-sm font-medium truncate",children:at.name})]}),Z!==at.id&&b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(yt.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden"}),b.jsxs("div",{className:"relative md:hidden",children:[b.jsx("button",{onClick:St=>{St.stopPropagation(),C(A===at.id?null:at.id)},className:"p-1 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded transition-colors",title:"",children:b.jsx(yt.More,{className:"w-4 h-4"})}),A===at.id&&b.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-zinc-900 border border-zinc-700 rounded-lg shadow-lg z-10 min-w-[120px]",onClick:St=>St.stopPropagation(),children:[b.jsxs("button",{onClick:()=>{ir(at.id),C(null)},className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-zinc-300 hover:bg-yellow-500/10 transition-colors border-b border-zinc-800",children:[b.jsx(yt.ArrowRight,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:()=>{Sa(at.id),C(null)},className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-zinc-300 hover:bg-zinc-800 transition-colors border-b border-zinc-800",children:[b.jsx(yt.EyeOff,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:()=>Ss(at.id),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-400 hover:bg-red-500/10 transition-colors",children:[b.jsx(yt.Trash,{className:"w-4 h-4"}),""]})]})]}),b.jsx("button",{type:"button",onClick:St=>er(St,at.id),className:"hidden md:block opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",children:b.jsx(yt.Trash,{className:"w-3.5 h-3.5"})})]})]},at.id)),B?b.jsx("div",{className:"px-3 py-2",children:b.jsx("input",{autoFocus:!0,type:"text",value:K,onChange:at=>dt(at.target.value),onBlur:ee,onKeyDown:at=>at.key==="Enter"&&ee(),placeholder:"...",className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none"})}):b.jsxs("button",{type:"button",onClick:()=>P(!0),className:"w-full flex items-center gap-2 px-3 py-3 md:py-2.5 text-sm text-zinc-500 hover:text-accent hover:bg-zinc-800/50 rounded-lg transition-colors border border-dashed border-zinc-800 hover:border-zinc-700 mt-2",children:[b.jsx(yt.Plus,{className:"w-4 h-4"}),"  "]}),Lt&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-40",onClick:hi}),b.jsxs("div",{className:"fixed bg-white border border-gray-300 rounded-lg shadow-xl z-50 min-w-[140px]",style:{left:`${Math.min(X.x,window.innerWidth-160)}px`,top:`${Math.min(X.y,window.innerHeight-120)}px`},onClick:at=>at.stopPropagation(),children:[b.jsxs("button",{onClick:()=>ir(Lt),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-yellow-100 transition-colors first:rounded-t-lg border-b border-gray-200",children:[b.jsx(yt.ArrowRight,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:()=>Sa(Lt),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-gray-100 transition-colors border-b border-gray-200",children:[b.jsx(yt.EyeOff,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:hi,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-100 transition-colors last:rounded-b-lg",children:[b.jsx(yt.Close,{className:"w-4 h-4"}),""]})]})]})]}),b.jsxs("div",{className:"p-4 border-t border-border bg-zinc-950/50 mt-auto",children:[E>0&&b.jsxs("button",{type:"button",onClick:ln,className:"w-full flex items-center justify-center gap-2 py-2 px-3 mb-2 rounded-md border border-zinc-700 bg-zinc-800 text-zinc-300 hover:bg-zinc-700 hover:border-zinc-600 transition-all text-xs font-medium",title:"  ",children:[b.jsx(yt.EyeOff,{className:"w-3.5 h-3.5"})," (",E,")"]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("button",{type:"button",onClick:g,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-amber-500/10 border-amber-500/30 text-amber-500 hover:bg-amber-500/20":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:text-zinc-200 hover:bg-zinc-700"}`,title:u?" ":" ",children:[u?b.jsx(Lm,{className:"w-3.5 h-3.5"}):b.jsx(Vw,{className:"w-3.5 h-3.5"}),u?" ":" "]}),b.jsxs("button",{type:"button",onClick:Ii,className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md border transition-all text-xs font-medium ${u?"bg-zinc-900 border-zinc-800 text-zinc-600 cursor-not-allowed opacity-50":"bg-red-500/10 border-red-500/20 text-red-500 hover:bg-red-500/20 hover:border-red-500/40"}`,children:[b.jsx(yt.Trash,{className:"w-3.5 h-3.5"})," "]})]})]}),b.jsx(sx,{isOpen:k,title:" ",message:"    . ?",confirmText:"",cancelText:"",onConfirm:As,onCancel:Ne,danger:!0}),b.jsx(oR,{isOpen:tt,category:pt,currentWorkspaceId:S,allWorkspaces:x,itemCount:kt,onMove:async at=>{await N(pt.id,at),lt(!1),Nt(null),it(0)},onClose:()=>{lt(!1),Nt(null),it(0)}}),b.jsx(aR,{isOpen:Tt,hiddenCategories:Kt,onUnhide:nr,onDelete:Is,onMove:ir,onClose:()=>Ut(!1)})]})},uR=({categoryName:s,items:t,selectedItemId:n,onSelectItem:r,onAddItem:o,onDeleteItem:u,onMoveItem:c,onReorder:m,loading:g,onBack:p})=>{const E=$.useRef(null),x=$.useRef(null),[S,N]=$.useState(t),[B,P]=$.useState(null),[K,dt]=$.useState(null),[Z,et]=$.useState(null),[ot,xt]=$.useState(!1),[_t,I]=$.useState(null),[A,C]=$.useState(null),[k,V]=$.useState(null);$.useEffect(()=>{N(t)},[t]),$.useEffect(()=>{const it=()=>{P(null),dt(null),C(null)};if(B||K||A)return document.addEventListener("click",it),()=>document.removeEventListener("click",it)},[B,K,A]);const z=(it,Rt)=>{E.current=Rt,it.dataTransfer.effectAllowed="move",it.dataTransfer.setData("text/html",it.currentTarget.innerHTML)},R=(it,Rt)=>{x.current=Rt,it.preventDefault()},Lt=it=>{it.preventDefault(),it.dataTransfer.dropEffect="move"},ne=it=>{it.preventDefault();const Rt=E.current,wt=x.current;if(Rt!==null&&wt!==null&&Rt!==wt){const H=[...S],mt=H[Rt];H.splice(Rt,1),H.splice(wt,0,mt),N(H),m(H)}E.current=null,x.current=null},X=it=>{P(null),I(it),xt(!0)},ut=it=>{P(null),c(it)},Tt=(it,Rt)=>{it.preventDefault(),it.stopPropagation(),dt(Rt.id),et({x:it.clientX,y:it.clientY})},Ut=it=>{dt(null),c(it)},Kt=()=>{_t&&u(_t),xt(!1),I(null)},M=()=>{xt(!1),I(null)},tt=(it,Rt)=>{it.stopPropagation(),P(null),dt(null),C(Rt),V({x:it.clientX,y:it.clientY})},lt=async it=>{if(A){const Rt=S.find(wt=>wt.id===A);Rt&&(await Mt.items.update({id:Rt.id,status_color:it}),N(wt=>wt.map(H=>H.id===A?{...H,status_color:it}:H))),C(null),V(null)}},pt=async()=>{if(A){const it=S.find(Rt=>Rt.id===A);it&&(await Mt.items.update({id:it.id,status_color:void 0}),N(Rt=>Rt.map(wt=>wt.id===A?{...wt,status_color:void 0}:wt))),C(null),V(null)}},Nt=(it,Rt)=>it.status_color?{green:Rt?"bg-green-500/40 border-l-2 border-green-500":"bg-green-500/30",pink:Rt?"bg-pink-500/40 border-l-2 border-pink-500":"bg-pink-500/30",gray:Rt?"bg-gray-400/40 border-l-2 border-gray-400":"bg-gray-400/30"}[it.status_color]:"",kt=it=>it.status_color?{green:"hover:bg-green-500/50",pink:"hover:bg-pink-500/50",gray:"hover:bg-gray-400/50"}[it.status_color]:"hover:bg-emerald-500/15";return b.jsxs("div",{className:"flex flex-col h-full w-full",children:[b.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-border bg-background/50 flex-shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[b.jsx("button",{onClick:p,className:"md:hidden p-1 -ml-1 text-zinc-400 hover:text-white",children:b.jsx(yt.Back,{className:"w-5 h-5"})}),b.jsx("h2",{className:"font-semibold text-zinc-200 truncate pr-2 text-base md:text-sm",title:s,children:s||""})]}),b.jsx("button",{onClick:o,className:"p-1.5 text-zinc-400 hover:text-accent hover:bg-zinc-800 rounded-md transition-colors",title:"  ",children:b.jsx(yt.Plus,{className:"w-5 h-5"})})]}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:g?b.jsx("div",{className:"p-4 space-y-3 opacity-50",children:[1,2,3].map(it=>b.jsx("div",{className:"h-12 bg-zinc-800/50 rounded animate-pulse"},it))}):S.length>0?b.jsx("div",{className:"divide-y divide-border/50",children:S.map((it,Rt)=>b.jsxs("div",{draggable:!0,onDragStart:wt=>z(wt,Rt),onDragEnter:wt=>R(wt,Rt),onDragOver:Lt,onDrop:ne,onClick:()=>r(it.id),onContextMenu:wt=>Tt(wt,it),className:`
                   group px-3 py-4 md:py-3 cursor-pointer transition-colors relative flex items-center gap-2
                   ${Nt(it,n===it.id)}
                   ${kt(it)}
                   ${n===it.id&&!it.status_color?"bg-zinc-900 border-l-2 border-accent":""}
                   ${!it.status_color&&n!==it.id?"border-l-2 border-transparent":""}
                 `.trim().replace(/\s+/g," "),children:[b.jsx("div",{className:"cursor-grab active:cursor-grabbing p-1 text-zinc-600 hover:text-zinc-400 hidden md:block",children:b.jsx(yt.DragHandle,{className:"w-4 h-4"})}),b.jsx("div",{className:"flex-1 min-w-0 pr-6",children:b.jsx("h3",{className:`text-base md:text-sm font-medium leading-tight truncate ${n===it.id?"text-white":"text-zinc-300"}`,children:it.title||" "})}),b.jsxs("div",{className:"flex items-center gap-1 absolute right-2 top-1/2 -translate-y-1/2",children:[b.jsx(yt.ChevronRight,{className:"w-4 h-4 text-zinc-600 md:hidden"}),b.jsxs("div",{className:"relative md:hidden",children:[b.jsx("button",{onClick:wt=>{wt.stopPropagation(),P(B===it.id?null:it.id)},className:"p-1 text-zinc-400 hover:text-white hover:bg-zinc-800 rounded transition-colors",title:"",children:b.jsx(yt.More,{className:"w-4 h-4"})}),B===it.id&&b.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-[120px]",onClick:wt=>wt.stopPropagation(),children:[b.jsxs("button",{onClick:()=>ut(it),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-yellow-100 transition-colors border-b border-gray-200",children:[b.jsx(yt.ArrowRight,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:wt=>tt(wt,it.id),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-purple-50 transition-colors border-b border-gray-200",children:[b.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-500 via-pink-500 to-gray-400"}),""]}),b.jsxs("button",{onClick:()=>X(it.id),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[b.jsx(yt.Trash,{className:"w-4 h-4"}),""]})]})]}),b.jsx("button",{onClick:wt=>{wt.stopPropagation(),window.confirm("?")&&u(it.id)},className:"hidden md:block opacity-0 group-hover:opacity-100 p-1.5 text-zinc-600 hover:text-danger hover:bg-zinc-800 rounded transition-all",children:b.jsx(yt.Trash,{className:"w-4 h-4"})})]})]},it.id))}):b.jsxs("div",{className:"p-8 text-center text-zinc-500",children:[b.jsx("p",{className:"text-sm",children:" ."}),b.jsx("button",{onClick:o,className:"text-xs text-accent mt-2 hover:underline",children:"+   "})]})}),K&&Z&&b.jsx("div",{className:"fixed bg-white border border-gray-300 rounded-lg shadow-lg z-50 min-w-[120px]",style:{left:`${Z.x}px`,top:`${Z.y}px`},onClick:it=>it.stopPropagation(),children:S.find(it=>it.id===K)&&b.jsxs(b.Fragment,{children:[b.jsxs("button",{onClick:()=>Ut(S.find(it=>it.id===K)),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-yellow-100 transition-colors border-b border-gray-200",children:[b.jsx(yt.ArrowRight,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:it=>tt(it,K),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-purple-50 transition-colors border-b border-gray-200",children:[b.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-green-500 via-pink-500 to-gray-400"}),""]}),b.jsxs("button",{onClick:()=>{dt(null),I(K),xt(!0)},className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[b.jsx(yt.Trash,{className:"w-4 h-4"}),""]})]})}),A&&k&&b.jsx("div",{className:"fixed bg-white border border-gray-300 rounded-lg shadow-lg z-50 p-2",style:{left:`${k.x}px`,top:`${k.y}px`},onClick:it=>it.stopPropagation(),children:b.jsxs("div",{className:"flex flex-col gap-1",children:[b.jsx("p",{className:"text-xs text-gray-600 px-2 py-1 font-medium",children:" "}),b.jsxs("button",{onClick:()=>lt("green"),className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-800 hover:bg-green-50 transition-colors rounded",children:[b.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),b.jsx("span",{children:""})]}),b.jsxs("button",{onClick:()=>lt("pink"),className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-800 hover:bg-pink-50 transition-colors rounded",children:[b.jsx("div",{className:"w-4 h-4 rounded-full bg-pink-500"}),b.jsx("span",{children:""})]}),b.jsxs("button",{onClick:()=>lt("gray"),className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-800 hover:bg-gray-100 transition-colors rounded",children:[b.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300"}),b.jsx("span",{children:""})]}),b.jsx("div",{className:"border-t border-gray-200 my-1"}),b.jsxs("button",{onClick:pt,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 transition-colors rounded",children:[b.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 border-dashed"}),b.jsx("span",{children:""})]})]})}),b.jsx(sx,{isOpen:ot,title:" ",message:"  ?",confirmText:"",cancelText:"",onConfirm:Kt,onCancel:M,danger:!0})]})},cR=({message:s,type:t,duration:n=3e3,onClose:r})=>{$.useEffect(()=>{const c=setTimeout(r,n);return()=>clearTimeout(c)},[n,r]);const o={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"}[t],u={success:"border-green-600",error:"border-red-600",info:"border-blue-600"}[t];return b.jsx("div",{className:`fixed top-4 right-4 max-w-sm px-4 py-3 rounded-lg border ${o} ${u} text-white text-sm font-medium shadow-lg animate-fade-in z-50`,role:"alert",children:b.jsxs("div",{className:"flex items-center gap-2",children:[t==="success"&&b.jsx(yt.Check,{className:"w-4 h-4"}),t==="error"&&b.jsx(yt.Close,{className:"w-4 h-4"}),t==="info"&&b.jsx(yt.File,{className:"w-4 h-4"}),b.jsx("span",{children:s})]})})},ax=$.createContext(void 0),hR=({children:s,itemId:t})=>{const[n,r]=$.useState(null),[o,u]=$.useState(null);$.useEffect(()=>{if(n){const E=setTimeout(()=>{r(null),u({message:"   (5 )",type:"info"})},3e5);return()=>clearTimeout(E)}},[n]);const c=$.useCallback(E=>{r({text:E.text,memo:E.memo,sourceItemId:E.item_id,copiedAt:Date.now()}),u({message:"  ",type:"success"})},[]),m=$.useCallback(async E=>{if(!n){u({message:"  ",type:"error"});return}try{const x=await Mt.checklist.create(E);await Mt.checklist.update({id:x.id,text:n.text,memo:n.memo,is_checked:!1}),u({message:"  ",type:"success"})}catch(x){console.error("Paste failed:",x),u({message:" :  ",type:"error"})}},[n]),g=$.useCallback(()=>{r(null)},[]),p={clipboard:n,hasClipboard:n!==null,copyChecklistItem:c,pasteChecklistItem:m,clearClipboard:g};return b.jsxs(ax.Provider,{value:p,children:[s,o&&b.jsx(cR,{message:o.message,type:o.type,onClose:()=>u(null)})]})},fR=()=>{const s=$.useContext(ax);if(!s)throw new Error("useChecklistClipboard must be used within ChecklistClipboardProvider");return s},dR=({itemId:s,onOpenMemo:t})=>{const[n,r]=$.useState([]),[o,u]=$.useState(!0),[c,m]=$.useState(""),[g,p]=$.useState(null),[E,x]=$.useState(null),[S,N]=$.useState(""),B=vg.useRef(null),[P,K]=$.useState(null),[dt,Z]=$.useState(null),[et,ot]=$.useState(null),{copyChecklistItem:xt,pasteChecklistItem:_t,hasClipboard:I}=fR(),A=$.useRef(null),C=$.useRef(null);$.useEffect(()=>{const H=()=>{K(null),Z(null)};if(P||dt)return document.addEventListener("click",H),()=>document.removeEventListener("click",H)},[P,dt]);const k=(H,mt)=>{H.preventDefault(),H.stopPropagation(),Z(mt.id),ot({x:H.clientX,y:H.clientY})},V=H=>{xt(H),K(null),Z(null)},z=async()=>{await _t(s),await R()},R=async()=>{const H=await Mt.checklist.listByItem(s);r(H),u(!1)};$.useEffect(()=>{R()},[s]);const Lt=async()=>{if(!c.trim())return;const H=await Mt.checklist.create(s),mt={...H,text:c};r(ft=>[...ft,mt]),m(""),await Mt.checklist.update({id:H.id,text:mt.text})},ne=H=>{H.key==="Enter"&&!H.nativeEvent.isComposing&&(H.preventDefault(),Lt())},X=async(H,mt)=>{r(ft=>ft.map(ee=>ee.id===H?{...ee,...mt}:ee)),await Mt.checklist.update({id:H,...mt})},ut=(H,mt)=>{p(null),X(H,{memo:mt})},Tt=async H=>{window.confirm("  ?")&&(r(mt=>mt.filter(ft=>ft.id!==H)),await Mt.checklist.delete(H))},Ut=(H,mt)=>{x(H),N(mt)},Kt=async H=>{var mt;S!==((mt=n.find(ft=>ft.id===H))==null?void 0:mt.text)&&await X(H,{text:S}),x(null)},M=(H,mt)=>{Ut(H,mt)},tt=(H,mt)=>{B.current=setTimeout(()=>{Ut(H,mt)},300)},lt=()=>{B.current&&(clearTimeout(B.current),B.current=null)},pt=(H,mt)=>{A.current=mt,H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/html",H.currentTarget.innerHTML)},Nt=(H,mt)=>{C.current=mt,H.preventDefault()},kt=H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},it=async H=>{H.preventDefault();const mt=A.current,ft=C.current;if(mt!==null&&ft!==null&&mt!==ft){const ee=[...n],Sn=ee[mt];ee.splice(mt,1),ee.splice(ft,0,Sn),r(ee),await Mt.checklist.reorder(s,ee.map(Ai=>Ai.id))}A.current=null,C.current=null},Rt=async H=>{const mt=n.findIndex(ft=>ft.id===H);if(mt>0){const ft=[...n];[ft[mt-1],ft[mt]]=[ft[mt],ft[mt-1]],r(ft),await Mt.checklist.reorder(s,ft.map(ee=>ee.id))}},wt=async H=>{const mt=n.findIndex(ft=>ft.id===H);if(mt<n.length-1){const ft=[...n];[ft[mt],ft[mt+1]]=[ft[mt+1],ft[mt]],r(ft),await Mt.checklist.reorder(s,ft.map(ee=>ee.id))}};return o?b.jsx("div",{className:"text-secondary text-sm",children:" ..."}):b.jsxs("div",{className:"h-full flex flex-col pt-2",children:[b.jsxs("div",{className:"mb-4 flex-shrink-0 flex items-center gap-2",children:[b.jsx("input",{type:"text",value:c,onChange:H=>m(H.target.value),onKeyDown:ne,placeholder:"   ",className:"flex-1 bg-zinc-900/50 border border-zinc-700 text-sm text-zinc-200 rounded-lg py-2.5 px-3 focus:ring-1 focus:ring-accent focus:border-accent focus:outline-none transition-all placeholder-zinc-600 shadow-sm"}),b.jsx("button",{onClick:Lt,disabled:!c.trim(),className:"flex-shrink-0 p-2.5 bg-accent/10 border border-accent/30 text-accent rounded-lg hover:bg-accent/20 hover:border-accent/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",title:"  ( Enter )",children:b.jsx(yt.Plus,{className:"w-5 h-5"})}),I&&b.jsxs("button",{onClick:z,className:"flex-shrink-0 p-2.5 bg-green-500/10 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/20 hover:border-green-500/50 transition-all flex items-center gap-1.5",title:"  ",children:[b.jsx(yt.Clipboard,{className:"w-5 h-5"}),b.jsx("span",{className:"text-xs",children:""})]})]}),b.jsxs("div",{className:"space-y-2 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:[n.map((H,mt)=>b.jsxs("div",{draggable:!0,onDragStart:ft=>pt(ft,mt),onDragEnter:ft=>Nt(ft,mt),onDragOver:kt,onDrop:it,onContextMenu:ft=>k(ft,H),className:"group flex items-start gap-3 p-2.5 rounded-lg hover:bg-green-500/20 transition-colors border border-transparent hover:border-green-500/30",children:[b.jsx("div",{className:"hidden md:block cursor-grab active:cursor-grabbing pt-1 text-zinc-600 hover:text-zinc-400",children:b.jsx(yt.DragHandle,{className:"w-4 h-4"})}),b.jsxs("div",{className:"flex md:hidden flex-col gap-0.5 pt-1",children:[b.jsx("button",{onClick:ft=>{ft.stopPropagation(),Rt(H.id)},disabled:mt===0,className:`p-0.5 transition-colors ${mt===0?"opacity-20 cursor-not-allowed text-zinc-700":"text-zinc-500 hover:text-accent"}`,title:" ",children:b.jsx(yt.ChevronUp,{className:"w-3.5 h-3.5"})}),b.jsx("button",{onClick:ft=>{ft.stopPropagation(),wt(H.id)},disabled:mt===n.length-1,className:`p-0.5 transition-colors ${mt===n.length-1?"opacity-20 cursor-not-allowed text-zinc-700":"text-zinc-500 hover:text-accent"}`,title:" ",children:b.jsx(yt.ChevronDown,{className:"w-3.5 h-3.5"})})]}),b.jsx("div",{className:"pt-1",children:b.jsx("input",{type:"checkbox",checked:H.is_checked,onChange:ft=>X(H.id,{is_checked:ft.target.checked}),className:"w-4 h-4 rounded border-zinc-600 bg-zinc-900 text-emerald-500 focus:ring-emerald-500/20 focus:ring-offset-0 cursor-pointer accent-emerald-500"})}),b.jsxs("div",{className:"flex-1 min-w-0",children:[E===H.id?b.jsx("input",{autoFocus:!0,type:"text",value:S,onChange:ft=>N(ft.target.value),onBlur:()=>Kt(H.id),onKeyDown:ft=>{ft.key==="Enter"&&Kt(H.id),ft.key==="Escape"&&x(null)},className:"w-full bg-zinc-950 border border-accent rounded px-1 py-3 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent min-h-10"}):b.jsx("div",{onDoubleClick:()=>M(H.id,H.text),onTouchStart:()=>tt(H.id,H.text),onTouchEnd:lt,className:`w-full p-0 text-sm cursor-text ${H.is_checked?"text-black line-through decoration-black":"text-zinc-200"}`,children:H.text||"  ..."}),H.memo&&(g===H.id?b.jsx("div",{className:"mt-1.5 w-full",children:b.jsx("input",{autoFocus:!0,type:"text",defaultValue:H.memo,onBlur:ft=>ut(H.id,ft.target.value),onKeyDown:ft=>{ft.key==="Enter"&&(ft.preventDefault(),ft.currentTarget.blur()),ft.key==="Escape"&&p(null)},className:"w-full bg-zinc-950 border border-accent rounded px-2 py-1 text-xs text-zinc-200 focus:outline-none placeholder-zinc-500 shadow-sm"})}):b.jsxs("div",{className:"mt-1.5 text-xs text-green-500/80 flex items-center gap-1.5 cursor-pointer w-fit py-0.5 rounded transition-colors hover:text-green-400 select-none group/memo",onClick:()=>t(H),title:"  ",children:[b.jsx(yt.Memo,{className:"w-3 h-3 flex-shrink-0 text-green-500"}),b.jsx("span",{className:"truncate max-w-[400px]",children:H.memo})]}))]}),b.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>t(H),className:`p-1.5 rounded transition-colors ${H.memo?"text-green-500 bg-green-500/10":"text-zinc-500 hover:text-accent hover:bg-zinc-700"}`,title:"  ",children:b.jsx(yt.Memo,{className:"w-4 h-4"})}),b.jsxs("div",{className:"relative md:hidden",children:[b.jsx("button",{onClick:ft=>{ft.stopPropagation(),K(P===H.id?null:H.id)},className:"p-1.5 text-zinc-500 hover:text-white hover:bg-zinc-700 rounded transition-colors",title:"",children:b.jsx(yt.More,{className:"w-4 h-4"})}),P===H.id&&b.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-[120px]",onClick:ft=>ft.stopPropagation(),children:[b.jsxs("button",{onClick:()=>V(H),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-blue-50 transition-colors border-b border-gray-200",children:[b.jsx(yt.Copy,{className:"w-4 h-4"}),""]}),I&&b.jsxs("button",{onClick:z,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-green-50 transition-colors border-b border-gray-200",children:[b.jsx(yt.Clipboard,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:()=>Tt(H.id),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[b.jsx(yt.Trash,{className:"w-4 h-4"}),""]})]})]}),b.jsx("button",{onClick:()=>Tt(H.id),className:"hidden md:block p-1.5 text-zinc-500 hover:text-danger hover:bg-zinc-700 rounded transition-colors",title:"",children:b.jsx(yt.Trash,{className:"w-4 h-4"})})]})]},H.id)),n.length===0&&b.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-zinc-800/50 rounded-xl text-zinc-600 text-sm bg-zinc-900/20",children:["  .",b.jsx("br",{}),b.jsx("span",{className:"text-xs text-zinc-700 mt-1 block",children:"    ."})]}),dt&&et&&b.jsx("div",{className:"fixed bg-white border border-gray-300 rounded-lg shadow-lg z-50 min-w-[120px]",style:{left:`${et.x}px`,top:`${et.y}px`},onClick:H=>H.stopPropagation(),children:n.find(H=>H.id===dt)&&b.jsxs(b.Fragment,{children:[b.jsxs("button",{onClick:()=>V(n.find(H=>H.id===dt)),className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-blue-50 transition-colors border-b border-gray-200",children:[b.jsx(yt.Copy,{className:"w-4 h-4"}),""]}),I&&b.jsxs("button",{onClick:z,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-800 hover:bg-green-50 transition-colors border-b border-gray-200",children:[b.jsx(yt.Clipboard,{className:"w-4 h-4"}),""]}),b.jsxs("button",{onClick:()=>{Z(null),Tt(dt)},className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[b.jsx(yt.Trash,{className:"w-4 h-4"}),""]})]})})]})]})},mR=({item:s,onUpdateItem:t,onOpenMemo:n,onBack:r})=>{const[o,u]=$.useState(s.title),[c,m]=$.useState(s.description),[g,p]=$.useState(!1),[E,x]=$.useState(!1),[S,N]=$.useState(!1),[B,P]=$.useState(!1),K=vg.useRef(null);$.useEffect(()=>{u(s.title),m(s.description),x(!1)},[s.id,s.title,s.description]);const dt=async()=>{o!==s.title&&(p(!0),await Mt.items.update({id:s.id,title:o}),t(s.id,{title:o}),p(!1))},Z=async()=>{x(!1),c!==s.description&&(p(!0),await Mt.items.update({id:s.id,description:c}),t(s.id,{description:c}),p(!1))},et=()=>{x(!0)},ot=()=>{K.current=setTimeout(()=>{x(!0)},300)},xt=()=>{K.current&&(clearTimeout(K.current),K.current=null)},_t=I=>{if(!I)return null;const A=/(https?:\/\/[^\s]+)/g,C=/(01[0-9][-.\s]?[0-9]{3,4}[-.\s]?[0-9]{4})/g;return I.split(A).map((V,z)=>V.match(A)?b.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline break-all relative z-20",onClick:Lt=>Lt.stopPropagation(),children:V},z):V.split(C).map((Lt,ne)=>{if(Lt&&Lt.match(C)){const X=Lt.replace(/[-.\s]/g,"");return b.jsx("a",{href:`tel:${X}`,className:"text-green-400 hover:text-green-300 hover:underline break-all relative z-20 font-semibold",onClick:ut=>ut.stopPropagation(),title:" SMS ",children:Lt},`${z}-${ne}`)}return Lt}))};return b.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[b.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[b.jsx("button",{onClick:r,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white",children:b.jsx(yt.Back,{className:"w-5 h-5"})}),b.jsx("input",{type:"text",value:o,onChange:I=>u(I.target.value),onBlur:dt,className:"flex-1 bg-transparent text-lg md:text-xl font-bold text-white placeholder-zinc-600 border-none p-0 focus:ring-0 focus:outline-none truncate",placeholder:"  "}),g&&b.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 text-xs text-accent bg-accent/10 px-2 py-1 rounded-full animate-pulse",children:[b.jsx(yt.Save,{className:"w-3.5 h-3.5"}),b.jsx("span",{className:"hidden sm:inline",children:" ..."})]})]}),b.jsx("div",{className:"flex-1 flex flex-col p-4 md:p-6 gap-4 md:gap-5 min-h-0",children:b.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[b.jsxs("div",{className:"h-[40%] min-h-[200px] flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden group focus-within:border-zinc-600 transition-colors",children:[b.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2.5 border-b border-border/50 bg-zinc-900/30",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(yt.File,{className:"w-4 h-4 text-zinc-400"}),b.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:" "})]}),b.jsx("button",{onClick:()=>N(!0),className:"text-xs px-2 py-1 rounded bg-accent/20 text-accent hover:bg-accent/30 transition-colors",title:"  ",children:""})]}),E?b.jsx("textarea",{autoFocus:!0,value:c,onChange:I=>m(I.target.value),onBlur:Z,className:"flex-1 w-full bg-transparent border-none p-4 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):b.jsx("div",{onDoubleClick:et,onTouchStart:ot,onTouchEnd:xt,className:"flex-1 w-full p-4 text-sm text-zinc-300 overflow-y-auto whitespace-pre-wrap leading-relaxed custom-scrollbar cursor-text hover:bg-white/5 transition-colors",title:"  ",children:c?_t(c):b.jsx("span",{className:"text-zinc-700",children:"      ..."})})]}),b.jsx("div",{className:"flex-1 flex flex-col bg-surface/40 rounded-xl border border-border shadow-sm overflow-hidden min-h-0 group focus-within:border-zinc-600 transition-colors",children:b.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:b.jsx(dR,{itemId:s.id,onOpenMemo:n})})})]})}),S&&b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:b.jsxs("div",{className:"bg-surface rounded-lg shadow-lg flex flex-col h-[90vh] max-w-2xl w-full",onClick:I=>I.stopPropagation(),children:[b.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border bg-zinc-900/30",children:[b.jsx("span",{className:"text-lg font-semibold text-white",children:" "}),b.jsx("button",{onClick:()=>{N(!1),P(!1)},className:"text-zinc-400 hover:text-white text-2xl",children:""})]}),B?b.jsx("textarea",{autoFocus:!0,value:c,onChange:I=>m(I.target.value),className:"flex-1 w-full bg-transparent border-none p-6 text-sm text-zinc-300 resize-none focus:ring-0 placeholder-zinc-700 leading-relaxed custom-scrollbar",placeholder:"      ..."}):b.jsx("div",{className:"flex-1 overflow-y-auto p-6 text-sm text-zinc-300 whitespace-pre-wrap leading-relaxed custom-scrollbar",children:c?_t(c):b.jsx("span",{className:"text-zinc-700",children:" ."})}),b.jsx("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-border bg-zinc-900/30",children:B?b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:()=>{m(s.description),P(!1)},className:"px-4 py-2 rounded bg-zinc-700 text-white hover:bg-zinc-600 transition-colors text-sm",children:""}),b.jsx("button",{onClick:async()=>{c!==s.description&&(p(!0),await Mt.items.update({id:s.id,description:c}),t(s.id,{description:c}),p(!1)),P(!1)},className:"px-4 py-2 rounded bg-accent text-white hover:bg-accent/90 transition-colors text-sm",children:""})]}):b.jsxs(b.Fragment,{children:[b.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600 transition-colors text-sm",children:""}),b.jsx("button",{onClick:()=>P(!0),className:"px-4 py-2 rounded bg-yellow-500 text-white hover:bg-yellow-600 transition-colors text-sm",children:""})]})})]})})]})},gR=({bookmark:s,onEdit:t,onDelete:n})=>{const r=o=>{o.preventDefault(),t(s)};return b.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center justify-center gap-0 p-0 rounded-none border border-black transition-all hover:opacity-90 aspect-[4/1.68] cursor-pointer relative",style:{backgroundColor:s.color},onContextMenu:r,title:`${s.name}
${s.url}`,children:b.jsx("div",{className:"flex-1 flex flex-col items-center justify-center gap-0 min-w-0 px-1 py-1",children:b.jsx("span",{className:"text-[14px] font-bold text-white text-center line-clamp-2 w-full",children:s.name})})})},pR=["#C0C0BD","#D9A891","#D99B71","#D9C659","#C5E6A5","#A8D5B8","#9CBFF5","#C9B3E6","#E6B3D9","#E67A7A","#B8B8B3","#C9B8A3","#D9C9A3","#A3D9D1","#B3C9FF","#FF8080","#E8B8A3","#FFDE71","#C9FF99","#99D9D1","#B3D9FF","#FF99FF","#FF9999","#99CCFF","#D9B3FF","#FFCC99","#99FFD9","#E6CCFF","#FFB3D9","#99E6FF"],yR=({isOpen:s,currentColor:t,onColorSelect:n,onClose:r})=>{if(!s)return null;const o=u=>{n(u),r()};return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:r,children:b.jsxs("div",{className:"bg-surface rounded-lg shadow-lg w-full max-w-md",onClick:u=>u.stopPropagation(),children:[b.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[b.jsx("h2",{className:"text-base font-semibold text-white",children:"  "}),b.jsx("button",{onClick:r,className:"p-1 text-zinc-400 hover:text-white transition-colors",title:"",children:b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b.jsx("div",{className:"p-6",children:b.jsx("div",{className:"grid grid-cols-6 gap-2",children:pR.map(u=>b.jsx("button",{onClick:()=>o(u),className:`w-10 h-10 rounded-lg border-2 transition-all transform hover:scale-110 ${u===t?"border-white scale-110 shadow-lg":"border-transparent hover:border-zinc-600"}`,style:{backgroundColor:u},title:u},u))})})]})})},_R=({zone:s,bookmarks:t,onEditZone:n,onAddBookmark:r,onEditBookmark:o,onDeleteBookmark:u})=>{const[c,m]=$.useState(!1),[g,p]=$.useState(s.name),[E,x]=$.useState(!1),S=async()=>{g.trim()&&g!==s.name?await n(s.id,{name:g}):p(s.name),m(!1)},N=K=>{K.key==="Enter"?S():K.key==="Escape"&&(p(s.name),m(!1))},B=async K=>{await n(s.id,{default_color:K}),x(!1)},P=K=>{K.preventDefault(),x(!0)};return b.jsxs("div",{className:"flex flex-col bg-surface rounded-xl border border-border overflow-hidden shadow-sm",children:[b.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-zinc-900/30 flex-shrink-0",children:[c?b.jsx("input",{autoFocus:!0,type:"text",value:g,onChange:K=>p(K.target.value),onBlur:S,onKeyDown:N,className:"flex-1 bg-zinc-950 border border-accent rounded px-2 py-1 text-sm text-white focus:outline-none focus:ring-1 focus:ring-accent"}):b.jsx("h3",{onDoubleClick:()=>m(!0),className:"flex-1 font-semibold text-sm text-white cursor-text hover:bg-white/5 px-2 py-1 rounded transition-colors",children:s.name}),b.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[b.jsx("button",{onClick:r,className:"p-1 hover:bg-white/10 rounded transition-colors",title:" ",children:b.jsx(yt.Plus,{className:"w-4 h-4 text-zinc-400 hover:text-zinc-200 transition-colors"})}),b.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 border border-zinc-600 cursor-pointer hover:border-zinc-400 transition-colors",style:{backgroundColor:s.default_color},title:`${s.default_color}
  `,onContextMenu:P})]})]}),b.jsx("div",{className:"overflow-y-auto p-0 custom-scrollbar max-h-[240px]",children:t.length>0?b.jsx("div",{className:"grid grid-cols-4 gap-0",children:t.map(K=>b.jsx(gR,{bookmark:K,onEdit:o,onDelete:u},K.id))}):b.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[b.jsx(yt.Bookmark,{className:"w-8 h-8 text-zinc-700 mb-2"}),b.jsx("p",{className:"text-xs text-zinc-600 mb-3",children:" ."}),b.jsx("button",{onClick:r,className:"text-xs px-3 py-1.5 rounded-md bg-accent/20 text-accent hover:bg-accent/30 transition-colors",children:"  "})]})}),b.jsx(yR,{isOpen:E,currentColor:s.default_color,onColorSelect:B,onClose:()=>x(!1)})]})},vR=["#C0C0BD","#D9A891","#D99B71","#D9C659","#C5E6A5","#A8D5B8","#9CBFF5","#C9B3E6","#E6B3D9","#E67A7A","#B8B8B3","#C9B8A3","#D9C9A3","#A3D9D1","#B3C9FF","#FF8080","#E8B8A3","#FFDE71","#C9FF99","#99D9D1","#B3D9FF","#FF99FF","#FF9999","#99CCFF","#D9B3FF","#FFCC99","#99FFD9","#E6CCFF","#FFB3D9","#99E6FF"],bR=({selectedColor:s,onChange:t,label:n=""})=>b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:n}),b.jsx("div",{className:"grid grid-cols-6 gap-2",children:vR.map(r=>b.jsx("button",{onClick:()=>t(r),className:`w-10 h-10 rounded-lg border-2 transition-all transform hover:scale-110 ${s===r?"border-white scale-110 shadow-lg":"border-transparent hover:border-zinc-600"}`,style:{backgroundColor:r},title:r},r))}),b.jsxs("div",{className:"mt-3",children:[b.jsx("label",{className:"text-xs text-zinc-400 mb-1.5 block",children:" "}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{type:"color",value:s,onChange:r=>t(r.target.value),className:"w-12 h-10 rounded border border-border cursor-pointer"}),b.jsx("input",{type:"text",value:s,onChange:r=>t(r.target.value),placeholder:"#000000",className:"flex-1 bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent"})]})]})]}),ER=({zones:s,bookmark:t,defaultZoneId:n,onSave:r,onDelete:o,onClose:u})=>{const[c,m]=$.useState(""),[g,p]=$.useState(""),[E,x]=$.useState(""),[S,N]=$.useState("#ef4444"),[B,P]=$.useState("");$.useEffect(()=>{var ot;if(s.length>0){const xt=(t==null?void 0:t.zone_id)||n||s[0].id,_t=((ot=s.find(I=>I.id===xt))==null?void 0:ot.default_color)||"#ef4444";x(xt),N((t==null?void 0:t.color)||_t)}t?(m(t.name),p(t.url)):(m(""),p("")),P("")},[t,n,s]);const K=ot=>{const xt=ot.target.value;x(xt);const _t=s.find(I=>I.id===xt);_t&&N(_t.default_color)},dt=ot=>{try{const xt=new URL(ot.startsWith("http")?ot:`https://${ot}`);return!0}catch{return!1}},Z=ot=>!ot.startsWith("http://")&&!ot.startsWith("https://")?`https://${ot}`:ot,et=()=>{if(P(""),!c.trim()){P("  .");return}if(!g.trim()){P("URL .");return}if(!dt(g)){P(" URL .");return}if(!E){P(" .");return}const ot=Z(g);r({id:t==null?void 0:t.id,name:c.trim(),url:ot,zone_id:E,color:S})};return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:u,children:b.jsxs("div",{className:"bg-surface rounded-lg shadow-lg w-full max-w-2xl",onClick:ot=>ot.stopPropagation(),children:[b.jsxs("div",{className:"px-6 py-4 border-b border-border flex items-center justify-between",children:[b.jsx("h2",{className:"text-base font-semibold text-white",children:t?" ":" "}),b.jsxs("div",{className:"flex gap-2",children:[t&&b.jsx("button",{onClick:()=>{window.confirm(`'${t.name}'  ?`)&&(o==null||o(t.id),u())},className:"px-3 py-1.5 rounded bg-red-500/90 text-white hover:bg-red-600 transition-colors text-xs font-medium",children:""}),b.jsx("button",{onClick:et,className:"px-3 py-1.5 rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors text-xs font-bold",children:t?"":""}),b.jsx("button",{onClick:u,className:"px-3 py-1.5 rounded bg-yellow-500 text-black hover:bg-yellow-600 transition-colors text-xs font-medium",children:""})]})]}),b.jsxs("div",{className:"p-6 flex gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:""}),b.jsx("input",{type:"text",value:c,onChange:ot=>m(ot.target.value),placeholder:" ",className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:"URL"}),b.jsx("input",{type:"text",value:g,onChange:ot=>p(ot.target.value),placeholder:"https://example.com",className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2 block",children:""}),b.jsx("select",{value:E,onChange:K,className:"w-full bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-sm text-zinc-200 focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent transition-all",children:s.map(ot=>b.jsx("option",{value:ot.id,children:ot.name},ot.id))})]}),B&&b.jsx("div",{className:"px-3 py-2 rounded-lg bg-red-500/10 border border-red-500/30 text-xs text-red-400",children:B})]}),b.jsx("div",{className:"flex flex-col items-center gap-4",children:b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-3 block text-center",children:""}),b.jsx(bR,{selectedColor:S,onChange:N})]})})]})]})})},xR=({onBack:s})=>{const[t,n]=$.useState([]),[r,o]=$.useState([]),[u,c]=$.useState(!0),[m,g]=$.useState(!1),[p,E]=$.useState(null),[x,S]=$.useState(null);$.useEffect(()=>{(async()=>{c(!0);try{await Mt.bookmarkZones.initializeDefaults();const et=await Mt.bookmarkZones.list();n(et);const ot=await Mt.bookmarks.list();o(ot)}catch(et){console.error("Failed to load bookmark data:",et)}finally{c(!1)}})()},[]);const N=Z=>{S(Z),E(null),g(!0)},B=async(Z,et)=>{try{await Mt.bookmarkZones.update(Z,et),n(t.map(ot=>ot.id===Z?{...ot,...et}:ot))}catch(ot){console.error("Failed to update zone:",ot)}},P=Z=>{E(Z),S(Z.zone_id),g(!0)},K=async Z=>{try{await Mt.bookmarks.delete(Z),o(r.filter(et=>et.id!==Z))}catch(et){console.error("Failed to delete bookmark:",et)}},dt=async Z=>{try{if(p)await Mt.bookmarks.update(p.id,{name:Z.name,url:Z.url,color:Z.color,zone_id:Z.zone_id}),o(r.map(et=>et.id===p.id?{...et,name:Z.name||et.name,url:Z.url||et.url,color:Z.color||et.color,zone_id:Z.zone_id||et.zone_id}:et));else{const et=await Mt.bookmarks.create(Z.zone_id,Z.name||"",Z.url||"",Z.color||"#ef4444");o([...r,et])}g(!1),E(null),S(null)}catch(et){console.error("Failed to save bookmark:",et)}};return u?b.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin mb-4",children:b.jsx(yt.Bookmark,{className:"w-8 h-8 text-accent"})}),b.jsx("p",{className:"text-sm text-secondary",children:"  ..."})]})}):b.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background/50 overflow-hidden animate-in fade-in duration-300",children:[b.jsxs("div",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-border bg-background/50 flex-shrink-0 backdrop-blur-sm gap-2",children:[b.jsx("button",{onClick:s,className:"md:hidden p-1 -ml-2 text-zinc-400 hover:text-white transition-colors",title:"",children:b.jsx(yt.Back,{className:"w-5 h-5"})}),b.jsxs("h1",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[b.jsx(yt.Bookmark,{className:"w-5 h-5 text-accent"})," "]}),b.jsxs("button",{onClick:()=>{var Z;return N(((Z=t[0])==null?void 0:Z.id)||"")},className:"flex items-center gap-2 px-3 py-1.5 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium ml-auto",disabled:t.length===0,children:[b.jsx(yt.Plus,{className:"w-4 h-4"}),b.jsx("span",{className:"hidden sm:inline",children:" "})]})]}),b.jsx("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto custom-scrollbar",children:t.length===0?b.jsx("div",{className:"flex items-center justify-center h-full",children:b.jsxs("div",{className:"text-center",children:[b.jsx(yt.Bookmark,{className:"w-12 h-12 text-zinc-700 mx-auto mb-4"}),b.jsx("p",{className:"text-secondary text-sm",children:"   ."})]})}):b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 auto-rows-max",children:t.map(Z=>b.jsx(_R,{zone:Z,bookmarks:r.filter(et=>et.zone_id===Z.id),onEditZone:B,onAddBookmark:()=>N(Z.id),onEditBookmark:P,onDeleteBookmark:K},Z.id))})}),m&&b.jsx(ER,{zones:t,bookmark:p,defaultZoneId:x||void 0,onSave:dt,onDelete:K,onClose:()=>{g(!1),E(null),S(null)}})]})},TR=({isOpen:s,onClose:t,checklistItem:n,onSave:r})=>{const[o,u]=$.useState(""),[c,m]=$.useState(!1);if($.useEffect(()=>{n&&(u(n.memo||""),m(!1))},[n]),!s||!n)return null;const g=()=>{r(n.id,o),m(!1)},p=()=>{g()},E=x=>{const S=/(https?:\/\/[^\s]+)/g;return x.split(S).map((B,P)=>S.test(B)?b.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline break-all",onClick:K=>K.stopPropagation(),children:B},P):b.jsx("span",{children:B},P))};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col shadow-black/50 max-h-[90vh]",children:[b.jsx("div",{className:"p-6 flex-1 flex flex-col overflow-y-auto min-h-[300px]",children:c?b.jsx("textarea",{className:"flex-1 w-full bg-black border border-border rounded-lg p-5 text-base text-white resize-none focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent custom-scrollbar leading-relaxed",placeholder:"   ...",value:o,onChange:x=>u(x.target.value),onBlur:p,autoFocus:!0}):b.jsx("div",{className:"flex-1 w-full bg-black rounded-lg p-5 text-base text-white overflow-y-auto custom-scrollbar whitespace-pre-wrap cursor-pointer hover:bg-zinc-900 transition-colors border border-transparent hover:border-zinc-800",onDoubleClick:()=>m(!0),title:" ",children:o?E(o):b.jsx("span",{className:"text-zinc-500 italic",children:"  .   ."})})}),b.jsxs("div",{className:"p-4 border-t border-border bg-white flex justify-end gap-3",children:[c&&b.jsxs("button",{onClick:g,className:"px-6 py-2.5 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 rounded-md shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[b.jsx(yt.Save,{className:"w-4 h-4"}),""]}),b.jsx("button",{onClick:t,className:"px-6 py-2.5 text-sm font-medium text-white bg-purple-500 hover:bg-purple-600 rounded-md transition-colors font-semibold",children:""})]})]})})},wR=({isOpen:s,item:t,currentWorkspaceId:n,currentCategoryId:r,allWorkspaces:o,onMove:u,onClose:c})=>{const[m,g]=$.useState(n),[p,E]=$.useState([]),[x,S]=$.useState(null),[N,B]=$.useState(!1);$.useEffect(()=>{s&&m&&P(m)},[m,s]);const P=async Z=>{B(!0);try{const et=await Mt.categories.listByWorkspace(Z,!0);E(et),S(null)}catch(et){console.error("  :",et),E([])}finally{B(!1)}},K=async()=>{if(x)try{await u(x,m)}catch(Z){console.error("   :",Z),alert("  .")}};if($.useEffect(()=>{const Z=et=>{et.key==="Escape"&&c()};if(s)return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[s,c]),!s||!t)return null;const dt=x===r;return o.find(Z=>Z.id===m),b.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:c,children:b.jsxs("div",{className:"bg-surface border border-border rounded-xl shadow-2xl max-w-lg w-full max-h-[80vh] flex flex-col",onClick:Z=>Z.stopPropagation(),children:[b.jsxs("div",{className:"px-6 py-4 border-b border-border flex-shrink-0",children:[b.jsx("h2",{className:"text-base font-semibold text-white",children:" "}),b.jsxs("p",{className:"text-xs text-zinc-400 mt-1 truncate",children:['"',t.title||" ",'"']})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider",children:" "}),b.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:o.map(Z=>b.jsx("button",{onClick:()=>g(Z.id),className:`px-3 py-1.5 rounded-md text-sm transition-colors ${m===Z.id?"bg-accent text-white":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"}`,children:Z.name},Z.id))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider",children:" "}),N?b.jsxs("div",{className:"mt-2 p-4 text-center text-sm text-zinc-500",children:[b.jsx("div",{className:"inline-block animate-spin",children:b.jsx(yt.Plus,{className:"w-4 h-4"})}),b.jsx("p",{className:"mt-2",children:"  ..."})]}):p.length>0?b.jsx("div",{className:"mt-2 space-y-1 max-h-64 overflow-y-auto",children:p.map(Z=>{const et=Z.id===r&&m===n,ot=Z.id===x;return b.jsxs("button",{onClick:()=>{et||S(Z.id)},disabled:et,className:`w-full px-3 py-2 rounded-md text-sm text-left transition-colors flex items-center justify-between ${et?"bg-zinc-800/50 text-zinc-500 cursor-not-allowed":ot?"bg-accent/20 text-white border border-accent":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"}`,children:[b.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[b.jsx(yt.Folder,{className:"w-4 h-4 flex-shrink-0"}),b.jsx("span",{className:"truncate",children:Z.name}),Z.is_hidden&&b.jsx("span",{className:"text-xs text-zinc-500 flex-shrink-0",children:"()"})]}),et&&b.jsx("span",{className:"text-xs text-zinc-500 flex-shrink-0 ml-2",children:""})]},Z.id)})}):b.jsx("div",{className:"mt-2 p-4 text-center text-sm text-zinc-500",children:" ."})]})]}),b.jsxs("div",{className:"px-6 py-4 border-t border-border flex justify-end gap-2 flex-shrink-0",children:[b.jsx("button",{onClick:c,className:"px-4 py-2 rounded bg-zinc-800 text-white hover:bg-zinc-700 transition-colors text-sm",children:""}),b.jsxs("button",{onClick:K,disabled:!x||dt||N,className:`px-4 py-2 rounded text-white transition-colors text-sm font-medium flex items-center gap-2 ${!x||dt||N?"bg-zinc-700 text-zinc-500 cursor-not-allowed":"bg-accent hover:bg-accent/90"}`,children:[b.jsx(yt.ArrowRight,{className:"w-4 h-4"}),""]})]})]})})},SR=({workspace:s,allWorkspaces:t,onDelete:n,onUpdate:r,onShowBookmarks:o,showBookmarks:u=!1,onCloseBookmarks:c,registerHandlers:m})=>{const[g,p]=$.useState([]),[E,x]=$.useState(()=>localStorage.getItem(`selectedCategoryId_${s.id}`)||null),[S,N]=$.useState([]),[B,P]=$.useState(()=>localStorage.getItem(`selectedItemId_${s.id}`)||null),[K,dt]=$.useState(!1),[Z,et]=$.useState(0),[ot,xt]=$.useState(!1),[_t,I]=$.useState(null),[A,C]=$.useState(!1),[k,V]=$.useState(null);$.useEffect(()=>{z();const H=localStorage.getItem(`selectedCategoryId_${s.id}`);localStorage.getItem(`selectedItemId_${s.id}`),x(H),N([]),P(null)},[s.id]),$.useEffect(()=>{E?localStorage.setItem(`selectedCategoryId_${s.id}`,E):localStorage.removeItem(`selectedCategoryId_${s.id}`)},[E,s.id]),$.useEffect(()=>{B?localStorage.setItem(`selectedItemId_${s.id}`,B):localStorage.removeItem(`selectedItemId_${s.id}`)},[B,s.id]),$.useEffect(()=>{if(E){R(E);const H=localStorage.getItem(`selectedItemId_${s.id}`);P(H||null)}else N([]),P(null)},[E]),$.useEffect(()=>{E&&u&&c&&c()},[E]),$.useEffect(()=>{B&&u&&c&&c()},[B]);const z=async()=>{const H=await Mt.categories.listByWorkspace(s.id,!1);p(H);const ft=(await Mt.categories.listByWorkspace(s.id,!0)).filter(ee=>ee.is_hidden).length;et(ft)},R=async H=>{dt(!0);const mt=await Mt.items.listByCategory(H);N(mt),dt(!1)},Lt=async H=>{const mt=await Mt.categories.create(s.id,H);await z(),x(mt.id)},ne=async()=>{if(!E)return;const H=await Mt.items.create(E);N([...S,H]),P(H.id)},X=async H=>{await Mt.items.delete(H),N(mt=>mt.filter(ft=>ft.id!==H)),B===H&&P(null)},ut=async H=>{N(H),E&&await Mt.items.reorder(E,H.map(mt=>mt.id))},Tt=(H,mt)=>{N(ft=>ft.map(ee=>ee.id===H?{...ee,...mt}:ee))},Ut=H=>{V(H),C(!0)},Kt=async(H,mt)=>{if(k)try{await Mt.items.move(k.id,H),H===E?E&&R(E):(N(ft=>ft.filter(ee=>ee.id!==k.id)),B===k.id&&P(null)),C(!1),V(null)}catch(ft){console.error("  :",ft),alert("  .")}},M=async(H,mt)=>{try{await Mt.categories.move(H,mt),await z(),E===H&&(x(null),N([]),P(null)),alert("  .")}catch(ft){console.error("  :",ft);const ee=(ft==null?void 0:ft.message)||"  .";alert(ee)}},tt=H=>{I(H),xt(!0)},lt=async(H,mt)=>{await Mt.checklist.update({id:H,memo:mt}),wt&&P(wt.id)},pt=()=>{n(s.id)},Nt=()=>{r(s.id,{is_locked:!s.is_locked})},kt=()=>{x(null)},it=()=>{P(null)};$.useEffect(()=>{m&&m({selectedCategoryId:E,selectedItemId:B,handleBackToCategories:kt,handleBackToItems:it})},[E,B,m]);const Rt=g.find(H=>H.id===E),wt=S.find(H=>H.id===B);return b.jsx(hR,{itemId:B||"",children:b.jsxs("div",{className:"flex h-full w-full bg-background text-zinc-100 font-sans selection:bg-accent/30 overflow-hidden relative",children:[b.jsx("div",{className:`${E||u?"hidden md:flex":"flex"} w-full md:w-64 flex-col border-r border-border bg-surface`,children:b.jsx(lR,{categories:g,selectedCategoryId:E,onSelectCategory:x,onRefresh:z,workspaceName:s.name,isLocked:s.is_locked,onAddCategory:Lt,onDeleteWorkspace:pt,onToggleLock:Nt,onShowBookmarks:o,hiddenCategoriesCount:Z,allWorkspaces:t,currentWorkspaceId:s.id,onMoveCategory:M})}),b.jsx("div",{className:`${E&&!B&&!u?"flex":"hidden md:flex"} ${E?"w-full md:w-80":"hidden md:flex md:w-80"} flex-col border-r border-border bg-background`,children:E?b.jsx(uR,{categoryName:Rt==null?void 0:Rt.name,items:S,selectedItemId:B,onSelectItem:P,onAddItem:ne,onDeleteItem:X,onMoveItem:Ut,onReorder:ut,loading:K,onBack:kt}):b.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[b.jsx(yt.Folder,{className:"w-12 h-12 mb-2 opacity-20"}),b.jsx("p",{className:"text-sm",children:" "})]})}),b.jsx("div",{className:`${B||u?"flex":"hidden md:flex"} flex-1 flex-col h-full bg-background relative min-w-0`,children:u?b.jsx(xR,{onBack:c||(()=>{})}):wt?b.jsx(mR,{item:wt,onUpdateItem:Tt,onOpenMemo:tt,onBack:it},wt.id):b.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center h-full text-zinc-600",children:[b.jsx("div",{className:"w-16 h-16 bg-zinc-900/50 rounded-2xl flex items-center justify-center mb-4 border border-zinc-800",children:b.jsx(yt.File,{className:"w-8 h-8 text-zinc-700"})}),b.jsx("p",{className:"text-zinc-500",children:"   ."})]})}),b.jsx(TR,{isOpen:ot,onClose:()=>xt(!1),checklistItem:_t,onSave:lt}),b.jsx(wR,{isOpen:A,item:k,currentWorkspaceId:s.id,currentCategoryId:E||"",allWorkspaces:t,onMove:Kt,onClose:()=>{C(!1),V(null)}})]})})},AR=({workspaces:s,activeWorkspaceId:t,onSwitch:n,onUpdate:r})=>{const[o,u]=$.useState(null),[c,m]=$.useState(""),g=async()=>{const N=await Mt.workspaces.create(`  ${s.length+1}`);r(),n(N.id)},p=N=>{N.is_locked||(u(N.id),m(N.name))},E=async()=>{o&&c.trim()&&(await Mt.workspaces.update(o,{name:c}),r()),u(null)},x=async N=>{const B=s.findIndex(P=>P.id===N);if(B>0){const P=[...s];[P[B-1],P[B]]=[P[B],P[B-1]],await Mt.workspaces.reorder(P.map(K=>K.id)),r()}},S=async N=>{const B=s.findIndex(P=>P.id===N);if(B<s.length-1){const P=[...s];[P[B],P[B+1]]=[P[B+1],P[B]],await Mt.workspaces.reorder(P.map(K=>K.id)),r()}};return b.jsxs("div",{className:"h-12 bg-zinc-950 border-t border-border flex items-center flex-shrink-0 z-50 relative",children:[b.jsxs("div",{className:"flex-1 flex items-center gap-2 px-4 overflow-x-auto h-full [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:[s.map((N,B)=>b.jsxs("div",{className:`group flex-shrink-0 relative flex items-center rounded-md transition-all min-w-max border select-none ${t===N.id?"bg-zinc-800 text-white border-zinc-700 shadow-sm":"bg-transparent text-zinc-500 border-transparent hover:bg-zinc-900 hover:text-zinc-300"}`,children:[b.jsx("button",{onClick:P=>{P.stopPropagation(),x(N.id)},className:`p-1 transition-opacity ${B===0?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:B===0,title:" ",children:b.jsx(yt.ChevronLeft,{className:"w-3.5 h-3.5"})}),b.jsx("div",{onClick:()=>n(N.id),className:"flex items-center gap-2 px-3 py-1.5 cursor-pointer flex-1",onDoubleClick:()=>p(N),children:o===N.id?b.jsx("input",{autoFocus:!0,className:"bg-zinc-950 text-white text-xs px-1 py-0.5 rounded border border-accent w-full focus:outline-none",value:c,onChange:P=>m(P.target.value),onBlur:E,onKeyDown:P=>P.key==="Enter"&&E(),onClick:P=>P.stopPropagation()}):b.jsxs(b.Fragment,{children:[N.is_locked?b.jsx(Lm,{className:"w-3 h-3 text-amber-500/70"}):b.jsx(yt.Dashboard,{className:`w-3.5 h-3.5 ${t===N.id?"text-accent":"opacity-70"}`}),b.jsx("span",{className:"text-xs font-medium truncate",children:N.name})]})}),b.jsx("button",{onClick:P=>{P.stopPropagation(),S(N.id)},className:`p-1 transition-opacity ${B===s.length-1?"opacity-20 cursor-not-allowed":"opacity-0 group-hover:opacity-100 hover:text-accent"}`,disabled:B===s.length-1,title:" ",children:b.jsx(yt.ChevronRight,{className:"w-3.5 h-3.5"})})]},N.id)),b.jsx("div",{className:"w-2 flex-shrink-0"})]}),b.jsx("div",{className:"flex-shrink-0 flex items-center pl-2 pr-2 h-full bg-zinc-950 border-l border-border relative z-10 shadow-[-10px_0_20px_-5px_rgba(0,0,0,0.8)]",children:b.jsx("button",{onClick:g,className:"p-1.5 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",title:"  ",children:b.jsx(yt.Plus,{className:"w-5 h-5"})})})]})},IR=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.matchMedia("(max-width: 768px)").matches,CR=()=>{const[s,t]=$.useState([]),[n,r]=$.useState(()=>localStorage.getItem("activeWorkspaceId")||null),[o,u]=$.useState(()=>localStorage.getItem("isBookmarkViewActive")==="true"),c=$.useRef({selectedCategoryId:null,selectedItemId:null,handleBackToCategories:()=>{},handleBackToItems:()=>{}}),m=$.useCallback(S=>{c.current=S},[]),g=$.useCallback(async()=>{const S=await Mt.workspaces.list();t(S)},[]);$.useEffect(()=>{g()},[g]),$.useEffect(()=>{n&&localStorage.setItem("activeWorkspaceId",n)},[n]),$.useEffect(()=>{localStorage.setItem("isBookmarkViewActive",o.toString())},[o]),$.useEffect(()=>{s.length>0?n&&s.find(S=>S.id===n)||r(s[0].id):r(null)},[s,n]);const p=$.useCallback(async S=>{await Mt.workspaces.delete(S),await g()},[g]),E=$.useCallback(async(S,N)=>{await Mt.workspaces.update(S,N),t(B=>B.map(P=>P.id===S?{...P,...N}:P))},[]);$.useEffect(()=>{if(!IR())return;let S=!1;const N=()=>{if(S)return;S=!0;const B=c.current;if(o)u(!1);else if(B.selectedItemId)B.handleBackToItems();else if(B.selectedCategoryId)B.handleBackToCategories();else{S=!1;return}setTimeout(()=>{history.pushState(null,""),S=!1},0)};return history.pushState(null,""),window.addEventListener("popstate",N),()=>{window.removeEventListener("popstate",N)}},[o]);const x=s.find(S=>S.id===n);return b.jsxs("div",{className:"flex flex-col h-screen bg-black text-zinc-100 font-sans overflow-hidden",children:[b.jsx("div",{className:"flex-1 overflow-hidden relative",children:x?b.jsx(SR,{workspace:x,allWorkspaces:s,onDelete:p,onUpdate:E,onShowBookmarks:()=>u(!0),showBookmarks:o,onCloseBookmarks:()=>u(!1),registerHandlers:m}):b.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:" ."})}),x&&!o&&b.jsx("button",{onClick:()=>u(!0),className:"md:hidden fixed bottom-20 right-6 w-14 h-14 bg-accent rounded-full shadow-lg flex items-center justify-center hover:bg-accent/90 transition-all z-50 border-2 border-white/10",title:" ",children:b.jsx(yt.Home,{className:"w-6 h-6 text-white"})}),b.jsx(AR,{workspaces:s,activeWorkspaceId:n,onSwitch:r,onUpdate:g})]})};if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("/Data-Library/sw.js").then(t=>{console.log("ServiceWorker registration successful"),setInterval(()=>{t.update()},6e4)}).catch(t=>{console.log("ServiceWorker registration failed:",t)})});let s=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{s||(s=!0,window.location.reload())})}const ox=document.getElementById("root");if(!ox)throw new Error("Could not find root element to mount to");const RR=YT.createRoot(ox);RR.render(b.jsx(vg.StrictMode,{children:b.jsx(CR,{})}));
